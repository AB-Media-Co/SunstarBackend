const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/useHotelHook2-C33856rg.js","assets/react-vendor-tq68JOgp.js","assets/animation-vendor-DJegggv9.js","assets/vendor-DwD9zxym.js","assets/animation-vendor-DvB2Xm2x.css","assets/query-vendor-iDpT9gG9.js","assets/ui-vendor-DiJ4VKpG.js","assets/swiper-vendor-DEzR9mKq.js","assets/swiper-vendor-CcTDN23P.css","assets/date-vendor-9E3U4XI3.js","assets/react-vendor-DmxDE6QQ.css","assets/index-D89k_Hd_.js","assets/index-Cd67N2j-.css"])))=>i.map(i=>d[i]);
var e=(e,t,a)=>new Promise(((s,l)=>{var r=e=>{try{i(a.next(e))}catch(t){l(t)}},o=e=>{try{i(a.throw(e))}catch(t){l(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,o);i((a=a.apply(e,t)).next())}));import{_ as t}from"./index-D89k_Hd_.js";import{r as a,j as s,W as l,a0 as r,a1 as o,a2 as i,X as n,a3 as d,a4 as c,a5 as u,a6 as m,a7 as x,a8 as g,a9 as h,aa as b,ab as p,ac as y,ad as v,S as j,y as f,P as N}from"./react-vendor-tq68JOgp.js";import{u as w,a as k,b as C,c as S,d as I}from"./useBlogs2-Cis7J3kr.js";import{I as P}from"./ImageUpload-C514XMBq.js";import"./query-vendor-iDpT9gG9.js";import"./vendor-DwD9zxym.js";import"./animation-vendor-DJegggv9.js";import"./ui-vendor-DiJ4VKpG.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";import"./useHotelHook2-C33856rg.js";const E=["Hospitality","First-Time Visitors","Location & Access","Hotel Features","Travel Tips","Nearby Tours","Shopping","Wellness","Guest Stories","Dining","Tourism & Culture","Day Trips","Events & Festivities","International Travel","Local Life","Behind the Scenes","Luxury on Budget","Sustainability","Travel Essentials","Scam Awareness"];function T(){var T,B,L;const[$,_]=a.useState(""),[A,H]=a.useState(""),[F,U]=a.useState(""),[q,M]=a.useState(""),[D,R]=a.useState(""),[V,G]=a.useState(0),[W,z]=a.useState(""),[K,O]=a.useState(""),[Q,Y]=a.useState(""),[J,X]=a.useState(null),[Z,ee]=a.useState(!1),{data:te,refetch:ae}=w({status:"all"}),{mutate:se}=k(),{mutate:le}=C(),{mutate:re}=S(),{data:oe,isLoading:ie}=I(J),ne=a.useRef(null);a.useEffect((()=>{var e,t,a,s;oe&&!ie&&(_(oe.title||""),H(oe.author||""),M(oe.category||""),R((null==(e=oe.featuredImage)?void 0:e.url)||""),U(oe.content||""),z((null==(t=oe.meta)?void 0:t.title)||""),O((null==(a=oe.meta)?void 0:a.description)||""),Y((null==(s=oe.meta)?void 0:s.keywords.join(", "))||""))}),[oe,ie]);const de=()=>{_(""),H(""),U(""),M(""),R(""),X(null),z(""),O(""),Y("")},ce=e=>{const t=window.getSelection(),a=null==t?void 0:t.toString();if(!a)return void alert("Please select text to format");let s;switch(e){case"link":const t=prompt("Enter URL:","https://");t&&(s=`<a href='${t}' target='_blank' class='text-blue-600 underline hover:text-blue-800'>${a}</a>`);break;case"h1":s=`<h1 class='text-3xl font-bold mb-4'>${a}</h1>`;break;case"h2":s=`<h2 class='text-2xl font-semibold mb-3'>${a}</h2>`;break;case"blockquote":s=`<blockquote class='border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4'>${a}</blockquote>`;break;case"code":s=`<code class='bg-gray-100 px-2 py-1 rounded text-sm font-mono'>${a}</code>`;break;case"ul":s=`<ul class='list-disc list-inside my-4'><li>${a}</li></ul>`;break;case"ol":s=`<ol class='list-decimal list-inside my-4'><li>${a}</li></ol>`;break;default:s=`<${e}>${a}</${e}>`}s&&U(F.replace(a,s))},ue=a=>e(this,null,(function*(){var s;if(a)try{ee(!0);const{uploadSingleImagesAPIV2:l}=yield t((()=>e(this,null,(function*(){const{uploadSingleImagesAPIV2:e}=yield import("./useHotelHook2-C33856rg.js");return{uploadSingleImagesAPIV2:e}}))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),r=yield l([a]),o=null==(s=null==r?void 0:r.imageUrls)?void 0:s[0];if(!o)throw new Error("No image URL returned");U((e=>e+`<img src="${o}" alt="Content Image" class="my-4 rounded-lg shadow-md max-w-full h-auto" />`)),alert("Image uploaded successfully!")}catch(l){alert("Failed to upload image. Please try again.")}finally{ee(!1)}})),me=({onClick:e,icon:t,tooltip:a,active:l=!1,disabled:r=!1})=>s.jsxs("button",{onClick:e,disabled:r,className:`\n        relative group p-2.5 rounded-full transition-all duration-200 \n        ${l?"bg-blue-600 text-white shadow-lg":r?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900 border border-gray-200"}\n        ${!r&&"hover:shadow-md hover:scale-105 active:scale-95"}\n      `,title:a,children:[s.jsx(t,{className:"h-4 w-4"}),s.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:a})]});return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:s.jsx("div",{className:"content mt-14 mx-auto px-4 py-8",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[s.jsx(l,{className:"h-6 w-6"}),"Blog Editor"]}),s.jsx("p",{className:"text-blue-100 mt-1",children:"Create and manage your blog posts"})]}),s.jsxs(r.Group,{selectedIndex:V,onChange:G,children:[s.jsx(r.List,{className:"flex border-b border-gray-200 bg-gray-50",children:[{name:"Editor",icon:l},{name:"Preview",icon:o},{name:"All Blogs",icon:i}].map((e=>s.jsxs(r,{className:({selected:e})=>`\n                  flex items-center gap-2 px-6 py-4 text-sm font-medium transition-all duration-200\n                  ${e?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}\n                `,children:[s.jsx(e.icon,{className:"h-4 w-4"}),e.name]},e.name)))}),s.jsx(r.Panel,{className:"p-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:J?"Edit Blog Post":"Create New Blog Post"}),J&&s.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(n,{className:"h-4 w-4"}),"Cancel Edit"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter meta title...",value:W,onChange:e=>z(e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),s.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter meta description...",value:K,onChange:e=>O(e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Keywords"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter keywords, separated by commas",value:Q,onChange:e=>Y(e.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blog Title *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your blog title...",value:$,onChange:e=>_(e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Author *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Author name...",value:A,onChange:e=>H(e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),s.jsxs("select",{value:q,onChange:e=>M(e.target.value),className:"w-full px-4  py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[s.jsx("option",{value:"",children:"-- Select Category --"}),E.map((e=>s.jsx("option",{value:e,children:e},e)))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image"}),s.jsx(P,{index:0,feature:{image:D},setImageUpload:ee,handleFeatureChange:(e,t)=>R(t)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),s.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border border-gray-200 rounded-t-lg",children:[s.jsx(me,{onClick:()=>ce("h1"),icon:d,tooltip:"Heading 1"}),s.jsx(me,{onClick:()=>ce("h2"),icon:c,tooltip:"Heading 2"}),s.jsx("div",{className:"w-px h-8 bg-gray-300 mx-1"}),s.jsx(me,{onClick:()=>ce("b"),icon:u,tooltip:"Bold"}),s.jsx(me,{onClick:()=>ce("i"),icon:m,tooltip:"Italic"}),s.jsx(me,{onClick:()=>ce("code"),icon:x,tooltip:"Code"}),s.jsx("div",{className:"w-px h-8 bg-gray-300 mx-1"}),s.jsx(me,{onClick:()=>ce("link"),icon:g,tooltip:"Add Link"}),s.jsx(me,{onClick:()=>ce("blockquote"),icon:h,tooltip:"Quote"}),s.jsx(me,{onClick:()=>ce("ul"),icon:b,tooltip:"Bullet List"}),s.jsx(me,{onClick:()=>ce("ol"),icon:p,tooltip:"Numbered List"}),s.jsx("div",{className:"w-px h-8 bg-gray-300 mx-1"}),s.jsxs("label",{className:"cursor-pointer",children:[s.jsx(me,{onClick:()=>{var e;return null==(e=ne.current)?void 0:e.click()},icon:y,tooltip:"Insert Image",disabled:Z}),s.jsx("input",{type:"file",ref:ne,accept:"image/*",className:"hidden",onChange:e=>{var t;return(null==(t=e.target.files)?void 0:t[0])&&ue(e.target.files[0])},disabled:Z})]})]}),s.jsx("textarea",{rows:12,className:"w-full px-4 py-4 border border-gray-200 border-t-0 rounded-b-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 font-mono text-sm",placeholder:"Write your blog content here... You can use HTML tags for formatting.",value:F,onChange:e=>U(e.target.value)})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["* Required fields",Z&&s.jsxs("span",{className:"ml-4 text-blue-600",children:[s.jsx(v,{className:"inline h-4 w-4 animate-spin mr-1"}),"Uploading image..."]})]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs("button",{onClick:()=>{if(!$||!F||!A)return void alert("Title, content, and author are required.");const e={title:$,content:F,author:A,category:q,featuredImage:{url:D},meta:{title:W,description:K,keywords:Q.split(",").map((e=>e.trim()))},status:"published"};J?le({id:J,updateData:e},{onSuccess:()=>{X(null),de(),ae(),G(2)},onError:e=>{alert("Failed to update blog. Please try again.")}}):se(e,{onSuccess:()=>{de(),ae(),G(2)},onError:e=>{alert("Failed to create blog. Please try again.")}})},disabled:Z||!$||!F||!A,className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(j,{className:"h-4 w-4"}),J?"Update Blog":"Publish Blog"]})})]})]})}),s.jsx(r.Panel,{className:"p-8",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Blog Preview"}),s.jsx("p",{className:"text-gray-600",children:"See how your blogs will look to readers"})]}),(null==(T=null==te?void 0:te.blogs)?void 0:T.length)?s.jsx("div",{className:"space-y-8",children:te.blogs.map((e=>{var t;return s.jsxs("article",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[(null==(t=e.featuredImage)?void 0:t.url)&&s.jsx("div",{className:"aspect-video overflow-hidden",children:s.jsx("img",{src:e.featuredImage.url||"/placeholder.svg",alt:"Featured",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[s.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:e.category||"Uncategorized"}),s.jsxs("span",{children:["By ",e.author]})]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 leading-tight",children:e.title}),s.jsx("div",{className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})]})]},e._id)}))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(i,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500 text-lg",children:"No blogs to preview yet."}),s.jsx("p",{className:"text-gray-400",children:"Create your first blog post to see it here!"})]})]})}),s.jsx(r.Panel,{className:"p-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"All Blog Posts"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your published content"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[(null==(B=null==te?void 0:te.blogs)?void 0:B.length)||0," posts total"]})]}),(null==(L=null==te?void 0:te.blogs)?void 0:L.length)?s.jsx("div",{className:"grid gap-6",children:te.blogs.map((e=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200 group",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:e.title}),e.category&&s.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:e.category})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["by ",e.author]}),s.jsx("div",{className:"text-gray-700 text-sm leading-relaxed line-clamp-2",dangerouslySetInnerHTML:{__html:e.excerpt||e.content.substring(0,150)+"..."}})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsxs("button",{onClick:()=>{X(e._id),G(0),window.scrollTo({top:0,behavior:"smooth"})},className:"flex items-center gap-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-sm font-medium",children:[s.jsx(l,{className:"h-4 w-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>{return t=e._id,void(confirm("Are you sure you want to delete this blog?")&&re(t,{onSuccess:()=>{ae()},onError:e=>{alert("Failed to delete blog. Please try again.")}}));var t},className:"flex items-center gap-1 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:[s.jsx(f,{className:"h-4 w-4"}),"Delete"]})]})]})},e._id)))}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:s.jsx(N,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No blog posts yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by creating your first blog post."})]})]})})]})]})})})}export{T as default};
