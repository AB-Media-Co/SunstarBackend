var Pe=Object.defineProperty,Re=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var le=(s,r,i)=>r in s?Pe(s,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[r]=i,se=(s,r)=>{for(var i in r||(r={}))Ie.call(r,i)&&le(s,i,r[i]);if(oe)for(var i of oe(r))Me.call(r,i)&&le(s,i,r[i]);return s},te=(s,r)=>Re(s,Se(r));var Z=(s,r,i)=>new Promise((n,c)=>{var t=h=>{try{l(i.next(h))}catch(a){c(a)}},o=h=>{try{l(i.throw(h))}catch(a){c(a)}},l=h=>h.done?n(h.value):Promise.resolve(h.value).then(t,o);l((i=i.apply(s,r)).next())});import{j as e,c as ie,y as je,f as Ne,h as T,r as A,A as q,d as D,B as Oe,z as J}from"./index-Do7zHJPr.js";import{u as we}from"./useUpdatePagesHook-BY7LP-qR.js";import{u as ee,a as _e}from"./useUser-DoMNeEOL.js";import{u as Le}from"./pushBookingHook-CS6ZXjYb.js";import{g as ve,h as Be}from"./useAgentHook-BhrTdCBs.js";import{f as _}from"./formatCurrency-CuADupXe.js";import{C as Fe,S as re}from"./shield-_3qL6OxD.js";import{C as ce,A as $e}from"./circle-check-DmzPKp0_.js";import{S as ze}from"./sparkles-DzoDYCP6.js";import{c as W}from"./createLucideIcon-CidMzxdO.js";import{C as Ge}from"./clock-CYBGBuod.js";import{C as Te}from"./chevron-down-BncEA2kL.js";import{d as He,e as Ve}from"./useOffersAndDealsHook-D7EWHaJJ.js";import{L as ke}from"./LoginModal-Bsyjshy_.js";import{R as de,W as me}from"./Warning-DFjXqT3k.js";import{g as Ce}from"./urlHelper-DMP5Tx6q.js";import{A as xe}from"./Add-CmnnhDi5.js";import{H as Ue}from"./Helmet-BKTyVh3P.js";import{A as Ye}from"./ArrowBackIosNew-BLCLeYRT.js";import"./useHotelHook2-ChTOM5Kg.js";import"./x-CPB-KEGN.js";import"./createSvgIcon-CNxOS2ZH.js";import"./clsx-B-dksMZM.js";import"./index-Bewlq5vS.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=W("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=W("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=W("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=W("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=W("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=W("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=W("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Je=({ContactUsDetail:s})=>{const r=(s==null?void 0:s.phoneNumber)||"";return e.jsx("footer",{className:"w-full md:border-t border-gray-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-6 py-6 text-gray-600   md:justify-between md:gap-10 md:py-8",children:[e.jsxs("div",{className:"flex justify-between gap-2 sm:gap-3",children:[e.jsx("p",{className:"text-base font-semibold tracking-tight sm:text-lg md:text-2xl",children:"Facing an issue? Call us for assistance."}),r?e.jsx("a",{href:`tel:${r}`,className:"w-fit text-lg font-semibold underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-xl","aria-label":`Call ${r}`,children:e.jsx("span",{className:"whitespace-nowrap",children:r})}):e.jsx("span",{className:"text-sm text-gray-500 sm:text-base",children:"Phone number unavailable"})]}),e.jsxs("nav",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 sm:gap-x-8","aria-label":"Footer navigation",children:[e.jsx(ie,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Cancellation Policy"}),e.jsx(ie,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Terms & Conditions"})]})]})})})},Xe=()=>je({mutationFn:s=>Z(void 0,null,function*(){return(yield Ne.post("/api/payments/create",s)).data}),onSuccess:()=>{T.success("Order created successfully")},onError:s=>{var r,i;T.error("Failed to create order: "+(((i=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:i.message)||s.message))}}),De=()=>je({mutationFn:s=>Z(void 0,null,function*(){return(yield Ne.post("/api/payments/verify",s)).data}),onSuccess:()=>{T.success("Payment verified successfully")},onError:s=>{var r,i;T.error("Payment verification failed: "+(((i=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:i.message)||s.message))}}),es=({hotelDetail:s,amount:r,onSuccess:i})=>{const n=Xe(),c=De(),o={14496:"rzp_live_KZSDFi3qOgrIgC",14492:"rzp_live_IQdcqeX4foVUM3",14494:"rzp_live_SxbRIhkDqyGEOM",14493:"rzp_live_uUlevuP8MoleGg"}[s==null?void 0:s.hotelCode],l=()=>{if(!o){T.error("Online payment is not enabled for this hotel.");return}const h={amount:r,currency:"INR",hotelCode:s==null?void 0:s.hotelCode};n.mutate(h,{onSuccess:a=>{const d={key:o,amount:a.amount,currency:a.currency,name:s==null?void 0:s.hotelName,description:"Hotel Booking Payment",order_id:a.id,handler:function(x){const y={razorpay_order_id:x.razorpay_order_id,razorpay_payment_id:x.razorpay_payment_id,razorpay_signature:x.razorpay_signature,hotelCode:s==null?void 0:s.hotelCode};c.mutate(y,{onSuccess:()=>{T.success("Payment Verified âœ…"),i("PAID_TYPE_UNKID")}})},prefill:{name:"",email:"",contact:""},theme:{color:"#38b2ac"}};new window.Razorpay(d).open()},onError:()=>{T.error("Failed to create Razorpay order")}})};return e.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:l,children:"Confirm Booking"})},ue="pay-now",ss=({hotelDetail:s,verified:r,checkIn:i,checkOut:n})=>{const c=localStorage.getItem("user_email"),{data:t}=ee(c),{data:o}=ve(c),[l,h]=A.useState(ue),{selectedRooms:a,someOneElse:d,guestData:p,setPaymentMethod:x,selectedOtherCharges:y,finalPrice:N,baseFinalPrice:w,totalOtherCharges:u,payNowDiscount:f,offerDiscount:E,earningsDiscount:j,totalAddOns:P}=q(),S=Le(),{mutate:$}=_e(),O=D();console.log(y),A.useEffect(()=>{x(ue)},[x]);const k=b=>{h(b),x(b)},I=(b="")=>{var U,V;if(!(r||(U=t==null?void 0:t.data)!=null&&U.isVerified)){(V=document.getElementById("guestDetail"))==null||V.scrollIntoView({behavior:"smooth"});return}const L=Array.isArray(y)&&y.length>0?y.map(C=>{const m=C!=null&&C.qty?` x${C.qty}`:"",M=C!=null&&C.note?` (${C.note})`:"";return`${C.heading||""}${m}${M}`.trim()}).filter(Boolean).join(", "):"",v=l==="pay-at-hotel"?"pay-at-hotel":b,z=L?`${v} | Add-ons: ${L}`:v,B={};a.forEach((C,m)=>{var K;const M=parseInt(localStorage.getItem("days")),R=Array(M).fill(C.price).join(","),G=Array(M).fill(0).join(","),Q=Array(M).fill(0).join(",");B[`Room_${m+1}`]={Rateplan_Id:C==null?void 0:C.roomrateunkid,Ratetype_Id:C.RateTypeID,Roomtype_Id:C.RoomTypeID,baserate:R,extradultrate:G,extrachildrate:Q,number_adults:((K=C.guestQty)==null?void 0:K.toString())||"1",number_children:"0",ExtraChild_Age:"",Title:"",First_Name:d?p.firstName||"":(t==null?void 0:t.data.firstName)||"",Last_Name:d?p.lastName||"":(t==null?void 0:t.data.lastName)||"",Gender:(t==null?void 0:t.data.gender)||"",SpecialRequest:z}});const g=L?`Add To Your Stay: ${L}`:"";let F="";o&&o.approved&&(o.role&&o.role.toLowerCase().includes("corporate")?F="Corporate":F="Agent");const H={BookingData:{Room_Details:B,check_in_date:i,check_out_date:n,Booking_Payment_Mode:l==="pay-at-hotel"?"0":"1",Email_Address:t==null?void 0:t.data.email,Source_Id:"",MobileNo:d?p.phone:(t==null?void 0:t.data.phone)||"",Address:(t==null?void 0:t.data.address)||"",State:(t==null?void 0:t.data.state)||"",Country:(t==null?void 0:t.data.country)||"",City:(t==null?void 0:t.data.city)||"",Zipcode:"",Fax:"",Device:"Web",Languagekey:"",paymenttypeunkid:b,remark:g},HotelCode:s==null?void 0:s.hotelCode,APIKey:s==null?void 0:s.authKey,userEmail:t==null?void 0:t.data.email,BookingSource:F,finalPrice:N};S.mutate(H,{onSuccess:C=>{var m,M,R,G,Q;j>0&&((m=t==null?void 0:t.data)!=null&&m.email)&&(console.log("ðŸ’° Deducting earnings after booking success:",j),$({email:t.data.email,amountUsed:j})),O("/thankyou",{state:{bookingResponse:C,payload:H,paymentMethod:l,checkIn:i,checkOut:n,hotelDetail:s,hotel:{hotelCode:s==null?void 0:s.hotelCode,name:s==null?void 0:s.hotelName,payAtHotel:s==null?void 0:s.payAtHotel},user:{email:(M=t==null?void 0:t.data)==null?void 0:M.email,firstName:(R=t==null?void 0:t.data)==null?void 0:R.firstName,lastName:(G=t==null?void 0:t.data)==null?void 0:G.lastName,phone:(Q=t==null?void 0:t.data)==null?void 0:Q.phone},rooms:a,pricing:{finalPrice:N,baseFinalPrice:w,totalOtherCharges:u,payNowDiscount:f,offerDiscount:E,earningsDiscount:j,totalAddOns:P}},replace:!0})}})};return S.isPending?e.jsxs("div",{className:"relative bg-white border-gray-100",children:[e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-primary-green rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-r-teal-300 rounded-full animate-spin mx-auto",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Processing Your Booking"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your reservation..."}),e.jsx("div",{className:"flex items-center justify-center mt-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),e.jsx("div",{className:"filter blur-sm pointer-events-none",children:e.jsx(ge,{hotelDetail:s,selectedPaymentMethod:l,handlePaymentMethodChange:k,ContinueBtnClick:I,isLoading:!0})})]}):e.jsx(ge,{hotelDetail:s,selectedPaymentMethod:l,handlePaymentMethodChange:k,ContinueBtnClick:I,isLoading:!1})},ge=({hotelDetail:s,selectedPaymentMethod:r,handlePaymentMethodChange:i,ContinueBtnClick:n,isLoading:c})=>{const{finalPrice:t,baseFinalPrice:o}=q(),{ContactUsDetail:l}=we(),h=(l==null?void 0:l.phoneNumber)||"",a=(o||0)*.95,d=Math.max((o||0)-a,0),p=`Saving ${_(d)} if you book now`;return e.jsxs("div",{id:"payment-method",className:"bg-white",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-900 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-sm md:text-base text-gray-500",children:"Choose your preferred payment option"})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4 mb-6 md:mb-8",children:[e.jsx(fe,{id:"pay-now",icon:e.jsx(Fe,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay and Book Now",description:"Complete your booking instantly with secure online payment",features:[{icon:e.jsx(ce,{className:"w-4 h-4"}),text:"Instant confirmation"},{icon:e.jsx(re,{className:"w-4 h-4"}),text:"All major cards"},{icon:e.jsx(ze,{className:"w-4 h-4"}),text:"5% discount"}],badge:{text:"Secure",color:"green"},discountBadge:{text:p,color:"red"},isSelected:r==="pay-now",onClick:()=>!c&&i("pay-now"),isLoading:c,isRecommended:!0}),(s==null?void 0:s.payAtHotel)==="yes"&&e.jsx(fe,{id:"pay-at-hotel",icon:e.jsx(he,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay at Hotel",description:"Reserve now and pay at check-in",features:[{icon:e.jsx(Ge,{className:"w-4 h-4"}),text:"No advance payment"},{icon:e.jsx(he,{className:"w-4 h-4"}),text:"Pay at reception"}],badge:{text:"Flexible",color:"orange"},isSelected:r==="pay-at-hotel",onClick:()=>!c&&i("pay-at-hotel"),isLoading:c})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-4 md:mb-6",children:r==="pay-now"?e.jsx(es,{hotelDetail:s,amount:Math.round(t),onSuccess:x=>n(x)}):e.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:()=>n(),children:e.jsx("span",{children:"Confirm Booking"})})}),e.jsxs("div",{className:"mb-6 md:mb-8 grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4 bg-gray-50 rounded-2xl p-4 border border-gray-200",children:[e.jsx(ae,{icon:e.jsx(re,{className:"w-4 h-4 text-green-600"}),text:"100% Secure SSL"}),e.jsx(ae,{icon:e.jsx(ce,{className:"w-4 h-4 text-teal-600"}),text:"Verified payment processing by Razorpay"}),e.jsx(ae,{icon:e.jsx(Ke,{className:"w-4 h-4 text-primary-green"}),text:"24/7 helpline number",phoneNumber:h,isClickable:!0})]})]}),e.jsx("div",{className:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3 text-xs md:text-sm text-gray-700",children:[e.jsx(re,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Your payment information is secured with 256-bit SSL encryption"})]})})]})},ae=({icon:s,text:r,phoneNumber:i,isClickable:n=!1})=>n&&i?e.jsxs("a",{href:`tel:${i}`,className:"flex items-center gap-2 text-xs md:text-sm text-gray-700 hover:text-primary-green transition-colors cursor-pointer",children:[s,e.jsx("span",{children:r})]}):e.jsxs("div",{className:"flex items-center gap-2 text-xs md:text-sm text-gray-700",children:[s,e.jsx("span",{children:r})]}),fe=({id:s,icon:r,title:i,description:n,features:c,badge:t,discountBadge:o,isSelected:l,onClick:h,isLoading:a,isRecommended:d=!1})=>{const p={green:"bg-green-100 text-green-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"};return e.jsxs("div",{className:`relative overflow-hidden rounded-lg md:rounded-xl border-2 transition-all duration-300 cursor-pointer group ${l?"border-primary-green bg-gradient-to-br from-teal-50 to-emerald-50 shadow-lg":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-md"} ${a?"pointer-events-none opacity-50":""}`,onClick:h,children:[d&&e.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),"RECOMMENDED"]})}),e.jsxs("label",{htmlFor:s,className:"flex items-start gap-3 md:gap-4 p-3 md:p-5 cursor-pointer",children:[e.jsx("input",{type:"radio",id:s,name:"payment-method",className:"w-4 h-4 md:w-5 md:h-5 mt-1 md:mt-0.5 text-teal-600 border-2 border-gray-300 focus:ring-primary-green flex-shrink-0",onChange:h,checked:l,disabled:a}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1 md:mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`p-1.5 md:p-2 rounded-lg flex-shrink-0 ${l?"bg-primary-green":"bg-gray-100 group-hover:bg-teal-50"}`,children:e.jsx("div",{className:`${l?"text-white":"text-gray-600 group-hover:text-teal-600"}`,children:r})}),e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 truncate",children:i})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[t&&e.jsx("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-medium flex-shrink-0 whitespace-nowrap ${p[t.color]}`,children:t.text}),o&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-bold flex-shrink-0 whitespace-nowrap  ${p[o.color]}`,children:[e.jsx(pe,{className:"w-3 h-3"}),o.text]})]})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-2 md:mb-3 line-clamp-2",children:n}),e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-4 text-xs md:text-sm",children:c.map((x,y)=>e.jsxs("div",{className:`flex items-center gap-1 ${l?"text-teal-700":"text-gray-600"}`,children:[e.jsx("div",{className:l?"text-teal-600":"text-gray-400",children:x.icon}),e.jsx("span",{className:"whitespace-nowrap",children:x.text})]},y))})]})]})]})},ye=({days:s,showButton:r,isPaymentVisible:i})=>{const{selectedRooms:n,totalOtherCharges:c,selectedOtherCharges:t,totalAddOns:o,finalPrice:l,baseFinalPrice:h,setNights:a,details:d,payNowDiscount:p,offerDiscount:x,earningsDiscount:y}=q(),[N,w]=A.useState(!1),[u,f]=A.useState(!0);A.useEffect(()=>{s&&(a(s),localStorage.setItem("days",s))},[s,a]);const E=Number(p)||0,j=Number(x)||0,P=Number(y)||0,S=E>0,$=j>0,O=P>0;return A.useEffect(()=>{const k=()=>{window.scrollY>220?w(!0):w(!1)};return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[]),e.jsxs("div",{className:`md:p-6 p-4 bg-white md:border-2 border border-gray-200 rounded-2xl md:shadow-lg shadow-md w-full ${N?"md:w-[384px]":{}}  md:w-96 mx-auto  font-sans transition-all duration-300 ${N?"xl:fixed xl:top-4  ":"relative "}`,children:[e.jsx("div",{className:"bg-primary-green  p-4 -mx-4 md:-mx-6 -mt-4 md:-mt-6 rounded-t-2xl mb-6",children:e.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"Reservation Summary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-800 mb-4 pb-2 border-b-2 border-primary-green/20",children:"Your Price Summary"}),e.jsx("div",{className:"space-y-4 mb-5",children:n==null?void 0:n.map((k,I)=>{var U,V,C,m,M;const b=d[I],L=((U=b==null?void 0:b.roomData)==null?void 0:U.discountRate)||0,v=((C=(V=b==null?void 0:b.continentalPlan)==null?void 0:V.rate)==null?void 0:C.amount)||0,z=(k==null?void 0:k.guestQty)||2,B=((m=b==null?void 0:b.roomData)==null?void 0:m.baseAdultOccupancy)||2,g=((M=b==null?void 0:b.roomData)==null?void 0:M.extraAdultRate)||0,F=z>B?z-B:0,Y=F*g,H=v*z;return e.jsxs("div",{className:"space-y-3 pb-4 mb-4 border-b-2 border-dashed border-gray-200 last:border-0",children:[e.jsxs("div",{className:"flex justify-between items-start text-sm bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-800 text-base",children:k.roomName}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Room Only (",B," ",B===1?"Adult":"Adults",") Ã— ",s," ",s===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-gray-900 text-base",children:_(L*s)})]}),F>0&&g>0&&e.jsxs("div",{className:"flex justify-between items-start text-sm bg-orange-50 border-l-4 border-orange-500 p-3 rounded-r-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-orange-700",children:"Extra Adult Charges"}),e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[_(g)," Ã— ",F," ",F===1?"Adult":"Adults"," Ã— ",s," ",s===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-orange-700",children:_(Y*s)})]}),k.option==="continental"&&v>0&&e.jsxs("div",{className:"flex justify-between items-start text-sm bg-green-50 border-l-4 border-primary-green p-3 rounded-r-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-primary-green",children:"Continental Breakfast"}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[_(v)," Ã— ",z," ",z===1?"Guest":"Guests"," Ã— ",s," ",s===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-primary-green",children:_(H*s)})]})]},I)})}),t.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("button",{onClick:()=>f(!u),className:"w-full flex justify-between items-center text-sm font-semibold text-gray-700 py-2 px-3 bg-teal-50 rounded-lg border border-teal-200 hover:bg-teal-100 transition-colors mb-2",children:[e.jsxs("span",{className:"text-teal-700",children:["Add-ons (",t.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-teal-700 font-bold",children:_(o)}),u?e.jsx(We,{className:"w-4 h-4 text-teal-600"}):e.jsx(Te,{className:"w-4 h-4 text-teal-600"})]})]}),u&&e.jsx("div",{className:"space-y-3",children:t.map((k,I)=>{var B,g,F;const b=((B=k.rate)==null?void 0:B.amount)||0,L=(F=(g=k.rate)==null?void 0:g.period)==null?void 0:F.toLowerCase(),v=L==="per day"||L==="per night",z=v?b*s:b;return e.jsxs("div",{className:"flex justify-between items-start text-sm bg-teal-50 border-l-4 border-teal-500 p-3 rounded-r-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-teal-700",children:k.heading}),e.jsxs("p",{className:"text-xs text-teal-600 mt-1",children:[_(b),v&&` Ã— ${s} ${s===1?"Night":"Nights"}`]})]}),e.jsx("p",{className:"font-bold text-teal-700",children:_(z)})]},k._id||I)})})]})]}),e.jsxs("div",{className:"pt-4 mt-5 bg-gradient-to-br from-gray-50 to-gray-100 p-4 rounded-xl space-y-3 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Taxes & Fees"}),e.jsx("span",{className:"font-semibold text-gray-900",children:_(c)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Base Price"}),e.jsx("span",{className:"font-semibold text-gray-900",children:_(h)})]}),S&&e.jsxs("div",{className:"flex justify-between items-center text-sm bg-green-50 -mx-4 px-4 py-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:"Pay Now Discount"}),e.jsx("span",{className:"text-xs text-green-700",children:"Pay & Book Now applied"})]}),e.jsxs("span",{className:"font-bold text-green-600",children:["-",_(E)]})]}),$&&e.jsxs("div",{className:"flex justify-between items-center text-sm bg-green-50 -mx-4 px-4 py-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:"Offer Code Discount"}),e.jsx("span",{className:"text-xs text-green-700",children:"Exclusive offer applied"})]}),e.jsxs("span",{className:"font-bold text-green-600",children:["-",_(j)]})]}),O&&e.jsxs("div",{className:"flex justify-between items-center text-sm bg-amber-50 -mx-4 px-4 py-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-amber-700",children:"Earnings Discount"}),e.jsx("span",{className:"text-xs text-amber-600",children:"Earnings points applied"})]}),e.jsxs("span",{className:"font-bold text-amber-700",children:["-",_(P)]})]}),e.jsxs("div",{className:"flex justify-between items-center border-t-2 border-gray-300 pt-3 mt-3",children:[e.jsx("p",{className:"text-base md:text-lg font-bold text-gray-800",children:"Payable Amount"}),e.jsx("p",{className:"text-lg md:text-xl font-bold text-primary-green",children:_(l)})]})]}),r&&e.jsx("a",{href:"#payment-method",className:"hidden md:block w-full",children:e.jsx("button",{disabled:i,className:`mt-6 w-full py-2 font-bold text-white rounded-xl shadow-lg transition-all duration-300 transform hover:scale-[1.02] ${i?"bg-gray-300 cursor-not-allowed shadow-none":"bg-gradient-to-r from-primary-green to-primary-dark-green hover:shadow-xl"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"See Payment Options"}),e.jsx("span",{className:"text-xl",children:"â†’"})]})})}),(S||$||O)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm  text-primary-green -mx-4 px-4 py-2.5 ",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold",children:S&&$&&O?`You are saving ${_(E+j+P)} with all discounts!`:S&&$?`You are saving ${_(E+j)} with all discounts!`:S&&O?`You are saving ${_(E+P)} with all discounts!`:$&&O?`You are saving ${_(j+P)} with all discounts!`:S?`You are saving ${_(E)} by booking directly!`:O?`You are saving ${_(P)} with earnings!`:`You are saving ${_(j)} with offer codes!`})]})})]})};/*! js-cookie v3.0.5 | MIT */function X(s){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var n in i)s[n]=i[n]}return s}var ts={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ne(s,r){function i(c,t,o){if(typeof document!="undefined"){o=X({},r,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),c=encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var h in o)o[h]&&(l+="; "+h,o[h]!==!0&&(l+="="+o[h].split(";")[0]));return document.cookie=c+"="+s.write(t,c)+l}}function n(c){if(!(typeof document=="undefined"||arguments.length&&!c)){for(var t=document.cookie?document.cookie.split("; "):[],o={},l=0;l<t.length;l++){var h=t[l].split("="),a=h.slice(1).join("=");try{var d=decodeURIComponent(h[0]);if(o[d]=s.read(a,d),c===d)break}catch(p){}}return c?o[c]:o}}return Object.create({set:i,get:n,remove:function(c,t){i(c,"",X({},t,{expires:-1}))},withAttributes:function(c){return ne(this.converter,X({},this.attributes,c))},withConverter:function(c){return ne(X({},this.converter,c),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(s)}})}ne(ts,{path:"/"});const rs=({hotelDetail:s,checkIn:r,verified:i})=>{const[n,c]=A.useState(""),[,t]=A.useState(null),[o,l]=A.useState(!1),[h,a]=A.useState(null),[d,p]=A.useState(!1),{mutate:x,data:y}=He(),{mutateAsync:N}=Ve(),{finalPrice:w,setFinalPrice:u,baseFinalPrice:f,paymentMethod:E,appliedOffers:j,setAppliedOffers:P,setOfferDiscount:S,payNowDiscount:$,earningsDiscount:O,setEarningsDiscount:k}=q(),I=localStorage.getItem("user_email"),{data:b,isLoading:L}=ee(I),{data:v,isLoading:z}=ve(I),B=localStorage.getItem("user_email")!==null;if(console.log(v),Be(I),A.useEffect(()=>{s&&s._id&&B&&x(s._id)},[x,s,B,b]),L)return e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-3 border-gray-200 border-t-primary-green rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Loading offers..."})]})});if(!B)return e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-start md:text-center space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Unlock Exclusive Offers"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sign in to access special discounts and deals"})]}),e.jsxs("a",{href:"#guestDetail",onClick:m=>{T.error("Please verify your details")},className:"mt-4 inline-flex items-center gap-2 px-6 py-2.5 bg-primary-green text-white rounded-lg text-sm font-medium hover:bg-cyan-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Verify to Continue"]})]})});const g=()=>Z(void 0,null,function*(){var m,M;if(n.trim()){if(j.some(R=>R.offerCode.toUpperCase()===n.trim().toUpperCase())){T.error("This promo code is already applied");return}l(!0);try{const R=yield N({hotelId:s._id,rate:w,offerCode:n.trim(),checkInDate:r});if(t(R),R.discountedRate){const G={offerCode:n.trim().toUpperCase(),description:R.description||"Discount applied",discountPercent:R.discountPercent||0,discountedRate:R.discountedRate};P(K=>[...K,G]);const Q=w-R.discountedRate;S(Q),u(R.discountedRate),c(""),T.success("Offer applied successfully")}}catch(R){T.error(((M=(m=R==null?void 0:R.response)==null?void 0:m.data)==null?void 0:M.error)||"Error applying offer")}finally{l(!1)}}}),F=m=>{const M=j.filter(R=>R.offerCode!==m);if(P(M),M.length===0)u(f-$-O),S(0);else{const R=M[M.length-1];u(R.discountedRate);const G=f-$-O-R.discountedRate;S(G)}T.success("Promo code removed")},Y=(v==null?void 0:v.role)==="agent"||(v==null?void 0:v.role)==="corporate";console.log(Y,v);const H=v==null?void 0:v.totalEarnings,U=()=>{if(d){T.error("Earnings already applied");return}if(H<=0){T.error("No earnings available");return}const m=Math.min(H,w);k(m),u(w-m),p(!0),T.success(`â‚¹${m.toFixed(2)} earnings applied!`)},V=()=>{u(w+O),k(0),p(!1),T.success("Earnings discount removed")},C=m=>Z(void 0,null,function*(){var M,R;if(j.some(G=>G.offerCode===m.offerCode)){T.error("This promo code is already applied");return}l(!0);try{const G=yield N({hotelId:s._id,rate:w,offerCode:m.offerCode,checkInDate:r});if(G.discountedRate){const Q={offerCode:m.offerCode,description:m.description,discountPercent:m.discountPercent,discountedRate:G.discountedRate};P(Ee=>[...Ee,Q]);const K=w-G.discountedRate;S(K),u(G.discountedRate),T.success("Offer applied successfully!")}else throw new Error("No discount rate returned")}catch(G){T.error(((R=(M=G==null?void 0:G.response)==null?void 0:M.data)==null?void 0:R.error)||"Error applying offer")}finally{l(!1)}});return e.jsxs("div",{className:"bg-white w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Exclusive Offers"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"Apply a promo code to get discounts"})]}),j.length>0&&e.jsx("div",{className:"mb-3 pb-3 border-gray-200",children:e.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:j.map(m=>e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-green-50 to-green-100 border border-green-300 rounded-full px-3 py-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#059669",strokeWidth:"2.5",className:"flex-shrink-0",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),e.jsx("span",{className:"font-semibold text-primary-green text-sm",children:m.offerCode}),e.jsxs("span",{className:"text-xs text-primary-green font-medium",children:["(",m.discountPercent,"%)"]})]}),e.jsx("button",{onClick:()=>F(m.offerCode),className:"ml-1 text-primary-green hover:text-primary-green-dark transition-colors flex-shrink-0",title:"Remove this promo code",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},m.offerCode))})}),d&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-yellow-50 to-amber-100 border border-amber-300 rounded-full px-3 py-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#D97706",strokeWidth:"2.5",className:"flex-shrink-0",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}),e.jsx("path",{d:"M12 18V6"})]}),e.jsx("span",{className:"font-semibold text-amber-700 text-sm",children:"EARNINGS APPLIED"}),e.jsxs("span",{className:"text-xs text-amber-700 font-medium",children:["(â‚¹",O.toFixed(2),")"]})]}),e.jsx("button",{onClick:V,className:"ml-1 text-amber-700 hover:text-amber-900 transition-colors flex-shrink-0",title:"Remove earnings discount",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})}),!d&&Y&&H>0&&e.jsx("div",{className:"mb-3",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group p-3 border border-amber-200 rounded-lg hover:bg-amber-50 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:!1,onChange:U,className:"w-5 h-5 text-amber-600 border-gray-300 rounded focus:ring-amber-500 cursor-pointer"}),e.jsxs("span",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 group-hover:text-amber-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"text-amber-600",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}),e.jsx("path",{d:"M12 18V6"})]}),e.jsxs("span",{children:["Use My Earnings ",e.jsxs("span",{className:"text-amber-700 font-semibold",children:["(",H==null?void 0:H.toFixed(2)," available)"]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2 md:gap-3 flex-col md:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Enter promo code...",className:"w-full h-12 md:h-14 border border-gray-300 rounded-lg px-4 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:n,onChange:m=>c(m.target.value),onKeyPress:m=>m.key==="Enter"&&g()}),n&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:g,disabled:!n.trim()||o,className:"h-12 md:h-14 px-6 w-auto bg-primary-green text-white rounded-lg font-medium hover:bg-cyan-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Applying..."})]}):e.jsx("span",{className:"inline",children:"Apply Promo Code"})})})]})}),j.length===0&&y&&y.length>0&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:y.map(m=>e.jsx("div",{onClick:()=>C(m),onMouseEnter:()=>a(m.offerCode),onMouseLeave:()=>a(null),className:"p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-cyan-500 hover:bg-cyan-50 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:m.offerCode}),m.description&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1 capitalize",children:["apply this promo code to get ",m.discountPercent,"% off "]})]}),e.jsxs("div",{className:"flex-shrink-0 bg-cyan-100 text-cyan-700 px-3 py-1.5 rounded-lg font-semibold text-sm",children:[m.discountPercent,"%"]})]})},m.offerCode))})})]})},as=({data:s})=>{const r=s==null?void 0:s.addToYourStay,{selectedOtherCharges:i,setSelectedOtherCharges:n}=q(),c=(o,l)=>{l&&l.stopPropagation(),n(h=>(Array.isArray(h)?h.find(d=>d._id===o._id):null)?h.filter(d=>d._id!==o._id):[...h,o])},t=o=>i.some(l=>l._id===o);return e.jsxs("div",{className:"bg-white ",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4  text-gray-900",children:"Add To Your Stay"}),e.jsx("p",{className:"text-gray-600 t md:text-desktop/body/1 mt-1",children:"Enhance your experience with optional add-ons"})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:r.map(o=>e.jsx(ns,{option:o,isSelected:t(o._id),onToggle:l=>c(o,l)},o._id))})]})},ns=({option:s,isSelected:r,onToggle:i})=>{var n;return e.jsxs("div",{className:`relative rounded-lg md:rounded-xl border-2 transition-all duration-300 overflow-hidden cursor-pointer ${r?"border-teal-500 bg-teal-50 shadow-md":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-sm"}`,onClick:i,children:[e.jsx("div",{className:"p-4 md:p-5",children:e.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[e.jsx("div",{className:`w-5 h-5 md:w-6 md:h-6 rounded-md border-2 flex items-center justify-center flex-shrink-0 transition-all ${r?"bg-teal-500 border-teal-500 shadow-sm":"border-gray-300 hover:border-teal-400"}`,children:r&&e.jsx(Qe,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-base md:text-lg font-semibold leading-tight ${r?"text-teal-700":"text-gray-900"}`,children:s.heading}),e.jsx("p",{className:`text-xs md:text-sm leading-relaxed ${r?"text-primary-green font-medium":"text-gray-600"}`,children:s.description})]}),e.jsx("div",{className:`flex-shrink-0 text-right px-2 py-1 md:px-3 md:py-1.5 rounded-md transition-colors ${r?"bg-teal-100":""}`,children:e.jsxs("div",{className:`text-base md:text-lg font-bold ${r?"text-primary-green":"text-gray-900"}`,children:["â‚¹",(n=s.rate)==null?void 0:n.amount]})})]})})]})}),r&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-teal-500"})]})},Ae=A.forwardRef(({setIsVerified:s})=>{var k,I,b,L,v,z,B;const[r,i]=A.useState(""),[n,c]=A.useState(""),[t,o]=A.useState(localStorage.getItem("user_email")||""),[l,h]=A.useState(""),[a,d]=A.useState(!1),{someOneElse:p,setSomeoneElse:x,setGuestData:y}=q(),[N,w]=A.useState(null),u=localStorage.getItem("user_email")!==null,{data:f,refetch:E}=ee(t);A.useEffect(()=>{const g=localStorage.getItem("user_email");g&&g!==t&&o(g)},[u]),A.useEffect(()=>{t&&t.trim()!==""&&E()},[t,E]);const[j,P]=A.useState(!1);A.useEffect(()=>{u&&p&&y({firstName:r,lastName:n,email:t,phone:l})},[u,p,r,n,t,l,y]);const S=[{id:"firstName",label:"First Name",placeholder:"Enter your first name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"lastName",label:"Last Name",placeholder:"Enter your last name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"email",label:"Email Address",placeholder:"Enter your email address",type:"email",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]})},{id:"mobile",label:"Mobile Number",placeholder:"Enter your mobile number",type:"tel",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}],$=g=>{switch(g){case"firstName":return r;case"lastName":return n;case"email":return t;case"mobile":return l;default:return""}},O=(g,F)=>{switch(g){case"firstName":i(F);break;case"lastName":c(F);break;case"email":o(F);break;case"mobile":h(F);break}};return e.jsxs("div",{id:"guestDetail",className:"flex flex-col md:gap-4 relative overflow-hidden",children:[e.jsx("div",{className:"flex items-center mb-2 relative z-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"  text-mobile/h4 md:text-desktop/h4 text-gray-900 tracking-tight mb-1",children:"Guest Details"}),e.jsx("p",{className:"text-gray-600 text-mobile/body/2 md:text-desktop/body/1",children:"Please provide your information to proceed"})]})}),e.jsxs("div",{className:"relative z-10",children:[u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 md:mb-8 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-green-500 rounded-full flex items-center justify-center mr-3 shadow-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Account Verified"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Your email and mobile number are verified"})]})]}),e.jsxs("div",{className:"mb-4 md:mb-8 p-4 border rounded-xl bg-gray-50 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"w-12 h-12 mr-2 rounded-full bg-primary-green flex items-center justify-center text-white font-bold text-lg shadow",children:[(I=(k=f==null?void 0:f.data)==null?void 0:k.firstName)==null?void 0:I.charAt(0),(L=(b=f==null?void 0:f.data)==null?void 0:b.lastName)==null?void 0:L.charAt(0)]}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1 ",children:[e.jsxs("p",{className:"text-gray-900 font-semibold text-sm truncate",children:[(v=f==null?void 0:f.data)==null?void 0:v.firstName," ",(z=f==null?void 0:f.data)==null?void 0:z.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:(B=f==null?void 0:f.data)==null?void 0:B.email})]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("user_email"),window.location.reload()},className:"text-xs font-semibold text-gray-600 hover:text-gray-900 whitespace-nowrap flex-shrink-0",children:"Log Out"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-gray-700 text-sm mb-4 md:mb-6",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-yellow-500 border-gray-300 rounded",checked:a,onChange:g=>{d(g.target.checked),x(g.target.checked)}}),"I'm booking for someone else"]}),a&&e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:S.map(({id:g,label:F,placeholder:Y,type:H,icon:U})=>{const V=$(g),C=N===g,m=V&&V.trim();return e.jsxs("div",{className:"flex flex-col gap-3 group",children:[e.jsxs("label",{htmlFor:g,className:`block text-sm font-semibold tracking-wide transition-colors duration-200 ${C||m?"text-cyan-600":"text-gray-700"}`,children:[F," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:`absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors duration-200 ${C?"text-cyan-500":m?"text-cyan-600":"text-gray-400"}`,children:U}),e.jsx("input",{type:H,id:g,placeholder:Y,className:`w-full h-14 pl-12 pr-4 py-3 text-base text-gray-900 placeholder-gray-400 border-2 rounded-xl shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-100
                              ${C?"border-cyan-400 shadow-lg":m?"border-cyan-300 bg-cyan-50":"border-gray-200 hover:border-gray-300"}
                              ${g==="email"?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}
                            `,value:V,onChange:M=>O(g,M.target.value),onFocus:()=>w(g),onBlur:()=>w(null),disabled:g==="email"})]})})]},g)})})]}),!u&&e.jsxs("div",{className:"mb-4 md:mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex flex-col gap-2  md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-400 text-white rounded-full flex items-center justify-center shadow",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-800",children:"Login Required"}),e.jsx("p",{className:"text-yellow-600 text-sm",children:"Please log in or verify your account to continue"})]})]}),e.jsx("button",{onClick:()=>P(!0),className:"ml-4 px-5 py-2 rounded-lg bg-primary-green text-white  transition",children:"Login / Sign Up"})]}),j&&e.jsx(ke,{closeModal:()=>{P(!1);const g=localStorage.getItem("user_email");g&&(o(g),setTimeout(()=>E(),200))}})]})]})});Ae.displayName="GuestDetailsForm";const be=()=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full border border-cyan-200 bg-cyan-50 text-primary-green text-[11px] md:text-xs font-semibold uppercase tracking-wide",children:[e.jsx(Ze,{className:"w-3.5 h-3.5"}),"Limited rooms at this price"]}),os=()=>{const{details:s,setDetails:r,selectedRooms:i,setSelectedRooms:n,setEditAddPricing:c}=q(),t=D(),o=(a,d)=>{n(p=>{var j,P,S,$,O,k,I,b,L,v;const x=[...p],y=((P=(j=s[a])==null?void 0:j.roomData)==null?void 0:P.discountRate)||0,N=((O=($=(S=s[a])==null?void 0:S.continentalPlan)==null?void 0:$.rate)==null?void 0:O.amount)||0,w=((k=x[a])==null?void 0:k.guestQty)||2,u=((b=(I=s[a])==null?void 0:I.roomData)==null?void 0:b.baseAdultOccupancy)||2,f=((v=(L=s[a])==null?void 0:L.roomData)==null?void 0:v.extraAdultRate)||0;let E=y;if(w>u){const z=w-u;E+=f*z}return d==="continental"&&(E+=N*w),x[a]=te(se({},x[a]),{option:d,price:E}),x})},l=(a,d)=>{n(p=>{var $,O,k,I,b,L,v,z,B,g,F,Y,H,U,V,C;const x=[...p],y=((O=($=s[a])==null?void 0:$.roomData)==null?void 0:O.maxGuests)||2;let N=(I=(k=x[a])==null?void 0:k.guestQty)!=null?I:2,w=(L=(b=x[a])==null?void 0:b.showMaxGuestAlert)!=null?L:!1;d==="increment"?N<y?(N+=1,w=!1):w=!0:d==="decrement"&&(N>0&&(N-=1),w=!1);const u=((z=(v=s[a])==null?void 0:v.roomData)==null?void 0:z.discountRate)||0,f=((F=(g=(B=s[a])==null?void 0:B.continentalPlan)==null?void 0:g.rate)==null?void 0:F.amount)||0,E=((Y=x[a])==null?void 0:Y.option)||"roomOnly",j=((U=(H=s[a])==null?void 0:H.roomData)==null?void 0:U.baseAdultOccupancy)||2,P=((C=(V=s[a])==null?void 0:V.roomData)==null?void 0:C.extraAdultRate)||0;let S=u;if(N>j){const m=N-j;S+=P*m}return E==="continental"&&(S+=f*N),x[a]=te(se({},x[a]),{guestQty:N,showMaxGuestAlert:w,price:S}),N===0&&(x.splice(a,1),r(m=>m.filter((M,R)=>R!==a))),x})},h=()=>{var d,p,x,y;c(!0),localStorage.setItem("editAddPricing",!0);const a=((d=s[0])==null?void 0:d.name)||((x=(p=s[0])==null?void 0:p.roomData)==null?void 0:x.hotelName);t(Ce((y=s[0])==null?void 0:y.hotelCode,a))};return e.jsxs(e.Fragment,{children:[s==null?void 0:s.map((a,d)=>{var x,y,N,w,u,f,E;const p=i[d]||{roomName:((x=a==null?void 0:a.roomData)==null?void 0:x.RoomName)||"",option:"roomOnly",price:((y=a==null?void 0:a.roomData)==null?void 0:y.discountRate)||0,guestQty:2,showMaxGuestAlert:!1};return p.guestQty===0?null:e.jsxs("div",{className:"flex flex-col gap-2 md:gap-4",children:[e.jsxs("div",{className:"flex flex-row lg:h-[120px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[e.jsx("div",{className:"w-1/2 md:w-1/3 relative",children:e.jsx("img",{src:(N=a==null?void 0:a.roomData)==null?void 0:N.roomImage[0],alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"})}),e.jsxs("div",{className:"hidden md:flex flex-col justify-center w-full gap-3 ",children:[e.jsx("p",{className:"text-2xl font-bold text- ",children:(w=a==null?void 0:a.roomData)==null?void 0:w.RoomName}),e.jsxs("div",{className:" text-gray-800",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"text-primary-green font-bold text-xl ",children:_(p.price)}),e.jsx(be,{})]}),e.jsx("p",{className:"text-[11px] font-medium text-red-500",children:"High demand Â· lock this rate now"})]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Incl. taxes"})]})]}),e.jsxs("div",{className:"hidden md:flex flex-col items-end  justify-end w-full lg:w-[490px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>l(d,"decrement"),children:e.jsx(de,{})}),e.jsx("span",{children:p.guestQty>1?`${p.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>l(d,"increment"),children:e.jsx(xe,{})})]}),p.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-40 right-0 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(u=a==null?void 0:a.roomData)==null?void 0:u.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:h,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>n(j=>{const P=[...j];return P[d].showMaxGuestAlert=!1,P}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]}),e.jsxs("div",{className:"w-full md:hidden ",children:[e.jsx("p",{className:"text-lg md:text-2xl font-bold text- ",children:(f=a==null?void 0:a.roomData)==null?void 0:f.RoomName}),e.jsxs("div",{className:"flex justify-between mt-4 gap-2 w-full",children:[e.jsxs("div",{className:" text-gray-800",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"text-primary-green font-bold text-md md:text-xl ",children:_(p.price)}),e.jsx(be,{})]}),e.jsx("p",{className:"text-[10px] font-medium text-red-500",children:"Hurry! Limited rooms at this rate"})]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Incl. taxes"})]}),e.jsxs("div",{className:"md:hidden flex flex-col justify-end  gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full text-xs  border border-primary-yellow p-1 gap-1 rounded-md text-primary-yellow font-medium md:text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>l(d,"decrement"),children:e.jsx(de,{})}),e.jsx("span",{children:p.guestQty>1?`${p.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>l(d,"increment"),children:e.jsx(xe,{})})]}),p.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-40 right-2 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(me,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(E=a==null?void 0:a.roomData)==null?void 0:E.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:h,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>n(j=>{const P=[...j];return P[d].showMaxGuestAlert=!1,P}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]})]})]})]}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:gap-4",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2 pl-4 md:pl-0",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${d}`,value:"roomOnly",checked:p.option==="roomOnly",onChange:()=>o(d,"roomOnly"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${d}`,value:"continental",checked:p.option==="continental",onChange:()=>o(d,"continental"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]},d)}),s.length<=0&&e.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},ls=()=>{var y,N,w;const{details:s,setEditAddPricing:r}=q(),i=localStorage.getItem("hotelInfo"),n=i?JSON.parse(i):null,c=localStorage.getItem("checkInDate"),t=localStorage.getItem("checkOutDate"),o=c?new Date(c):null,l=t?new Date(t):null,h=D(),a=()=>o&&l?Oe(l,o):0,d=()=>{var f,E;r(!0),localStorage.setItem("editAddPricing","true");const u=(n==null?void 0:n.name)||((f=s[0])==null?void 0:f.name);h(Ce((E=s[0])==null?void 0:E.hotelCode,u))},p=({date:u,label:f,time:E,isCheckOut:j=!1})=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"text-mobile/title md:text-desktop/h5/medium font-medium capitalize text-gray-900",children:u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx("span",{className:"font-bold",children:J(u,"dd MMM, ")})," ",J(u,"EEE")]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("span",{className:"font-bold",children:J(u,"dd MMM, ")})," ",J(u,"EEEE")]})]}):e.jsxs("span",{className:"text-gray-400",children:["Select ",f.toLowerCase()]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm capitalize hidden md:block  font-medium text-gray-600  tracking-wide",children:f}),e.jsx("div",{className:"text-xs md:text-sm font-semibold text-gray-500",children:E||(j?"11:00 am":"1:00 pm")})]})]}),x=a();return e.jsxs("div",{className:" border-b-2",children:[e.jsxs("div",{className:"md:mb-4 mb-2",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-bold md:font-bold text-gray-900 md:mb-2",children:n==null?void 0:n.name}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:(y=n==null?void 0:n.location)==null?void 0:y.hotelAddress})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center gap-4 ",children:[e.jsx(p,{date:o,label:"Check-in",time:(N=s[0])==null?void 0:N.checkIn}),e.jsx($e,{className:"text-primary-yellow text-2xl mb-1"}),e.jsx(p,{date:l,label:"Check-out",time:(w=s[0])==null?void 0:w.checkOut,isCheckOut:!0}),x>0&&e.jsxs("div",{className:"border-primary-yellow border text-primary-yellow px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[x," ",x===1?"Night":"Nights"]})]})}),e.jsx("button",{onClick:d,className:"inline-flex items-center  mb-2 text-primary-yellow underline font-medium transition-colors duration-200 ",children:e.jsx("span",{children:"Modify Date/Room Selection  "})})]})},is=(s,r)=>{if(!s||!r)return 0;const i=new Date(s),n=new Date(r),c=Math.abs(n-i);return Math.ceil(c/(1e3*60*60*24))},_s=()=>{var S,$,O,k;const{ContactUsDetail:s}=we(),{details:r,hotelData:i}=q(),n=r[0],c=D(),[t,o]=A.useState(!1),l=localStorage.getItem("user_email"),{data:h}=ee(l),[a,d]=A.useState(!1),p=localStorage.getItem("hotelInfo"),x=JSON.parse(p),y=localStorage.getItem("checkInDate"),N=localStorage.getItem("checkOutDate"),w=is(y,N),[u,f]=A.useState(!1),[E,j]=A.useState(!0),P=A.useRef();return A.useEffect(()=>{const I=()=>{const b=document.getElementById("payment-method");if(!b)return;const L=b.getBoundingClientRect(),v=window.innerHeight||document.documentElement.clientHeight,z=L.top<=v*.9&&L.bottom>=v*.1;f(B=>B===z?B:z)};return I(),window.addEventListener("scroll",I,{passive:!0}),window.addEventListener("resize",I),()=>{window.removeEventListener("scroll",I),window.removeEventListener("resize",I)}},[]),A.useEffect(()=>{u?setTimeout(()=>j(!1),300):j(!0)},[u]),A.useEffect(()=>{(!r||r.length===0||!n)&&c(`/hotels/${x==null?void 0:x.hotelCode}`)},[r,i,n,c,x]),!r||r.length===0||!n?null:e.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green overflow-hidden",children:[e.jsxs(Ue,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsxs("div",{className:"content flex gap-3 md:gap-5 lg:gap-6 flex-col py-3 md:py-6 lg:py-10 px-3 md:px-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center cursor-pointer gap-2 md:gap-6 text-white",onClick:()=>c(-1),children:[e.jsx("button",{"aria-label":"Go back",className:"flex items-center flex-shrink-0",children:e.jsx(Ye,{className:"text-white h-5 w-5 sm:h-6 sm:w-6 md:h-9 md:w-9"})}),e.jsx("img",{src:"/images/Logo/logo.svg",alt:n==null?void 0:n.name,className:"w-[100px] sm:w-[120px] md:w-[150px]"})]}),e.jsx("div",{className:"flex-shrink-0",children:l?e.jsxs("div",{onClick:()=>c("/user/profile"),className:"bg-white cursor-pointer text-primary-yellow font-bold w-10 h-10 sm:w-12 sm:h-12 md:h-12 md:w-12 rounded-full flex items-center justify-center text-sm sm:text-base",children:[($=(S=h==null?void 0:h.data.firstName)==null?void 0:S[0])==null?void 0:$.toUpperCase(),(k=(O=h==null?void 0:h.data.lastName)==null?void 0:O[0])==null?void 0:k.toUpperCase()]}):e.jsx("button",{onClick:()=>d(!0),className:"border-2 border-primary-yellow text-primary-yellow px-3 py-1.5 sm:px-4 sm:py-2 rounded-full font-bold text-sm sm:text-base hover:bg-primary-yellow hover:text-white transition",children:"Login"})}),a&&e.jsx(ke,{closeModal:()=>d(!1)})]}),e.jsx("div",{className:"text-white  text-mobile/head md:text-desktop/head",children:"Booking Details"})]}),e.jsxs("div",{className:"md:flex gap-5 content bg-white py-6 md:py-0 rounded-t-3xl overflow-visible relative",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:px-8 md:py-10 gap-4 md:gap-8 min-w-0",children:[e.jsx(ls,{}),e.jsx(os,{}),n.addToYourStay.length>0&&e.jsx(as,{data:n}),e.jsx(Ae,{ref:P,setIsVerified:o}),e.jsx(rs,{hotelDetail:n,checkIn:y,verified:t}),e.jsx(ss,{hotelDetail:n,verified:t,checkIn:y,checkOut:N}),e.jsx("div",{className:"xl:hidden",children:e.jsx(ye,{hotelDetail:n,checkIn:y,checkOut:N,days:w,showButton:E,isPaymentVisible:u})}),e.jsx(Je,{ContactUsDetail:s})]}),e.jsx("div",{className:"hidden xl:block xl:w-[420px] flex-shrink-0 px-8 py-10",children:e.jsx(ye,{hotelDetail:n,checkIn:y,checkOut:N,days:w,showButton:E,isPaymentVisible:u})})]})]})};export{_s as default};
