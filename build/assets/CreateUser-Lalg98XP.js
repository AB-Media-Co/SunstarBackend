var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,s,l)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,t=(e,a)=>{for(var s in a||(a={}))r.call(a,s)&&i(e,s,a[s]);if(l)for(var s of l(a))n.call(a,s)&&i(e,s,a[s]);return e},d=(e,l)=>a(e,s(l));import{r as o,j as c,_ as x}from"./react-vendor-tq68JOgp.js";import{e as m}from"./index-BZBH8CwT.js";import{useGetHotels as h}from"./useHotelHook2-lvucTAR8.js";import{am as u,a7 as j,o as p,ar as v,q as g,$ as b,a0 as f,a1 as w,D as y,as as C,at as H,au as I,av as S,p as W,w as P,V as A,e as M,ad as O,a8 as q,aw as E,a9 as k,aa as D,ab as U,ac as R,ax as _,h as z,af as B}from"./ui-vendor-DiJ4VKpG.js";import"./animation-vendor-DJegggv9.js";import"./vendor-DwD9zxym.js";import"./query-vendor-iDpT9gG9.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";const N=()=>{const[e,a]=o.useState(0),[s,l]=o.useState({username:"",email:"",phone:"",gender:"",age:"",role:"",password:"",allowedCities:"",allowedHotels:[]}),{data:r}=h(),{mutate:n,isLoading:i}=m(),N=["Basic Information","Personal Details","Role & Security","Access Control"],V=e=>{const{name:a,value:r}=e.target;l(d(t({},s),"allowedHotels"===a?{[a]:"string"==typeof r?r.split(","):r}:{[a]:r}))},G=e=>{switch(e){case 0:return s.username&&s.email&&s.phone;case 1:return s.gender&&s.age;case 2:return s.role&&s.password;case 3:return!0;default:return!1}};return c.jsx(u,{maxWidth:"lg",sx:{mt:15,mb:5,minHeight:"80vh"},children:c.jsxs(j,{elevation:3,sx:{p:4,borderRadius:2},children:[c.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:4},children:[c.jsx(v,{fontSize:"large",sx:{color:"primary.main",mr:2}}),c.jsx(g,{variant:"h4",component:"h1",color:"primary.main",fontWeight:"500",children:"Create New User"})]}),c.jsx(b,{activeStep:e,alternativeLabel:!0,sx:{mb:4},children:N.map((e=>c.jsx(f,{children:c.jsx(w,{children:e})},e)))}),c.jsxs(p,{component:"form",onSubmit:e=>{e.preventDefault();const r=d(t({},s),{allowedCities:s.allowedCities?s.allowedCities.split(",").map((e=>e.trim())):[],allowedHotels:s.allowedHotels||[]});n(r,{onSuccess:()=>{x.success("User created successfully"),l({username:"",email:"",phone:"",gender:"",age:"",role:"",password:"",allowedCities:"",allowedHotels:[]}),a(0)},onError:e=>{x.error(e.message||"User creation failed")}})},noValidate:!0,children:[(e=>{switch(e){case 0:return c.jsx(W,{elevation:0,sx:{p:2},children:c.jsxs(P,{children:[c.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:3},children:[c.jsx(A,{sx:{bgcolor:"primary.main",mr:2},children:c.jsx(M,{})}),c.jsx(g,{variant:"h6",children:"Basic Information"})]}),c.jsx(O,{fullWidth:!0,label:"Username",name:"username",value:s.username,onChange:V,placeholder:"Enter username",required:!0,disabled:i,variant:"outlined",sx:{mb:3}}),c.jsxs(q,{container:!0,spacing:2,children:[c.jsx(q,{item:!0,xs:12,md:6,children:c.jsx(O,{fullWidth:!0,label:"Email",type:"email",name:"email",value:s.email,onChange:V,placeholder:"Enter email address",required:!0,disabled:i,variant:"outlined"})}),c.jsx(q,{item:!0,xs:12,md:6,children:c.jsx(O,{fullWidth:!0,label:"Phone Number",type:"tel",name:"phone",value:s.phone,onChange:V,placeholder:"Enter phone number",required:!0,disabled:i,variant:"outlined"})})]})]})});case 1:return c.jsx(W,{elevation:0,sx:{p:2},children:c.jsxs(P,{children:[c.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:3},children:[c.jsx(A,{sx:{bgcolor:"secondary.main",mr:2},children:c.jsx(E,{})}),c.jsx(g,{variant:"h6",children:"Personal Details"})]}),c.jsxs(q,{container:!0,spacing:2,children:[c.jsx(q,{item:!0,xs:12,md:12,children:c.jsxs(k,{fullWidth:!0,variant:"outlined",children:[c.jsx(D,{children:"Gender"}),c.jsxs(U,{name:"gender",value:s.gender,onChange:V,label:"Gender",required:!0,disabled:i,children:[c.jsx(R,{value:"",disabled:!0,children:"Select gender"}),c.jsx(R,{value:"male",children:"Male"}),c.jsx(R,{value:"female",children:"Female"}),c.jsx(R,{value:"other",children:"Other"})]})]})}),c.jsx(q,{item:!0,xs:12,md:12,children:c.jsx(O,{fullWidth:!0,label:"Age",type:"number",name:"age",value:s.age,onChange:V,placeholder:"Enter age",required:!0,disabled:i,variant:"outlined",InputProps:{inputProps:{min:18,max:100}}})})]})]})});case 2:return c.jsx(W,{elevation:0,sx:{p:2},children:c.jsxs(P,{children:[c.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:3},children:[c.jsx(A,{sx:{bgcolor:"error.main",mr:2},children:c.jsx(_,{})}),c.jsx(g,{variant:"h6",children:"Role & Security"})]}),c.jsxs(q,{container:!0,spacing:2,children:[c.jsx(q,{item:!0,xs:12,md:6,children:c.jsxs(k,{fullWidth:!0,variant:"outlined",children:[c.jsx(D,{children:"Role"}),c.jsxs(U,{name:"role",value:s.role,onChange:V,label:"Role",required:!0,disabled:i,children:[c.jsx(R,{value:"",disabled:!0,children:"Select role"}),c.jsx(R,{value:"superadmin",children:"SuperAdmin"}),c.jsx(R,{value:"admin",children:"Admin"}),c.jsx(R,{value:"manager",children:"Manager"}),c.jsx(R,{value:"contentManager",children:"Content Manager"}),c.jsx(R,{value:"cityManager",children:"City Manager"}),c.jsx(R,{value:"hotelManager",children:"Hotel Manager"}),c.jsx(R,{value:"digitalMarketer",children:"Digital Marketer"})]})]})}),c.jsx(q,{item:!0,xs:12,md:6,children:c.jsx(O,{fullWidth:!0,label:"Password",type:"password",name:"password",value:s.password,onChange:V,placeholder:"Enter password",required:!0,disabled:i,variant:"outlined"})})]})]})});case 3:return c.jsx(W,{elevation:0,sx:{p:2},children:c.jsxs(P,{children:[c.jsxs(p,{sx:{display:"flex",alignItems:"center",mb:3},children:[c.jsx(A,{sx:{bgcolor:"success.main",mr:2},children:c.jsx(z,{})}),c.jsx(g,{variant:"h6",children:"Access Control"})]}),c.jsxs(q,{container:!0,spacing:2,children:[c.jsx(q,{item:!0,xs:12,md:6,children:c.jsx(O,{fullWidth:!0,label:"Allowed Cities",name:"allowedCities",value:s.allowedCities,onChange:V,placeholder:"e.g., city1, city2",disabled:i,variant:"outlined",helperText:"Enter cities separated by commas"})}),c.jsx(q,{item:!0,xs:12,md:6,children:c.jsxs(k,{fullWidth:!0,variant:"outlined",children:[c.jsx(D,{children:"Allowed Hotels"}),c.jsx(U,{multiple:!0,name:"allowedHotels",value:s.allowedHotels,onChange:V,label:"Allowed Hotels",disabled:i,renderValue:e=>c.jsx(p,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{const a=Array.isArray(null==r?void 0:r.hotels)?r.hotels.find((a=>a._id===e)):null;return c.jsx(B,{label:(null==a?void 0:a.name)||e,size:"small",color:"primary",variant:"outlined"},e)}))}),children:null==(a=null==r?void 0:r.hotels)?void 0:a.map((e=>c.jsx(R,{value:e._id,children:e.name},e._id)))})]})})]})]})});default:return"Unknown step"}var a})(e),c.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[c.jsx(y,{variant:"outlined",disabled:0===e||i,onClick:()=>{a((e=>e-1))},startIcon:c.jsx(C,{}),children:"Back"}),e===N.length-1?c.jsx(y,{type:"submit",variant:"contained",color:"success",disabled:i||!G(e),endIcon:i?c.jsx(H,{size:20}):c.jsx(I,{}),children:i?"Creating...":"Create User"}):c.jsx(y,{variant:"contained",onClick:()=>{a((e=>e+1))},disabled:!G(e),endIcon:c.jsx(S,{}),children:"Next"})]})]})]})})};export{N as CreateUser,N as default};
