var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(r)for(var a of r(t))l.call(t,a)&&s(e,a,t[a]);return e},u=(e,t,a)=>new Promise(((r,n)=>{var l=e=>{try{o(a.next(e))}catch(t){n(t)}},s=e=>{try{o(a.throw(e))}catch(t){n(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,s);o((a=a.apply(e,t)).next())}));import{h as i,l as d,g as c,_ as v}from"./react-vendor-tq68JOgp.js";import{c as y}from"./index-D89k_Hd_.js";const p={all:["venues"],list:e=>["venues","list",e],detail:e=>["venues","detail",e]},f=e=>u(void 0,null,(function*(){const{data:t}=yield y.post("/api/venues",e);return t})),m=e=>u(void 0,[e],(function*({id:e,updates:t}){const{data:a}=yield y.put(`/api/venues/${e}`,t);return a})),b=e=>u(void 0,null,(function*(){const{data:t}=yield y.delete(`/api/venues/${e}`);return t})),g=(e={},t={})=>i(o({queryKey:p.list(e),queryFn:()=>((...e)=>u(void 0,[...e],(function*(e={}){const{data:t}=yield y.get("/api/venues",{params:e});return t})))(e),keepPreviousData:!0,staleTime:6e4},t)),h=()=>{const e=d();return c({mutationFn:f,onSuccess:t=>{var a;e.invalidateQueries({queryKey:p.all}),(null==(a=null==t?void 0:t.data)?void 0:a._id)&&e.setQueryData(p.detail(t.data._id),t),v.success("Venue created successfully")},onError:e=>{var t,a;v.error((null==(a=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:a.message)||"Failed to create venue")}})},O=()=>{const e=d();return c({mutationFn:m,onSuccess:t=>{const a=null==t?void 0:t.data;(null==a?void 0:a._id)&&e.setQueryData(p.detail(a._id),t),e.invalidateQueries({queryKey:p.all}),v.success("Venue updated successfully")},onError:e=>{var t,a;v.error((null==(a=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:a.message)||"Failed to update venue")}})},Q=()=>{const e=d();return c({mutationFn:b,onMutate:r=>u(void 0,null,(function*(){yield e.cancelQueries({queryKey:p.all});const n=e.getQueriesData({queryKey:p.all});return n.forEach((([n,l])=>{var s;if(!(null==l?void 0:l.data))return;const u=(i=o({},l),d={data:l.data.filter((e=>e._id!==r)),total:Math.max(0,(null!=(s=l.total)?s:0)-1)},t(i,a(d)));var i,d;e.setQueryData(n,u)})),{prevLists:n}})),onError:(t,a,r)=>{var n,l,s;null==(n=null==r?void 0:r.prevLists)||n.forEach((([t,a])=>{e.setQueryData(t,a)})),v.error((null==(s=null==(l=null==t?void 0:t.response)?void 0:l.data)?void 0:s.message)||"Failed to delete venue")},onSuccess:()=>{v.success("Venue deleted successfully")},onSettled:()=>{e.invalidateQueries({queryKey:p.all})}})};export{h as a,O as b,Q as c,g as u};
