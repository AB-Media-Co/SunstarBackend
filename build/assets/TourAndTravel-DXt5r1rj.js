import{j as e}from"./ui-vendor-ib5n1sau.js";import{a as s}from"./react-vendor-TJBKpoaW.js";import{u as a,a as t,b as i,c as l,d as r,e as n,f as d,g as o}from"./useTravelPackagesHook-pYEL9Sf9.js";import{M as c}from"./MultipleImageUpload-D5e4i9gV.js";import{I as m}from"./ImageUpload-DjYKuoa9.js";import{d as u}from"./index-Bl04lSVd.js";import{uploadImagesAPIV2 as g}from"./useHotelHook2-Dg3SXKg3.js";import"./query-vendor-B-W3jWpx.js";const x=()=>{const{data:x=[]}=a(),{data:h=[]}=t(),b=i(),p=l(),j=r(),f=n(),y=d(),v=o(),[N,w]=s.useState({name:"",image:""}),[k,S]=s.useState(""),[C,I]=s.useState(""),[P,A]=s.useState(""),[_,U]=s.useState(""),[D,T]=s.useState(""),[E,M]=s.useState(""),[R,H]=s.useState(!1),[F,q]=s.useState(!1),[B,J]=s.useState("states"),[V,z]=s.useState([]),[G,K]=s.useState(!1),[L,O]=s.useState({_id:void 0,stateId:"",title:"",image:"",images:V,duration:{nights:"",days:""},price:"",highlights:[],inclusions:[],exclusions:[],description:"",itinerary:[],topSelling:!1}),Q=(e,s)=>{w((a=>({...a,[e]:s})))},W=(e,s)=>{if(e.includes("duration.")){const a=e.split(".")[1];O((e=>({...e,duration:{...e.duration,[a]:s}})))}else O("topSelling"===e?e=>({...e,topSelling:!e.topSelling}):"images"===e?e=>({...e,images:s}):"image"===e?e=>{const a=(Array.isArray(e.images)?e.images:[]).filter((e=>e!==s)),t=s?[s,...a]:a;return{...e,image:s,images:t}}:a=>({...a,[e]:s}))},X=()=>{O({_id:void 0,stateId:"",title:"",image:"",images:[],duration:{nights:"",days:""},price:"",highlights:[],inclusions:[],exclusions:[],description:"",itinerary:[],topSelling:!1}),z([])},Y=()=>w({_id:"",name:"",image:""});return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 bg-gray-50 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Tour and Travel Management"}),e.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx("button",{className:"py-2 px-4 font-medium "+("states"===B?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>J("states"),children:"States"}),e.jsx("button",{className:"py-2 px-4 font-medium "+("packages"===B?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>J("packages"),children:"Packages"}),e.jsx("button",{className:"py-2 px-4 font-medium "+("view"===B?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>J("view"),children:"View Packages"})]}),"states"===B&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Create New State"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Name"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter state name",value:N.name,onChange:e=>Q("name",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Image"}),e.jsx(m,{feature:N,handleFeatureChange:Q,setImageUpload:H,index:0})]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:()=>{N.name&&N.image?N._id?y.mutate(N,{onSuccess:Y}):b.mutate(N,{onSuccess:Y}):alert("Please fill in State Name and Image")},disabled:R,children:R?"Uploading…":N._id?"Update State":"Create State"}),N._id&&e.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:Y,children:"Cancel"})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mt-10 mb-4",children:"All States"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map((s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:s.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>(e=>{w(e),window.scrollTo({top:0,behavior:"smooth"})})(s),className:"bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium px-3 py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>{return e=s._id,void(window.confirm("Delete this state?")&&v.mutate(e));var e},className:"bg-red-600 hover:bg-red-700 text-white text-xs font-medium px-3 py-1 rounded",children:"Delete"})]})]})]},s._id)))})]}),"packages"===B&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:L._id?"Edit Package":"Create New Package"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select State*"}),e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:L.stateId,onChange:e=>W("stateId",e.target.value),children:[e.jsx("option",{value:"",children:"Select State"}),x.map((s=>e.jsx("option",{value:s._id,children:s.name},s._id)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Title*"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter package title",value:L.title,onChange:e=>W("title",e.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Main Image *"}),e.jsx(m,{feature:{image:L.image||""},handleFeatureChange:(e,s)=>{"image"===e&&W("image",s)},setImageUpload:q,index:101}),L.image&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:L.image,alt:"Main preview",className:"w-28 h-20 object-cover rounded border"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Image*"}),e.jsx(c,{onUploadSuccess:async e=>{if(0!==e.length){K(!0);try{const s=await g(e),a=(Array.isArray(s)?s:[s])[0].imageUrls;z((e=>[...e,...a])),O((e=>({...e,images:[...e.images||[],...a]}))),u.success("Images uploaded successfully!")}catch(s){u.error("Error uploading images")}K(!1)}else u.error("No images selected")},isUploading:G,imagesUrls:L.images,onRemoveImageUrl:e=>{O((s=>{const a=(s.images||[]).filter((s=>s!==e)),t=s.image===e?a[0]||"":s.image;return{...s,images:a,image:t}}))}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nights"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Number of nights",value:L.duration.nights,onChange:e=>W("duration.nights",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Days"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Number of days",value:L.duration.days,onChange:e=>W("duration.days",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (₹)"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Package price",value:L.price,onChange:e=>W("price",e.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:"Package description",value:L.description,onChange:e=>W("description",e.target.value)})]}),e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{type:"checkbox",id:"topSelling",checked:L.topSelling,onChange:()=>W("topSelling"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"topSelling",className:"ml-2 block text-sm text-gray-700",children:"Mark as Top Selling Package"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Itinerary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Day (e.g., Day 1)",value:_,onChange:e=>U(e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Title (e.g., Arrival at Jammu)",value:D,onChange:e=>T(e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Details (e.g., Pickup from airport)",value:E,onChange:e=>M(e.target.value)})]})]}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200 mb-4",onClick:()=>{if(!_||!D||!E)return;const e={day:_,title:D,details:E};O((s=>({...s,itinerary:[...s.itinerary,e]}))),U(""),T(""),M("")},children:"Add Itinerary Item"}),e.jsx("div",{className:"space-y-3",children:L.itinerary.map(((s,a)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800",children:s.day}),e.jsx("h5",{className:"font-medium text-gray-800",children:s.title}),e.jsx("p",{className:"text-gray-600",children:s.details})]}),e.jsx("button",{className:"text-red-600 hover:text-red-800 ml-2",onClick:()=>(e=>{O((s=>({...s,itinerary:s.itinerary.filter(((s,a)=>a!==e))})))})(a),children:"Remove"})]})},a)))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Highlights"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:k,onChange:e=>S(e.target.value),placeholder:"Add highlight"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{O((e=>({...e,highlights:[...e.highlights,k]}))),S("")},children:"Add"})]}),e.jsx("ul",{className:"space-y-1",children:L.highlights.map(((s,a)=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[e.jsx("span",{children:s}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>O((e=>({...e,highlights:e.highlights.filter(((e,s)=>s!==a))}))),children:"Remove"})]},a)))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Inclusions"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:C,onChange:e=>I(e.target.value),placeholder:"Add inclusion"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{O((e=>({...e,inclusions:[...e.inclusions,C]}))),I("")},children:"Add"})]}),e.jsx("ul",{className:"space-y-1",children:L.inclusions.map(((s,a)=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[e.jsx("span",{children:s}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>O((e=>({...e,inclusions:e.inclusions.filter(((e,s)=>s!==a))}))),children:"Remove"})]},a)))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Exclusions"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:P,onChange:e=>A(e.target.value),placeholder:"Add exclusion"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{O((e=>({...e,exclusions:[...e.exclusions,P]}))),A("")},children:"Add"})]}),e.jsx("ul",{className:"space-y-1",children:L.exclusions.map(((s,a)=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[e.jsx("span",{children:s}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>O((e=>({...e,exclusions:e.exclusions.filter(((e,s)=>s!==a))}))),children:"Remove"})]},a)))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:()=>{L.stateId&&L.title?L.image?L._id?f.mutate(L,{onSuccess:X}):p.mutate(L,{onSuccess:X}):alert("Please upload the Main Image"):alert("Please fill in required fields (State and Title)")},disabled:R,children:R?"Uploading...":L._id?"Update Package":"Create Package"}),L._id&&e.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:X,children:"Cancel"})]})]}),"view"===B&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"All Packages"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-48 object-cover"}),s.topSelling&&e.jsx("span",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Top Selling"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["₹",s.price]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.duration.nights,"N/",s.duration.days,"D"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-1 px-3 rounded text-sm transition duration-200",onClick:()=>(e=>{const s=e.image||Array.isArray(e.images)&&e.images[0]||"";O({...e,image:s}),z(e.images||[]),J("packages"),window.scrollTo({top:0,behavior:"smooth"})})(s),children:"Edit"}),e.jsx("button",{className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-1 px-3 rounded text-sm transition duration-200",onClick:()=>{return e=s._id,void(window.confirm("Are you sure you want to delete this package?")&&j.mutate(e));var e},children:"Delete"})]})]})]},s._id)))})]})]})};export{x as default};
