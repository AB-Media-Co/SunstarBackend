var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(l,a,s)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s;import{r as o,q as i,j as d,v as m}from"./react-vendor-tq68JOgp.js";import{a as c,f as x,g as u}from"./index-D89k_Hd_.js";import{L as g}from"./Loader-BEd0M6qd.js";import{ay as j,az as p,E as b}from"./ui-vendor-DiJ4VKpG.js";import"./animation-vendor-DJegggv9.js";import"./vendor-DwD9zxym.js";import"./query-vendor-iDpT9gG9.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";const f=()=>{const{adminProfile:e,profileLoading:f,profileError:y}=c(),[w,N]=o.useState(!1),[C,P]=o.useState({}),{mutate:S,isLoading:A}=x();if(u(),i(),f)return d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx(g,{fullScreen:!1,size:"md"})});if(y)return d.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[d.jsx("h2",{className:"text-2xl font-semibold text-red-600 mb-2",children:"Error Loading Profile"}),d.jsx("p",{className:"text-gray-600",children:y.message||"Something went wrong. Please try again later."})]});if(!e)return d.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[d.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Profile Not Found"}),d.jsx("p",{className:"text-gray-600",children:"Please check if the user exists or refresh the page."})]});const{username:H,email:O,phone:z,role:E,gender:L,age:F,allowedCities:D,allowedHotels:k,createdAt:q,updatedAt:G}=e.data,U=e=>{var o,i;P((o=((e,l)=>{for(var a in l||(l={}))t.call(l,a)&&n(e,a,l[a]);if(s)for(var a of s(l))r.call(l,a)&&n(e,a,l[a]);return e})({},C),i={[e.target.name]:e.target.value},l(o,a(i))))};return d.jsx("div",{className:"flex items-center justify-center min-h-screen pt-16 bg-gray-50 px-4",children:d.jsxs("div",{className:"w-full max-w-2xl relative flex flex-col bg-white rounded-lg shadow-md border border-gray-200",children:[d.jsxs("div",{className:"bg-gray-100 px-8 py-6 text-center",children:[d.jsx("div",{className:"w-20 h-20 capitalize mx-auto rounded-full bg-gray-200 flex items-center justify-center text-4xl font-semibold text-gray-700",children:H[0].toUpperCase()}),d.jsx("h2",{className:"text-2xl font-semibold mt-4 text-gray-800",children:H}),d.jsx("p",{className:"text-sm font-medium text-gray-500 capitalize",children:E})]}),d.jsx("div",{className:"p-8 flex flex-col w-full gap-6 bg-gray-50",children:w?d.jsxs(d.Fragment,{children:[d.jsx(h,{label:"Name",name:"username",value:C.username,onChange:U}),d.jsx(h,{label:"Email",name:"email",value:C.email,onChange:U}),d.jsx(h,{label:"Phone",name:"phone",value:C.phone,onChange:U}),d.jsx(h,{label:"Gender",name:"gender",value:C.gender,onChange:U}),d.jsx(h,{label:"Age",name:"age",value:C.age,onChange:U,type:"number"}),d.jsx(h,{label:"Allowed Cities (comma-separated)",name:"allowedCities",value:C.allowedCities,onChange:U}),d.jsx(h,{label:"Allowed Hotels (comma-separated)",name:"allowedHotels",value:C.allowedHotels,onChange:U})]}):d.jsxs(d.Fragment,{children:[d.jsx(v,{label:"Name",value:H}),d.jsx(v,{label:"Email",value:O}),d.jsx(v,{label:"Phone",value:z}),d.jsx(v,{label:"Gender",value:L}),d.jsx(v,{label:"Age",value:F}),d.jsx(v,{label:"Role",value:E}),d.jsx(v,{label:"Allowed Cities",value:D.join(", ")||"None"}),d.jsx(v,{label:"Allowed Hotels",value:k.join(", ")||"None"}),d.jsx(v,{label:"Created At",value:new Date(q).toLocaleDateString()}),d.jsx(v,{label:"Updated At",value:new Date(G).toLocaleDateString()})]})}),d.jsx("div",{className:"flex absolute right-0 justify-end p-6 gap-4 bg-gray-100",children:w?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>{const e={username:null==C?void 0:C.username,email:null==C?void 0:C.email,phone:null==C?void 0:C.phone,gender:null==C?void 0:C.gender,age:null==C?void 0:C.age,allowedCities:C.allowedCities?C.allowedCities.split(",").map((e=>e.trim())):[],allowedHotels:C.allowedHotels?C.allowedHotels.split(",").map((e=>e.trim())):[]};S(e,{onSuccess:()=>{m.success("Profile updated successfully"),N(!1)},onError:e=>{m.error(e.message||"Failed to update profile")}})},disabled:A,className:"p-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center "+(A?"opacity-50 cursor-not-allowed":""),children:d.jsx(j,{fontSize:"small"})}),d.jsx("button",{onClick:()=>N(!1),className:"p-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 flex items-center",children:d.jsx(p,{fontSize:"small"})})]}):d.jsx(d.Fragment,{children:d.jsx("button",{onClick:()=>{N(!w),P({username:H,email:O,phone:z,gender:L,age:F,allowedCities:D.join(","),allowedHotels:k.join(",")})},className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",children:d.jsx(b,{fontSize:"small"})})})})]})})},h=({label:e,name:l,value:a,onChange:s,type:t="text"})=>d.jsxs("div",{className:"flex flex-col",children:[d.jsx("label",{className:"text-sm font-medium text-gray-500 mb-1",children:e}),d.jsx("input",{type:t,name:l,value:a,onChange:s,className:"px-4 py-2 border rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),v=({label:e,value:l})=>d.jsxs("div",{className:"flex justify-between w-full items-center border-b last:border-0 pb-2",children:[d.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[e,":"]}),d.jsx("span",{className:"text-sm text-gray-800",children:l})]});export{f as default};
