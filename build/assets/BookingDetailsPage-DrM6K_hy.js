var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,s,l)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[s]=l,n=(e,t)=>{for(var s in t||(t={}))a.call(t,s)&&o(e,s,t[s]);if(l)for(var s of l(t))r.call(t,s)&&o(e,s,t[s]);return e},i=(e,l)=>t(e,s(l)),d=(e,t,s)=>new Promise(((l,a)=>{var r=e=>{try{n(s.next(e))}catch(t){a(t)}},o=e=>{try{n(s.throw(e))}catch(t){a(t)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,o);n((s=s.apply(e,t)).next())}));import{j as c,L as m,g as x,_ as u,r as h,q as p,al as g,am as f,an as y,ao as v,ap as b,U as j,aq as N,ar as w,as as k,H as C}from"./react-vendor-tq68JOgp.js";import{u as D}from"./useUpdatePagesHook-9YRdH3R2.js";import{c as S,u as P}from"./index-BZBH8CwT.js";import{u as I}from"./useUser-CBPm2_WT.js";import{u as _}from"./pushBookingHook-HB-Q8-ZB.js";import{f as A}from"./formatCurrency-D9YqnSEn.js";import{d as O,e as R}from"./useOffersAndDealsHook-nQaB0NFI.js";import"./vendor-DwD9zxym.js";import{L as E}from"./LoginModal-CSJ_TPij.js";import{b1 as M,an as L,b2 as B,aZ as z}from"./ui-vendor-DiJ4VKpG.js";import{g as G}from"./urlHelper-B-upFRYv.js";import{e as $,l as F}from"./date-vendor-9E3U4XI3.js";import"./animation-vendor-DJegggv9.js";import"./query-vendor-iDpT9gG9.js";import"./swiper-vendor-DEzR9mKq.js";import"./Loader-BEd0M6qd.js";const T=({ContactUsDetail:e})=>{const t=(null==e?void 0:e.phoneNumber)||"";return c.jsx("footer",{className:"w-full md:border-t border-gray-200",children:c.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex flex-col gap-6 py-6 text-gray-600   md:justify-between md:gap-10 md:py-8",children:[c.jsxs("div",{className:"flex justify-between gap-2 sm:gap-3",children:[c.jsx("p",{className:"text-base font-semibold tracking-tight sm:text-lg md:text-2xl",children:"Facing an issue? Call us for assistance."}),t?c.jsx("a",{href:`tel:${t}`,className:"w-fit text-lg font-semibold underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-xl","aria-label":`Call ${t}`,children:c.jsx("span",{className:"whitespace-nowrap",children:t})}):c.jsx("span",{className:"text-sm text-gray-500 sm:text-base",children:"Phone number unavailable"})]}),c.jsxs("nav",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 sm:gap-x-8","aria-label":"Footer navigation",children:[c.jsx(m,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Cancellation Policy"}),c.jsx(m,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Terms & Conditions"})]})]})})})},H=({hotelDetail:e,amount:t,onSuccess:s})=>{const l=x({mutationFn:e=>d(void 0,null,(function*(){return(yield S.post("/api/payments/create",e)).data})),onSuccess:()=>{u.success("Order created successfully")},onError:e=>{var t,s;u.error("Failed to create order: "+((null==(s=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:s.message)||e.message))}}),a=x({mutationFn:e=>d(void 0,null,(function*(){return(yield S.post("/api/payments/verify",e)).data})),onSuccess:()=>{u.success("Payment verified successfully")},onError:e=>{var t,s;u.error("Payment verification failed: "+((null==(s=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:s.message)||e.message))}}),r={14496:"rzp_live_KZSDFi3qOgrIgC",14492:"rzp_live_IQdcqeX4foVUM3",14494:"rzp_live_SxbRIhkDqyGEOM",14493:"rzp_live_uUlevuP8MoleGg"}[null==e?void 0:e.hotelCode];return c.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:()=>{const o={amount:t,currency:"INR",hotelCode:null==e?void 0:e.hotelCode};l.mutate(o,{onSuccess:t=>{const l={key:r,amount:t.amount,currency:t.currency,name:null==e?void 0:e.hotelName,description:"Hotel Booking Payment",order_id:t.id,handler:function(t){const l={razorpay_order_id:t.razorpay_order_id,razorpay_payment_id:t.razorpay_payment_id,razorpay_signature:t.razorpay_signature,hotelCode:null==e?void 0:e.hotelCode};a.mutate(l,{onSuccess:()=>{u.success("Payment Verified ✅"),s("PAID_TYPE_UNKID")}})},prefill:{name:"",email:"",contact:""},theme:{color:"#38b2ac"}};new window.Razorpay(l).open()},onError:()=>{u.error("Failed to create Razorpay order")}})},children:"Confirm Booking"})},U=({hotelDetail:e,verified:t,checkIn:s,checkOut:l})=>{const a=localStorage.getItem("user_email"),{data:r}=I(a),[o,n]=h.useState(""),{selectedRooms:i,setIsConfirmationModalOpen:d,someOneElse:m,guestData:x,setPaymentMethod:u,selectedOtherCharges:g}=P(),f=_(),y=p(),v=e=>{n(e),u(e)},b=(a="")=>{var n,d;if(!t&&!(null==(n=null==r?void 0:r.data)?void 0:n.isVerified))return void(null==(d=document.getElementById("guestDetail"))||d.scrollIntoView({behavior:"smooth"}));const c=Array.isArray(g)&&g.length>0?g.map((e=>{const t=(null==e?void 0:e.qty)?` x${e.qty}`:"",s=(null==e?void 0:e.note)?` (${e.note})`:"";return`${e.heading||""}${t}${s}`.trim()})).filter(Boolean).join(", "):"",u="pay-at-hotel"===o?"pay-at-hotel":a,h=c?`${u} | Add-ons: ${c}`:u,p={};i.forEach(((e,t)=>{var s;const l=parseInt(localStorage.getItem("days")),a=Array(l).fill(e.price).join(","),o=Array(l).fill(0).join(","),n=Array(l).fill(0).join(",");p[`Room_${t+1}`]={Rateplan_Id:null==e?void 0:e.roomrateunkid,Ratetype_Id:e.RateTypeID,Roomtype_Id:e.RoomTypeID,baserate:a,extradultrate:o,extrachildrate:n,number_adults:(null==(s=e.guestQty)?void 0:s.toString())||"1",number_children:"0",ExtraChild_Age:"",Title:"",First_Name:m?x.firstName||"":(null==r?void 0:r.data.firstName)||"",Last_Name:m?x.lastName||"":(null==r?void 0:r.data.lastName)||"",Gender:(null==r?void 0:r.data.gender)||"",SpecialRequest:h}}));const v=c?`Add To Your Stay: ${c}`:"",b={BookingData:{Room_Details:p,check_in_date:s,check_out_date:l,Booking_Payment_Mode:"pay-at-hotel"===o?"0":"1",Email_Address:null==r?void 0:r.data.email,Source_Id:"",MobileNo:m?x.phone:(null==r?void 0:r.data.phone)||"",Address:(null==r?void 0:r.data.address)||"",State:(null==r?void 0:r.data.state)||"",Country:(null==r?void 0:r.data.country)||"",City:(null==r?void 0:r.data.city)||"",Zipcode:"",Fax:"",Device:"Web",Languagekey:"",paymenttypeunkid:a,remark:v},HotelCode:null==e?void 0:e.hotelCode,APIKey:null==e?void 0:e.authKey,userEmail:null==r?void 0:r.data.email};f.mutate(b,{onSuccess:t=>{var a,n,d,c;y("/thankyou",{state:{bookingResponse:t,payload:b,paymentMethod:o,checkIn:s,checkOut:l,hotelDetail:e,hotel:{hotelCode:null==e?void 0:e.hotelCode,name:null==e?void 0:e.hotelName,payAtHotel:null==e?void 0:e.payAtHotel},user:{email:null==(a=null==r?void 0:r.data)?void 0:a.email,firstName:null==(n=null==r?void 0:r.data)?void 0:n.firstName,lastName:null==(d=null==r?void 0:r.data)?void 0:d.lastName,phone:null==(c=null==r?void 0:r.data)?void 0:c.phone},rooms:i},replace:!0})}})};return f.isPending?c.jsxs("div",{className:"relative bg-white border-gray-100",children:[c.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"relative mb-6",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-primary-green rounded-full animate-spin mx-auto"}),c.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-r-teal-300 rounded-full animate-spin mx-auto",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Processing Your Booking"}),c.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your reservation..."}),c.jsx("div",{className:"flex items-center justify-center mt-3",children:c.jsxs("div",{className:"flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce"}),c.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),c.jsx("div",{className:"filter blur-sm pointer-events-none",children:c.jsx(V,{hotelDetail:e,selectedPaymentMethod:o,handlePaymentMethodChange:v,ContinueBtnClick:b,isLoading:!0})})]}):c.jsx(V,{hotelDetail:e,selectedPaymentMethod:o,handlePaymentMethodChange:v,ContinueBtnClick:b,isLoading:!1})},V=({hotelDetail:e,selectedPaymentMethod:t,handlePaymentMethodChange:s,ContinueBtnClick:l,isLoading:a})=>{const{finalPrice:r}=P();return c.jsxs("div",{id:"payment-method",className:"bg-white",children:[c.jsxs("div",{className:"mb-6 md:mb-8",children:[c.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-900 mb-1",children:"Payment Method"}),c.jsx("p",{className:"text-sm md:text-base text-gray-500",children:"Choose your preferred payment option"})]}),c.jsxs("div",{className:"space-y-3 md:space-y-4 mb-6 md:mb-8",children:[c.jsx(Q,{id:"pay-now",icon:c.jsx(g,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay and Book Now",description:"Complete your booking instantly with secure online payment",features:[{icon:c.jsx(f,{className:"w-4 h-4"}),text:"Instant confirmation"},{icon:c.jsx(y,{className:"w-4 h-4"}),text:"All major cards"},{icon:c.jsx(v,{className:"w-4 h-4"}),text:"5% discount"}],badge:{text:"Secure",color:"green"},discountBadge:{text:"Save 5%",color:"red"},isSelected:"pay-now"===t,onClick:()=>!a&&s("pay-now"),isLoading:a,isRecommended:!0}),"yes"===(null==e?void 0:e.payAtHotel)&&c.jsx(Q,{id:"pay-at-hotel",icon:c.jsx(b,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay at Hotel",description:"Reserve now and pay at check-in",features:[{icon:c.jsx(j,{className:"w-4 h-4"}),text:"No advance payment"},{icon:c.jsx(b,{className:"w-4 h-4"}),text:"Pay at reception"}],badge:{text:"Flexible",color:"orange"},isSelected:"pay-at-hotel"===t,onClick:()=>!a&&s("pay-at-hotel"),isLoading:a})]}),t&&c.jsx("div",{className:"flex justify-end mb-6 md:mb-8",children:"pay-now"===t?c.jsx(H,{hotelDetail:e,amount:r,onSuccess:e=>l(e)}):c.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:()=>l(),children:c.jsx("span",{children:"Confirm Booking"})})}),c.jsx("div",{className:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:c.jsxs("div",{className:"flex items-start gap-2 md:gap-3 text-xs md:text-sm text-gray-700",children:[c.jsx(y,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:"Your payment information is secured with 256-bit SSL encryption"})]})})]})},Q=({id:e,icon:t,title:s,description:l,features:a,badge:r,discountBadge:o,isSelected:n,onClick:i,isLoading:d,isRecommended:m=!1})=>{const x={green:"bg-green-100 text-green-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"};return c.jsxs("div",{className:`relative overflow-hidden rounded-lg md:rounded-xl border-2 transition-all duration-300 cursor-pointer group ${n?"border-primary-green bg-gradient-to-br from-teal-50 to-emerald-50 shadow-lg":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-md"} ${d?"pointer-events-none opacity-50":""}`,onClick:i,children:[m&&c.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(N,{className:"w-3 h-3"}),"RECOMMENDED"]})}),c.jsxs("label",{htmlFor:e,className:"flex items-start gap-3 md:gap-4 p-3 md:p-5 cursor-pointer",children:[c.jsx("input",{type:"radio",id:e,name:"payment-method",className:"w-4 h-4 md:w-5 md:h-5 mt-1 md:mt-0.5 text-teal-600 border-2 border-gray-300 focus:ring-primary-green flex-shrink-0",onChange:i,checked:n,disabled:d}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1 md:mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[c.jsx("div",{className:"p-1.5 md:p-2 rounded-lg flex-shrink-0 "+(n?"bg-primary-green":"bg-gray-100 group-hover:bg-teal-50"),children:c.jsx("div",{className:n?"text-white":"text-gray-600 group-hover:text-teal-600",children:t})}),c.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 truncate",children:s})]}),c.jsxs("div",{className:"flex flex-col gap-1",children:[r&&c.jsx("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-medium flex-shrink-0 whitespace-nowrap ${x[r.color]}`,children:r.text}),o&&c.jsxs("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-bold flex-shrink-0 whitespace-nowrap animate-pulse ${x[o.color]}`,children:[c.jsx(N,{className:"w-3 h-3"}),o.text]})]})]}),c.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-2 md:mb-3 line-clamp-2",children:l}),c.jsx("div",{className:"flex flex-wrap gap-2 md:gap-4 text-xs md:text-sm",children:a.map(((e,t)=>c.jsxs("div",{className:"flex items-center gap-1 "+(n?"text-teal-700":"text-gray-600"),children:[c.jsx("div",{className:n?"text-teal-600":"text-gray-400",children:e.icon}),c.jsx("span",{className:"whitespace-nowrap",children:e.text})]},t)))})]})]})]})},q=({days:e,showButton:t,isPaymentVisible:s})=>{const{selectedRooms:l,totalOtherCharges:a,finalPrice:r,baseFinalPrice:o,setNights:n,details:i}=P(),[d,m]=h.useState(!1);h.useEffect((()=>{e&&(n(e),localStorage.setItem("days",e))}),[e,n]);const x=o-r,u=x>0;return h.useEffect((()=>{const e=()=>{window.scrollY>220?m(!0):m(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),c.jsxs("div",{className:`md:p-6 p-4 bg-white md:border-2 border border-gray-200 rounded-2xl md:shadow-lg shadow-md w-full ${d?"md:w-[384px]":{}}  md:w-96 mx-auto  font-sans transition-all duration-300 ${d?"xl:fixed xl:top-4  ":"relative "}`,children:[c.jsx("div",{className:"bg-primary-green  p-4 -mx-4 md:-mx-6 -mt-4 md:-mt-6 rounded-t-2xl mb-6",children:c.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"Reservation Summary"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-bold text-gray-800 mb-4 pb-2 border-b-2 border-primary-green/20",children:"Your Price Summary"}),c.jsx("div",{className:"space-y-4 mb-5",children:null==l?void 0:l.map(((t,s)=>{var l,a,r,o,n;const d=i[s],m=(null==(l=null==d?void 0:d.roomData)?void 0:l.discountRate)||0,x=(null==(r=null==(a=null==d?void 0:d.continentalPlan)?void 0:a.rate)?void 0:r.amount)||0,u=(null==t?void 0:t.guestQty)||2,h=(null==(o=null==d?void 0:d.roomData)?void 0:o.baseAdultOccupancy)||2,p=(null==(n=null==d?void 0:d.roomData)?void 0:n.extraAdultRate)||0,g=u>h?u-h:0,f=g*p,y=x*u;return c.jsxs("div",{className:"space-y-3 pb-4 mb-4 border-b-2 border-dashed border-gray-200 last:border-0",children:[c.jsxs("div",{className:"flex justify-between items-start text-sm bg-gray-50 p-3 rounded-lg",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-gray-800 text-base",children:t.roomName}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Room Only (",h," ",1===h?"Adult":"Adults",") × ",e," ",1===e?"Night":"Nights"]})]}),c.jsx("p",{className:"font-bold text-gray-900 text-base",children:A(m*e)})]}),g>0&&p>0&&c.jsxs("div",{className:"flex justify-between items-start text-sm bg-orange-50 border-l-4 border-orange-500 p-3 rounded-r-lg",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-orange-700",children:"Extra Adult Charges"}),c.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[A(p)," × ",g," ",1===g?"Adult":"Adults"," × ",e," ",1===e?"Night":"Nights"]})]}),c.jsx("p",{className:"font-bold text-orange-700",children:A(f*e)})]}),"continental"===t.option&&x>0&&c.jsxs("div",{className:"flex justify-between items-start text-sm bg-green-50 border-l-4 border-primary-green p-3 rounded-r-lg",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-semibold text-primary-green",children:"Continental Breakfast"}),c.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[A(x)," × ",u," ",1===u?"Guest":"Guests"," × ",e," ",1===e?"Night":"Nights"]})]}),c.jsx("p",{className:"font-bold text-primary-green",children:A(y*e)})]})]},s)}))}),c.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-gray-700 py-3 px-4 bg-blue-50 rounded-lg border border-blue-200",children:[c.jsx("p",{className:"flex items-center gap-2",children:"Taxes & Other Charges"}),c.jsx("p",{className:"font-bold text-gray-900",children:A(a)})]})]}),c.jsxs("div",{className:"pt-4 mt-5 bg-gradient-to-br from-gray-50 to-gray-100 p-4 rounded-xl space-y-3 border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Base Price"}),c.jsx("span",{className:"font-semibold text-gray-900",children:A(o)})]}),u&&c.jsxs("div",{className:"flex justify-between items-center text-sm bg-green-50 -mx-4 px-4 py-2",children:[c.jsx("span",{className:"font-medium",children:"Pay Now Discount"}),c.jsxs("span",{className:"font-bold text-green-600",children:["-",A(x)]})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[c.jsx("span",{className:"font-medium",children:"Taxes & Fees"}),c.jsx("span",{className:"font-semibold text-gray-900",children:A(a)})]}),c.jsxs("div",{className:"flex justify-between items-center border-t-2 border-gray-300 pt-3 mt-3",children:[c.jsx("p",{className:"text-base md:text-lg font-bold text-gray-800",children:"Payable Amount"}),c.jsx("p",{className:"text-lg md:text-xl font-bold text-primary-green",children:A(r)})]})]}),t&&c.jsx("a",{href:"#payment-method",className:"hidden md:block w-full",children:c.jsx("button",{disabled:s,className:"mt-6 w-full py-4 font-bold text-white rounded-xl shadow-lg transition-all duration-300 transform hover:scale-[1.02] "+(s?"bg-gray-300 cursor-not-allowed shadow-none":"bg-gradient-to-r from-primary-green to-primary-dark-green hover:shadow-xl"),children:c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsx("span",{children:"See Payment Options"}),c.jsx("span",{className:"text-xl",children:"→"})]})})})]})},W=({hotelDetail:e,checkIn:t,verified:s})=>{const[l,a]=h.useState(""),[r,o]=h.useState([]),[,n]=h.useState(null),[i,m]=h.useState(!1),[x,p]=h.useState(null),{mutate:g,data:f}=O(),{mutateAsync:y}=R(),{finalPrice:v,setFinalPrice:b,baseFinalPrice:j,paymentMethod:N}=P(),w=localStorage.getItem("user_email"),{data:k,isLoading:C}=I(w),D=null!==localStorage.getItem("user_email");if(h.useEffect((()=>{e&&e._id&&D&&g(e._id)}),[g,e,D,k]),C)return c.jsx("div",{className:"flex items-center justify-center py-16",children:c.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[c.jsx("div",{className:"w-12 h-12 border-3 border-gray-200 border-t-primary-green rounded-full animate-spin"}),c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Loading offers..."})]})});if(!D)return c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 md:p-6",children:c.jsxs("div",{className:"flex flex-col items-center text-start md:text-center space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Unlock Exclusive Offers"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sign in to access special discounts and deals"})]}),c.jsxs("a",{href:"#guestDetail",onClick:e=>{u.error("Please verify your details")},className:"mt-4 inline-flex items-center gap-2 px-6 py-2.5 bg-primary-green text-white rounded-lg text-sm font-medium hover:bg-cyan-700 transition-colors",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6z"}),c.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Verify to Continue"]})]})});const S=()=>d(void 0,null,(function*(){var s,i;if(l.trim())if(r.some((e=>e.offerCode.toUpperCase()===l.trim().toUpperCase())))u.error("This promo code is already applied");else{m(!0);try{const s=yield y({hotelId:e._id,rate:v,offerCode:l.trim(),checkInDate:t});if(n(s),s.discountedRate){const e={offerCode:l.trim().toUpperCase(),description:s.description||"Discount applied",discountPercent:s.discountPercent||0,discountedRate:s.discountedRate};o((t=>[...t,e])),b(s.discountedRate),a(""),u.success("Offer applied successfully")}}catch(d){u.error((null==(i=null==(s=null==d?void 0:d.response)?void 0:s.data)?void 0:i.error)||"Error applying offer")}finally{m(!1)}}}));return c.jsxs("div",{className:"bg-white w-full",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Exclusive Offers"}),c.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"Apply a promo code to get discounts"})]}),r.length>0&&c.jsx("div",{className:"mb-3 pb-3  border-gray-200",children:c.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:r.map((e=>c.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-green-50 to-green-100 border border-green-300 rounded-full px-3 py-1",children:[c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#059669",strokeWidth:"2.5",className:"flex-shrink-0",children:c.jsx("polyline",{points:"20 6 9 17 4 12"})}),c.jsx("span",{className:"font-semibold text-primary-green text-sm",children:e.offerCode}),c.jsxs("span",{className:"text-xs text-primary-green font-medium",children:["(",e.discountPercent,"%)"]})]}),c.jsx("button",{onClick:()=>(e=>{const t=r.filter((t=>t.offerCode!==e));if(o(t),0===t.length)b(j);else{const e=t[t.length-1];b(e.discountedRate)}u.success("Promo code removed")})(e.offerCode),className:"ml-1 text-primary-green hover:text-primary-green-dark transition-colors flex-shrink-0",title:"Remove this promo code",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},e.offerCode)))})}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"flex gap-2 md:gap-3  flex-col md:flex-row",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",placeholder:"Enter promo code...",className:"w-full h-12 md:h-14 border border-gray-300 rounded-lg px-4 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:l,onChange:e=>a(e.target.value),onKeyPress:e=>"Enter"===e.key&&S()}),l&&c.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:S,disabled:!l.trim()||i,className:"h-12 md:h-14 px-6 w-auto bg-primary-green text-white rounded-lg font-medium hover:bg-cyan-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm",children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"hidden sm:inline",children:"Applying..."})]}):c.jsx(c.Fragment,{children:c.jsx("span",{className:"inline",children:"Apply Promo Code"})})})})]})}),0===r.length&&f&&f.length>0&&c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:f.map((s=>c.jsx("div",{onClick:()=>(s=>d(void 0,null,(function*(){var l,a;if(r.some((e=>e.offerCode===s.offerCode)))u.error("This promo code is already applied");else{m(!0);try{const l=yield y({hotelId:e._id,rate:v,offerCode:s.offerCode,checkInDate:t});if(!l.discountedRate)throw new Error("No discount rate returned");{const e={offerCode:s.offerCode,description:s.description,discountPercent:s.discountPercent,discountedRate:l.discountedRate};o((t=>[...t,e])),b(l.discountedRate),u.success("Offer applied successfully!")}}catch(n){u.error((null==(a=null==(l=null==n?void 0:n.response)?void 0:l.data)?void 0:a.error)||"Error applying offer")}finally{m(!1)}}})))(s),onMouseEnter:()=>p(s.offerCode),onMouseLeave:()=>p(null),className:"p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-cyan-500 hover:bg-cyan-50 transition-all group",children:c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:s.offerCode}),s.description&&c.jsxs("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1 capitalize",children:["apply this promo code to get ",s.discountPercent,"% off "]})]}),c.jsxs("div",{className:"flex-shrink-0 bg-cyan-100 text-cyan-700 px-3 py-1.5 rounded-lg font-semibold text-sm",children:[s.discountPercent,"%"]})]})},s.offerCode)))})})]})},Y=({data:e})=>{const t=null==e?void 0:e.addToYourStay,{selectedOtherCharges:s,setSelectedOtherCharges:l}=P();return c.jsxs("div",{className:"bg-white ",children:[c.jsxs("div",{className:"mb-6 md:mb-8",children:[c.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4  text-gray-900",children:"Add To Your Stay"}),c.jsx("p",{className:"text-gray-600 t md:text-desktop/body/1 mt-1",children:"Enhance your experience with optional add-ons"})]}),c.jsx("div",{className:"space-y-3 md:space-y-4",children:t.map((e=>{return c.jsx(K,{option:e,isSelected:(t=e._id,s.some((e=>e._id===t))),onToggle:t=>((e,t)=>{t&&t.stopPropagation(),l((t=>Array.isArray(t)&&t.find((t=>t._id===e._id))?t.filter((t=>t._id!==e._id)):[...t,e]))})(e,t)},e._id);var t}))})]})},K=({option:e,isSelected:t,onToggle:s})=>{var l,a;return c.jsxs("div",{className:"relative rounded-lg md:rounded-xl border-2 transition-all duration-300 overflow-hidden cursor-pointer "+(t?"border-teal-500 bg-teal-50 shadow-md":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-sm"),onClick:s,children:[c.jsx("div",{className:"p-4 md:p-5",children:c.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[c.jsx("div",{className:"w-5 h-5 md:w-6 md:h-6 rounded-md border-2 flex items-center justify-center flex-shrink-0 transition-all "+(t?"bg-teal-500 border-teal-500 shadow-sm":"border-gray-300 hover:border-teal-400"),children:t&&c.jsx(w,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-base md:text-lg font-semibold leading-tight "+(t?"text-teal-700":"text-gray-900"),children:e.heading}),c.jsx("p",{className:"text-xs md:text-sm leading-relaxed "+(t?"text-primary-green font-medium":"text-gray-600"),children:e.description})]}),c.jsxs("div",{className:"flex-shrink-0 text-right px-2 py-1 md:px-3 md:py-1.5 rounded-md transition-colors "+(t?"bg-teal-100":""),children:[c.jsxs("div",{className:"text-base md:text-lg font-bold "+(t?"text-primary-green":"text-gray-900"),children:["₹",null==(l=e.rate)?void 0:l.amount]}),(null==(a=e.rate)?void 0:a.period)&&c.jsx("div",{className:"text-xs text-gray-500",children:e.rate.period})]})]})})]})}),t&&c.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-teal-500"})]})},J=h.forwardRef((({setIsVerified:e})=>{var t,s,l,a,r,o,n;const[i,d]=h.useState(""),[m,x]=h.useState(""),[u,p]=h.useState(localStorage.getItem("user_email")||""),[g,f]=h.useState(""),[y,v]=h.useState(!1),{someOneElse:b,setSomeoneElse:j,setGuestData:N}=P(),[w,k]=h.useState(null),C=null!==localStorage.getItem("user_email"),{data:D,refetch:S}=I(u);h.useEffect((()=>{const e=localStorage.getItem("user_email");e&&e!==u&&p(e)}),[C]),h.useEffect((()=>{u&&""!==u.trim()&&S()}),[u,S]);const[_,A]=h.useState(!1);h.useEffect((()=>{C&&b&&N({firstName:i,lastName:m,email:u,phone:g})}),[C,b,i,m,u,g,N]);const O=[{id:"firstName",label:"First Name",placeholder:"Enter your first name",type:"text",icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"lastName",label:"Last Name",placeholder:"Enter your last name",type:"text",icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"email",label:"Email Address",placeholder:"Enter your email address",type:"email",icon:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),c.jsx("polyline",{points:"22,6 12,13 2,6"})]})},{id:"mobile",label:"Mobile Number",placeholder:"Enter your mobile number",type:"tel",icon:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}];return c.jsxs("div",{id:"guestDetail",className:"flex flex-col md:gap-4 relative overflow-hidden",children:[c.jsx("div",{className:"flex items-center mb-2 relative z-10",children:c.jsxs("div",{children:[c.jsx("h2",{className:"  text-mobile/h4 md:text-desktop/h4 text-gray-900 tracking-tight mb-1",children:"Guest Details"}),c.jsx("p",{className:"text-gray-600 text-mobile/body/2 md:text-desktop/body/1",children:"Please provide your information to proceed"})]})}),c.jsxs("div",{className:"relative z-10",children:[C&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-4 md:mb-8 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl flex items-center",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-green-500 rounded-full flex items-center justify-center mr-3 shadow-md",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"20 6 9 17 4 12"})})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-green-800",children:"Account Verified"}),c.jsx("p",{className:"text-green-600 text-sm",children:"Your email and mobile number are verified"})]})]}),c.jsxs("div",{className:"mb-4 md:mb-8 p-4 border rounded-xl bg-gray-50 flex items-center justify-between shadow-sm",children:[c.jsxs("div",{className:"w-12 h-12 mr-2 rounded-full bg-primary-green flex items-center justify-center text-white font-bold text-lg shadow",children:[null==(s=null==(t=null==D?void 0:D.data)?void 0:t.firstName)?void 0:s.charAt(0),null==(a=null==(l=null==D?void 0:D.data)?void 0:l.lastName)?void 0:a.charAt(0)]}),c.jsxs("div",{className:"flex flex-col min-w-0 flex-1 ",children:[c.jsxs("p",{className:"text-gray-900 font-semibold text-sm truncate",children:[null==(r=null==D?void 0:D.data)?void 0:r.firstName," ",null==(o=null==D?void 0:D.data)?void 0:o.lastName]}),c.jsx("p",{className:"text-xs text-gray-500 truncate",children:null==(n=null==D?void 0:D.data)?void 0:n.email})]}),c.jsx("button",{onClick:()=>{localStorage.removeItem("user_email"),window.location.reload()},className:"text-xs font-semibold text-gray-600 hover:text-gray-900 whitespace-nowrap flex-shrink-0",children:"Log Out"})]}),c.jsxs("label",{className:"flex items-center gap-2 text-gray-700 text-sm mb-4 md:mb-6",children:[c.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-yellow-500 border-gray-300 rounded",checked:y,onChange:e=>{v(e.target.checked),j(e.target.checked)}}),"I'm booking for someone else"]}),y&&c.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:O.map((({id:e,label:t,placeholder:s,type:l,icon:a})=>{const r=(e=>{switch(e){case"firstName":return i;case"lastName":return m;case"email":return u;case"mobile":return g;default:return""}})(e),o=w===e,n=r&&r.trim();return c.jsxs("div",{className:"flex flex-col gap-3 group",children:[c.jsxs("label",{htmlFor:e,className:"block text-sm font-semibold tracking-wide transition-colors duration-200 "+(o||n?"text-cyan-600":"text-gray-700"),children:[t," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"flex gap-3",children:c.jsxs("div",{className:"relative flex-1",children:[c.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors duration-200 "+(o?"text-cyan-500":n?"text-cyan-600":"text-gray-400"),children:a}),c.jsx("input",{type:l,id:e,placeholder:s,className:`w-full h-14 pl-12 pr-4 py-3 text-base text-gray-900 placeholder-gray-400 border-2 rounded-xl shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-100\n                              ${o?"border-cyan-400 shadow-lg":n?"border-cyan-300 bg-cyan-50":"border-gray-200 hover:border-gray-300"}\n                              ${"email"===e?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}\n                            `,value:r,onChange:t=>((e,t)=>{switch(e){case"firstName":d(t);break;case"lastName":x(t);break;case"email":p(t);break;case"mobile":f(t)}})(e,t.target.value),onFocus:()=>k(e),onBlur:()=>k(null),disabled:"email"===e})]})})]},e)}))})]}),!C&&c.jsxs("div",{className:"mb-4 md:mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex flex-col gap-2  md:flex-row items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-yellow-400 text-white rounded-full flex items-center justify-center shadow",children:"!"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-yellow-800",children:"Login Required"}),c.jsx("p",{className:"text-yellow-600 text-sm",children:"Please log in or verify your account to continue"})]})]}),c.jsx("button",{onClick:()=>A(!0),className:"ml-4 px-5 py-2 rounded-lg bg-primary-green text-white  transition",children:"Login / Verify"})]}),_&&c.jsx(E,{closeModal:()=>{A(!1);const e=localStorage.getItem("user_email");e&&(p(e),setTimeout((()=>S()),200))}})]})]})}));J.displayName="GuestDetailsForm";const Z=()=>{const{details:e,setDetails:t,selectedRooms:s,setSelectedRooms:l,setEditAddPricing:a}=P(),r=p(),o=(t,s)=>{l((l=>{var a,r,o,d,c,m,x,u,h,p;const g=[...l],f=(null==(r=null==(a=e[t])?void 0:a.roomData)?void 0:r.discountRate)||0,y=(null==(c=null==(d=null==(o=e[t])?void 0:o.continentalPlan)?void 0:d.rate)?void 0:c.amount)||0,v=(null==(m=g[t])?void 0:m.guestQty)||2,b=(null==(u=null==(x=e[t])?void 0:x.roomData)?void 0:u.baseAdultOccupancy)||2,j=(null==(p=null==(h=e[t])?void 0:h.roomData)?void 0:p.extraAdultRate)||0;let N=f;return v>b&&(N+=j*(v-b)),"continental"===s&&(N+=y*v),g[t]=i(n({},g[t]),{option:s,price:N}),g}))},d=(s,a)=>{l((l=>{var r,o,d,c,m,x,u,h,p,g,f,y,v,b,j,N;const w=[...l],k=(null==(o=null==(r=e[s])?void 0:r.roomData)?void 0:o.maxGuests)||2;let C=null!=(c=null==(d=w[s])?void 0:d.guestQty)?c:2,D=null!=(x=null==(m=w[s])?void 0:m.showMaxGuestAlert)&&x;"increment"===a?C<k?(C+=1,D=!1):D=!0:"decrement"===a&&(C>0&&(C-=1),D=!1);const S=(null==(h=null==(u=e[s])?void 0:u.roomData)?void 0:h.discountRate)||0,P=(null==(f=null==(g=null==(p=e[s])?void 0:p.continentalPlan)?void 0:g.rate)?void 0:f.amount)||0,I=(null==(y=w[s])?void 0:y.option)||"roomOnly",_=(null==(b=null==(v=e[s])?void 0:v.roomData)?void 0:b.baseAdultOccupancy)||2,A=(null==(N=null==(j=e[s])?void 0:j.roomData)?void 0:N.extraAdultRate)||0;let O=S;return C>_&&(O+=A*(C-_)),"continental"===I&&(O+=P*C),w[s]=i(n({},w[s]),{guestQty:C,showMaxGuestAlert:D,price:O}),0===C&&(w.splice(s,1),t((e=>e.filter(((e,t)=>t!==s))))),w}))},m=()=>{var t,s,l,o;a(!0),localStorage.setItem("editAddPricing",!0);const n=(null==(t=e[0])?void 0:t.name)||(null==(l=null==(s=e[0])?void 0:s.roomData)?void 0:l.hotelName);r(G(null==(o=e[0])?void 0:o.hotelCode,n))};return c.jsxs(c.Fragment,{children:[null==e?void 0:e.map(((e,t)=>{var a,r,n,i,x,u,h;const p=s[t]||{roomName:(null==(a=null==e?void 0:e.roomData)?void 0:a.RoomName)||"",option:"roomOnly",price:(null==(r=null==e?void 0:e.roomData)?void 0:r.discountRate)||0,guestQty:2,showMaxGuestAlert:!1};return 0===p.guestQty?null:c.jsxs("div",{className:"flex flex-col gap-2 md:gap-4",children:[c.jsxs("div",{className:"flex flex-row lg:h-[120px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[c.jsx("div",{className:"w-1/2 md:w-1/3 relative",children:c.jsx("img",{src:null==(n=null==e?void 0:e.roomData)?void 0:n.roomImage[0],alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"})}),c.jsxs("div",{className:"hidden md:flex flex-col justify-center w-full gap-3 ",children:[c.jsx("p",{className:"text-2xl font-bold text- ",children:null==(i=null==e?void 0:e.roomData)?void 0:i.RoomName}),c.jsxs("div",{className:" text-gray-800",children:[c.jsx("div",{className:"text-primary-green font-bold text-xl ",children:A(p.price)}),c.jsx("div",{className:"text-xs font-semibold",children:"Incl. taxes"})]})]}),c.jsxs("div",{className:"hidden md:flex flex-col items-end  justify-end w-full lg:w-[490px] gap-4 relative",children:[c.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[c.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>d(t,"decrement"),children:c.jsx(M,{})}),c.jsx("span",{children:p.guestQty>1?`${p.guestQty} Guests`:"1 Guest"}),c.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>d(t,"increment"),children:c.jsx(L,{})})]}),p.showMaxGuestAlert&&c.jsx("div",{className:"absolute top-36 md:top-40 right-0 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(B,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",null==(x=null==e?void 0:e.roomData)?void 0:x.maxGuests," guests per booking. Please adjust your selection."]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[c.jsx("button",{onClick:m,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),c.jsx("button",{onClick:()=>l((e=>{const s=[...e];return s[t].showMaxGuestAlert=!1,s})),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]}),c.jsxs("div",{className:"w-full md:hidden ",children:[c.jsx("p",{className:"text-lg md:text-2xl font-bold text- ",children:null==(u=null==e?void 0:e.roomData)?void 0:u.RoomName}),c.jsxs("div",{className:"flex justify-between mt-4 gap-2 w-full",children:[c.jsxs("div",{className:" text-gray-800",children:[c.jsx("div",{className:"text-primary-green font-bold text-md md:text-xl ",children:A(p.price)}),c.jsx("div",{className:"text-xs font-semibold",children:"Incl. taxes"})]}),c.jsxs("div",{className:"md:hidden flex flex-col justify-end  gap-4 relative",children:[c.jsxs("div",{className:"flex items-center justify-between w-full text-xs  border border-primary-yellow p-1 gap-1 rounded-md text-primary-yellow font-medium md:text-lg",children:[c.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>d(t,"decrement"),children:c.jsx(M,{})}),c.jsx("span",{children:p.guestQty>1?`${p.guestQty} Guests`:"1 Guest"}),c.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>d(t,"increment"),children:c.jsx(L,{})})]}),p.showMaxGuestAlert&&c.jsx("div",{className:"absolute top-36 md:top-40 right-2 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(B,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",null==(h=null==e?void 0:e.roomData)?void 0:h.maxGuests," guests per booking. Please adjust your selection."]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[c.jsx("button",{onClick:m,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),c.jsx("button",{onClick:()=>l((e=>{const s=[...e];return s[t].showMaxGuestAlert=!1,s})),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]})]})]})]}),c.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:gap-4",children:[c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Room Options:"}),c.jsxs("div",{className:"flex flex-col gap-2 pl-4 md:pl-0",children:[c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"radio",name:`roomOption-${t}`,value:"roomOnly",checked:"roomOnly"===p.option,onChange:()=>o(t,"roomOnly"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),c.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"radio",name:`roomOption-${t}`,value:"continental",checked:"continental"===p.option,onChange:()=>o(t,"continental"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),c.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]},t)})),e.length<=0&&c.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},X=()=>{var e,t,s;const{details:l,setEditAddPricing:a}=P(),r=localStorage.getItem("hotelInfo"),o=r?JSON.parse(r):null,n=localStorage.getItem("checkInDate"),i=localStorage.getItem("checkOutDate"),d=n?new Date(n):null,m=i?new Date(i):null,x=p(),u=({date:e,label:t,time:s,isCheckOut:l=!1})=>c.jsxs("div",{className:"flex flex-col space-y-1",children:[c.jsx("div",{className:"text-mobile/title md:text-desktop/h5/medium font-medium capitalize text-gray-900",children:e?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"md:hidden",children:[c.jsx("span",{className:"font-bold",children:F(e,"dd MMM, ")})," ",F(e,"EEE")]}),c.jsxs("div",{className:"hidden md:block",children:[c.jsx("span",{className:"font-bold",children:F(e,"dd MMM, ")})," ",F(e,"EEEE")]})]}):c.jsxs("span",{className:"text-gray-400",children:["Select ",t.toLowerCase()]})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"text-sm capitalize hidden md:block  font-medium text-gray-600  tracking-wide",children:t}),c.jsx("div",{className:"text-xs md:text-sm font-semibold text-gray-500",children:s||(l?"11:00 am":"1:00 pm")})]})]}),h=d&&m?$(m,d):0;return c.jsxs("div",{className:" border-b-2",children:[c.jsxs("div",{className:"md:mb-4 mb-2",children:[c.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-bold md:font-bold text-gray-900 md:mb-2",children:null==o?void 0:o.name}),c.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:null==(e=null==o?void 0:o.location)?void 0:e.hotelAddress})]}),c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"flex items-center gap-4 ",children:[c.jsx(u,{date:d,label:"Check-in",time:null==(t=l[0])?void 0:t.checkIn}),c.jsx(k,{className:"text-primary-yellow text-2xl mb-1"}),c.jsx(u,{date:m,label:"Check-out",time:null==(s=l[0])?void 0:s.checkOut,isCheckOut:!0}),h>0&&c.jsxs("div",{className:"border-primary-yellow border text-primary-yellow px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[h," ",1===h?"Night":"Nights"]})]})}),c.jsx("button",{onClick:()=>{var e,t;a(!0),localStorage.setItem("editAddPricing","true");const s=(null==o?void 0:o.name)||(null==(e=l[0])?void 0:e.name);x(G(null==(t=l[0])?void 0:t.hotelCode,s))},className:"inline-flex items-center  mb-2 text-primary-yellow underline font-medium transition-colors duration-200 ",children:c.jsx("span",{children:"Modify Date/Room Selection  "})})]})},ee=()=>{var e,t,s,l;const{ContactUsDetail:a}=D(),{details:r,hotelData:o}=P(),n=r[0],i=p(),[d,m]=h.useState(!1),x=localStorage.getItem("user_email"),{data:u}=I(x),[g,f]=h.useState(!1),y=localStorage.getItem("hotelInfo"),v=JSON.parse(y),b=localStorage.getItem("checkInDate"),j=localStorage.getItem("checkOutDate"),N=((e,t)=>{if(!e||!t)return 0;const s=new Date(e),l=new Date(t),a=Math.abs(l-s);return Math.ceil(a/864e5)})(b,j),[w,k]=h.useState(!1),[S,_]=h.useState(!0),A=h.useRef();return h.useEffect((()=>{const e=document.querySelector("#payment-method");if(e){const t=new IntersectionObserver((([e])=>{k(e.isIntersecting)}),{threshold:.1});return t.observe(e),()=>t.disconnect()}}),[]),h.useEffect((()=>{w?setTimeout((()=>_(!1)),300):_(!0)}),[w]),h.useEffect((()=>{r&&0!==r.length&&n||i(`/hotels/${null==v?void 0:v.hotelCode}`)}),[r,o,n,i,v]),r&&0!==r.length&&n?c.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green overflow-hidden",children:[c.jsxs(C,{children:[c.jsx("title",{children:"Booking Details"}),c.jsx("meta",{name:"",content:""}),c.jsx("meta",{name:"",content:""})]}),c.jsxs("div",{className:"content flex gap-3 md:gap-5 lg:gap-6 flex-col py-3 md:py-6 lg:py-10 px-3 md:px-0",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center cursor-pointer gap-2 md:gap-6 text-white",onClick:()=>i(-1),children:[c.jsx("button",{"aria-label":"Go back",className:"flex items-center flex-shrink-0",children:c.jsx(z,{className:"text-white h-5 w-5 sm:h-6 sm:w-6 md:h-9 md:w-9"})}),c.jsx("img",{src:"/images/Logo/logo.svg",alt:null==n?void 0:n.name,className:"w-[100px] sm:w-[120px] md:w-[150px]"})]}),c.jsx("div",{className:"flex-shrink-0",children:x?c.jsxs("div",{onClick:()=>i("/user/profile"),className:"bg-white cursor-pointer text-primary-yellow font-bold w-10 h-10 sm:w-12 sm:h-12 md:h-12 md:w-12 rounded-full flex items-center justify-center text-sm sm:text-base",children:[null==(t=null==(e=null==u?void 0:u.data.firstName)?void 0:e[0])?void 0:t.toUpperCase(),null==(l=null==(s=null==u?void 0:u.data.lastName)?void 0:s[0])?void 0:l.toUpperCase()]}):c.jsx("button",{onClick:()=>f(!0),className:"border-2 border-primary-yellow text-primary-yellow px-3 py-1.5 sm:px-4 sm:py-2 rounded-full font-bold text-sm sm:text-base hover:bg-primary-yellow hover:text-white transition",children:"Login"})}),g&&c.jsx("div",{children:"Login Modal Here"})]}),c.jsx("div",{className:"text-white  text-mobile/head md:text-desktop/head",children:"Booking Details"})]}),c.jsxs("div",{className:"md:flex gap-5 content bg-white py-6 md:py-0 rounded-t-3xl overflow-visible relative",children:[c.jsxs("div",{className:"flex-1 flex flex-col md:px-8 md:py-10 gap-4 md:gap-8 min-w-0",children:[c.jsx(X,{}),c.jsx(Z,{}),n.addToYourStay.length>0&&c.jsx(Y,{data:n}),c.jsx(J,{ref:A,setIsVerified:m}),c.jsx(W,{hotelDetail:n,checkIn:b,verified:d}),c.jsx(U,{hotelDetail:n,verified:d,checkIn:b,checkOut:j}),c.jsx("div",{className:"xl:hidden",children:c.jsx(q,{hotelDetail:n,checkIn:b,checkOut:j,days:N,showButton:S,isPaymentVisible:w})}),c.jsx(T,{ContactUsDetail:a})]}),c.jsx("div",{className:"hidden xl:block xl:w-[420px] flex-shrink-0 px-8 py-10",children:c.jsx(q,{hotelDetail:n,checkIn:b,checkOut:j,days:N,showButton:S,isPaymentVisible:w})})]})]}):null};export{ee as default};
