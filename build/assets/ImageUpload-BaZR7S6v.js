var j=(n,l,o)=>new Promise((p,d)=>{var c=a=>{try{r(o.next(a))}catch(s){d(s)}},t=a=>{try{r(o.throw(a))}catch(s){d(s)}},r=a=>a.done?p(a.value):Promise.resolve(a.value).then(c,t);r((o=o.apply(n,l)).next())});import{j as e,r as m}from"./index-Be91XN6Z.js";import{uploadSingleImagesAPIV2 as E}from"./useHotelHook2-nIo0pAVu.js";import{c as S,s as B}from"./createSvgIcon-QeTG25jO.js";import{B as I,c as T,a as C,C as F,T as u}from"./TextField-Dfdu3H5N.js";const P=S(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),R=B("input")({display:"none"}),A=({feature:n,handleFeatureChange:l,setImageUpload:o,index:p,accept:d="image/*",label:c="Upload Image"})=>{var y;const[t,r]=m.useState(!1),[a,s]=m.useState(null),[x,U]=m.useState(null),f=`contained-button-file-${p||"default"}`,v=g=>j(void 0,null,function*(){const h=g.target.files[0];if(h){U(null),s(null),r(!0);try{const i=yield E([h]),b=i==null?void 0:i.imageUrls[0];l("image",b),r(!1)}catch(i){console.error("Error uploading file:",i),s("Failed to upload file. Please try again."),r(!1),l("image","")}}});return m.useEffect(()=>{o(t)},[t,o]),e.jsxs(I,{children:[e.jsx(T,{label:c==="Upload Image"&&((y=n.image)!=null&&y.endsWith(".pdf"))?"File URL":"Image URL",variant:"outlined",fullWidth:!0,value:n.image||"",onChange:g=>l("image",g.target.value),style:{marginBottom:10},disabled:t}),e.jsxs("label",{htmlFor:f,children:[e.jsx(R,{accept:d,id:f,type:"file",onChange:v,disabled:t}),e.jsx(C,{variant:"contained",component:"span",startIcon:e.jsx(P,{}),disabled:t,style:{marginBottom:10},children:c})]}),t&&e.jsxs(I,{display:"flex",alignItems:"center",mt:1,children:[e.jsx(F,{size:20,sx:{mr:1}}),e.jsx(u,{variant:"body2",color:"textSecondary",children:"Uploading..."})]}),a&&e.jsx(u,{variant:"body2",color:"error",mt:1,children:a}),x&&e.jsx(u,{variant:"body2",color:"error",mt:1,children:x})]})};export{A as I};
