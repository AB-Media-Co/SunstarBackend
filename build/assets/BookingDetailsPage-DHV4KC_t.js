import{Q as X,j as e,L as D,Z as ie,$ as ce,a0 as L,d as U,r as b,b as $,a1 as he,a as W,a2 as ue,a3 as ee,a4 as pe,U as F,a5 as ge,a6 as fe,W as te,a7 as ye,v as je,t as Q,f as be,i as Ne}from"./index-BOEfucCt.js";import{L as de}from"./LoginModal-DhK3iL59.js";import{R as se,W as re}from"./Warning-CDUW2XTK.js";import{A as ve}from"./ArrowBackIosNew-CAIVHbsR.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=X("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Ce=({ContactUsDetail:t})=>{const a=(t==null?void 0:t.phoneNumber)||"";return e.jsx("footer",{className:"w-full md:border-t border-gray-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-6 py-6 text-gray-600   md:justify-between md:gap-10 md:py-8",children:[e.jsxs("div",{className:"flex justify-between gap-2 sm:gap-3",children:[e.jsx("p",{className:"text-base font-semibold tracking-tight sm:text-lg md:text-2xl",children:"Facing an issue? Call us for assistance."}),a?e.jsx("a",{href:`tel:${a}`,className:"w-fit text-lg font-semibold underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-xl","aria-label":`Call ${a}`,children:e.jsx("span",{className:"whitespace-nowrap",children:a})}):e.jsx("span",{className:"text-sm text-gray-500 sm:text-base",children:"Phone number unavailable"})]}),e.jsxs("nav",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 sm:gap-x-8","aria-label":"Footer navigation",children:[e.jsx(D,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Cancellation Policy"}),e.jsx(D,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Terms & Conditions"})]})]})})})},Se=()=>ie({mutationFn:async t=>(await ce.post("/api/payments/create",t)).data,onSuccess:()=>{L.success("Order created successfully")},onError:t=>{var a,d;L.error("Failed to create order: "+(((d=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:d.message)||t.message))}}),Ae=()=>ie({mutationFn:async t=>(await ce.post("/api/payments/verify",t)).data,onSuccess:()=>{L.success("Payment verified successfully")},onError:t=>{var a,d;L.error("Payment verification failed: "+(((d=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:d.message)||t.message))}}),Ie=({hotelDetail:t,amount:a,onSuccess:d})=>{const l=Se(),o=Ae(),n={14496:"rzp_live_KZSDFi3qOgrIgC",14492:"rzp_live_IQdcqeX4foVUM3",14494:"rzp_live_SxbRIhkDqyGEOM",14493:"rzp_live_uUlevuP8MoleGg"}[t==null?void 0:t.hotelCode],c=()=>{const u={amount:a,currency:"INR",hotelCode:t==null?void 0:t.hotelCode};l.mutate(u,{onSuccess:r=>{const i={key:n,amount:r.amount,currency:r.currency,name:t==null?void 0:t.hotelName,description:"Hotel Booking Payment",order_id:r.id,handler:function(g){const f={razorpay_order_id:g.razorpay_order_id,razorpay_payment_id:g.razorpay_payment_id,razorpay_signature:g.razorpay_signature,hotelCode:t==null?void 0:t.hotelCode};o.mutate(f,{onSuccess:()=>{L.success("Payment Verified ✅"),d("PAID_TYPE_UNKID")}})},prefill:{name:"",email:"",contact:""},theme:{color:"#38b2ac"}};new window.Razorpay(i).open()},onError:()=>{L.error("Failed to create Razorpay order")}})};return e.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:c,children:"Confirm Booking"})},Re=({hotelDetail:t,verified:a,checkIn:d,checkOut:l})=>{const o=localStorage.getItem("user_email"),{data:s}=U(o),[n,c]=b.useState(""),{selectedRooms:u,setIsConfirmationModalOpen:r,someOneElse:i,guestData:h}=$(),g=he(),f=W(),j=p=>{c(p)},m=(p="")=>{var k,A;if(!(a||(k=s==null?void 0:s.data)!=null&&k.isVerified)){(A=document.getElementById("guestDetail"))==null||A.scrollIntoView({behavior:"smooth"});return}const x={};u.forEach((C,I)=>{var _;const S=parseInt(localStorage.getItem("days")),R=Array(S).fill(C.price).join(","),P=Array(S).fill(0).join(","),y=Array(S).fill(0).join(",");x[`Room_${I+1}`]={Rateplan_Id:C==null?void 0:C.roomrateunkid,Ratetype_Id:C.RateTypeID,Roomtype_Id:C.RoomTypeID,baserate:R,extradultrate:P,extrachildrate:y,number_adults:((_=C.guestQty)==null?void 0:_.toString())||"1",number_children:"0",ExtraChild_Age:"",Title:"",First_Name:i?h.firstName||"":(s==null?void 0:s.data.firstName)||"",Last_Name:i?h.lastName||"":(s==null?void 0:s.data.lastName)||"",Gender:(s==null?void 0:s.data.gender)||"",SpecialRequest:n==="pay-at-hotel"?"pay-at-hotel":p}});const w={BookingData:{Room_Details:x,check_in_date:d,check_out_date:l,Booking_Payment_Mode:n==="pay-at-hotel"?"0":"1",Email_Address:s==null?void 0:s.data.email,Source_Id:"",MobileNo:i?h.phone:(s==null?void 0:s.data.phone)||"",Address:(s==null?void 0:s.data.address)||"",State:(s==null?void 0:s.data.state)||"",Country:(s==null?void 0:s.data.country)||"",City:(s==null?void 0:s.data.city)||"",Zipcode:"",Fax:"",Device:"Web",Languagekey:"",paymenttypeunkid:p},HotelCode:t==null?void 0:t.hotelCode,APIKey:t==null?void 0:t.authKey,userEmail:s==null?void 0:s.data.email};g.mutate(w,{onSuccess:C=>{var I,S,R,P;f("/thankyou",{state:{bookingResponse:C,payload:w,paymentMethod:n,checkIn:d,checkOut:l,hotelDetail:t,hotel:{hotelCode:t==null?void 0:t.hotelCode,name:t==null?void 0:t.hotelName,payAtHotel:t==null?void 0:t.payAtHotel},user:{email:(I=s==null?void 0:s.data)==null?void 0:I.email,firstName:(S=s==null?void 0:s.data)==null?void 0:S.firstName,lastName:(R=s==null?void 0:s.data)==null?void 0:R.lastName,phone:(P=s==null?void 0:s.data)==null?void 0:P.phone},rooms:u},replace:!0})}})};return g.isPending?e.jsxs("div",{className:"relative bg-white border-gray-100",children:[e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-primary-green rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-r-teal-300 rounded-full animate-spin mx-auto",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Processing Your Booking"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your reservation..."}),e.jsx("div",{className:"flex items-center justify-center mt-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),e.jsx("div",{className:"filter blur-sm pointer-events-none",children:e.jsx(ne,{hotelDetail:t,selectedPaymentMethod:n,handlePaymentMethodChange:j,ContinueBtnClick:m,isLoading:!0})})]}):e.jsx(ne,{hotelDetail:t,selectedPaymentMethod:n,handlePaymentMethodChange:j,ContinueBtnClick:m,isLoading:!1})},ne=({hotelDetail:t,selectedPaymentMethod:a,handlePaymentMethodChange:d,ContinueBtnClick:l,isLoading:o})=>{const{finalPrice:s}=$();return e.jsxs("div",{id:"payment-method",className:"bg-white ",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-900 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-sm md:text-base text-gray-500",children:"Choose your preferred payment option"})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4 mb-6 md:mb-8",children:[e.jsx(le,{id:"pay-now",icon:e.jsx(ke,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay and Book Now",description:"Complete your booking instantly with secure online payment",features:[{icon:e.jsx(ue,{className:"w-4 h-4"}),text:"Instant confirmation"},{icon:e.jsx(ee,{className:"w-4 h-4"}),text:"All major cards"}],badge:{text:"Secure",color:"green"},isSelected:a==="pay-now",onClick:()=>!o&&d("pay-now"),isLoading:o}),(t==null?void 0:t.payAtHotel)==="yes"&&e.jsx(le,{id:"pay-at-hotel",icon:e.jsx(ae,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay at Hotel",description:"Reserve now and pay at check-in",features:[{icon:e.jsx(pe,{className:"w-4 h-4"}),text:"No advance payment"},{icon:e.jsx(ae,{className:"w-4 h-4"}),text:"Pay at reception"}],badge:{text:"Flexible",color:"orange"},isSelected:a==="pay-at-hotel",onClick:()=>!o&&d("pay-at-hotel"),isLoading:o})]}),a&&e.jsx("div",{className:"flex justify-end mb-6 md:mb-8",children:a==="pay-now"?e.jsx(Ie,{hotelDetail:t,amount:s,onSuccess:n=>l(n)}):e.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:()=>l(),children:e.jsx("span",{children:"Confirm Booking"})})}),e.jsx("div",{className:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3 text-xs md:text-sm text-gray-700",children:[e.jsx(ee,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Your payment information is secured with 256-bit SSL encryption"})]})})]})},le=({id:t,icon:a,title:d,description:l,features:o,badge:s,isSelected:n,onClick:c,isLoading:u})=>{const r={green:"bg-green-100 text-green-800",orange:"bg-orange-100 text-orange-800"};return e.jsx("div",{className:`relative overflow-hidden rounded-lg md:rounded-xl border-2 transition-all duration-300 cursor-pointer group ${n?"border-primary-green bg-teal-50/50 shadow-md md:shadow-lg":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-md"} ${u?"pointer-events-none opacity-50":""}`,onClick:c,children:e.jsxs("label",{htmlFor:t,className:"flex items-start gap-3 md:gap-4 p-3 md:p-5 cursor-pointer",children:[e.jsx("input",{type:"radio",id:t,name:"payment-method",className:"w-4 h-4 md:w-5 md:h-5 mt-1 md:mt-0.5 text-teal-600 border-2 border-gray-300 focus:ring-primary-green flex-shrink-0",onChange:c,checked:n,disabled:u}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1 md:mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`p-1.5 md:p-2 rounded-lg flex-shrink-0 ${n?"bg-primary-green":"bg-gray-100 group-hover:bg-teal-50"}`,children:e.jsx("div",{className:`${n?"text-white":"text-gray-600 group-hover:text-teal-600"}`,children:a})}),e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 truncate",children:d})]}),s&&e.jsx("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-medium flex-shrink-0 whitespace-nowrap ${r[s.color]}`,children:s.text})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-2 md:mb-3 line-clamp-2",children:l}),e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-4 text-xs md:text-sm",children:o.map((i,h)=>e.jsxs("div",{className:`flex items-center gap-1 ${n?"text-teal-700":"text-gray-600"}`,children:[e.jsx("div",{className:n?"text-teal-600":"text-gray-400",children:i.icon}),e.jsx("span",{className:"whitespace-nowrap",children:i.text})]},h))})]})]})})},oe=({days:t,showButton:a,isPaymentVisible:d})=>{const{selectedRooms:l,totalOtherCharges:o,finalPrice:s,baseFinalPrice:n,setNights:c,details:u}=$(),[r,i]=b.useState(!1);b.useEffect(()=>{t&&(c(t),localStorage.setItem("days",t))},[t,c]);const h=n-s,g=h>0;return b.useEffect(()=>{const f=()=>{window.scrollY>220?i(!0):i(!1)};return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[]),e.jsxs("div",{className:`md:p-6 bg-white md:border border-gray-200 rounded-xl md:shadow-md w-full ${r?"md:w-[384px]":{}}  md:w-96 mx-auto  font-sans transition-all duration-300 ${r?"xl:fixed xl:top-4  ":"relative "}`,children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 pb-4  text-gray-800",children:"Reservation Summary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center",children:"Your Price Summary"}),e.jsx("div",{className:"space-y-3 mb-4",children:l==null?void 0:l.map((f,j)=>{var S,R,P,y,_;const m=u[j],p=((S=m==null?void 0:m.roomData)==null?void 0:S.discountRate)||0,x=((P=(R=m==null?void 0:m.continentalPlan)==null?void 0:R.rate)==null?void 0:P.amount)||0,N=(f==null?void 0:f.guestQty)||2,w=((y=m==null?void 0:m.roomData)==null?void 0:y.baseAdultOccupancy)||2,k=((_=m==null?void 0:m.roomData)==null?void 0:_.extraAdultRate)||0,A=N>w?N-w:0,C=A*k,I=x*N;return e.jsxs("div",{className:"space-y-2 pb-3 border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Room Only (",w," ",w===1?"Adult":"Adults",") × ",t," ",t===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-medium text-gray-800",children:F(p*t)})]}),A>0&&k>0&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 pl-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-600",children:"Extra Adult Charges"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[F(k)," × ",A," ",A===1?"Adult":"Adults"," × ",t," ",t===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-medium text-orange-600",children:F(C*t)})]}),f.option==="continental"&&x>0&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 pl-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-green",children:"Continental Breakfast"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[F(x)," × ",N," ",N===1?"Guest":"Guests"," × ",t," ",t===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-medium text-primary-green",children:F(I*t)})]})]},j)})}),e.jsxs("div",{className:"flex justify-between text-sm font-medium text-black/40 pb-2 border-b border-gray-200",children:[e.jsx("p",{children:"Taxes & Other Charges"}),e.jsx("p",{className:"font-medium ",children:F(o)})]})]}),e.jsxs("div",{className:"pt-3  mt-5 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Original Amount"}),e.jsx("p",{className:"font-medium",children:F(n)})]}),g&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Discount"}),e.jsxs("p",{className:"font-medium text-green-600",children:["- ",F(h)]})]}),e.jsxs("div",{className:"flex justify-between border-b-2 md:border-b-0  text-base font-bold py-2 border-t border-gray-200",children:[e.jsx("p",{children:"Payable Amount"}),e.jsx("p",{className:"text-primary-green",children:F(s)})]})]}),a&&e.jsx("a",{href:"#payment-method",className:"hidden md:block  w-full",children:e.jsx("button",{disabled:d,className:`mt-6 w-full py-3.5 font-bold text-white rounded-lg transition-all duration-300 ${d?"bg-gray-300 cursor-not-allowed":"bg-primary-green hover:bg-primary-dark-green"}`,children:"See Payment Options"})})]})};/*! js-cookie v3.0.5 | MIT */function T(t){for(var a=1;a<arguments.length;a++){var d=arguments[a];for(var l in d)t[l]=d[l]}return t}var Pe={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function J(t,a){function d(o,s,n){if(!(typeof document>"u")){n=T({},a,n),typeof n.expires=="number"&&(n.expires=new Date(Date.now()+n.expires*864e5)),n.expires&&(n.expires=n.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in n)n[u]&&(c+="; "+u,n[u]!==!0&&(c+="="+n[u].split(";")[0]));return document.cookie=o+"="+t.write(s,o)+c}}function l(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var s=document.cookie?document.cookie.split("; "):[],n={},c=0;c<s.length;c++){var u=s[c].split("="),r=u.slice(1).join("=");try{var i=decodeURIComponent(u[0]);if(n[i]=t.read(r,i),o===i)break}catch{}}return o?n[o]:n}}return Object.create({set:d,get:l,remove:function(o,s){d(o,"",T({},s,{expires:-1}))},withAttributes:function(o){return J(this.converter,T({},this.attributes,o))},withConverter:function(o){return J(T({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}J(Pe,{path:"/"});const _e=({hotelDetail:t,checkIn:a,verified:d})=>{const[l,o]=b.useState(""),[s,n]=b.useState(null),[,c]=b.useState(null),[u,r]=b.useState(!1),[i,h]=b.useState(!1),[g,f]=b.useState(null),{mutate:j,data:m}=ge(),{mutateAsync:p}=fe(),{finalPrice:x,setFinalPrice:N,baseFinalPrice:w}=$(),k=localStorage.getItem("user_email"),{data:A,isLoading:C}=U(k),I=localStorage.getItem("user_email")!==null;if(b.useEffect(()=>{t&&t._id&&I&&j(t._id)},[j,t,I,A]),C)return e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-3 border-gray-200 border-t-primary-green rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Loading offers..."})]})});if(!I)return e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-start md:text-center space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Unlock Exclusive Offers"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sign in to access special discounts and deals"})]}),e.jsxs("a",{href:"#guestDetail",onClick:y=>{L.error("Please verify your details")},className:"mt-4 inline-flex items-center gap-2 px-6 py-2.5 bg-primary-green text-white rounded-lg text-sm font-medium hover:bg-cyan-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Verify to Continue"]})]})});const S=async()=>{var y,_;if(l.trim()){h(!0);try{const E=await p({hotelId:t._id,rate:x,offerCode:l.trim(),checkInDate:a});c(E),E.discountedRate&&(N(E.discountedRate),o("")),L.success("Offer applied successfully")}catch(E){L.error(((_=(y=E==null?void 0:E.response)==null?void 0:y.data)==null?void 0:_.error)||"Error applying offer")}finally{h(!1)}}},R=()=>{n(null),c(null),N(w),r(!1)},P=async y=>{var _,E;n(y),h(!0);try{const M=await p({hotelId:t._id,rate:x,offerCode:y.offerCode,checkInDate:a});if(c(M),M.discountedRate)N(M.discountedRate),r(!0),L.success("Offer applied successfully!");else throw new Error("No discount rate returned")}catch(M){L.error(((E=(_=M==null?void 0:M.response)==null?void 0:_.data)==null?void 0:E.error)||"Error applying offer"),n(null),r(!1)}finally{h(!1)}};return e.jsxs("div",{className:"bg-white w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Exclusive Offers"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"Apply a promo code to get discounts"})]}),!s&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2 md:gap-3  flex-col md:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Enter promo code...",className:"w-full h-12 md:h-14 border border-gray-300 rounded-lg px-4 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:l,onChange:y=>o(y.target.value),onKeyPress:y=>y.key==="Enter"&&S()}),l&&e.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:S,disabled:!l.trim()||i,className:"h-12 md:h-14 px-6 w-auto bg-primary-green text-white rounded-lg font-medium hover:bg-cyan-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Applying..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"inline",children:"Apply Promo Code"})})})})]})}),!s&&m&&m.length>0&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.map(y=>e.jsx("div",{onClick:()=>P(y),onMouseEnter:()=>f(y.offerCode),onMouseLeave:()=>f(null),className:"p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-cyan-500 hover:bg-cyan-50 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:y.offerCode}),y.description&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1 capitalize",children:["apply this promo code to get ",y.discountPercent,"% off "]})]}),e.jsxs("div",{className:"flex-shrink-0 bg-cyan-100 text-cyan-700 px-3 py-1.5 rounded-lg font-semibold text-sm",children:[y.discountPercent,"%"]})]})},y.offerCode))})}),s&&e.jsx("div",{className:"border border-green-200 bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-200 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#059669",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:s.offerCode}),s.description&&e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:s.description}),e.jsxs("div",{className:"text-sm font-semibold text-green-700 mt-2",children:[s.discountPercent,"% discount applied"]})]})]}),e.jsx("button",{onClick:R,className:"flex-shrink-0 text-gray-500 hover:text-gray-700 transition-colors p-1",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})})]})},Ee=({data:t})=>{const a=t==null?void 0:t.addToYourStay,{selectedOtherCharges:d,setSelectedOtherCharges:l}=$(),o=(n,c)=>{c&&c.stopPropagation(),l(u=>(Array.isArray(u)?u.find(i=>i._id===n._id):null)?u.filter(i=>i._id!==n._id):[...u,n])},s=n=>d.some(c=>c._id===n);return e.jsxs("div",{className:"bg-white ",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4  text-gray-900",children:"Add To Your Stay"}),e.jsx("p",{className:"text-gray-600 t md:text-desktop/body/1 mt-1",children:"Enhance your experience with optional add-ons"})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:a.map(n=>e.jsx(Oe,{option:n,isSelected:s(n._id),onToggle:c=>o(n,c)},n._id))})]})},Oe=({option:t,isSelected:a,onToggle:d})=>{var l,o;return e.jsxs("div",{className:`relative rounded-lg md:rounded-xl border-2 transition-all duration-300 overflow-hidden cursor-pointer ${a?"border-teal-500 bg-teal-50 shadow-md":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-sm"}`,onClick:d,children:[e.jsx("div",{className:"p-4 md:p-5",children:e.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[e.jsx("div",{className:`w-5 h-5 md:w-6 md:h-6 rounded-md border-2 flex items-center justify-center flex-shrink-0 transition-all ${a?"bg-teal-500 border-teal-500 shadow-sm":"border-gray-300 hover:border-teal-400"}`,children:a&&e.jsx(we,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-base md:text-lg font-semibold leading-tight ${a?"text-teal-700":"text-gray-900"}`,children:t.heading}),e.jsx("p",{className:`text-xs md:text-sm leading-relaxed ${a?"text-primary-green font-medium":"text-gray-600"}`,children:t.description})]}),e.jsxs("div",{className:`flex-shrink-0 text-right px-2 py-1 md:px-3 md:py-1.5 rounded-md transition-colors ${a?"bg-teal-100":""}`,children:[e.jsxs("div",{className:`text-base md:text-lg font-bold ${a?"text-primary-green":"text-gray-900"}`,children:["₹",(l=t.rate)==null?void 0:l.amount]}),((o=t.rate)==null?void 0:o.period)&&e.jsx("div",{className:"text-xs text-gray-500",children:t.rate.period})]})]})})]})}),a&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-teal-500"})]})},me=b.forwardRef(({setIsVerified:t})=>{var S,R,P,y,_,E,M,G,V,H;const[a,d]=b.useState(""),[l,o]=b.useState(""),[s,n]=b.useState(localStorage.getItem("user_email")||""),[c,u]=b.useState(""),[r,i]=b.useState(!1),{someOneElse:h,setSomeoneElse:g,setGuestData:f}=$(),[j,m]=b.useState(null),p=localStorage.getItem("user_email")!==null,{data:x,refetch:N}=U(s);b.useEffect(()=>{const v=localStorage.getItem("user_email");v&&v!==s&&n(v)},[p]),b.useEffect(()=>{s&&s.trim()!==""&&N()},[s,N]);const[w,k]=b.useState(!1);b.useEffect(()=>{p&&h&&f({firstName:a,lastName:l,email:s,phone:c})},[p,h,a,l,s,c,f]);const A=[{id:"firstName",label:"First Name",placeholder:"Enter your first name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"lastName",label:"Last Name",placeholder:"Enter your last name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"email",label:"Email Address",placeholder:"Enter your email address",type:"email",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]})},{id:"mobile",label:"Mobile Number",placeholder:"Enter your mobile number",type:"tel",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}],C=v=>{switch(v){case"firstName":return a;case"lastName":return l;case"email":return s;case"mobile":return c;default:return""}},I=(v,O)=>{switch(v){case"firstName":d(O);break;case"lastName":o(O);break;case"email":n(O);break;case"mobile":u(O);break}};return e.jsxs("div",{id:"guestDetail",className:"flex flex-col md:gap-4 relative overflow-hidden",children:[e.jsx("div",{className:"flex items-center mb-2 relative z-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"  text-mobile/h4 md:text-desktop/h4 text-gray-900 tracking-tight mb-1",children:"Guest Details"}),e.jsx("p",{className:"text-gray-600 text-mobile/body/2 md:text-desktop/body/1",children:"Please provide your information to proceed"})]})}),e.jsxs("div",{className:"relative z-10",children:[p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-green-500 rounded-full flex items-center justify-center mr-3 shadow-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Account Verified"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Your email and mobile number are verified"})]})]}),e.jsxs("div",{className:"mb-8 p-4 border rounded-xl bg-gray-50 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-12 h-12 rounded-full bg-primary-green flex items-center justify-center text-white font-bold text-lg shadow",children:[(R=(S=x==null?void 0:x.data)==null?void 0:S.firstName)==null?void 0:R.charAt(0),(y=(P=x==null?void 0:x.data)==null?void 0:P.lastName)==null?void 0:y.charAt(0)]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-900 font-semibold text-lg",children:[(_=x==null?void 0:x.data)==null?void 0:_.firstName," ",(E=x==null?void 0:x.data)==null?void 0:E.lastName]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(G=(M=x==null?void 0:x.data)==null?void 0:M.email)==null?void 0:G.replace(/^(.{2})(.*)(@.*)$/,(v,O,B,z)=>`${O}${"*".repeat(B.length)}${z}`)," |"," ",(H=(V=x==null?void 0:x.data)==null?void 0:V.phone)==null?void 0:H.replace(/^(.{0,2})(.*)(.{4})$/,(v,O,B,z)=>`${"*".repeat(O.length?O.length:2)}${"*".repeat(B.length)}${z}`)]})]})]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("user_email"),window.location.reload()},className:"text-sm font-semibold text-gray-500 hover:underline",children:"Log Out"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-gray-700 text-sm mb-6",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-yellow-500 border-gray-300 rounded",checked:r,onChange:v=>{i(v.target.checked),g(v.target.checked)}}),"I'm booking for someone else"]}),r&&e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:A.map(({id:v,label:O,placeholder:B,type:z,icon:Y})=>{const q=C(v),K=j===v,Z=q&&q.trim();return e.jsxs("div",{className:"flex flex-col gap-3 group",children:[e.jsxs("label",{htmlFor:v,className:`block text-sm font-semibold tracking-wide transition-colors duration-200 ${K||Z?"text-cyan-600":"text-gray-700"}`,children:[O," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:`absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors duration-200 ${K?"text-cyan-500":Z?"text-cyan-600":"text-gray-400"}`,children:Y}),e.jsx("input",{type:z,id:v,placeholder:B,className:`w-full h-14 pl-12 pr-4 py-3 text-base text-gray-900 placeholder-gray-400 border-2 rounded-xl shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-100
                              ${K?"border-cyan-400 shadow-lg":Z?"border-cyan-300 bg-cyan-50":"border-gray-200 hover:border-gray-300"}
                              ${v==="email"?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}
                            `,value:q,onChange:xe=>I(v,xe.target.value),onFocus:()=>m(v),onBlur:()=>m(null),disabled:v==="email"})]})})]},v)})})]}),!p&&e.jsxs("div",{className:"mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex flex-col gap-2  md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-400 text-white rounded-full flex items-center justify-center shadow",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-800",children:"Login Required"}),e.jsx("p",{className:"text-yellow-600 text-sm",children:"Please log in or verify your account to continue"})]})]}),e.jsx("button",{onClick:()=>k(!0),className:"ml-4 px-5 py-2 rounded-lg bg-primary-green text-white  transition",children:"Login / Verify"})]}),w&&e.jsx(de,{closeModal:()=>{k(!1);const v=localStorage.getItem("user_email");v&&(n(v),setTimeout(()=>N(),200))}})]})]})});me.displayName="GuestDetailsForm";const Me=()=>{const{details:t,setDetails:a,selectedRooms:d,setSelectedRooms:l,setEditAddPricing:o}=$(),s=W(),n=(r,i)=>{l(h=>{var w,k,A,C,I,S,R,P,y,_;const g=[...h],f=((k=(w=t[r])==null?void 0:w.roomData)==null?void 0:k.discountRate)||0,j=((I=(C=(A=t[r])==null?void 0:A.continentalPlan)==null?void 0:C.rate)==null?void 0:I.amount)||0,m=((S=g[r])==null?void 0:S.guestQty)||2,p=((P=(R=t[r])==null?void 0:R.roomData)==null?void 0:P.baseAdultOccupancy)||2,x=((_=(y=t[r])==null?void 0:y.roomData)==null?void 0:_.extraAdultRate)||0;let N=f;if(m>p){const E=m-p;N+=x*E}return i==="continental"&&(N+=j*m),g[r]={...g[r],option:i,price:N},g})},c=(r,i)=>{l(h=>{var C,I,S,R,P,y,_,E,M,G,V,H,v,O;const g=[...h],f=((I=(C=t[r])==null?void 0:C.roomData)==null?void 0:I.maxGuests)||2;let j=((S=g[r])==null?void 0:S.guestQty)??2,m=((R=g[r])==null?void 0:R.showMaxGuestAlert)??!1;i==="increment"?j<f?(j+=1,m=!1):m=!0:i==="decrement"&&(j>0&&(j-=1),m=!1);const p=((y=(P=t[r])==null?void 0:P.roomData)==null?void 0:y.discountRate)||0,x=((M=(E=(_=t[r])==null?void 0:_.continentalPlan)==null?void 0:E.rate)==null?void 0:M.amount)||0,N=((G=g[r])==null?void 0:G.option)||"roomOnly",w=((H=(V=t[r])==null?void 0:V.roomData)==null?void 0:H.baseAdultOccupancy)||2,k=((O=(v=t[r])==null?void 0:v.roomData)==null?void 0:O.extraAdultRate)||0;let A=p;if(j>w){const B=j-w;A+=k*B}return N==="continental"&&(A+=x*j),g[r]={...g[r],guestQty:j,showMaxGuestAlert:m,price:A},j===0&&(g.splice(r,1),a(B=>B.filter((z,Y)=>Y!==r))),g})},u=()=>{var r;o(!0),localStorage.setItem("editAddPricing",!0),s(`/hotels/${(r=t[0])==null?void 0:r.hotelCode}`)};return e.jsxs(e.Fragment,{children:[t==null?void 0:t.map((r,i)=>{var g,f,j,m,p,x,N;const h=d[i]||{roomName:((g=r==null?void 0:r.roomData)==null?void 0:g.RoomName)||"",option:"roomOnly",price:((f=r==null?void 0:r.roomData)==null?void 0:f.discountRate)||0,guestQty:2,showMaxGuestAlert:!1};return h.guestQty===0?null:e.jsxs("div",{className:"flex flex-col gap-2 md:gap-4",children:[e.jsxs("div",{className:"flex flex-row lg:h-[120px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[e.jsx("div",{className:"w-1/2 md:w-1/3 relative",children:e.jsx("img",{src:(j=r==null?void 0:r.roomData)==null?void 0:j.roomImage[0],alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"})}),e.jsxs("div",{className:"hidden md:flex flex-col justify-center w-full gap-3 ",children:[e.jsx("p",{className:"text-2xl font-bold text- ",children:(m=r==null?void 0:r.roomData)==null?void 0:m.RoomName}),e.jsxs("div",{className:" text-gray-800",children:[e.jsx("div",{className:"text-primary-green font-bold text-xl ",children:F(h.price)}),e.jsx("div",{className:"text-xs font-semibold",children:"Incl. taxes"})]})]}),e.jsxs("div",{className:"hidden md:flex flex-col items-end  justify-end w-full lg:w-[490px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>c(i,"decrement"),children:e.jsx(se,{})}),e.jsx("span",{children:h.guestQty>1?`${h.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>c(i,"increment"),children:e.jsx(te,{})})]}),h.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-40 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(re,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(p=r==null?void 0:r.roomData)==null?void 0:p.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:u,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>l(w=>{const k=[...w];return k[i].showMaxGuestAlert=!1,k}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]}),e.jsxs("div",{className:"w-full md:hidden ",children:[e.jsx("p",{className:"text-lg md:text-2xl font-bold text- ",children:(x=r==null?void 0:r.roomData)==null?void 0:x.RoomName}),e.jsxs("div",{className:"flex justify-between mt-4 gap-2 w-full",children:[e.jsxs("div",{className:" text-gray-800",children:[e.jsx("div",{className:"text-primary-green font-bold text-md md:text-xl ",children:F(h.price)}),e.jsx("div",{className:"text-xs font-semibold",children:"Incl. taxes"})]}),e.jsxs("div",{className:"md:hidden flex flex-col justify-end  gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full text-xs  border border-primary-yellow p-1 gap-1 rounded-md text-primary-yellow font-medium md:text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>c(i,"decrement"),children:e.jsx(se,{})}),e.jsx("span",{children:h.guestQty>1?`${h.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>c(i,"increment"),children:e.jsx(te,{})})]}),h.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-40 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(re,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(N=r==null?void 0:r.roomData)==null?void 0:N.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:u,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>l(w=>{const k=[...w];return k[i].showMaxGuestAlert=!1,k}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]})]})]})]}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:gap-4",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2 pl-4 md:pl-0",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${i}`,value:"roomOnly",checked:h.option==="roomOnly",onChange:()=>n(i,"roomOnly"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${i}`,value:"continental",checked:h.option==="continental",onChange:()=>n(i,"continental"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]},i)}),t.length<=0&&e.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},Fe=()=>{var f,j,m;const{details:t,setEditAddPricing:a}=$(),d=localStorage.getItem("hotelInfo"),l=d?JSON.parse(d):null,o=localStorage.getItem("checkInDate"),s=localStorage.getItem("checkOutDate"),n=o?new Date(o):null,c=s?new Date(s):null,u=W(),r=()=>n&&c?je(c,n):0,i=()=>{var p;a(!0),localStorage.setItem("editAddPricing","true"),u(`/hotels/${(p=t[0])==null?void 0:p.hotelCode}`)},h=({date:p,label:x,time:N,isCheckOut:w=!1})=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"text-mobile/title md:text-desktop/h5/medium font-medium capitalize text-gray-900",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx("span",{className:"font-bold",children:Q(p,"dd MMM, ")})," ",Q(p,"EEE")]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("span",{className:"font-bold",children:Q(p,"dd MMM, ")})," ",Q(p,"EEEE")]})]}):e.jsxs("span",{className:"text-gray-400",children:["Select ",x.toLowerCase()]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm capitalize hidden md:block  font-medium text-gray-600  tracking-wide",children:x}),e.jsx("div",{className:"text-xs md:text-sm font-semibold text-gray-500",children:N||(w?"11:00 am":"1:00 pm")})]})]}),g=r();return e.jsxs("div",{className:" border-b-2",children:[e.jsxs("div",{className:"md:mb-4 mb-2",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-bold md:font-bold text-gray-900 md:mb-2",children:l==null?void 0:l.name}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:(f=l==null?void 0:l.location)==null?void 0:f.hotelAddress})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center gap-4 ",children:[e.jsx(h,{date:n,label:"Check-in",time:(j=t[0])==null?void 0:j.checkIn}),e.jsx(ye,{className:"text-primary-yellow text-2xl mb-1"}),e.jsx(h,{date:c,label:"Check-out",time:(m=t[0])==null?void 0:m.checkOut,isCheckOut:!0}),g>0&&e.jsxs("div",{className:"border-primary-yellow border text-primary-yellow px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[g," ",g===1?"Night":"Nights"]})]})}),e.jsx("button",{onClick:i,className:"inline-flex items-center  mb-2 text-primary-yellow underline font-medium transition-colors duration-200 ",children:e.jsx("span",{children:"Modify Date/Room Selection  "})})]})},Le=(t,a)=>{if(!t||!a)return 0;const d=new Date(t),l=new Date(a),o=Math.abs(l-d);return Math.ceil(o/(1e3*60*60*24))},Ve=()=>{var A,C,I,S;const{ContactUsDetail:t}=be(),{details:a,hotelData:d}=$(),l=a[0],o=W(),[s,n]=b.useState(!1),c=localStorage.getItem("user_email"),{data:u}=U(c),[r,i]=b.useState(!1),h=localStorage.getItem("hotelInfo"),g=JSON.parse(h),f=localStorage.getItem("checkInDate"),j=localStorage.getItem("checkOutDate"),m=Le(f,j),[p,x]=b.useState(!1),[N,w]=b.useState(!0),k=b.useRef();return b.useEffect(()=>{const R=document.querySelector("#payment-method");if(R){const P=new IntersectionObserver(([y])=>{x(y.isIntersecting)},{threshold:.1});return P.observe(R),()=>P.disconnect()}},[]),b.useEffect(()=>{p?setTimeout(()=>w(!1),300):w(!0)},[p]),b.useEffect(()=>{(!a||a.length===0||!l)&&o(`/hotels/${g==null?void 0:g.hotelCode}`)},[a,d,l,o,g]),!a||a.length===0||!l?null:e.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green overflow-hidden",children:[e.jsxs(Ne,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsxs("div",{className:"content flex gap-5 md:gap-6 flex-col py-6 md:py-10",children:[e.jsxs("div",{className:" flex justify-between items-center ",children:[e.jsxs("div",{className:"flex items-center cursor-pointer gap-6 py-4  text-white",onClick:()=>o(-1),children:[e.jsx("button",{"aria-label":"Go back",className:"flex items-center",children:e.jsx(ve,{className:"text-white h-6 w-6 sm:h-7 sm:w-7 md:h-9 md:w-9"})}),e.jsx("img",{src:"/images/Logo/logo.svg",alt:l==null?void 0:l.name,className:"w-[150px]"})]}),e.jsx("div",{className:"",children:c?e.jsxs("div",{onClick:()=>o("/user/profile"),className:"bg-white cursor-pointer text-primary-yellow font-bold w-12 h-12 rounded-full flex items-center justify-center",children:[(C=(A=u==null?void 0:u.data.firstName)==null?void 0:A[0])==null?void 0:C.toUpperCase(),(S=(I=u==null?void 0:u.data.lastName)==null?void 0:I[0])==null?void 0:S.toUpperCase()]}):e.jsx("button",{onClick:()=>i(!0),className:"border-2 border-primary-yellow text-primary-yellow px-4 py-2 rounded-full font-bold hover:bg-primary-yellow hover:text-white transition",children:"Login or Join"})}),r&&e.jsx(de,{closeModal:()=>i(!1)})]}),e.jsx("div",{className:"text-white  text-mobile/head md:text-desktop/head",children:"Booking Details"})]}),e.jsxs("div",{className:"md:flex gap-5 content bg-white py-6 md:py-0 rounded-t-3xl overflow-visible relative",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:px-8 md:py-10 gap-8 min-w-0",children:[e.jsx(Fe,{}),e.jsx(Me,{}),l.addToYourStay.length>0&&e.jsx(Ee,{data:l}),e.jsx(me,{ref:k,setIsVerified:n}),e.jsx(_e,{hotelDetail:l,checkIn:f,verified:s}),e.jsx(Re,{hotelDetail:l,verified:s,checkIn:f,checkOut:j}),e.jsx("div",{className:"xl:hidden",children:e.jsx(oe,{hotelDetail:l,checkIn:f,checkOut:j,days:m,showButton:N,isPaymentVisible:p})}),e.jsx(Ce,{ContactUsDetail:t})]}),e.jsx("div",{className:"hidden xl:block xl:w-[420px] flex-shrink-0 px-8 py-10",children:e.jsx(oe,{hotelDetail:l,checkIn:f,checkOut:j,days:m,showButton:N,isPaymentVisible:p})})]})]})};export{Ve as default};
