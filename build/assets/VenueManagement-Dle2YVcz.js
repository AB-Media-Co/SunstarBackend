import{j as e}from"./ui-vendor-ib5n1sau.js";import{a}from"./react-vendor-TJBKpoaW.js";import{u as s,a as r,b as l,c as t}from"./useVenues-B9ngfl_B.js";import{I as i}from"./ImageUpload-DjYKuoa9.js";import{u as n,a as d,b as c,c as o}from"./useVenueLocation-dt0kW_UW.js";import{P as m}from"./plus-0fMx0FGL.js";import{S as u,F as x}from"./search-DYj-fUI6.js";import{S as p}from"./square-pen-BWCsJiAg.js";import{T as g}from"./trash-2-CcgACtNU.js";import{X as h}from"./x-BOzcIeat.js";import"./query-vendor-B-W3jWpx.js";import"./index-Bl04lSVd.js";import"./useHotelHook2-Dg3SXKg3.js";import"./createLucideIcon-qEM6W6i8.js";const b={name:"",description:"",imageUrl:"",mapUrl:"",website:"",phone:"",email:"",isActive:!0,address:{line1:"",line2:"",area:"",city:"",state:"",postalCode:"",country:"India"}};function j(){const[s,r]=a.useState(!1),[l,t]=a.useState("create"),[x,j]=a.useState(null),[v,y]=a.useState({page:1,limit:10,search:"",active:"true"}),[N,f]=a.useState(b),[w,C]=a.useState(!1),{data:k,isLoading:P,error:M}=n(),A=d(),S=c(),V=o(),q=(null==k?void 0:k.items)??[],U=(null==k?void 0:k.pages)??1,L=()=>{r(!1),j(null),f(b),C(!1)},z=(e,a)=>{y((s=>({...s,[e]:a,page:1})))},I=w||A.isPending||S.isPending;return M?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-red-700",children:["Failed to load venue locations: ",M.message]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Venue Location Data"}),e.jsxs("p",{className:"text-gray-600",children:[(null==k?void 0:k.total)??0," locations found"]})]}),e.jsxs("button",{onClick:()=>{t("create"),j(null),f(b),r(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[e.jsx(m,{size:18})," Add Location"]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{value:v.search,onChange:e=>z("search",e.target.value),placeholder:"Search name/city/area...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:v.active,onChange:e=>z("active",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3",children:"Name"}),e.jsx("th",{className:"text-left px-4 py-3",children:"City"}),e.jsx("th",{className:"text-left px-4 py-3",children:"Phone"}),e.jsx("th",{className:"text-left px-4 py-3",children:"Email"}),e.jsx("th",{className:"text-left px-4 py-3",children:"Active"}),e.jsx("th",{className:"text-right px-4 py-3",children:"Actions"})]})}),e.jsx("tbody",{children:P?e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6",colSpan:6,children:"Loading…"})}):0===q.length?e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6",colSpan:6,children:"No locations found"})}):q.map((a=>{var s,l;return e.jsxs("tr",{className:"border-t",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium",children:a.name}),(null==(s=a.address)?void 0:s.line1)&&e.jsx("div",{className:"text-gray-500",children:a.address.line1})]}),e.jsx("td",{className:"px-4 py-3",children:(null==(l=a.address)?void 0:l.city)||"-"}),e.jsx("td",{className:"px-4 py-3",children:a.phone||"-"}),e.jsx("td",{className:"px-4 py-3",children:a.email||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded "+(a.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:a.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsxs("button",{onClick:()=>(e=>{var a,s,l,i,n,d,c;t("edit"),j(e),f({name:e.name||"",description:e.description||"",imageUrl:e.imageUrl||"",mapUrl:e.mapUrl||"",website:e.website||"",phone:e.phone||"",email:e.email||"",isActive:e.isActive??!0,address:{line1:(null==(a=e.address)?void 0:a.line1)||"",line2:(null==(s=e.address)?void 0:s.line2)||"",area:(null==(l=e.address)?void 0:l.area)||"",city:(null==(i=e.address)?void 0:i.city)||"",state:(null==(n=e.address)?void 0:n.state)||"",postalCode:(null==(d=e.address)?void 0:d.postalCode)||"",country:(null==(c=e.address)?void 0:c.country)||"India"}}),r(!0)})(a),className:"inline-flex items-center gap-1 px-3 py-1.5 border rounded mr-2 hover:bg-gray-50",children:[e.jsx(p,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>(e=>{window.confirm(`Delete "${e.name}"?`)&&V.mutate(e._id||e.slug)})(a),className:"inline-flex items-center gap-1 px-3 py-1.5 border rounded hover:bg-gray-50 text-red-600",children:[e.jsx(g,{size:14})," Delete"]})]})]},a._id)}))})]})}),U>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 p-4 border-t",children:[e.jsx("button",{onClick:()=>y((e=>({...e,page:Math.max(1,e.page-1)}))),disabled:1===v.page,className:"px-3 py-1.5 border rounded disabled:opacity-50",children:"Prev"}),e.jsxs("span",{className:"text-sm",children:["Page ",v.page," / ",U]}),e.jsx("button",{onClick:()=>y((e=>({...e,page:Math.min(U,e.page+1)}))),disabled:v.page===U,className:"px-3 py-1.5 border rounded disabled:opacity-50",children:"Next"})]})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-3xl max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"create"===l?"Add Venue Location":"Edit Venue Location"}),e.jsx("button",{onClick:L,className:"text-gray-500 hover:text-gray-700",children:e.jsx(h,{size:22})})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!N.name.trim())return alert("Name is required");if(!N.address.city.trim())return alert("City is required");if(!N.address.line1.trim())return alert("Address line1 is required");if(w)alert("Please wait for image upload to complete");else if("create"===l)A.mutate(N,{onSuccess:L});else{const e=(null==x?void 0:x._id)||(null==x?void 0:x.slug);S.mutate({idOrSlug:e,updates:N},{onSuccess:L})}},className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.name,onChange:e=>f((a=>({...a,name:e.target.value}))),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Venue Image"}),e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[e.jsx(i,{feature:{image:N.imageUrl},handleFeatureChange:(e,a)=>{"image"===e&&f((e=>({...e,imageUrl:a})))},setImageUpload:C,index:(null==x?void 0:x._id)||"new"}),N.imageUrl&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:N.imageUrl,alt:"Venue preview",className:"w-full max-w-xs h-32 object-cover rounded-lg border shadow-sm",onError:e=>{e.currentTarget.style.display="none"}}),e.jsx("button",{type:"button",onClick:()=>f((e=>({...e,imageUrl:""}))),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address Line 1 *"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.address.line1,onChange:e=>f((a=>({...a,address:{...a.address,line1:e.target.value}}))),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"City *"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.address.city,onChange:e=>f((a=>({...a,address:{...a.address,city:e.target.value}}))),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Postal Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.address.postalCode,onChange:e=>f((a=>({...a,address:{...a.address,postalCode:e.target.value}})))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.phone,onChange:e=>f((a=>({...a,phone:e.target.value})))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full border rounded px-3 py-2",value:N.email,onChange:e=>f((a=>({...a,email:e.target.value})))})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:N.isActive,onChange:e=>f((a=>({...a,isActive:e.target.checked})))}),"Active"]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 border rounded",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"px-6 py-2 rounded bg-blue-600 text-white disabled:opacity-50",children:I?"Saving...":"create"===l?"Create":"Update"})]})]})]})})]})}const v=()=>{const[n,d]=a.useState(!1),[c,o]=a.useState(null),[b,v]=a.useState("venues"),[y,N]=a.useState("create"),[f,w]=a.useState(!1),[C,k]=a.useState({page:1,limit:12,search:"",minPrice:"",maxPrice:"",minCapacity:"",maxCapacity:"",minRating:"",isActive:!0}),[P,M]=a.useState(!1),{data:A,isLoading:S,error:V}=s(C),q=r(),U=l(),L=t(),z=(null==A?void 0:A.data)||[],[I,E]=a.useState({name:"",image:"",pricePerPlate:"",capacityMin:"",capacityMax:"",location:"",description:"",rating:0,isActive:!0}),_=(e,a)=>{E((s=>({...s,[e]:a})))},D=(e,a=null)=>{N(e),o(a),E(a?{name:a.name||"",image:a.image||"",pricePerPlate:a.pricePerPlate||"",capacityMin:a.capacityMin||"",capacityMax:a.capacityMax||"",location:a.location||"",description:a.description||"",rating:a.rating||0,isActive:a.isActive??!0}:{name:"",image:"",pricePerPlate:"",capacityMin:"",capacityMax:"",location:"",description:"",rating:0,isActive:!0}),d(!0)},F=()=>{d(!1),o(null),w(!1),E({name:"",image:"",pricePerPlate:"",capacityMin:"",capacityMax:"",location:"",description:"",rating:0,isActive:!0})},R=(e,a)=>{k((s=>({...s,[e]:a,page:1})))};return V?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-red-700",children:["Error loading venues: ",V.message]})})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mt-20 mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-2 mb-6 flex gap-2",children:[e.jsx("button",{onClick:()=>v("venues"),className:"px-4 py-2 rounded "+("venues"===b?"bg-blue-600 text-white":"hover:bg-gray-100"),children:"Venues"}),e.jsx("button",{onClick:()=>v("venueLocations"),className:"px-4 py-2 rounded "+("venueLocations"===b?"bg-blue-600 text-white":"hover:bg-gray-100"),children:"Venue Location Data"})]}),"venueLocations"===b&&e.jsx(j,{}),"venues"===b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Venue Management"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[(null==A?void 0:A.total)||0," venues found"]})]}),e.jsxs("button",{onClick:()=>D("create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(m,{size:20}),"Add New Venue"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search venues...",value:C.search,onChange:e=>R("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("button",{onClick:()=>M(!P),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(x,{size:20}),"Filters"]})]}),P&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Price"}),e.jsx("input",{type:"number",value:C.minPrice,onChange:e=>R("minPrice",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Price"}),e.jsx("input",{type:"number",value:C.maxPrice,onChange:e=>R("maxPrice",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Capacity"}),e.jsx("input",{type:"number",value:C.minCapacity,onChange:e=>R("minCapacity",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Rating"}),e.jsxs("select",{value:C.minRating,onChange:e=>R("minRating",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Any Rating"}),e.jsx("option",{value:"1",children:"1+ Stars"}),e.jsx("option",{value:"2",children:"2+ Stars"}),e.jsx("option",{value:"3",children:"3+ Stars"}),e.jsx("option",{value:"4",children:"4+ Stars"}),e.jsx("option",{value:"5",children:"5 Stars"})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{k({page:1,limit:12,search:"",minPrice:"",maxPrice:"",minCapacity:"",maxCapacity:"",minRating:"",isActive:!0})},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Clear all filters"})})]})]})]}),S&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map(((a,s)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},s)))}),!S&&z.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:z.map((a=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.image||"/api/placeholder/300/200",alt:a.name,className:"w-full h-48 object-cover rounded-t-lg",onError:e=>{e.target.src="/api/placeholder/300/200"}}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx("button",{onClick:()=>D("edit",a),className:"bg-white bg-opacity-90 hover:bg-opacity-100 p-2 rounded-full shadow-sm transition-colors",children:e.jsx(p,{size:16,className:"text-blue-600"})}),e.jsx("button",{onClick:()=>(e=>{window.confirm(`Are you sure you want to delete "${e.name}"?`)&&L.mutate(e._id)})(a),disabled:L.isPending,className:"bg-white bg-opacity-90 hover:bg-opacity-100 p-2 rounded-full shadow-sm transition-colors disabled:opacity-50",children:e.jsx(g,{size:16,className:"text-red-600"})})]}),e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 rounded text-xs font-medium "+(a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:a.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-1",children:a.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:a.location}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["₹",a.pricePerPlate,"/plate"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-yellow-400",children:"★"}),e.jsxs("span",{className:"ml-1 text-sm text-gray-600",children:[a.rating,"/5"]})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Capacity: ",a.capacityMin," - ",a.capacityMax," people"]}),a.description&&e.jsx("p",{className:"text-gray-600 text-sm mt-2 line-clamp-2",children:a.description})]})]},a._id)))}),!S&&0===z.length&&e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-6 w-24 h-24 mx-auto mb-4 flex items-center justify-center",children:e.jsx(u,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No venues found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or add a new venue."}),e.jsx("button",{onClick:()=>D("create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:"Add Your First Venue"})]})}),(null==A?void 0:A.pages)>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R("page",C.page-1),disabled:1===C.page,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),[...Array(Math.min(5,A.pages))].map(((a,s)=>{const r=s+1;return e.jsx("button",{onClick:()=>R("page",r),className:"px-3 py-2 rounded-lg "+(C.page===r?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-50"),children:r},r)})),e.jsx("button",{onClick:()=>R("page",C.page+1),disabled:C.page===(null==A?void 0:A.pages),className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]})]}),"venues"===b&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"create"===y?"Add New Venue":"Edit Venue"}),e.jsx("button",{onClick:F,className:"text-gray-400 hover:text-gray-600",children:e.jsx(h,{size:24})})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=I.name.trim()?I.location.trim()?!I.pricePerPlate||I.pricePerPlate<=0?"Valid price is required":!I.capacityMin||I.capacityMin<=0?"Valid minimum capacity is required":!I.capacityMax||I.capacityMax<=0?"Valid maximum capacity is required":Number(I.capacityMin)>Number(I.capacityMax)?"Min capacity cannot be greater than max capacity":null:"Location is required":"Venue name is required";if(a)return void alert(a);if(f)return void alert("Please wait for image upload to complete");const s={...I,pricePerPlate:Number(I.pricePerPlate),capacityMin:Number(I.capacityMin),capacityMax:Number(I.capacityMax),rating:Number(I.rating)};"create"===y?q.mutate(s,{onSuccess:()=>F()}):"edit"===y&&U.mutate({id:c._id,updates:s},{onSuccess:()=>F()})},className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Venue Name *"}),e.jsx("input",{type:"text",required:!0,value:I.name,onChange:e=>_("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter venue name"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Venue Image"}),e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[e.jsx(i,{feature:I,handleFeatureChange:_,setImageUpload:w,index:(null==c?void 0:c._id)||"new"}),I.image&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:I.image,alt:"Venue preview",className:"w-full max-w-xs h-32 object-cover rounded-lg border shadow-sm",onError:e=>{e.target.style.display="none"}}),e.jsx("button",{type:"button",onClick:()=>_("image",""),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price per Plate (₹) *"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:I.pricePerPlate,onChange:e=>_("pricePerPlate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. 500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating (0-5)"}),e.jsx("input",{type:"number",min:"0",max:"5",step:"0.1",value:I.rating,onChange:e=>_("rating",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. 4.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Capacity *"}),e.jsx("input",{type:"number",required:!0,min:"1",value:I.capacityMin,onChange:e=>_("capacityMin",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. 50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Capacity *"}),e.jsx("input",{type:"number",required:!0,min:"1",value:I.capacityMax,onChange:e=>_("capacityMax",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. 200"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),e.jsx("input",{type:"text",required:!0,value:I.location,onChange:e=>_("location",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g. Mumbai, Maharashtra"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{rows:"4",value:I.description,onChange:e=>_("description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the venue, amenities, and special features..."})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:I.isActive,onChange:e=>_("isActive",e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active (venue is available for bookings)"})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t",children:[e.jsx("button",{type:"button",onClick:F,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:q.isPending||U.isPending||f,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Uploading Image...":q.isPending||U.isPending?"Saving...":"create"===y?"Create Venue":"Update Venue"})]})]})]})})]})};export{v as default};
