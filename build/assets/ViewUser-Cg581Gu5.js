import{j as e,au as l,av as a,E as s}from"./ui-vendor-ib5n1sau.js";import{a as t,g as n,h as r,n as i}from"./index-Bl04lSVd.js";import{L as o}from"./Loader-CTAUwaKQ.js";import{a as d,i as m}from"./react-vendor-TJBKpoaW.js";import"./query-vendor-B-W3jWpx.js";const x=()=>{const{adminProfile:x,profileLoading:g,profileError:h}=t(),[j,f]=d.useState(!1),[b,p]=d.useState({}),{mutate:v,isLoading:y}=n();if(r(),m(),g)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(o,{fullScreen:!1,size:"md"})});if(h)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[e.jsx("h2",{className:"text-2xl font-semibold text-red-600 mb-2",children:"Error Loading Profile"}),e.jsx("p",{className:"text-gray-600",children:h.message||"Something went wrong. Please try again later."})]});if(!x)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600",children:"Please check if the user exists or refresh the page."})]});const{username:w,email:N,phone:C,role:A,gender:S,age:H,allowedCities:P,allowedHotels:L,createdAt:z,updatedAt:E}=x.data,F=e=>{p({...b,[e.target.name]:e.target.value})};return e.jsx("div",{className:"flex items-center justify-center min-h-screen pt-16 bg-gray-50 px-4",children:e.jsxs("div",{className:"w-full max-w-2xl relative flex flex-col bg-white rounded-lg shadow-md border border-gray-200",children:[e.jsxs("div",{className:"bg-gray-100 px-8 py-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 capitalize mx-auto rounded-full bg-gray-200 flex items-center justify-center text-4xl font-semibold text-gray-700",children:w[0].toUpperCase()}),e.jsx("h2",{className:"text-2xl font-semibold mt-4 text-gray-800",children:w}),e.jsx("p",{className:"text-sm font-medium text-gray-500 capitalize",children:A})]}),e.jsx("div",{className:"p-8 flex flex-col w-full gap-6 bg-gray-50",children:j?e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"Name",name:"username",value:b.username,onChange:F}),e.jsx(c,{label:"Email",name:"email",value:b.email,onChange:F}),e.jsx(c,{label:"Phone",name:"phone",value:b.phone,onChange:F}),e.jsx(c,{label:"Gender",name:"gender",value:b.gender,onChange:F}),e.jsx(c,{label:"Age",name:"age",value:b.age,onChange:F,type:"number"}),e.jsx(c,{label:"Allowed Cities (comma-separated)",name:"allowedCities",value:b.allowedCities,onChange:F}),e.jsx(c,{label:"Allowed Hotels (comma-separated)",name:"allowedHotels",value:b.allowedHotels,onChange:F})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{label:"Name",value:w}),e.jsx(u,{label:"Email",value:N}),e.jsx(u,{label:"Phone",value:C}),e.jsx(u,{label:"Gender",value:S}),e.jsx(u,{label:"Age",value:H}),e.jsx(u,{label:"Role",value:A}),e.jsx(u,{label:"Allowed Cities",value:P.join(", ")||"None"}),e.jsx(u,{label:"Allowed Hotels",value:L.join(", ")||"None"}),e.jsx(u,{label:"Created At",value:new Date(z).toLocaleDateString()}),e.jsx(u,{label:"Updated At",value:new Date(E).toLocaleDateString()})]})}),e.jsx("div",{className:"flex absolute right-0 justify-end p-6 gap-4 bg-gray-100",children:j?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{const e={username:null==b?void 0:b.username,email:null==b?void 0:b.email,phone:null==b?void 0:b.phone,gender:null==b?void 0:b.gender,age:null==b?void 0:b.age,allowedCities:b.allowedCities?b.allowedCities.split(",").map((e=>e.trim())):[],allowedHotels:b.allowedHotels?b.allowedHotels.split(",").map((e=>e.trim())):[]};v(e,{onSuccess:()=>{i.success("Profile updated successfully"),f(!1)},onError:e=>{i.error(e.message||"Failed to update profile")}})},disabled:y,className:"p-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center "+(y?"opacity-50 cursor-not-allowed":""),children:e.jsx(l,{fontSize:"small"})}),e.jsx("button",{onClick:()=>f(!1),className:"p-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 flex items-center",children:e.jsx(a,{fontSize:"small"})})]}):e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>{f(!j),p({username:w,email:N,phone:C,gender:S,age:H,allowedCities:P.join(","),allowedHotels:L.join(",")})},className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",children:e.jsx(s,{fontSize:"small"})})})})]})})},c=({label:l,name:a,value:s,onChange:t,type:n="text"})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-1",children:l}),e.jsx("input",{type:n,name:a,value:s,onChange:t,className:"px-4 py-2 border rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),u=({label:l,value:a})=>e.jsxs("div",{className:"flex justify-between w-full items-center border-b last:border-0 pb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[l,":"]}),e.jsx("span",{className:"text-sm text-gray-800",children:a})]});export{x as default};
