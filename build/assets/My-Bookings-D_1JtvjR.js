import{r as e,j as s,aL as a,y as r,aM as t,F as l,af as o,ag as i,aN as d,aO as n,aP as c,Y as m,aK as x}from"./react-vendor-tq68JOgp.js";import{useGetHotels as h}from"./useHotelHook2-C33856rg.js";import{a as g}from"./pushBookingHook-W2JUTQBR.js";import{e as u}from"./useUser-BWOBjQCf.js";import{u as b}from"./index-D89k_Hd_.js";import"./animation-vendor-DJegggv9.js";import"./vendor-DwD9zxym.js";import"./query-vendor-iDpT9gG9.js";import"./ui-vendor-DiJ4VKpG.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";const j=({status:e,bookingStatus:r})=>"Confirmed Reservation"===r?s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200",children:[s.jsx(n,{className:"w-3 h-3 mr-1.5"}),"Confirmed"]}):"Unconfirmed Reservation"===r?s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border border-amber-200",children:[s.jsx(a,{className:"w-3 h-3 mr-1.5"}),"Unconfirmed"]}):"Cancelled"===e?s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200",children:[s.jsx(c,{className:"w-3 h-3 mr-1.5"}),"Cancelled"]}):s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200",children:r}),p=e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),f=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),N=({label:e,icon:a,secondary:r,danger:t,onClick:l})=>{let o="bg-[#5BBEBC] text-white hover:bg-[#4BA9A6]";return r&&(o="bg-gray-100 text-gray-700 hover:bg-gray-200"),t&&(o="bg-red-100 text-red-700 hover:bg-red-200"),s.jsxs("button",{onClick:l,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${o}`,children:[a,e]})};function v(){var v;const[y,w]=e.useState(""),[k,C]=e.useState(null),[B,S]=e.useState(!1),[R,A]=e.useState(""),[L,E]=e.useState("all"),[D,F]=e.useState(!1),[T,I]=e.useState(null),[M,P]=e.useState(!1),{setIsNavColor:H}=b();e.useEffect((()=>(H(!0),()=>{H(!1)})),[H]),e.useEffect((()=>{window.scrollTo(0,0)}),[]);const{data:K,isLoading:U,error:z}=h(),G=u(),{data:O,isLoading:$,error:Y,refetch:q}=g({hotelCode:null==k?void 0:k.hotelCode,email:y,apiKey:null==k?void 0:k.authKey});e.useEffect((()=>{const e=localStorage.getItem("userEmail")||"prakash@abmediaco.com";w(e),(null==K?void 0:K.hotels)&&K.hotels.length>0&&C(K.hotels[0])}),[K]);const W=(null==(v=null==O?void 0:O.BookingList)?void 0:v.filter((e=>{const s=e.GuestName.toLowerCase().includes(R.toLowerCase())||e.ReservationNo.toLowerCase().includes(R.toLowerCase()),a="all"===L||"confirmed"===L&&"Confirmed Reservation"===e.BookingStatus||"unconfirmed"===L&&"Unconfirmed Reservation"===e.BookingStatus||"cancelled"===L&&"Cancelled"===e.Status;return s&&a})))||[];return U?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:s.jsx("div",{className:"content  mx-auto px-4 py-8",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-10 w-64 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl mb-4"}),s.jsx("div",{className:"h-6 w-96 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),s.jsx("div",{className:"grid gap-6",children:[1,2,3].map((e=>s.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),s.jsx("div",{className:"h-6 w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-4 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),s.jsx("div",{className:"h-4 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),s.jsx("div",{className:"h-4 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})},e)))})]})})}):z?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-8 flex items-start shadow-2xl max-w-md",children:[s.jsx(a,{className:"h-6 w-6 mr-3 mt-1 text-red-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Connection Error"}),s.jsx("p",{className:"text-red-700",children:"Failed to load hotel information. Please check your connection and try again."})]})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[D&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:s.jsx(r,{className:"h-8 w-8 text-red-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Cancel Booking"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to cancel the booking for ",s.jsx("span",{className:"font-semibold",children:null==T?void 0:T.GuestName}),"?",s.jsx("br",{}),s.jsxs("span",{className:"text-sm text-gray-500",children:["Reservation #",null==T?void 0:T.ReservationNo]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors",children:"Keep Booking"}),s.jsx("button",{onClick:()=>{return e=this,s=function*(){if(T&&k){P(!0);try{yield G.mutateAsync({hotelCode:k.hotelCode,apiKey:k.authKey,reservationNo:T.ReservationNo}),yield q(),F(!1),I(null)}catch(e){}finally{P(!1)}}else toast.error("No booking selected or hotel information missing")},new Promise(((a,r)=>{var t=e=>{try{o(s.next(e))}catch(a){r(a)}},l=e=>{try{o(s.throw(e))}catch(a){r(a)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(t,l);o((s=s.apply(e,null)).next())}));var e,s},className:"flex-1 px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-xl font-medium transition-colors flex justify-center items-center",disabled:M,children:M?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z"})]}),"Cancelling..."]}):"Cancel Booking"})]})]})})}),s.jsxs("div",{className:"content pt-24 mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"My Bookings"}),s.jsx("p",{className:"text-lg text-gray-500",children:"Manage and review your hotel reservations"})]}),s.jsx("div",{className:"flex gap-3",children:s.jsxs("button",{onClick:()=>{q()},className:"flex items-center gap-2 px-5 py-3 text-white bg-[#5BBEBC] hover:bg-[#4BA9A6] rounded-xl shadow-md transition",children:[s.jsx(t,{className:"w-5 h-5"})," Refresh"]})})]}),(null==K?void 0:K.hotels)&&K.hotels.length>0&&s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md mb-10 border border-gray-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"font-semibold text-xl text-gray-900 mb-2",children:"Select Hotel"}),s.jsx("p",{className:"text-gray-500",children:"Choose your hotel to load bookings"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{className:"w-full bg-white border border-gray-300 py-4 px-6 rounded-lg text-left text-gray-900 font-medium flex justify-between items-center",onClick:()=>S(!B),children:[k?k.name:"Choose Hotel",s.jsx(l,{className:"w-5 h-5 transition-transform "+(B?"rotate-180":"")})]}),B&&s.jsx("div",{className:"absolute w-full mt-2 rounded-lg border border-gray-200 shadow-lg bg-white z-20",children:K.hotels.map((e=>{var a;return s.jsx("button",{onClick:()=>(e=>{C(e),S(!1)})(e),className:"w-full text-left px-6 py-4 hover:bg-[#F9FAFB]",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:e.name}),s.jsx("div",{className:"text-sm text-gray-500",children:null==(a=e.location)?void 0:a.hotelAddress})]}),s.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-[#5BBEBC]/20 text-[#5BBEBC]",children:e.hotelCode})]})},e._id)}))})]})]}),(null==O?void 0:O.BookingList)&&O.BookingList.length>0&&s.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(o,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search by guest name or reservation number...",value:R,onChange:e=>A(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{className:"w-5 h-5 text-gray-400"}),s.jsxs("select",{value:L,onChange:e=>E(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white min-w-[140px]",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"unconfirmed",children:"Unconfirmed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})})]}),(null==O?void 0:O.RoomList)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-[#5BBEBC] rounded-xl",children:s.jsx(d,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Total Rooms"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:O.RoomList.TotalActiveRoomInHotel})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-[#FDC114] rounded-xl",children:s.jsx(n,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Occupied"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:O.RoomList.TotalOccupiedRooms})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-red-500 rounded-xl",children:s.jsx(c,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Blocked"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:O.RoomList.TotalBlockRooms})]})]})})]}),$&&s.jsx("div",{className:"grid gap-8",children:[1,2,3].map((e=>s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20",children:[s.jsx("div",{className:"p-8 border-b border-gray-100",children:s.jsxs("div",{className:"animate-pulse flex justify-between items-start",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"h-8 w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),s.jsx("div",{className:"h-5 w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),s.jsx("div",{className:"h-8 w-24 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"})]})}),s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"animate-pulse grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),s.jsx("div",{className:"h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),s.jsx("div",{className:"h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),s.jsx("div",{className:"h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),s.jsx("div",{className:"h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})})]},e)))}),Y&&s.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-8 flex items-start shadow-2xl",children:[s.jsx(a,{className:"h-6 w-6 mr-3 mt-1 text-red-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Failed to Load Bookings"}),s.jsx("p",{className:"text-red-700",children:"Please check your connection and try again. If the problem persists, contact support."})]})]}),W.length>0?s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h2",{className:"text-3xl font-bold text-gray-900",children:["Your Reservations",s.jsx("span",{className:"ml-3 inline-flex items-center px-4 py-2 rounded-full text-lg font-semibold bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800",children:W.length})]})}),s.jsx("div",{className:"grid gap-6",children:W.map((e=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-md p-6 hover:shadow-lg transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.GuestName.trim(),s.jsx(j,{status:e.Status,bookingStatus:e.BookingStatus})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Reservation #",e.ReservationNo]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xl font-bold text-[#5BBEBC]",children:f(e.TotalInclusiveTax)}),s.jsx("p",{className:"text-xs text-gray-500",children:"Total Amount"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 text-sm text-gray-700",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Stay:"})," ",p(e.ArrivalDate)," - ",p(e.DepartureDate)," (",e.NoOfNights," nights)"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Room:"})," ",e.Room," #",e.RoomNo]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Guests:"})," ",e.Adult," Adult",e.Child>0?`, ${e.Child} Child`:""]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",e.Email]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Mobile:"})," ",e.Mobile]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Payment:"})," ",e.TransactionStatus]}),e.DueAmount>0&&s.jsxs("p",{className:"font-semibold text-red-500",children:["Due: ",f(e.DueAmount)]})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-xs text-gray-500 border-t pt-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 mb-3 md:mb-0",children:[s.jsxs("span",{children:["Booked on: ",p(e.ReservationDate)]}),s.jsxs("span",{children:["Source: ",e.Source]}),s.jsxs("span",{children:["Folio: ",e.FolioNo]})]}),s.jsx("div",{className:"flex gap-3",children:"Cancelled"!==e.Status&&"Cancelled"!==e.BookingStatus&&s.jsx(N,{label:"Cancel",icon:s.jsx(r,{className:"w-4 h-4"}),danger:!0,onClick:()=>(e=>{I(e),F(!0)})(e)})})]})]},e.ReservationNo)))})]}):!$&&k&&s.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl text-center py-16 px-8",children:s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("div",{className:"p-6 bg-gradient-to-br from-gray-100 to-slate-100 rounded-full",children:s.jsx(m,{className:"w-12 h-12 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No bookings found"}),s.jsx("p",{className:"text-gray-600 text-lg max-w-md",children:R||"all"!==L?"No bookings match your current search or filter criteria.":`You don't have any bookings for ${k.name} yet. Start planning your next luxurious stay!`})]}),!R&&"all"===L&&s.jsxs("button",{className:"mt-4 inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-semibold shadow-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 hover:scale-105",children:[s.jsx(m,{className:"w-5 h-5 mr-2"}),"Make a Booking"]})]})}),!k&&!U&&s.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl text-center py-16 px-8",children:s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("div",{className:"p-6 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full",children:s.jsx(x,{className:"w-12 h-12 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select a hotel"}),s.jsx("p",{className:"text-gray-600 text-lg max-w-md",children:"Please select a hotel from the dropdown above to view your amazing bookings and reservations."})]})]})})]})]})}export{v as default};
