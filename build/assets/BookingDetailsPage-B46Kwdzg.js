import{j as e,aZ as t,aj as s,a_ as a,aV as l}from"./ui-vendor-ib5n1sau.js";import{L as r,a as o,i}from"./react-vendor-TJBKpoaW.js";import{u as n}from"./useUpdatePagesHook-BMk10lIP.js";import{c as d,d as c,u as m}from"./index-Bl04lSVd.js";import{u as x}from"./useUser-MR9gUyM4.js";import{u}from"./pushBookingHook-dCZYZCM4.js";import{u as h}from"./query-vendor-B-W3jWpx.js";import{c as p}from"./createLucideIcon-qEM6W6i8.js";import{C as g,S as f,A as y}from"./sparkles-BeAlut4k.js";import{S as v}from"./shield-CdZP2IdB.js";import{C as b}from"./clock-BR2pKF95.js";import{f as j}from"./formatCurrency-D9YqnSEn.js";import{d as N,e as w}from"./useOffersAndDealsHook-CNuSU-Pw.js";import{L as k}from"./LoginModal-BBwjTbqD.js";import{g as C}from"./urlHelper-B-upFRYv.js";import{H as D}from"./Helmet-DQgaajfZ.js";import{d as S,f as I}from"./utils-iyq1-MzM.js";import"./Loader-CTAUwaKQ.js";import"./x-BOzcIeat.js";
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=p("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),_=p("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),A=p("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),R=p("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),M=({ContactUsDetail:t})=>{const s=(null==t?void 0:t.phoneNumber)||"";return e.jsx("footer",{className:"w-full md:border-t border-gray-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-6 py-6 text-gray-600   md:justify-between md:gap-10 md:py-8",children:[e.jsxs("div",{className:"flex justify-between gap-2 sm:gap-3",children:[e.jsx("p",{className:"text-base font-semibold tracking-tight sm:text-lg md:text-2xl",children:"Facing an issue? Call us for assistance."}),s?e.jsx("a",{href:`tel:${s}`,className:"w-fit text-lg font-semibold underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-xl","aria-label":`Call ${s}`,children:e.jsx("span",{className:"whitespace-nowrap",children:s})}):e.jsx("span",{className:"text-sm text-gray-500 sm:text-base",children:"Phone number unavailable"})]}),e.jsxs("nav",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 sm:gap-x-8","aria-label":"Footer navigation",children:[e.jsx(r,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Cancellation Policy"}),e.jsx(r,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Terms & Conditions"})]})]})})})},E=({hotelDetail:t,amount:s,onSuccess:a})=>{const l=h({mutationFn:async e=>(await d.post("/api/payments/create",e)).data,onSuccess:()=>{c.success("Order created successfully")},onError:e=>{var t,s;c.error("Failed to create order: "+((null==(s=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:s.message)||e.message))}}),r=h({mutationFn:async e=>(await d.post("/api/payments/verify",e)).data,onSuccess:()=>{c.success("Payment verified successfully")},onError:e=>{var t,s;c.error("Payment verification failed: "+((null==(s=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:s.message)||e.message))}}),o={14496:"rzp_live_KZSDFi3qOgrIgC",14492:"rzp_live_IQdcqeX4foVUM3",14494:"rzp_live_SxbRIhkDqyGEOM",14493:"rzp_live_uUlevuP8MoleGg"}[null==t?void 0:t.hotelCode];return e.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:()=>{const e={amount:s,currency:"INR",hotelCode:null==t?void 0:t.hotelCode};l.mutate(e,{onSuccess:e=>{const s={key:o,amount:e.amount,currency:e.currency,name:null==t?void 0:t.hotelName,description:"Hotel Booking Payment",order_id:e.id,handler:function(e){const s={razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature,hotelCode:null==t?void 0:t.hotelCode};r.mutate(s,{onSuccess:()=>{c.success("Payment Verified ✅"),a("PAID_TYPE_UNKID")}})},prefill:{name:"",email:"",contact:""},theme:{color:"#38b2ac"}};new window.Razorpay(s).open()},onError:()=>{c.error("Failed to create Razorpay order")}})},children:"Confirm Booking"})},O=({hotelDetail:t,verified:s,checkIn:a,checkOut:l})=>{const r=localStorage.getItem("user_email"),{data:n}=x(r),[d,c]=o.useState(""),{selectedRooms:h,setIsConfirmationModalOpen:p,someOneElse:g,guestData:f,setPaymentMethod:y,selectedOtherCharges:v}=m(),b=u(),j=i(),N=e=>{c(e),y(e)},w=(e="")=>{var r,o;if(!s&&!(null==(r=null==n?void 0:n.data)?void 0:r.isVerified))return void(null==(o=document.getElementById("guestDetail"))||o.scrollIntoView({behavior:"smooth"}));const i=Array.isArray(v)&&v.length>0?v.map((e=>{const t=(null==e?void 0:e.qty)?` x${e.qty}`:"",s=(null==e?void 0:e.note)?` (${e.note})`:"";return`${e.heading||""}${t}${s}`.trim()})).filter(Boolean).join(", "):"",c="pay-at-hotel"===d?"pay-at-hotel":e,m=i?`${c} | Add-ons: ${i}`:c,x={};h.forEach(((e,t)=>{var s;const a=parseInt(localStorage.getItem("days")),l=Array(a).fill(e.price).join(","),r=Array(a).fill(0).join(","),o=Array(a).fill(0).join(",");x[`Room_${t+1}`]={Rateplan_Id:null==e?void 0:e.roomrateunkid,Ratetype_Id:e.RateTypeID,Roomtype_Id:e.RoomTypeID,baserate:l,extradultrate:r,extrachildrate:o,number_adults:(null==(s=e.guestQty)?void 0:s.toString())||"1",number_children:"0",ExtraChild_Age:"",Title:"",First_Name:g?f.firstName||"":(null==n?void 0:n.data.firstName)||"",Last_Name:g?f.lastName||"":(null==n?void 0:n.data.lastName)||"",Gender:(null==n?void 0:n.data.gender)||"",SpecialRequest:m}}));const u=i?`Add To Your Stay: ${i}`:"",p={BookingData:{Room_Details:x,check_in_date:a,check_out_date:l,Booking_Payment_Mode:"pay-at-hotel"===d?"0":"1",Email_Address:null==n?void 0:n.data.email,Source_Id:"",MobileNo:g?f.phone:(null==n?void 0:n.data.phone)||"",Address:(null==n?void 0:n.data.address)||"",State:(null==n?void 0:n.data.state)||"",Country:(null==n?void 0:n.data.country)||"",City:(null==n?void 0:n.data.city)||"",Zipcode:"",Fax:"",Device:"Web",Languagekey:"",paymenttypeunkid:e,remark:u},HotelCode:null==t?void 0:t.hotelCode,APIKey:null==t?void 0:t.authKey,userEmail:null==n?void 0:n.data.email};b.mutate(p,{onSuccess:e=>{var s,r,o,i;j("/thankyou",{state:{bookingResponse:e,payload:p,paymentMethod:d,checkIn:a,checkOut:l,hotelDetail:t,hotel:{hotelCode:null==t?void 0:t.hotelCode,name:null==t?void 0:t.hotelName,payAtHotel:null==t?void 0:t.payAtHotel},user:{email:null==(s=null==n?void 0:n.data)?void 0:s.email,firstName:null==(r=null==n?void 0:n.data)?void 0:r.firstName,lastName:null==(o=null==n?void 0:n.data)?void 0:o.lastName,phone:null==(i=null==n?void 0:n.data)?void 0:i.phone},rooms:h},replace:!0})}})};return b.isPending?e.jsxs("div",{className:"relative bg-white border-gray-100",children:[e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-primary-green rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-r-teal-300 rounded-full animate-spin mx-auto",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Processing Your Booking"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your reservation..."}),e.jsx("div",{className:"flex items-center justify-center mt-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),e.jsx("div",{className:"filter blur-sm pointer-events-none",children:e.jsx(L,{hotelDetail:t,selectedPaymentMethod:d,handlePaymentMethodChange:N,ContinueBtnClick:w,isLoading:!0})})]}):e.jsx(L,{hotelDetail:t,selectedPaymentMethod:d,handlePaymentMethodChange:N,ContinueBtnClick:w,isLoading:!1})},L=({hotelDetail:t,selectedPaymentMethod:s,handlePaymentMethodChange:a,ContinueBtnClick:l,isLoading:r})=>{const{finalPrice:o}=m();return e.jsxs("div",{id:"payment-method",className:"bg-white",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-900 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-sm md:text-base text-gray-500",children:"Choose your preferred payment option"})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4 mb-6 md:mb-8",children:[e.jsx(B,{id:"pay-now",icon:e.jsx(A,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay and Book Now",description:"Complete your booking instantly with secure online payment",features:[{icon:e.jsx(g,{className:"w-4 h-4"}),text:"Instant confirmation"},{icon:e.jsx(v,{className:"w-4 h-4"}),text:"All major cards"},{icon:e.jsx(f,{className:"w-4 h-4"}),text:"5% discount"}],badge:{text:"Secure",color:"green"},discountBadge:{text:"Save 5%",color:"red"},isSelected:"pay-now"===s,onClick:()=>!r&&a("pay-now"),isLoading:r,isRecommended:!0}),"yes"===(null==t?void 0:t.payAtHotel)&&e.jsx(B,{id:"pay-at-hotel",icon:e.jsx(P,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay at Hotel",description:"Reserve now and pay at check-in",features:[{icon:e.jsx(b,{className:"w-4 h-4"}),text:"No advance payment"},{icon:e.jsx(P,{className:"w-4 h-4"}),text:"Pay at reception"}],badge:{text:"Flexible",color:"orange"},isSelected:"pay-at-hotel"===s,onClick:()=>!r&&a("pay-at-hotel"),isLoading:r})]}),s&&e.jsx("div",{className:"flex justify-end mb-6 md:mb-8",children:"pay-now"===s?e.jsx(E,{hotelDetail:t,amount:o,onSuccess:e=>l(e)}):e.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:()=>l(),children:e.jsx("span",{children:"Confirm Booking"})})}),e.jsx("div",{className:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3 text-xs md:text-sm text-gray-700",children:[e.jsx(v,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Your payment information is secured with 256-bit SSL encryption"})]})})]})},B=({id:t,icon:s,title:a,description:l,features:r,badge:o,discountBadge:i,isSelected:n,onClick:d,isLoading:c,isRecommended:m=!1})=>{const x={green:"bg-green-100 text-green-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"};return e.jsxs("div",{className:`relative overflow-hidden rounded-lg md:rounded-xl border-2 transition-all duration-300 cursor-pointer group ${n?"border-primary-green bg-gradient-to-br from-teal-50 to-emerald-50 shadow-lg":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-md"} ${c?"pointer-events-none opacity-50":""}`,onClick:d,children:[m&&e.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),"RECOMMENDED"]})}),e.jsxs("label",{htmlFor:t,className:"flex items-start gap-3 md:gap-4 p-3 md:p-5 cursor-pointer",children:[e.jsx("input",{type:"radio",id:t,name:"payment-method",className:"w-4 h-4 md:w-5 md:h-5 mt-1 md:mt-0.5 text-teal-600 border-2 border-gray-300 focus:ring-primary-green flex-shrink-0",onChange:d,checked:n,disabled:c}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1 md:mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"p-1.5 md:p-2 rounded-lg flex-shrink-0 "+(n?"bg-primary-green":"bg-gray-100 group-hover:bg-teal-50"),children:e.jsx("div",{className:""+(n?"text-white":"text-gray-600 group-hover:text-teal-600"),children:s})}),e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 truncate",children:a})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[o&&e.jsx("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-medium flex-shrink-0 whitespace-nowrap ${x[o.color]}`,children:o.text}),i&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-bold flex-shrink-0 whitespace-nowrap animate-pulse ${x[i.color]}`,children:[e.jsx(R,{className:"w-3 h-3"}),i.text]})]})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-2 md:mb-3 line-clamp-2",children:l}),e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-4 text-xs md:text-sm",children:r.map(((t,s)=>e.jsxs("div",{className:"flex items-center gap-1 "+(n?"text-teal-700":"text-gray-600"),children:[e.jsx("div",{className:n?"text-teal-600":"text-gray-400",children:t.icon}),e.jsx("span",{className:"whitespace-nowrap",children:t.text})]},s)))})]})]})]})},z=({days:t,showButton:s,isPaymentVisible:a})=>{const{selectedRooms:l,totalOtherCharges:r,finalPrice:i,baseFinalPrice:n,setNights:d,details:c}=m(),[x,u]=o.useState(!1);o.useEffect((()=>{t&&(d(t),localStorage.setItem("days",t))}),[t,d]);const h=n-i,p=h>0;return o.useEffect((()=>{const e=()=>{window.scrollY>220?u(!0):u(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),e.jsxs("div",{className:`md:p-6 p-4 bg-white md:border-2 border border-gray-200 rounded-2xl md:shadow-lg shadow-md w-full ${x?"md:w-[384px]":{}}  md:w-96 mx-auto  font-sans transition-all duration-300 ${x?"xl:fixed xl:top-4  ":"relative "}`,children:[e.jsx("div",{className:"bg-primary-green  p-4 -mx-4 md:-mx-6 -mt-4 md:-mt-6 rounded-t-2xl mb-6",children:e.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"Reservation Summary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-800 mb-4 pb-2 border-b-2 border-primary-green/20",children:"Your Price Summary"}),e.jsx("div",{className:"space-y-4 mb-5",children:null==l?void 0:l.map(((s,a)=>{var l,r,o,i,n;const d=c[a],m=(null==(l=null==d?void 0:d.roomData)?void 0:l.discountRate)||0,x=(null==(o=null==(r=null==d?void 0:d.continentalPlan)?void 0:r.rate)?void 0:o.amount)||0,u=(null==s?void 0:s.guestQty)||2,h=(null==(i=null==d?void 0:d.roomData)?void 0:i.baseAdultOccupancy)||2,p=(null==(n=null==d?void 0:d.roomData)?void 0:n.extraAdultRate)||0,g=u>h?u-h:0,f=g*p,y=x*u;return e.jsxs("div",{className:"space-y-3 pb-4 mb-4 border-b-2 border-dashed border-gray-200 last:border-0",children:[e.jsxs("div",{className:"flex justify-between items-start text-sm bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-800 text-base",children:s.roomName}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Room Only (",h," ",1===h?"Adult":"Adults",") × ",t," ",1===t?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-gray-900 text-base",children:j(m*t)})]}),g>0&&p>0&&e.jsxs("div",{className:"flex justify-between items-start text-sm bg-orange-50 border-l-4 border-orange-500 p-3 rounded-r-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-orange-700",children:"Extra Adult Charges"}),e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[j(p)," × ",g," ",1===g?"Adult":"Adults"," × ",t," ",1===t?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-orange-700",children:j(f*t)})]}),"continental"===s.option&&x>0&&e.jsxs("div",{className:"flex justify-between items-start text-sm bg-green-50 border-l-4 border-primary-green p-3 rounded-r-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-primary-green",children:"Continental Breakfast"}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[j(x)," × ",u," ",1===u?"Guest":"Guests"," × ",t," ",1===t?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-primary-green",children:j(y*t)})]})]},a)}))}),e.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-gray-700 py-3 px-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"flex items-center gap-2",children:"Taxes & Other Charges"}),e.jsx("p",{className:"font-bold text-gray-900",children:j(r)})]})]}),e.jsxs("div",{className:"pt-4 mt-5 bg-gradient-to-br from-gray-50 to-gray-100 p-4 rounded-xl space-y-3 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Base Price"}),e.jsx("span",{className:"font-semibold text-gray-900",children:j(n)})]}),p&&e.jsxs("div",{className:"flex justify-between items-center text-sm bg-green-50 -mx-4 px-4 py-2",children:[e.jsx("span",{className:"font-medium",children:"Pay Now Discount"}),e.jsxs("span",{className:"font-bold text-green-600",children:["-",j(h)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Taxes & Fees"}),e.jsx("span",{className:"font-semibold text-gray-900",children:j(r)})]}),e.jsxs("div",{className:"flex justify-between items-center border-t-2 border-gray-300 pt-3 mt-3",children:[e.jsx("p",{className:"text-base md:text-lg font-bold text-gray-800",children:"Payable Amount"}),e.jsx("p",{className:"text-lg md:text-xl font-bold text-primary-green",children:j(i)})]})]}),s&&e.jsx("a",{href:"#payment-method",className:"hidden md:block w-full",children:e.jsx("button",{disabled:a,className:"mt-6 w-full py-4 font-bold text-white rounded-xl shadow-lg transition-all duration-300 transform hover:scale-[1.02] "+(a?"bg-gray-300 cursor-not-allowed shadow-none":"bg-gradient-to-r from-primary-green to-primary-dark-green hover:shadow-xl"),children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"See Payment Options"}),e.jsx("span",{className:"text-xl",children:"→"})]})})})]})};
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
/*! js-cookie v3.0.5 | MIT */
function F(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)e[a]=s[a]}return e}!function e(t,s){function a(e,a,l){if("undefined"!=typeof document){"number"==typeof(l=F({},s,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var o in l)l[o]&&(r+="; "+o,!0!==l[o]&&(r+="="+l[o].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+r}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var s=document.cookie?document.cookie.split("; "):[],a={},l=0;l<s.length;l++){var r=s[l].split("="),o=r.slice(1).join("=");try{var i=decodeURIComponent(r[0]);if(a[i]=t.read(o,i),e===i)break}catch(n){}}return e?a[e]:a}},remove:function(e,t){a(e,"",F({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,F({},this.attributes,t))},withConverter:function(t){return e(F({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const G=({hotelDetail:t,checkIn:s,verified:a})=>{const[l,r]=o.useState(""),[i,n]=o.useState([]),[,d]=o.useState(null),[u,h]=o.useState(!1),[p,g]=o.useState(null),{mutate:f,data:y}=N(),{mutateAsync:v}=w(),{finalPrice:b,setFinalPrice:j,baseFinalPrice:k,paymentMethod:C}=m(),D=localStorage.getItem("user_email"),{data:S,isLoading:I}=x(D),P=null!==localStorage.getItem("user_email");if(o.useEffect((()=>{t&&t._id&&P&&f(t._id)}),[f,t,P,S]),I)return e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-3 border-gray-200 border-t-primary-green rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Loading offers..."})]})});if(!P)return e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-start md:text-center space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Unlock Exclusive Offers"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sign in to access special discounts and deals"})]}),e.jsxs("a",{href:"#guestDetail",onClick:e=>{c.error("Please verify your details")},className:"mt-4 inline-flex items-center gap-2 px-6 py-2.5 bg-primary-green text-white rounded-lg text-sm font-medium hover:bg-cyan-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Verify to Continue"]})]})});const _=async()=>{var e,a;if(l.trim())if(i.some((e=>e.offerCode.toUpperCase()===l.trim().toUpperCase())))c.error("This promo code is already applied");else{h(!0);try{const e=await v({hotelId:t._id,rate:b,offerCode:l.trim(),checkInDate:s});if(d(e),e.discountedRate){const t={offerCode:l.trim().toUpperCase(),description:e.description||"Discount applied",discountPercent:e.discountPercent||0,discountedRate:e.discountedRate};n((e=>[...e,t])),j(e.discountedRate),r(""),c.success("Offer applied successfully")}}catch(o){c.error((null==(a=null==(e=null==o?void 0:o.response)?void 0:e.data)?void 0:a.error)||"Error applying offer")}finally{h(!1)}}};return e.jsxs("div",{className:"bg-white w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Exclusive Offers"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"Apply a promo code to get discounts"})]}),i.length>0&&e.jsx("div",{className:"mb-3 pb-3  border-gray-200",children:e.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:i.map((t=>e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-green-50 to-green-100 border border-green-300 rounded-full px-3 py-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#059669",strokeWidth:"2.5",className:"flex-shrink-0",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),e.jsx("span",{className:"font-semibold text-primary-green text-sm",children:t.offerCode}),e.jsxs("span",{className:"text-xs text-primary-green font-medium",children:["(",t.discountPercent,"%)"]})]}),e.jsx("button",{onClick:()=>(e=>{const t=i.filter((t=>t.offerCode!==e));if(n(t),0===t.length)j(k);else{const e=t[t.length-1];j(e.discountedRate)}c.success("Promo code removed")})(t.offerCode),className:"ml-1 text-primary-green hover:text-primary-green-dark transition-colors flex-shrink-0",title:"Remove this promo code",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},t.offerCode)))})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2 md:gap-3  flex-col md:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Enter promo code...",className:"w-full h-12 md:h-14 border border-gray-300 rounded-lg px-4 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:l,onChange:e=>r(e.target.value),onKeyPress:e=>"Enter"===e.key&&_()}),l&&e.jsx("button",{onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:_,disabled:!l.trim()||u,className:"h-12 md:h-14 px-6 w-auto bg-primary-green text-white rounded-lg font-medium hover:bg-cyan-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Applying..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"inline",children:"Apply Promo Code"})})})})]})}),0===i.length&&y&&y.length>0&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:y.map((a=>e.jsx("div",{onClick:()=>(async e=>{var a,l;if(i.some((t=>t.offerCode===e.offerCode)))c.error("This promo code is already applied");else{h(!0);try{const a=await v({hotelId:t._id,rate:b,offerCode:e.offerCode,checkInDate:s});if(!a.discountedRate)throw new Error("No discount rate returned");{const t={offerCode:e.offerCode,description:e.description,discountPercent:e.discountPercent,discountedRate:a.discountedRate};n((e=>[...e,t])),j(a.discountedRate),c.success("Offer applied successfully!")}}catch(r){c.error((null==(l=null==(a=null==r?void 0:r.response)?void 0:a.data)?void 0:l.error)||"Error applying offer")}finally{h(!1)}}})(a),onMouseEnter:()=>g(a.offerCode),onMouseLeave:()=>g(null),className:"p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-cyan-500 hover:bg-cyan-50 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:a.offerCode}),a.description&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1 capitalize",children:["apply this promo code to get ",a.discountPercent,"% off "]})]}),e.jsxs("div",{className:"flex-shrink-0 bg-cyan-100 text-cyan-700 px-3 py-1.5 rounded-lg font-semibold text-sm",children:[a.discountPercent,"%"]})]})},a.offerCode)))})})]})},$=({data:t})=>{const s=null==t?void 0:t.addToYourStay,{selectedOtherCharges:a,setSelectedOtherCharges:l}=m();return e.jsxs("div",{className:"bg-white ",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4  text-gray-900",children:"Add To Your Stay"}),e.jsx("p",{className:"text-gray-600 t md:text-desktop/body/1 mt-1",children:"Enhance your experience with optional add-ons"})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:s.map((t=>{return e.jsx(T,{option:t,isSelected:(s=t._id,a.some((e=>e._id===s))),onToggle:e=>((e,t)=>{t&&t.stopPropagation(),l((t=>Array.isArray(t)&&t.find((t=>t._id===e._id))?t.filter((t=>t._id!==e._id)):[...t,e]))})(t,e)},t._id);var s}))})]})},T=({option:t,isSelected:s,onToggle:a})=>{var l,r;return e.jsxs("div",{className:"relative rounded-lg md:rounded-xl border-2 transition-all duration-300 overflow-hidden cursor-pointer "+(s?"border-teal-500 bg-teal-50 shadow-md":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-sm"),onClick:a,children:[e.jsx("div",{className:"p-4 md:p-5",children:e.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[e.jsx("div",{className:"w-5 h-5 md:w-6 md:h-6 rounded-md border-2 flex items-center justify-center flex-shrink-0 transition-all "+(s?"bg-teal-500 border-teal-500 shadow-sm":"border-gray-300 hover:border-teal-400"),children:s&&e.jsx(_,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold leading-tight "+(s?"text-teal-700":"text-gray-900"),children:t.heading}),e.jsx("p",{className:"text-xs md:text-sm leading-relaxed "+(s?"text-primary-green font-medium":"text-gray-600"),children:t.description})]}),e.jsxs("div",{className:"flex-shrink-0 text-right px-2 py-1 md:px-3 md:py-1.5 rounded-md transition-colors "+(s?"bg-teal-100":""),children:[e.jsxs("div",{className:"text-base md:text-lg font-bold "+(s?"text-primary-green":"text-gray-900"),children:["₹",null==(l=t.rate)?void 0:l.amount]}),(null==(r=t.rate)?void 0:r.period)&&e.jsx("div",{className:"text-xs text-gray-500",children:t.rate.period})]})]})})]})}),s&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-teal-500"})]})},U=o.forwardRef((({setIsVerified:t})=>{var s,a,l,r,i,n,d;const[c,u]=o.useState(""),[h,p]=o.useState(""),[g,f]=o.useState(localStorage.getItem("user_email")||""),[y,v]=o.useState(""),[b,j]=o.useState(!1),{someOneElse:N,setSomeoneElse:w,setGuestData:C}=m(),[D,S]=o.useState(null),I=null!==localStorage.getItem("user_email"),{data:P,refetch:_}=x(g);o.useEffect((()=>{const e=localStorage.getItem("user_email");e&&e!==g&&f(e)}),[I]),o.useEffect((()=>{g&&""!==g.trim()&&_()}),[g,_]);const[A,R]=o.useState(!1);o.useEffect((()=>{I&&N&&C({firstName:c,lastName:h,email:g,phone:y})}),[I,N,c,h,g,y,C]);const M=[{id:"firstName",label:"First Name",placeholder:"Enter your first name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"lastName",label:"Last Name",placeholder:"Enter your last name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"email",label:"Email Address",placeholder:"Enter your email address",type:"email",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]})},{id:"mobile",label:"Mobile Number",placeholder:"Enter your mobile number",type:"tel",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}];return e.jsxs("div",{id:"guestDetail",className:"flex flex-col md:gap-4 relative overflow-hidden",children:[e.jsx("div",{className:"flex items-center mb-2 relative z-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"  text-mobile/h4 md:text-desktop/h4 text-gray-900 tracking-tight mb-1",children:"Guest Details"}),e.jsx("p",{className:"text-gray-600 text-mobile/body/2 md:text-desktop/body/1",children:"Please provide your information to proceed"})]})}),e.jsxs("div",{className:"relative z-10",children:[I&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 md:mb-8 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-green-500 rounded-full flex items-center justify-center mr-3 shadow-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Account Verified"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Your email and mobile number are verified"})]})]}),e.jsxs("div",{className:"mb-4 md:mb-8 p-4 border rounded-xl bg-gray-50 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"w-12 h-12 mr-2 rounded-full bg-primary-green flex items-center justify-center text-white font-bold text-lg shadow",children:[null==(a=null==(s=null==P?void 0:P.data)?void 0:s.firstName)?void 0:a.charAt(0),null==(r=null==(l=null==P?void 0:P.data)?void 0:l.lastName)?void 0:r.charAt(0)]}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1 ",children:[e.jsxs("p",{className:"text-gray-900 font-semibold text-sm truncate",children:[null==(i=null==P?void 0:P.data)?void 0:i.firstName," ",null==(n=null==P?void 0:P.data)?void 0:n.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:null==(d=null==P?void 0:P.data)?void 0:d.email})]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("user_email"),window.location.reload()},className:"text-xs font-semibold text-gray-600 hover:text-gray-900 whitespace-nowrap flex-shrink-0",children:"Log Out"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-gray-700 text-sm mb-4 md:mb-6",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-yellow-500 border-gray-300 rounded",checked:b,onChange:e=>{j(e.target.checked),w(e.target.checked)}}),"I'm booking for someone else"]}),b&&e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:M.map((({id:t,label:s,placeholder:a,type:l,icon:r})=>{const o=(e=>{switch(e){case"firstName":return c;case"lastName":return h;case"email":return g;case"mobile":return y;default:return""}})(t),i=D===t,n=o&&o.trim();return e.jsxs("div",{className:"flex flex-col gap-3 group",children:[e.jsxs("label",{htmlFor:t,className:"block text-sm font-semibold tracking-wide transition-colors duration-200 "+(i||n?"text-cyan-600":"text-gray-700"),children:[s," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors duration-200 "+(i?"text-cyan-500":n?"text-cyan-600":"text-gray-400"),children:r}),e.jsx("input",{type:l,id:t,placeholder:a,className:`w-full h-14 pl-12 pr-4 py-3 text-base text-gray-900 placeholder-gray-400 border-2 rounded-xl shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-100\n                              ${i?"border-cyan-400 shadow-lg":n?"border-cyan-300 bg-cyan-50":"border-gray-200 hover:border-gray-300"}\n                              ${"email"===t?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}\n                            `,value:o,onChange:e=>((e,t)=>{switch(e){case"firstName":u(t);break;case"lastName":p(t);break;case"email":f(t);break;case"mobile":v(t)}})(t,e.target.value),onFocus:()=>S(t),onBlur:()=>S(null),disabled:"email"===t})]})})]},t)}))})]}),!I&&e.jsxs("div",{className:"mb-4 md:mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex flex-col gap-2  md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-400 text-white rounded-full flex items-center justify-center shadow",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-800",children:"Login Required"}),e.jsx("p",{className:"text-yellow-600 text-sm",children:"Please log in or verify your account to continue"})]})]}),e.jsx("button",{onClick:()=>R(!0),className:"ml-4 px-5 py-2 rounded-lg bg-primary-green text-white  transition",children:"Login / Verify"})]}),A&&e.jsx(k,{closeModal:()=>{R(!1);const e=localStorage.getItem("user_email");e&&(f(e),setTimeout((()=>_()),200))}})]})]})}));U.displayName="GuestDetailsForm";const H=()=>{const{details:l,setDetails:r,selectedRooms:o,setSelectedRooms:n,setEditAddPricing:d}=m(),c=i(),x=(e,t)=>{n((s=>{var a,r,o,i,n,d,c,m,x,u;const h=[...s],p=(null==(r=null==(a=l[e])?void 0:a.roomData)?void 0:r.discountRate)||0,g=(null==(n=null==(i=null==(o=l[e])?void 0:o.continentalPlan)?void 0:i.rate)?void 0:n.amount)||0,f=(null==(d=h[e])?void 0:d.guestQty)||2,y=(null==(m=null==(c=l[e])?void 0:c.roomData)?void 0:m.baseAdultOccupancy)||2,v=(null==(u=null==(x=l[e])?void 0:x.roomData)?void 0:u.extraAdultRate)||0;let b=p;if(f>y){b+=v*(f-y)}return"continental"===t&&(b+=g*f),h[e]={...h[e],option:t,price:b},h}))},u=(e,t)=>{n((s=>{var a,o,i,n,d,c,m,x,u,h,p,g,f,y;const v=[...s],b=(null==(o=null==(a=l[e])?void 0:a.roomData)?void 0:o.maxGuests)||2;let j=(null==(i=v[e])?void 0:i.guestQty)??2,N=(null==(n=v[e])?void 0:n.showMaxGuestAlert)??!1;"increment"===t?j<b?(j+=1,N=!1):N=!0:"decrement"===t&&(j>0&&(j-=1),N=!1);const w=(null==(c=null==(d=l[e])?void 0:d.roomData)?void 0:c.discountRate)||0,k=(null==(u=null==(x=null==(m=l[e])?void 0:m.continentalPlan)?void 0:x.rate)?void 0:u.amount)||0,C=(null==(h=v[e])?void 0:h.option)||"roomOnly",D=(null==(g=null==(p=l[e])?void 0:p.roomData)?void 0:g.baseAdultOccupancy)||2,S=(null==(y=null==(f=l[e])?void 0:f.roomData)?void 0:y.extraAdultRate)||0;let I=w;if(j>D){I+=S*(j-D)}return"continental"===C&&(I+=k*j),v[e]={...v[e],guestQty:j,showMaxGuestAlert:N,price:I},0===j&&(v.splice(e,1),r((t=>t.filter(((t,s)=>s!==e))))),v}))},h=()=>{var e,t,s,a;d(!0),localStorage.setItem("editAddPricing",!0);const r=(null==(e=l[0])?void 0:e.name)||(null==(s=null==(t=l[0])?void 0:t.roomData)?void 0:s.hotelName);c(C(null==(a=l[0])?void 0:a.hotelCode,r))};return e.jsxs(e.Fragment,{children:[null==l?void 0:l.map(((l,r)=>{var i,d,c,m,p,g,f;const y=o[r]||{roomName:(null==(i=null==l?void 0:l.roomData)?void 0:i.RoomName)||"",option:"roomOnly",price:(null==(d=null==l?void 0:l.roomData)?void 0:d.discountRate)||0,guestQty:2,showMaxGuestAlert:!1};return 0===y.guestQty?null:e.jsxs("div",{className:"flex flex-col gap-2 md:gap-4",children:[e.jsxs("div",{className:"flex flex-row lg:h-[120px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[e.jsx("div",{className:"w-1/2 md:w-1/3 relative",children:e.jsx("img",{src:null==(c=null==l?void 0:l.roomData)?void 0:c.roomImage[0],alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"})}),e.jsxs("div",{className:"hidden md:flex flex-col justify-center w-full gap-3 ",children:[e.jsx("p",{className:"text-2xl font-bold text- ",children:null==(m=null==l?void 0:l.roomData)?void 0:m.RoomName}),e.jsxs("div",{className:" text-gray-800",children:[e.jsx("div",{className:"text-primary-green font-bold text-xl ",children:j(y.price)}),e.jsx("div",{className:"text-xs font-semibold",children:"Incl. taxes"})]})]}),e.jsxs("div",{className:"hidden md:flex flex-col items-end  justify-end w-full lg:w-[490px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>u(r,"decrement"),children:e.jsx(t,{})}),e.jsx("span",{children:y.guestQty>1?`${y.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>u(r,"increment"),children:e.jsx(s,{})})]}),y.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-40 right-0 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(a,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",null==(p=null==l?void 0:l.roomData)?void 0:p.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:h,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>n((e=>{const t=[...e];return t[r].showMaxGuestAlert=!1,t})),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]}),e.jsxs("div",{className:"w-full md:hidden ",children:[e.jsx("p",{className:"text-lg md:text-2xl font-bold text- ",children:null==(g=null==l?void 0:l.roomData)?void 0:g.RoomName}),e.jsxs("div",{className:"flex justify-between mt-4 gap-2 w-full",children:[e.jsxs("div",{className:" text-gray-800",children:[e.jsx("div",{className:"text-primary-green font-bold text-md md:text-xl ",children:j(y.price)}),e.jsx("div",{className:"text-xs font-semibold",children:"Incl. taxes"})]}),e.jsxs("div",{className:"md:hidden flex flex-col justify-end  gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full text-xs  border border-primary-yellow p-1 gap-1 rounded-md text-primary-yellow font-medium md:text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>u(r,"decrement"),children:e.jsx(t,{})}),e.jsx("span",{children:y.guestQty>1?`${y.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>u(r,"increment"),children:e.jsx(s,{})})]}),y.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-40 right-2 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(a,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",null==(f=null==l?void 0:l.roomData)?void 0:f.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:h,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>n((e=>{const t=[...e];return t[r].showMaxGuestAlert=!1,t})),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]})]})]})]}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:gap-4",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2 pl-4 md:pl-0",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${r}`,value:"roomOnly",checked:"roomOnly"===y.option,onChange:()=>x(r,"roomOnly"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${r}`,value:"continental",checked:"continental"===y.option,onChange:()=>x(r,"continental"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]},r)})),l.length<=0&&e.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},V=()=>{var t,s,a;const{details:l,setEditAddPricing:r}=m(),o=localStorage.getItem("hotelInfo"),n=o?JSON.parse(o):null,d=localStorage.getItem("checkInDate"),c=localStorage.getItem("checkOutDate"),x=d?new Date(d):null,u=c?new Date(c):null,h=i(),p=({date:t,label:s,time:a,isCheckOut:l=!1})=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"text-mobile/title md:text-desktop/h5/medium font-medium capitalize text-gray-900",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx("span",{className:"font-bold",children:I(t,"dd MMM, ")})," ",I(t,"EEE")]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("span",{className:"font-bold",children:I(t,"dd MMM, ")})," ",I(t,"EEEE")]})]}):e.jsxs("span",{className:"text-gray-400",children:["Select ",s.toLowerCase()]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm capitalize hidden md:block  font-medium text-gray-600  tracking-wide",children:s}),e.jsx("div",{className:"text-xs md:text-sm font-semibold text-gray-500",children:a||(l?"11:00 am":"1:00 pm")})]})]}),g=x&&u?S(u,x):0;return e.jsxs("div",{className:" border-b-2",children:[e.jsxs("div",{className:"md:mb-4 mb-2",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-bold md:font-bold text-gray-900 md:mb-2",children:null==n?void 0:n.name}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:null==(t=null==n?void 0:n.location)?void 0:t.hotelAddress})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center gap-4 ",children:[e.jsx(p,{date:x,label:"Check-in",time:null==(s=l[0])?void 0:s.checkIn}),e.jsx(y,{className:"text-primary-yellow text-2xl mb-1"}),e.jsx(p,{date:u,label:"Check-out",time:null==(a=l[0])?void 0:a.checkOut,isCheckOut:!0}),g>0&&e.jsxs("div",{className:"border-primary-yellow border text-primary-yellow px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[g," ",1===g?"Night":"Nights"]})]})}),e.jsx("button",{onClick:()=>{var e,t;r(!0),localStorage.setItem("editAddPricing","true");const s=(null==n?void 0:n.name)||(null==(e=l[0])?void 0:e.name);h(C(null==(t=l[0])?void 0:t.hotelCode,s))},className:"inline-flex items-center  mb-2 text-primary-yellow underline font-medium transition-colors duration-200 ",children:e.jsx("span",{children:"Modify Date/Room Selection  "})})]})},q=()=>{var t,s,a,r;const{ContactUsDetail:d}=n(),{details:c,hotelData:u}=m(),h=c[0],p=i(),[g,f]=o.useState(!1),y=localStorage.getItem("user_email"),{data:v}=x(y),[b,j]=o.useState(!1),N=localStorage.getItem("hotelInfo"),w=JSON.parse(N),k=localStorage.getItem("checkInDate"),C=localStorage.getItem("checkOutDate"),S=((e,t)=>{if(!e||!t)return 0;const s=new Date(e),a=new Date(t),l=Math.abs(a-s);return Math.ceil(l/864e5)})(k,C),[I,P]=o.useState(!1),[_,A]=o.useState(!0),R=o.useRef();return o.useEffect((()=>{const e=document.querySelector("#payment-method");if(e){const t=new IntersectionObserver((([e])=>{P(e.isIntersecting)}),{threshold:.1});return t.observe(e),()=>t.disconnect()}}),[]),o.useEffect((()=>{I?setTimeout((()=>A(!1)),300):A(!0)}),[I]),o.useEffect((()=>{c&&0!==c.length&&h||p(`/hotels/${null==w?void 0:w.hotelCode}`)}),[c,u,h,p,w]),c&&0!==c.length&&h?e.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green overflow-hidden",children:[e.jsxs(D,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsxs("div",{className:"content flex gap-3 md:gap-5 lg:gap-6 flex-col py-3 md:py-6 lg:py-10 px-3 md:px-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center cursor-pointer gap-2 md:gap-6 text-white",onClick:()=>p(-1),children:[e.jsx("button",{"aria-label":"Go back",className:"flex items-center flex-shrink-0",children:e.jsx(l,{className:"text-white h-5 w-5 sm:h-6 sm:w-6 md:h-9 md:w-9"})}),e.jsx("img",{src:"/images/Logo/logo.svg",alt:null==h?void 0:h.name,className:"w-[100px] sm:w-[120px] md:w-[150px]"})]}),e.jsx("div",{className:"flex-shrink-0",children:y?e.jsxs("div",{onClick:()=>p("/user/profile"),className:"bg-white cursor-pointer text-primary-yellow font-bold w-10 h-10 sm:w-12 sm:h-12 md:h-12 md:w-12 rounded-full flex items-center justify-center text-sm sm:text-base",children:[null==(s=null==(t=null==v?void 0:v.data.firstName)?void 0:t[0])?void 0:s.toUpperCase(),null==(r=null==(a=null==v?void 0:v.data.lastName)?void 0:a[0])?void 0:r.toUpperCase()]}):e.jsx("button",{onClick:()=>j(!0),className:"border-2 border-primary-yellow text-primary-yellow px-3 py-1.5 sm:px-4 sm:py-2 rounded-full font-bold text-sm sm:text-base hover:bg-primary-yellow hover:text-white transition",children:"Login"})}),b&&e.jsx("div",{children:"Login Modal Here"})]}),e.jsx("div",{className:"text-white  text-mobile/head md:text-desktop/head",children:"Booking Details"})]}),e.jsxs("div",{className:"md:flex gap-5 content bg-white py-6 md:py-0 rounded-t-3xl overflow-visible relative",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:px-8 md:py-10 gap-4 md:gap-8 min-w-0",children:[e.jsx(V,{}),e.jsx(H,{}),h.addToYourStay.length>0&&e.jsx($,{data:h}),e.jsx(U,{ref:R,setIsVerified:f}),e.jsx(G,{hotelDetail:h,checkIn:k,verified:g}),e.jsx(O,{hotelDetail:h,verified:g,checkIn:k,checkOut:C}),e.jsx("div",{className:"xl:hidden",children:e.jsx(z,{hotelDetail:h,checkIn:k,checkOut:C,days:S,showButton:_,isPaymentVisible:I})}),e.jsx(M,{ContactUsDetail:d})]}),e.jsx("div",{className:"hidden xl:block xl:w-[420px] flex-shrink-0 px-8 py-10",children:e.jsx(z,{hotelDetail:h,checkIn:k,checkOut:C,days:S,showButton:_,isPaymentVisible:I})})]})]}):null};export{q as default};
