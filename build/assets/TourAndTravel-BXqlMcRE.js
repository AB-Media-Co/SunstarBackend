var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,s)=>{for(var a in s||(s={}))i.call(s,a)&&r(e,a,s[a]);if(t)for(var a of t(s))l.call(s,a)&&r(e,a,s[a]);return e},d=(e,t)=>s(e,a(t));import{r as o,j as c,_ as m}from"./react-vendor-tq68JOgp.js";import{u,a as g,b as x,c as h,d as b,e as p,f as j,g as y}from"./useTravelPackagesHook-c8pElG2L.js";import{M as f}from"./MultipleImageUpload-BSLbV8L8.js";import{I as v}from"./ImageUpload-C514XMBq.js";import{uploadImagesAPIV2 as N}from"./useHotelHook2-C33856rg.js";import"./animation-vendor-DJegggv9.js";import"./vendor-DwD9zxym.js";import"./query-vendor-iDpT9gG9.js";import"./ui-vendor-DiJ4VKpG.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";import"./index-D89k_Hd_.js";const w=()=>{const{data:e=[]}=u(),{data:s=[]}=g(),a=x(),t=h(),i=b(),l=p(),r=j(),w=y(),[k,S]=o.useState({name:"",image:""}),[C,P]=o.useState(""),[I,A]=o.useState(""),[_,U]=o.useState(""),[D,T]=o.useState(""),[O,E]=o.useState(""),[M,R]=o.useState(""),[H,F]=o.useState(!1),[q,J]=o.useState(!1),[V,z]=o.useState("states"),[B,G]=o.useState([]),[K,L]=o.useState(!1),[Q,W]=o.useState({_id:void 0,stateId:"",title:"",image:"",images:B,duration:{nights:"",days:""},price:"",highlights:[],inclusions:[],exclusions:[],description:"",itinerary:[],topSelling:!1}),X=(e,s)=>{S((a=>d(n({},a),{[e]:s})))},Y=(e,s)=>{if(e.includes("duration.")){const a=e.split(".")[1];W((e=>d(n({},e),{duration:d(n({},e.duration),{[a]:s})})))}else W("topSelling"===e?e=>d(n({},e),{topSelling:!e.topSelling}):"images"===e?e=>d(n({},e),{images:s}):"image"===e?e=>{const a=(Array.isArray(e.images)?e.images:[]).filter((e=>e!==s)),t=s?[s,...a]:a;return d(n({},e),{image:s,images:t})}:a=>d(n({},a),{[e]:s}))},Z=()=>{W({_id:void 0,stateId:"",title:"",image:"",images:[],duration:{nights:"",days:""},price:"",highlights:[],inclusions:[],exclusions:[],description:"",itinerary:[],topSelling:!1}),G([])},$=()=>S({_id:"",name:"",image:""});return c.jsxs("div",{className:"max-w-6xl mx-auto p-6 bg-gray-50 min-h-screen",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Tour and Travel Management"}),c.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[c.jsx("button",{className:"py-2 px-4 font-medium "+("states"===V?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>z("states"),children:"States"}),c.jsx("button",{className:"py-2 px-4 font-medium "+("packages"===V?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>z("packages"),children:"Packages"}),c.jsx("button",{className:"py-2 px-4 font-medium "+("view"===V?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>z("view"),children:"View Packages"})]}),"states"===V&&c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Create New State"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Name"}),c.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter state name",value:k.name,onChange:e=>X("name",e.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Image"}),c.jsx(v,{feature:k,handleFeatureChange:X,setImageUpload:F,index:0})]})]}),c.jsxs("div",{className:"flex gap-4 mt-4",children:[c.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:()=>{k.name&&k.image?k._id?r.mutate(k,{onSuccess:$}):a.mutate(k,{onSuccess:$}):alert("Please fill in State Name and Image")},disabled:H,children:H?"Uploading…":k._id?"Update State":"Create State"}),k._id&&c.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:$,children:"Cancel"})]}),c.jsx("h3",{className:"text-xl font-semibold text-gray-700 mt-10 mb-4",children:"All States"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[c.jsx("img",{src:e.image,alt:e.name,className:"w-full h-40 object-cover"}),c.jsxs("div",{className:"p-4 flex justify-between items-center",children:[c.jsx("h4",{className:"text-lg font-medium text-gray-800",children:e.name}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>(e=>{S(e),window.scrollTo({top:0,behavior:"smooth"})})(e),className:"bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium px-3 py-1 rounded",children:"Edit"}),c.jsx("button",{onClick:()=>{return s=e._id,void(window.confirm("Delete this state?")&&w.mutate(s));var s},className:"bg-red-600 hover:bg-red-700 text-white text-xs font-medium px-3 py-1 rounded",children:"Delete"})]})]})]},e._id)))})]}),"packages"===V&&c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:Q._id?"Edit Package":"Create New Package"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select State*"}),c.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:Q.stateId,onChange:e=>Y("stateId",e.target.value),children:[c.jsx("option",{value:"",children:"Select State"}),e.map((e=>c.jsx("option",{value:e._id,children:e.name},e._id)))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Title*"}),c.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter package title",value:Q.title,onChange:e=>Y("title",e.target.value)})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Main Image *"}),c.jsx(v,{feature:{image:Q.image||""},handleFeatureChange:(e,s)=>{"image"===e&&Y("image",s)},setImageUpload:J,index:101}),Q.image&&c.jsx("div",{className:"mt-2",children:c.jsx("img",{src:Q.image,alt:"Main preview",className:"w-28 h-20 object-cover rounded border"})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Image*"}),c.jsx(f,{onUploadSuccess:e=>{return s=function*(){if(0!==e.length){L(!0);try{const s=yield N(e),a=(Array.isArray(s)?s:[s])[0].imageUrls;G((e=>[...e,...a])),W((e=>d(n({},e),{images:[...e.images||[],...a]}))),m.success("Images uploaded successfully!")}catch(s){m.error("Error uploading images")}L(!1)}else m.error("No images selected")},new Promise(((e,a)=>{var t=e=>{try{l(s.next(e))}catch(t){a(t)}},i=e=>{try{l(s.throw(e))}catch(t){a(t)}},l=s=>s.done?e(s.value):Promise.resolve(s.value).then(t,i);l((s=s.apply(undefined,null)).next())}));var s},isUploading:K,imagesUrls:Q.images,onRemoveImageUrl:e=>{W((s=>{const a=(s.images||[]).filter((s=>s!==e)),t=s.image===e?a[0]||"":s.image;return d(n({},s),{images:a,image:t})}))}})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nights"}),c.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Number of nights",value:Q.duration.nights,onChange:e=>Y("duration.nights",e.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Days"}),c.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Number of days",value:Q.duration.days,onChange:e=>Y("duration.days",e.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (₹)"}),c.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Package price",value:Q.price,onChange:e=>Y("price",e.target.value)})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:"Package description",value:Q.description,onChange:e=>Y("description",e.target.value)})]}),c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("input",{type:"checkbox",id:"topSelling",checked:Q.topSelling,onChange:()=>Y("topSelling"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"topSelling",className:"ml-2 block text-sm text-gray-700",children:"Mark as Top Selling Package"})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Itinerary"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),c.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Day (e.g., Day 1)",value:D,onChange:e=>T(e.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),c.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Title (e.g., Arrival at Jammu)",value:O,onChange:e=>E(e.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),c.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Details (e.g., Pickup from airport)",value:M,onChange:e=>R(e.target.value)})]})]}),c.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200 mb-4",onClick:()=>{if(!D||!O||!M)return;const e={day:D,title:O,details:M};W((s=>d(n({},s),{itinerary:[...s.itinerary,e]}))),T(""),E(""),R("")},children:"Add Itinerary Item"}),c.jsx("div",{className:"space-y-3",children:Q.itinerary.map(((e,s)=>c.jsx("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h5",{className:"font-medium text-gray-800",children:e.day}),c.jsx("h5",{className:"font-medium text-gray-800",children:e.title}),c.jsx("p",{className:"text-gray-600",children:e.details})]}),c.jsx("button",{className:"text-red-600 hover:text-red-800 ml-2",onClick:()=>(e=>{W((s=>d(n({},s),{itinerary:s.itinerary.filter(((s,a)=>a!==e))})))})(s),children:"Remove"})]})},s)))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Highlights"}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:C,onChange:e=>P(e.target.value),placeholder:"Add highlight"}),c.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{W((e=>d(n({},e),{highlights:[...e.highlights,C]}))),P("")},children:"Add"})]}),c.jsx("ul",{className:"space-y-1",children:Q.highlights.map(((e,s)=>c.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[c.jsx("span",{children:e}),c.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>W((e=>d(n({},e),{highlights:e.highlights.filter(((e,a)=>a!==s))}))),children:"Remove"})]},s)))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Inclusions"}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:I,onChange:e=>A(e.target.value),placeholder:"Add inclusion"}),c.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{W((e=>d(n({},e),{inclusions:[...e.inclusions,I]}))),A("")},children:"Add"})]}),c.jsx("ul",{className:"space-y-1",children:Q.inclusions.map(((e,s)=>c.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[c.jsx("span",{children:e}),c.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>W((e=>d(n({},e),{inclusions:e.inclusions.filter(((e,a)=>a!==s))}))),children:"Remove"})]},s)))})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Exclusions"}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:_,onChange:e=>U(e.target.value),placeholder:"Add exclusion"}),c.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{W((e=>d(n({},e),{exclusions:[...e.exclusions,_]}))),U("")},children:"Add"})]}),c.jsx("ul",{className:"space-y-1",children:Q.exclusions.map(((e,s)=>c.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[c.jsx("span",{children:e}),c.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>W((e=>d(n({},e),{exclusions:e.exclusions.filter(((e,a)=>a!==s))}))),children:"Remove"})]},s)))})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:()=>{Q.stateId&&Q.title?Q.image?Q._id?l.mutate(Q,{onSuccess:Z}):t.mutate(Q,{onSuccess:Z}):alert("Please upload the Main Image"):alert("Please fill in required fields (State and Title)")},disabled:H,children:H?"Uploading...":Q._id?"Update Package":"Create Package"}),Q._id&&c.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:Z,children:"Cancel"})]})]}),"view"===V&&c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"All Packages"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((e=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-48 object-cover"}),e.topSelling&&c.jsx("span",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Top Selling"})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.title}),c.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["₹",e.price]}),c.jsxs("span",{className:"text-sm text-gray-500",children:[e.duration.nights,"N/",e.duration.days,"D"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-1 px-3 rounded text-sm transition duration-200",onClick:()=>(e=>{const s=e.image||Array.isArray(e.images)&&e.images[0]||"";W(d(n({},e),{image:s})),G(e.images||[]),z("packages"),window.scrollTo({top:0,behavior:"smooth"})})(e),children:"Edit"}),c.jsx("button",{className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-1 px-3 rounded text-sm transition duration-200",onClick:()=>{return s=e._id,void(window.confirm("Are you sure you want to delete this package?")&&i.mutate(s));var s},children:"Delete"})]})]})]},e._id)))})]})]})};export{w as default};
