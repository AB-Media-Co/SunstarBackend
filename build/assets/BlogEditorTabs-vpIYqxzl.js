const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/useHotelHook2-4z4wAkLq.js","assets/react-vendor-CU6lFo1N.js","assets/animation-vendor-DE7fCS50.js","assets/vendor-DnuN4cIi.js","assets/animation-vendor-DvB2Xm2x.css","assets/query-vendor-B8s5OfyV.js","assets/ui-vendor-BNgsC25r.js","assets/swiper-vendor-CoL_RVtK.js","assets/swiper-vendor-CcTDN23P.css","assets/date-vendor-BpmxrJb6.js","assets/react-vendor-DmxDE6QQ.css","assets/index-DTQi_YP9.js","assets/index-Cd67N2j-.css"])))=>i.map(i=>d[i]);
var $=(b,j,c)=>new Promise((v,u)=>{var g=i=>{try{h(c.next(i))}catch(p){u(p)}},N=i=>{try{h(c.throw(i))}catch(p){u(p)}},h=i=>i.done?v(i.value):Promise.resolve(i.value).then(g,N);h((c=c.apply(b,j)).next())});import{_ as Y}from"./index-DTQi_YP9.js";import{r as l,j as e,W as L,a0 as f,a1 as J,a2 as G,X as Z,a3 as ee,a4 as te,a5 as se,a6 as ae,a7 as re,a8 as le,a9 as oe,aa as ie,ab as ne,ac as de,ad as ce,S as me,y as xe,P as ue}from"./react-vendor-CU6lFo1N.js";import{u as ge,a as he,b as pe,c as be,d as ye}from"./useBlogs2-QF0G8p7k.js";import{I as fe}from"./ImageUpload-B1EwwcLz.js";import"./query-vendor-B8s5OfyV.js";import"./vendor-DnuN4cIi.js";import"./animation-vendor-DE7fCS50.js";import"./ui-vendor-BNgsC25r.js";import"./swiper-vendor-CoL_RVtK.js";import"./date-vendor-BpmxrJb6.js";import"./useHotelHook2-4z4wAkLq.js";const je=["Hospitality","First-Time Visitors","Location & Access","Hotel Features","Travel Tips","Nearby Tours","Shopping","Wellness","Guest Stories","Dining","Tourism & Culture","Day Trips","Events & Festivities","International Travel","Local Life","Behind the Scenes","Luxury on Budget","Sustainability","Travel Essentials","Scam Awareness"];function $e(){var H,R,q;const[b,j]=l.useState(""),[c,v]=l.useState(""),[u,g]=l.useState(""),[N,h]=l.useState(""),[i,p]=l.useState(""),[V,w]=l.useState(0),[F,C]=l.useState(""),[U,I]=l.useState(""),[A,S]=l.useState(""),[y,B]=l.useState(null),[k,E]=l.useState(!1),{data:o,refetch:T}=ge({status:"all"}),{mutate:K}=he(),{mutate:W}=pe(),{mutate:z}=be(),{data:n,isLoading:D}=ye(y),M=l.useRef(null);l.useEffect(()=>{var t,s,a,r;n&&!D&&(j(n.title||""),v(n.author||""),h(n.category||""),p(((t=n.featuredImage)==null?void 0:t.url)||""),g(n.content||""),C(((s=n.meta)==null?void 0:s.title)||""),I(((a=n.meta)==null?void 0:a.description)||""),S(((r=n.meta)==null?void 0:r.keywords.join(", "))||""))},[n,D]);const O=()=>{if(!b||!u||!c){alert("Title, content, and author are required.");return}const t={title:b,content:u,author:c,category:N,featuredImage:{url:i},meta:{title:F,description:U,keywords:A.split(",").map(s=>s.trim())},status:"published"};y?W({id:y,updateData:t},{onSuccess:()=>{B(null),P(),T(),w(2)},onError:s=>{console.error("Error updating blog:",s),alert("Failed to update blog. Please try again.")}}):K(t,{onSuccess:()=>{P(),T(),w(2)},onError:s=>{console.error("Error creating blog:",s),alert("Failed to create blog. Please try again.")}})},P=()=>{j(""),v(""),g(""),h(""),p(""),B(null),C(""),I(""),S("")},Q=t=>{confirm("Are you sure you want to delete this blog?")&&z(t,{onSuccess:()=>{T()},onError:s=>{console.error("Error deleting blog:",s),alert("Failed to delete blog. Please try again.")}})},m=t=>{const s=window.getSelection(),a=s==null?void 0:s.toString();if(!a){alert("Please select text to format");return}let r;switch(t){case"link":const x=prompt("Enter URL:","https://");x&&(r=`<a href='${x}' target='_blank' class='text-blue-600 underline hover:text-blue-800'>${a}</a>`);break;case"h1":r=`<h1 class='text-3xl font-bold mb-4'>${a}</h1>`;break;case"h2":r=`<h2 class='text-2xl font-semibold mb-3'>${a}</h2>`;break;case"blockquote":r=`<blockquote class='border-l-4 border-gray-300 pl-4 italic text-gray-700 my-4'>${a}</blockquote>`;break;case"code":r=`<code class='bg-gray-100 px-2 py-1 rounded text-sm font-mono'>${a}</code>`;break;case"ul":r=`<ul class='list-disc list-inside my-4'><li>${a}</li></ul>`;break;case"ol":r=`<ol class='list-decimal list-inside my-4'><li>${a}</li></ol>`;break;default:r=`<${t}>${a}</${t}>`}r&&g(u.replace(a,r))},X=t=>$(this,null,function*(){var s;if(t)try{E(!0);const{uploadSingleImagesAPIV2:a}=yield Y(()=>$(this,null,function*(){const{uploadSingleImagesAPIV2:_}=yield import("./useHotelHook2-4z4wAkLq.js");return{uploadSingleImagesAPIV2:_}}),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),r=yield a([t]),x=(s=r==null?void 0:r.imageUrls)==null?void 0:s[0];if(x)g(_=>_+`<img src="${x}" alt="Content Image" class="my-4 rounded-lg shadow-md max-w-full h-auto" />`),alert("Image uploaded successfully!");else throw new Error("No image URL returned")}catch(a){console.error("Error uploading image:",a),alert("Failed to upload image. Please try again.")}finally{E(!1)}}),d=({onClick:t,icon:s,tooltip:a,active:r=!1,disabled:x=!1})=>e.jsxs("button",{onClick:t,disabled:x,className:`
        relative group p-2.5 rounded-full transition-all duration-200 
        ${r?"bg-blue-600 text-white shadow-lg":x?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900 border border-gray-200"}
        ${!x&&"hover:shadow-md hover:scale-105 active:scale-95"}
      `,title:a,children:[e.jsx(s,{className:"h-4 w-4"}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:a})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e.jsx("div",{className:"content mt-14 mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(L,{className:"h-6 w-6"}),"Blog Editor"]}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Create and manage your blog posts"})]}),e.jsxs(f.Group,{selectedIndex:V,onChange:w,children:[e.jsx(f.List,{className:"flex border-b border-gray-200 bg-gray-50",children:[{name:"Editor",icon:L},{name:"Preview",icon:J},{name:"All Blogs",icon:G}].map(t=>e.jsxs(f,{className:({selected:s})=>`
                  flex items-center gap-2 px-6 py-4 text-sm font-medium transition-all duration-200
                  ${s?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}
                `,children:[e.jsx(t.icon,{className:"h-4 w-4"}),t.name]},t.name))}),e.jsx(f.Panel,{className:"p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:y?"Edit Blog Post":"Create New Blog Post"}),y&&e.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Z,{className:"h-4 w-4"}),"Cancel Edit"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter meta title...",value:F,onChange:t=>C(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description"}),e.jsx("textarea",{rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter meta description...",value:U,onChange:t=>I(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Keywords"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter keywords, separated by commas",value:A,onChange:t=>S(t.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blog Title *"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your blog title...",value:b,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Author *"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Author name...",value:c,onChange:t=>v(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{value:N,onChange:t=>h(t.target.value),className:"w-full px-4  py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[e.jsx("option",{value:"",children:"-- Select Category --"}),je.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image"}),e.jsx(fe,{index:0,feature:{image:i},setImageUpload:E,handleFeatureChange:(t,s)=>p(s)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),e.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border border-gray-200 rounded-t-lg",children:[e.jsx(d,{onClick:()=>m("h1"),icon:ee,tooltip:"Heading 1"}),e.jsx(d,{onClick:()=>m("h2"),icon:te,tooltip:"Heading 2"}),e.jsx("div",{className:"w-px h-8 bg-gray-300 mx-1"}),e.jsx(d,{onClick:()=>m("b"),icon:se,tooltip:"Bold"}),e.jsx(d,{onClick:()=>m("i"),icon:ae,tooltip:"Italic"}),e.jsx(d,{onClick:()=>m("code"),icon:re,tooltip:"Code"}),e.jsx("div",{className:"w-px h-8 bg-gray-300 mx-1"}),e.jsx(d,{onClick:()=>m("link"),icon:le,tooltip:"Add Link"}),e.jsx(d,{onClick:()=>m("blockquote"),icon:oe,tooltip:"Quote"}),e.jsx(d,{onClick:()=>m("ul"),icon:ie,tooltip:"Bullet List"}),e.jsx(d,{onClick:()=>m("ol"),icon:ne,tooltip:"Numbered List"}),e.jsx("div",{className:"w-px h-8 bg-gray-300 mx-1"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(d,{onClick:()=>{var t;return(t=M.current)==null?void 0:t.click()},icon:de,tooltip:"Insert Image",disabled:k}),e.jsx("input",{type:"file",ref:M,accept:"image/*",className:"hidden",onChange:t=>{var s;return((s=t.target.files)==null?void 0:s[0])&&X(t.target.files[0])},disabled:k})]})]}),e.jsx("textarea",{rows:12,className:"w-full px-4 py-4 border border-gray-200 border-t-0 rounded-b-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 font-mono text-sm",placeholder:"Write your blog content here... You can use HTML tags for formatting.",value:u,onChange:t=>g(t.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["* Required fields",k&&e.jsxs("span",{className:"ml-4 text-blue-600",children:[e.jsx(ce,{className:"inline h-4 w-4 animate-spin mr-1"}),"Uploading image..."]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:O,disabled:k||!b||!u||!c,className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(me,{className:"h-4 w-4"}),y?"Update Blog":"Publish Blog"]})})]})]})}),e.jsx(f.Panel,{className:"p-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Blog Preview"}),e.jsx("p",{className:"text-gray-600",children:"See how your blogs will look to readers"})]}),(H=o==null?void 0:o.blogs)!=null&&H.length?e.jsx("div",{className:"space-y-8",children:o.blogs.map(t=>{var s;return e.jsxs("article",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[((s=t.featuredImage)==null?void 0:s.url)&&e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx("img",{src:t.featuredImage.url||"/placeholder.svg",alt:"Featured",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:t.category||"Uncategorized"}),e.jsxs("span",{children:["By ",t.author]})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4 leading-tight",children:t.title}),e.jsx("div",{className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:t.content}})]})]},t._id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No blogs to preview yet."}),e.jsx("p",{className:"text-gray-400",children:"Create your first blog post to see it here!"})]})]})}),e.jsx(f.Panel,{className:"p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"All Blog Posts"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your published content"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[((R=o==null?void 0:o.blogs)==null?void 0:R.length)||0," posts total"]})]}),(q=o==null?void 0:o.blogs)!=null&&q.length?e.jsx("div",{className:"grid gap-6",children:o.blogs.map(t=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:t.title}),t.category&&e.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:t.category})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["by ",t.author]}),e.jsx("div",{className:"text-gray-700 text-sm leading-relaxed line-clamp-2",dangerouslySetInnerHTML:{__html:t.excerpt||t.content.substring(0,150)+"..."}})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("button",{onClick:()=>{B(t._id),w(0),window.scrollTo({top:0,behavior:"smooth"})},className:"flex items-center gap-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors text-sm font-medium",children:[e.jsx(L,{className:"h-4 w-4"}),"Edit"]}),e.jsxs("button",{onClick:()=>Q(t._id),className:"flex items-center gap-1 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:[e.jsx(xe,{className:"h-4 w-4"}),"Delete"]})]})]})},t._id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx(ue,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No blog posts yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by creating your first blog post."})]})]})})]})]})})})}export{$e as default};
