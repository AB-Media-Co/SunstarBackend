var L=Object.defineProperty,P=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var F=(l,s,a)=>s in l?L(l,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[s]=a,d=(l,s)=>{for(var a in s||(s={}))I.call(s,a)&&F(l,a,s[a]);if(T)for(var a of T(s))M.call(s,a)&&F(l,a,s[a]);return l},p=(l,s)=>P(l,E(s));var b=(l,s,a)=>new Promise((v,h)=>{var u=r=>{try{c(a.next(r))}catch(o){h(o)}},f=r=>{try{c(a.throw(r))}catch(o){h(o)}},c=r=>r.done?v(r.value):Promise.resolve(r.value).then(u,f);c((a=a.apply(l,s)).next())});import{r as n,f as j,n as x,j as e}from"./index-DE5kYYma.js";import{P as O}from"./plus-Bu_uXjW2.js";import{L as A}from"./loader-BsOa3Wkg.js";import{T as _}from"./trash-2-BH6o-9U7.js";import{X as q}from"./x-CXGooyeu.js";import{U as B}from"./upload-MKBWzQYY.js";import{c as R}from"./createLucideIcon-DbsA6dvF.js";import{I as $}from"./image-dZzfaLBd.js";import{F as H}from"./file-text-Dl8-GoAl.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=R("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),se=()=>{const[l,s]=n.useState([]),[a,v]=n.useState(!0),[h,u]=n.useState(!1),[f,c]=n.useState(!1),[r,o]=n.useState({title:"",description:"",category:"brochure",fileType:"other",targetUserType:"both"}),[i,N]=n.useState(null);n.useEffect(()=>{w()},[]);const w=()=>b(void 0,null,function*(){try{const t=yield j.get("/api/digital-assets");t.data.success&&s(t.data.data)}catch(t){console.error(t),x.error("Failed to fetch assets")}finally{v(!1)}}),D=t=>{N(t.target.files[0])},C=t=>b(void 0,null,function*(){var g,U;if(t.preventDefault(),!i){x.error("Please select a file to upload");return}c(!0);try{const m=new FormData;m.append("file",i);const k=(yield j.post("/api/digital-assets/upload",m,{headers:{"Content-Type":"multipart/form-data"}})).data.fileUrl;if(!k)throw new Error("Upload failed - No URL returned");let y="other";i.type.includes("pdf")?y="pdf":i.type.includes("image")?y="image":(i.type.includes("word")||i.type.includes("document"))&&(y="document"),yield j.post("/api/digital-assets",p(d({},r),{fileUrl:k,fileType:y,targetUserType:r.targetUserType})),x.success("Asset uploaded successfully"),u(!1),o({title:"",description:"",category:"brochure",fileType:"other",targetUserType:"both"}),N(null),w()}catch(m){console.error("Upload Error:",m),x.error(((U=(g=m.response)==null?void 0:g.data)==null?void 0:U.message)||"Failed to upload asset")}finally{c(!1)}}),S=t=>b(void 0,null,function*(){if(window.confirm("Are you sure you want to delete this asset?"))try{yield j.delete(`/api/digital-assets/${t}`),x.success("Asset deleted"),s(l.filter(g=>g._id!==t))}catch(g){x.error("Failed to delete asset")}}),z=t=>{switch(t){case"pdf":return e.jsx(H,{className:"w-8 h-8 text-red-500"});case"image":return e.jsx($,{className:"w-8 h-8 text-blue-500"});default:return e.jsx(V,{className:"w-8 h-8 text-gray-500"})}};return e.jsxs("div",{className:"p-8 pt-24 mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-end mb-10 border-b border-gray-100 pb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-light text-gray-900 mb-2",children:"Digital Assets"}),e.jsx("p",{className:"text-gray-500 font-light",children:"Manage repository"})]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 bg-black text-white px-6 py-3 rounded-lg hover:bg-gray-800 transition-all text-sm tracking-wide",children:[e.jsx(O,{size:18}),"UPLOAD ASSET"]})]}),a?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(A,{className:"animate-spin text-gray-400"})}):l.length===0?e.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"No assets uploaded yet."})}):e.jsx("div",{className:"grid gap-4",children:l.map(t=>e.jsxs("div",{className:"group flex items-center justify-between p-5 bg-white border border-transparent hover:border-gray-100 hover:shadow-sm rounded-xl transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-5 overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-gray-600",children:z(t.fileType)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate max-w-md",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:t.category.replace("_"," ")}),t.description&&e.jsx("span",{className:"text-xs text-gray-300 px-2 border-l border-gray-200 truncate max-w-xs",children:t.description})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("a",{href:t.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-gray-400 hover:text-black transition-colors",children:"Download"}),e.jsx("button",{onClick:()=>S(t._id),className:"p-2 text-gray-300 hover:text-red-500 transition-colors rounded-full hover:bg-red-50",children:e.jsx(_,{size:18})})]})]},t._id))}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-md p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-lg p-8 shadow-2xl border border-gray-100 rounded-3xl animate-in fade-in zoom-in duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-light text-gray-900",children:"Upload Asset"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-900 transition-colors",children:e.jsx(q,{size:24})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",required:!0,className:"w-full px-0 py-3 border-b border-gray-200 focus:border-black outline-none text-lg font-light bg-transparent placeholder-gray-300 transition-colors",value:r.title,onChange:t=>o(p(d({},r),{title:t.target.value})),placeholder:"Asset Title"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("select",{className:"w-full px-0 py-3 border-b border-gray-200 focus:border-black outline-none bg-transparent text-gray-600 cursor-pointer",value:r.category,onChange:t=>o(p(d({},r),{category:t.target.value})),children:[e.jsx("option",{value:"brochure",children:"Brochure"}),e.jsx("option",{value:"policy",children:"Policy"}),e.jsx("option",{value:"brand_material",children:"Brand Material"}),e.jsx("option",{value:"other",children:"Other"})]}),e.jsxs("select",{className:"w-full px-0 py-3 border-b border-gray-200 focus:border-black outline-none bg-transparent text-gray-600 cursor-pointer",value:r.targetUserType,onChange:t=>o(p(d({},r),{targetUserType:t.target.value})),children:[e.jsx("option",{value:"both",children:"Both Users"}),e.jsx("option",{value:"agent",children:"Agent Only"}),e.jsx("option",{value:"corporate",children:"Corporate Only"})]})]}),e.jsx("div",{children:e.jsx("textarea",{className:"w-full px-0 py-3 border-b border-gray-200 focus:border-black outline-none bg-transparent text-gray-600 placeholder-gray-300 resize-none",rows:"2",value:r.description,onChange:t=>o(p(d({},r),{description:t.target.value})),placeholder:"Brief description (optional)"})})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"border border-dashed border-gray-300 rounded-xl p-8 text-center hover:bg-gray-50 transition cursor-pointer relative group",children:[e.jsx("input",{type:"file",required:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:D,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`p-4 rounded-full mb-3 transition-colors ${i?"bg-black text-white":"bg-gray-100 text-gray-400 group-hover:text-gray-600"}`,children:e.jsx(B,{className:"w-6 h-6"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i?i.name:"Click to upload"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, Images, Docs supported"})]})]})}),e.jsx("button",{type:"submit",disabled:f,className:"w-full py-4 bg-black text-white rounded-xl font-medium tracking-wide hover:bg-gray-900 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3 mt-4",children:f?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"animate-spin w-5 h-5"})," Uploading..."]}):"UPLOAD NOW"})]})]})})]})};export{se as default};
