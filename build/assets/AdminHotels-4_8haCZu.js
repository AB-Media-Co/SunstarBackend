var e=(e,t,s)=>new Promise(((a,o)=>{var l=e=>{try{i(s.next(e))}catch(t){o(t)}},r=e=>{try{i(s.throw(e))}catch(t){o(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,r);i((s=s.apply(e,t)).next())}));import{h as t,r as s,j as a,q as o,_ as l}from"./react-vendor-tq68JOgp.js";import{c as r}from"./index-BZBH8CwT.js";import{d as i,b as n,m as d}from"./animation-vendor-DJegggv9.js";import{useGetHotels as c,useEditHotel as m,useDeleteHotelById as x}from"./useHotelHook2-lvucTAR8.js";import{an as h,E as u,ao as p,t as g,ap as v,aq as y}from"./ui-vendor-DiJ4VKpG.js";import"./vendor-DwD9zxym.js";import"./query-vendor-iDpT9gG9.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";const f=()=>e(void 0,null,(function*(){return(yield r.get("/api/ezee/allhotels")).data})),b=({isOpen:e,onConfirm:t,onCancel:o})=>(s.useEffect((()=>(document.body.style.overflow=e?"hidden":"auto",()=>document.body.style.overflow="auto")),[e]),s.useEffect((()=>{e&&i.fromTo(".modal-container",{y:"-100%",opacity:0},{y:"0",opacity:1,duration:.6,ease:"power3.out"})}),[e]),a.jsx(n,{children:e&&a.jsx(d.div,{className:"fixed inset-0 bg-gray-900 bg-opacity-80  z-50 flex justify-center items-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:a.jsxs(d.div,{className:"modal-container bg-primary-white rounded-xl p-10 text-center shadow-2xl transform transition-all duration-500 ease-in-out",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},children:[a.jsx("h2",{className:"text-2xl font-extrabold text-gray-800 mb-6",children:"Confirm Deletion"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to delete this? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-around mt-6",children:[a.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-primary-white font-semibold py-3 px-8 rounded-lg transform hover:scale-105 transition-transform duration-200 shadow-md",onClick:t,children:"Yes, Delete"}),a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-primary-white font-semibold py-3 px-8 rounded-lg transform hover:scale-105 transition-transform duration-200 shadow-md",onClick:o,children:"Cancel"})]})]})})})),j=({item:e,type:t,onEdit:s,onDelete:o,onToggle:l})=>{var r,i;return a.jsxs("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden relative border border-gray-200 transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1 h-full flex flex-col",children:[a.jsxs("div",{className:"justify-end items-center py-4 px-2 flex gap-2 z-10 transition-opacity duration-200",children:[a.jsx("button",{onClick:()=>s(e),className:"p-2 px-4 rounded-full shadow-md hover:bg-blue-100 transition-colors duration-200",title:"Edit",children:a.jsx(u,{fontSize:"small",className:"text-blue-600"})}),a.jsx("button",{onClick:()=>o(e.hotelCode),className:"p-2 px-4 rounded-full shadow-md hover:bg-red-100 transition-colors duration-200",title:"Delete",children:a.jsx(p,{fontSize:"small",className:"text-red-600"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(g,{checked:e.active,onChange:()=>l(e,"active"),color:"primary"}),a.jsx("span",{className:"text-sm text-gray-700",children:e.active?"Active":"Inactive"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(g,{checked:e.isDayUseRoom,onChange:()=>l(e,"dayUseRoom",!e.isDayUseRoom),color:"primary"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Day Use Room"})]})]}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"h-48 sm:h-56 overflow-hidden",children:[a.jsx("img",{src:(null==(r=e.images)?void 0:r[0])||"https://via.placeholder.com/300本土化?text=No+Image",alt:"hotel"===t?e.name:e.roomType,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),a.jsxs("div",{className:"p-5 flex-grow flex flex-col",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-1 hover:text-blue-600 transition-colors duration-200",children:"hotel"===t?e.name:`${e.roomType} - Room ${e.roomNumber}`}),a.jsxs("div",{className:"flex items-center bg-yellow-50 px-2 py-1 rounded-md border border-yellow-100",children:[a.jsx(v,{fontSize:"small",className:"text-yellow-500"}),a.jsx("span",{className:"ml-1 text-gray-700 font-semibold",children:e.rating||"N/A"})]})]}),"hotel"===t&&a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx(y,{fontSize:"small",className:"text-gray-500 mr-1"}),a.jsxs("span",{className:"text-gray-700 text-sm",children:["Check In: ",e.checkIn||"N/A"," | Check Out: ",e.checkOut||"N/A"]})]}),a.jsx("div",{className:"flex items-center justify-between mt-4 mb-4",children:a.jsx("div",{className:"flex items-center",children:e.discountedPrice?a.jsx("div",{className:"flex flex-col",children:a.jsxs("span",{className:"text-green-600 font-bold text-lg",children:["₹",e.price.toLocaleString(),a.jsx("span",{className:"text-xs text-gray-600 ml-1",children:"/night"})]})}):a.jsxs("div",{children:[a.jsxs("span",{className:"text-gray-700 font-bold text-lg",children:["₹",e.price.toLocaleString()]}),a.jsx("span",{className:"text-xs text-gray-600 ml-1",children:"/night"})]})})}),a.jsxs("div",{children:[a.jsx("span",{className:"block font-bold text-gray-800 mb-3",children:"Amenities:"}),a.jsx("ul",{className:"flex flex-wrap gap-1.5",children:(null==(i=null==e?void 0:e.amenities)?void 0:i.length)?a.jsxs(a.Fragment,{children:[e.amenities.slice(0,3).map(((e,t)=>a.jsx("li",{className:"bg-indigo-50 text-indigo-700 text-xs px-3 py-1.5 rounded-full border border-indigo-100 flex items-center gap-1 transition-colors duration-200 hover:bg-indigo-100",children:"object"==typeof e?e.value:e},t))),e.amenities.length>3&&a.jsxs("li",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1.5 rounded-full border border-gray-200 transition-colors duration-200 hover:bg-gray-200",children:["+",e.amenities.length-3," more"]})]}):a.jsx("li",{className:"text-gray-500 italic",children:"No amenities listed"})})]})]})]},e._id)},N=({title:t,type:o,onEdit:l,onDelete:r,onAdd:i})=>{var n,d;const{data:x,isLoading:u,isError:p,error:g,refetch:v}=c(),{mutate:y}=m(),[f,b]=s.useState(!1),[N,w]=s.useState(""),[C,k]=s.useState(3),D=(t,...s)=>e(void 0,[t,...s],(function*(e,t="active",s=!e.active){b(!0),k(3),w("active"===t?s?`Activating ${e.name}`:`Deactivating ${e.name}`:s?`Enabling Day Use Room for ${e.name}`:`Disabling Day Use Room for ${e.name}`);try{"active"===t?yield y({hotelCode:e.hotelCode,hotelData:{active:s}},{onSuccess:()=>v()}):"dayUseRoom"===t&&(yield y({hotelCode:e.hotelCode,hotelData:{isDayUseRoom:s}},{onSuccess:()=>v()}))}catch(o){return w("Failed to update. Please try again."),void setTimeout((()=>{b(!1),k(3)}),3e3)}const a=setInterval((()=>{k((e=>e<=1?(clearInterval(a),0):e-1))}),1e3);setTimeout((()=>{b(!1),k(3)}),3e3)}));if(u)return a.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)]",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 animate-spin mb-4"}),a.jsxs("p",{className:"text-gray-600 animate-pulse",children:["Loading ",o,"s..."]})]})});if(p)return a.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)]",children:a.jsxs("div",{className:"bg-red-50 p-6 rounded-lg max-w-md border border-red-100 shadow-md",children:[a.jsxs("p",{className:"text-red-600 font-semibold mb-3 flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Error loading data"]}),a.jsx("p",{className:"text-gray-700",children:g.message}),a.jsx("button",{onClick:()=>v(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-200 shadow-sm",children:"Retry"})]})});const S=!(null==(n=null==x?void 0:x.hotels)?void 0:n.length);return a.jsxs("div",{className:"min-h-[calc(100vh-64px)] bg-gradient-to-b from-gray-50 to-white relative",children:[a.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:t}),a.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"hotel"===o?"Manage your hotel inventory, update details, and add new properties.":"Manage your room inventory, update details, and add new accommodations."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:i,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-sm",children:[a.jsx(h,{fontSize:"small",className:"mr-1"}),"Add New ","hotel"===o?"Hotel":"Room"]})})]}),S?a.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md text-center max-w-md mx-auto",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:["No ",o,"s found"]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Start adding your first ",o," to manage your inventory."]}),a.jsxs("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-sm",children:["Add New ","hotel"===o?"Hotel":"Room"]})]}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:null==(d=null==x?void 0:x.hotels)?void 0:d.map((e=>a.jsx("div",{className:"h-full",children:a.jsx(j,{item:e,type:o,onEdit:l,onDelete:r,onToggle:D})},e._id)))})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-black/70 to-gray-900/70 backdrop-blur-sm flex justify-center items-center z-50 animate-fadeIn",children:a.jsx("div",{className:"bg-white/90 p-8 rounded-2xl shadow-2xl transform transition-all duration-500 animate-slideUp",children:a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin border-t-blue-600"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:a.jsx("p",{className:"text-2xl font-bold text-blue-600 animate-pulse",children:C})})]}),a.jsxs("p",{className:"text-xl font-semibold text-gray-800 animate-pulse",children:[N,"..."]})]})})})]})},w=()=>{const{data:e,isLoading:r,isError:i,error:n}=t({queryKey:["hotels"],queryFn:f}),{mutate:d}=x(),c=o(),[m,h]=s.useState(!1),[u,p]=s.useState(null);return s.useEffect((()=>(document.body.style.overflow=m?"hidden":"auto",()=>document.body.style.overflow="auto")),[m]),r?a.jsx("p",{children:"Loading..."}):i?a.jsxs("p",{children:["Error: ",n.message]}):a.jsxs(a.Fragment,{children:[a.jsx(N,{title:"Our Premium Hotels",data:null==e?void 0:e.hotels,type:"hotel",onEdit:e=>{c(`/admin/hotels/edit/${e.hotelCode}`,{state:{hotel:e}})},onDelete:e=>{p(e),h(!0)},onAdd:()=>{c("/admin/hotels/add")},showAddButton:!0}),a.jsx(b,{isOpen:m,onConfirm:()=>{u&&d(u,{onSuccess:()=>{l.success("Hotel Deleted Successfully"),h(!1),p(null)},onError:e=>{l.error(`Failed to delete hotel: ${e.message}`),h(!1)}})},onCancel:()=>{h(!1),p(null)}})]})};export{w as AdminHotels};
