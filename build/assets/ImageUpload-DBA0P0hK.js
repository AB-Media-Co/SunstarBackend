import{r as e,j as a}from"./react-vendor-tq68JOgp.js";import{uploadSingleImagesAPIV2 as t}from"./useHotelHook2-lvucTAR8.js";import{aW as n,o as l,ad as r,D as o,aX as s,at as i,q as d}from"./ui-vendor-DiJ4VKpG.js";const c=n("input")({display:"none"}),m=({feature:n,handleFeatureChange:m,setImageUpload:u,index:g})=>{const[h,x]=e.useState(!1),[p,j]=e.useState(null),[v,y]=e.useState(null),f=`contained-button-file-${g}`;return e.useEffect((()=>{u(h)}),[h,u]),a.jsxs(l,{children:[a.jsx(r,{label:"Image URL",variant:"outlined",fullWidth:!0,value:n.image||"",onChange:e=>m("image",e.target.value),style:{marginBottom:10},disabled:h}),a.jsxs("label",{htmlFor:f,children:[a.jsx(c,{accept:"image/*",id:f,type:"file",onChange:e=>{return a=function*(){const a=e.target.files[0];if(a){y(null),j(null),x(!0);try{const e=yield t([a]),n=null==e?void 0:e.imageUrls[0];m("image",n),x(!1)}catch(n){j("Failed to upload image. Please try again."),x(!1),m("image","")}}},new Promise(((e,t)=>{var n=e=>{try{r(a.next(e))}catch(n){t(n)}},l=e=>{try{r(a.throw(e))}catch(n){t(n)}},r=a=>a.done?e(a.value):Promise.resolve(a.value).then(n,l);r((a=a.apply(undefined,null)).next())}));var a},disabled:h}),a.jsx(o,{variant:"contained",component:"span",startIcon:a.jsx(s,{}),disabled:h,style:{marginBottom:10},children:"Upload Image"})]}),h&&a.jsxs(l,{display:"flex",alignItems:"center",mt:1,children:[a.jsx(i,{size:20,sx:{mr:1}}),a.jsx(d,{variant:"body2",color:"textSecondary",children:"Uploading..."})]}),p&&a.jsx(d,{variant:"body2",color:"error",mt:1,children:p}),v&&a.jsx(d,{variant:"body2",color:"error",mt:1,children:v})]})};export{m as I};
