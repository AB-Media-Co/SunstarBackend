import{c as ie,j as e,L as J,d as W,r as p,b as B,Z as ce,a as H,$ as Q,a0 as K,a1 as Z,a2 as de,a3 as me,a4 as G,x as xe,w as he,v as X,f as ue,h as ge}from"./index-WC_ILwCS.js";import{C as D,B as ee,R as fe}from"./RazorpayPayment-DHsK3sRT.js";import{L as ae}from"./LoginModal-B7F7lh_p.js";import{R as pe,W as ye}from"./Warning-Cm76RjXW.js";import{A as te,a as be}from"./ArrowRightAlt-Czqq--_i.js";const je=ie(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"})),ve=({ContactUsDetail:r})=>{const a=(r==null?void 0:r.phoneNumber)||"";return e.jsx("footer",{className:"w-full border-t border-gray-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-6 py-6 text-gray-600   md:justify-between md:gap-10 md:py-8",children:[e.jsxs("div",{className:"flex justify-between gap-2 sm:gap-3",children:[e.jsx("p",{className:"text-base font-semibold tracking-tight sm:text-lg md:text-2xl",children:"Facing an issue? Call us for assistance."}),a?e.jsx("a",{href:`tel:${a}`,className:"w-fit text-lg font-semibold underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-xl","aria-label":`Call ${a}`,children:e.jsx("span",{className:"whitespace-nowrap",children:a})}):e.jsx("span",{className:"text-sm text-gray-500 sm:text-base",children:"Phone number unavailable"})]}),e.jsxs("nav",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 sm:gap-x-8","aria-label":"Footer navigation",children:[e.jsx(J,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Cancellation Policy"}),e.jsx(J,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Terms & Conditions"})]})]})})})},we=({hotelDetail:r,verified:a,checkIn:h,checkOut:l})=>{const o=localStorage.getItem("user_email"),{data:s}=W(o),[i,g]=p.useState("");console.log(i);const{selectedRooms:x,setIsConfirmationModalOpen:t,someOneElse:n,guestData:d}=B(),c=ce(),f=H(),y=u=>{g(u)},j=(u="")=>{var I,F;if(!(a||(I=s==null?void 0:s.data)!=null&&I.isVerified)){(F=document.getElementById("guestDetail"))==null||F.scrollIntoView({behavior:"smooth"});return}const m={};x.forEach((N,A)=>{var O;const S=parseInt(localStorage.getItem("days")),_=Array(S).fill(N.price).join(","),R=Array(S).fill(0).join(","),b=Array(S).fill(0).join(",");m[`Room_${A+1}`]={Rateplan_Id:N==null?void 0:N.roomrateunkid,Ratetype_Id:N.RateTypeID,Roomtype_Id:N.RoomTypeID,baserate:_,extradultrate:R,extrachildrate:b,number_adults:((O=N.guestQty)==null?void 0:O.toString())||"1",number_children:"0",ExtraChild_Age:"",Title:"",First_Name:n?d.firstName||"":(s==null?void 0:s.data.firstName)||"",Last_Name:n?d.lastName||"":(s==null?void 0:s.data.lastName)||"",Gender:(s==null?void 0:s.data.gender)||"",SpecialRequest:i==="pay-at-hotel"?"pay-at-hotel":u}});const v={BookingData:{Room_Details:m,check_in_date:h,check_out_date:l,Booking_Payment_Mode:i==="pay-at-hotel"?"0":"1",Email_Address:s==null?void 0:s.data.email,Source_Id:"",MobileNo:n?d.phone:(s==null?void 0:s.data.phone)||"",Address:(s==null?void 0:s.data.address)||"",State:(s==null?void 0:s.data.state)||"",Country:(s==null?void 0:s.data.country)||"",City:(s==null?void 0:s.data.city)||"",Zipcode:"",Fax:"",Device:"Web",Languagekey:"",paymenttypeunkid:u},HotelCode:r==null?void 0:r.hotelCode,APIKey:r==null?void 0:r.authKey,userEmail:s==null?void 0:s.data.email};c.mutate(v,{onSuccess:N=>{var A,S,_,R;f("/thankyou",{state:{bookingResponse:N,payload:v,paymentMethod:i,checkIn:h,checkOut:l,hotel:{hotelCode:r==null?void 0:r.hotelCode,name:r==null?void 0:r.hotelName,payAtHotel:r==null?void 0:r.payAtHotel},user:{email:(A=s==null?void 0:s.data)==null?void 0:A.email,firstName:(S=s==null?void 0:s.data)==null?void 0:S.firstName,lastName:(_=s==null?void 0:s.data)==null?void 0:_.lastName,phone:(R=s==null?void 0:s.data)==null?void 0:R.phone},rooms:x},replace:!0})}})};return c.isPending?e.jsxs("div",{className:"relative bg-white border-gray-100",children:[e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-teal-500 rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-r-teal-300 rounded-full animate-spin mx-auto",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Processing Your Booking"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your reservation..."}),e.jsx("div",{className:"flex items-center justify-center mt-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),e.jsx("div",{className:"filter blur-sm pointer-events-none",children:e.jsx(se,{hotelDetail:r,selectedPaymentMethod:i,handlePaymentMethodChange:y,ContinueBtnClick:j,isLoading:!0})})]}):e.jsx(e.Fragment,{children:e.jsx(se,{hotelDetail:r,selectedPaymentMethod:i,handlePaymentMethodChange:y,ContinueBtnClick:j,isLoading:!1})})},se=({hotelDetail:r,selectedPaymentMethod:a,handlePaymentMethodChange:h,ContinueBtnClick:l,isLoading:o})=>{const{finalPrice:s}=B();return e.jsxs("div",{id:"payment-method",className:"bg-white border-gray-100",children:[e.jsx("div",{className:"flex items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:" text-mobile/h4 md:text-desktop/h4 text-gray-800 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-gray-500 text-mobile/body/2 md:text-desktop/body/1",children:"Choose your preferred payment option"})]})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:`relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer group ${a==="pay-now"?"border-teal-500 bg-teal-50 shadow-lg transform scale-[1.02]":"border-gray-200 hover:border-teal-300 hover:shadow-md"} ${o?"pointer-events-none":""}`,onClick:()=>!o&&h("pay-now"),children:[e.jsxs("label",{htmlFor:"pay-now",className:"flex items-start p-6 cursor-pointer",children:[e.jsx("input",{type:"radio",id:"pay-now",name:"payment-method",className:"w-5 h-5 mt-1 text-teal-600 border-2 border-gray-300 focus:ring-teal-500",onChange:()=>!o&&h("pay-now"),checked:a==="pay-now",disabled:o}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${a==="pay-now"?"bg-teal-500":"bg-gray-100 group-hover:bg-teal-100"}`,children:e.jsx(D,{className:`w-5 h-5 ${a==="pay-now"?"text-white":"text-gray-600 group-hover:text-teal-600"}`})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Pay and Book Now"}),e.jsx("div",{className:"ml-auto",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Q,{className:"w-3 h-3 mr-1"}),"Secure"]})})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:"Complete your booking instantly with secure online payment"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Instant confirmation"})]}),e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"All major cards accepted"})]})]})]})]}),a==="pay-now"&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"w-6 h-6 bg-teal-500 rounded-full flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 text-white"})})})]}),(r==null?void 0:r.payAtHotel)==="yes"&&e.jsxs("div",{className:`relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer group ${a==="pay-at-hotel"?"border-teal-500 bg-teal-50 shadow-lg transform scale-[1.02]":"border-gray-200 hover:border-teal-300 hover:shadow-md"} ${o?"pointer-events-none":""}`,onClick:()=>!o&&h("pay-at-hotel"),children:[e.jsxs("label",{htmlFor:"pay-at-hotel",className:"flex items-start p-6 cursor-pointer",children:[e.jsx("input",{type:"radio",id:"pay-at-hotel",name:"payment-method",className:"w-5 h-5 mt-1 text-teal-600 border-2 border-gray-300 focus:ring-teal-500",onChange:()=>!o&&h("pay-at-hotel"),checked:a==="pay-at-hotel",disabled:o}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${a==="pay-at-hotel"?"bg-teal-500":"bg-gray-100 group-hover:bg-teal-100"}`,children:e.jsx(ee,{className:`w-5 h-5 ${a==="pay-at-hotel"?"text-white":"text-gray-600 group-hover:text-teal-600"}`})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Pay at Hotel"}),e.jsx("div",{className:"ml-auto",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"Flexible"]})})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:"Reserve now and pay directly at the hotel during check-in"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-orange-600",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"No advance payment"})]}),e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Pay at reception"})]})]})]})]}),a==="pay-at-hotel"&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"w-6 h-6 bg-teal-500 rounded-full flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 text-white"})})})]})]}),a&&e.jsx("div",{className:"flex justify-end",children:a==="pay-now"?e.jsx(fe,{hotelDetail:r,amount:s,onSuccess:i=>l(i)}):e.jsx("button",{className:"group relative inline-flex items-center px-8 py-4 bg-gradient-to-r from-teal-500 to-teal-600 text-white font-semibold rounded-xl",onClick:()=>l(),children:"Confirm Booking"})}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(K,{className:"w-4 h-4 mr-2 text-green-600"}),e.jsx("span",{children:"Your payment information is secured with 256-bit SSL encryption"})]})})]})},re=({days:r,showButton:a,isPaymentVisible:h})=>{const{selectedRooms:l,totalOtherCharges:o,finalPrice:s,baseFinalPrice:i,setNights:g}=B(),[x,t]=p.useState(!1);p.useEffect(()=>{r&&(g(r),localStorage.setItem("days",r))},[r,g]);const n=i-s,d=n>0;return p.useEffect(()=>{const c=()=>{window.scrollY>100?t(!0):t(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]),e.jsxs("div",{className:`p-6 bg-white border border-gray-200 rounded-xl shadow-md w-full ${x?"md:w-[384px]":{}}  md:w-96 mx-auto font-sans transition-all duration-300 ${x?"xl:fixed xl:top-4  xl:z-50":"relative"}`,children:[e.jsx("div",{className:"flex items-center pb-4 justify-between",children:e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Reservation Summary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center",children:"Your Price Summary"}),e.jsx("div",{className:"space-y-3 mb-4",children:l==null?void 0:l.map((c,f)=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-700 pb-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.option==="roomOnly"?"Room Only":"With Meals"," × ",r," ",r===1?"Night":"Nights"]})]}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",c.price*r]})]},f))}),e.jsxs("div",{className:"flex justify-between text-sm font-medium text-black/40 pb-2 border-b border-gray-200",children:[e.jsx("p",{children:"Taxes & Other Charges"}),e.jsxs("p",{className:"font-medium ",children:["₹ ",o]})]})]}),e.jsxs("div",{className:"pt-3 bg-gray-50 p-4 mt-5 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Original Amount"}),e.jsxs("p",{className:"font-medium",children:["₹ ",i]})]}),d&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Discount"}),e.jsxs("p",{className:"font-medium text-green-600",children:["- ₹ ",n==null?void 0:n.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t border-gray-200",children:[e.jsx("p",{children:"Payable Amount"}),e.jsxs("p",{className:"text-primary-green",children:["₹ ",s]})]})]}),a&&e.jsx("a",{href:"#payment-method",className:"block w-full",children:e.jsx("button",{disabled:h,className:`mt-6 w-full py-3.5 font-bold text-white rounded-lg transition-all duration-300 ${h?"bg-gray-300 cursor-not-allowed":"bg-primary-green hover:bg-primary-dark-green"}`,children:"See Payment Options"})})]})};/*! js-cookie v3.0.5 | MIT */function V(r){for(var a=1;a<arguments.length;a++){var h=arguments[a];for(var l in h)r[l]=h[l]}return r}var Ne={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function q(r,a){function h(o,s,i){if(!(typeof document>"u")){i=V({},a,i),typeof i.expires=="number"&&(i.expires=new Date(Date.now()+i.expires*864e5)),i.expires&&(i.expires=i.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var g="";for(var x in i)i[x]&&(g+="; "+x,i[x]!==!0&&(g+="="+i[x].split(";")[0]));return document.cookie=o+"="+r.write(s,o)+g}}function l(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var s=document.cookie?document.cookie.split("; "):[],i={},g=0;g<s.length;g++){var x=s[g].split("="),t=x.slice(1).join("=");try{var n=decodeURIComponent(x[0]);if(i[n]=r.read(t,n),o===n)break}catch{}}return o?i[o]:i}}return Object.create({set:h,get:l,remove:function(o,s){h(o,"",V({},s,{expires:-1}))},withAttributes:function(o){return q(this.converter,V({},this.attributes,o))},withConverter:function(o){return q(V({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(r)}})}q(Ne,{path:"/"});const ke=({hotelDetail:r,checkIn:a,verified:h})=>{const[l,o]=p.useState(""),[s,i]=p.useState(null),[,g]=p.useState(null),[x,t]=p.useState(!1),[n,d]=p.useState(!1),[c,f]=p.useState(null),{mutate:y,data:j}=de(),{mutateAsync:u}=me(),{finalPrice:m,setFinalPrice:w,baseFinalPrice:v}=B(),I=localStorage.getItem("user_email"),{data:F,isLoading:N}=W(I),A=localStorage.getItem("user_email")!==null;if(p.useEffect(()=>{r&&r._id&&A&&y(r._id)},[y,r,A,F]),N)return e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 rounded-full animate-spin border-t-cyan-600"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-cyan-600",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]})})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-600 animate-pulse",children:"Loading exclusive offers..."})]})});if(!A)return e.jsxs("div",{className:"relative bg-gradient-to-br from-white to-gray-50 p-10 rounded-2xl shadow-xl border border-gray-100 text-center overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-cyan-400 to-cyan-600"}),e.jsxs("div",{className:"relative ",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-full flex items-center justify-center",children:e.jsx(je,{className:"text-primary-green"})}),e.jsx("h2",{className:"text-3xl font-bold mb-4 text-gray-800 bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Exclusive Offers Await"}),e.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Unlock amazing discounts by verifying your email or mobile number"}),e.jsxs("a",{href:"#guestDetail",onClick:b=>{G.error("Please verify user details")},className:"mt-6 inline-flex items-center px-6 py-3 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white rounded-full text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[e.jsx("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Verify to Continue"]})]}),e.jsx("div",{className:"absolute -top-6 -right-6 w-24 h-24 bg-gradient-to-br from-cyan-200 to-cyan-300 rounded-full opacity-20"}),e.jsx("div",{className:"absolute -bottom-4 -left-4 w-16 h-16 bg-gradient-to-br from-cyan-100 to-cyan-200 rounded-full opacity-30"})]});const S=async()=>{var b,O,P,M;if(l.trim()){d(!0);try{const C=await u({hotelId:r._id,rate:m,offerCode:l.trim(),checkInDate:a});g(C),C.discountedRate&&w(C.discountedRate),G.success("Discounted rate calculated successfully")}catch(C){G.error((O=(b=C==null?void 0:C.response)==null?void 0:b.data)!=null&&O.error?(M=(P=C==null?void 0:C.response)==null?void 0:P.data)==null?void 0:M.error:"Error calculating discounted rate")}finally{d(!1)}}},_=()=>{i(null),g(null),w(v),t(!1)},R=async b=>{var O,P,M,C;i(b),t(!1),d(!0);try{const L=await u({hotelId:r._id,rate:m,offerCode:b.offerCode,checkInDate:a});g(L),L.discountedRate&&w(L.discountedRate),t(!0)}catch(L){G.error((P=(O=L==null?void 0:L.response)==null?void 0:O.data)!=null&&P.error?(C=(M=L==null?void 0:L.response)==null?void 0:M.data)==null?void 0:C.error:"Error calculating discounted rate"),i(null)}finally{d(!1)}};return e.jsxs("div",{className:"flex flex-col bg-white w-full mx-auto font-sans",children:[e.jsxs("div",{className:"flex items-center mb-10 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-50 to-transparent rounded-xl opacity-50 -z-10"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-800 mb-1",children:"Exclusive Offers"}),e.jsx("p",{className:"text-gray-500 text-mobile/body/2 md:text-desktop/body/1",children:"Save more on your booking with our special deals"})]})]}),!s&&e.jsx("div",{className:"relative mb-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-4",children:[e.jsxs("div",{className:"relative flex-grow group",children:[e.jsx("input",{type:"text",id:"promo",placeholder:"Enter your promo code here...",className:"w-full h-16 shadow-lg border-2 border-gray-200 rounded-2xl py-2 pl-14 pr-6 text-lg focus:outline-none focus:ring-4 focus:ring-cyan-100 focus:border-cyan-400 transition-all duration-300 group-hover:shadow-xl bg-gradient-to-r from-white to-gray-50",value:l,onChange:b=>o(b.target.value),onKeyPress:b=>b.key==="Enter"&&S()}),e.jsx("div",{className:"absolute left-5 top-1/2 transform -translate-y-1/2 text-gray-400 group-hover:text-cyan-500 transition-colors",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})}),l&&e.jsx("button",{onClick:()=>o(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("button",{onClick:S,disabled:!l.trim()||n,className:"h-16 px-8 md:w-48 rounded-2xl text-white font-bold transition-all duration-300 hover:shadow-xl flex items-center justify-center bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Applying..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Apply Code"]})})]})}),!s&&j&&j.length>0&&e.jsxs("div",{className:"mb-10",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-800",children:"Available Offers"}),e.jsx("p",{className:"text-gray-500 text-mobile/body/2 md:text-desktop/body/1",children:"Click on any offer to apply instantly"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(b=>e.jsxs("div",{onClick:()=>R(b),onMouseEnter:()=>f(b.offerCode),onMouseLeave:()=>f(null),className:"group relative p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 border-gray-200 hover:border-cyan-400 hover:bg-gradient-to-br hover:from-cyan-50 hover:to-white transform hover:-translate-y-2 hover:shadow-2xl bg-white overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-cyan-100 to-cyan-200 rounded-full transform translate-x-8 -translate-y-8 opacity-20 group-hover:opacity-40 transition-opacity"}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"text-lg font-bold px-4 py-2 rounded-full text-white shadow-lg bg-gradient-to-r from-cyan-500 to-cyan-600 group-hover:shadow-xl transition-shadow",children:[b.discountPercent,"%"]})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-bold text-xl text-gray-800 group-hover:text-cyan-700 transition-colors",children:b.offerCode}),b.description&&e.jsx("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:b.description})]})}),e.jsxs("div",{className:"flex flex-col items-start mt-6",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Instant Discount"}),e.jsxs("div",{className:"flex items-center text-cyan-600 font-semibold group-hover:text-cyan-700 transition-colors",children:[e.jsx("span",{className:"text-sm mr-2",children:c===b.offerCode?"Click to apply":"Tap to use"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform duration-300 ${c===b.offerCode?"translate-x-1":""}`,children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5l7 7-7 7"})]})]})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 to-cyan-600 opacity-0 group-hover:opacity-5 transition-opacity rounded-2xl"})]},b.offerCode))})]}),s&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-800",children:"Applied Offer"}),e.jsx("p",{className:"text-gray-500 text-mobile/body/2 md:text-desktop/body/1",children:"Your discount has been applied"})]})}),e.jsxs("button",{onClick:_,className:"flex items-center text-sm px-6 py-3 bg-gradient-to-r from-red-50 to-red-100 text-red-600 rounded-full hover:from-red-100 hover:to-red-200 transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg border border-red-200",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),"Remove & Change"]})]}),e.jsxs("div",{className:"relative overflow-hidden p-8 bg-gradient-to-br from-cyan-50 to-white border-2 rounded-2xl shadow-xl border-cyan-200",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 transform translate-x-10 -translate-y-10",children:e.jsx("div",{className:"absolute transform rotate-45 text-white font-bold py-2 w-40 text-center text-sm shadow-lg bg-gradient-to-r from-cyan-500 to-cyan-600",children:"✓ APPLIED"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between relative z-10",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-3xl text-gray-800 mb-2",children:s.offerCode}),s.description&&e.jsx("div",{className:"text-gray-600 text-lg leading-relaxed",children:s.description})]}),e.jsx("div",{className:"mt-6 sm:mt-0 sm:ml-6",children:e.jsx("div",{className:"inline-flex items-center",children:e.jsxs("span",{className:"text-2xl font-bold px-6 py-3 rounded-2xl text-white shadow-lg bg-gradient-to-r from-cyan-500 to-cyan-600",children:[s.discountPercent,"% OFF"]})})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-cyan-200 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-green-500 flex items-center justify-center mr-3 shadow-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),x&&e.jsx("p",{className:"font-semibold text-lg text-gray-700",children:"🎉 Discount successfully applied to your booking!"}),n&&e.jsxs("p",{className:"font-medium text-gray-600 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-cyan-600 border-t-transparent rounded-full animate-spin mr-2"}),"Applying discount..."]})]}),e.jsx("div",{className:"absolute -bottom-4 -left-4 w-20 h-20 bg-gradient-to-br from-cyan-200 to-cyan-300 rounded-full opacity-20"}),e.jsx("div",{className:"absolute top-1/2 -right-6 w-12 h-12 bg-gradient-to-br from-cyan-100 to-cyan-200 rounded-full opacity-30"})]})]})]})},Ce=({data:r})=>{const a=r==null?void 0:r.addToYourStay,[h,l]=p.useState({}),{selectedOtherCharges:o,setSelectedOtherCharges:s}=B(),i=t=>{l(n=>({...n,[t]:!n[t]}))},g=(t,n)=>{n.stopPropagation(),s(d=>(Array.isArray(d)?d.find(f=>f._id===t._id):null)?d.filter(f=>f._id!==t._id):[...d,t])},x=t=>o.some(n=>n._id===t);return e.jsxs("div",{className:"bg-white w-full mx-auto",children:[e.jsx("div",{className:"flex items-center mb-8",children:e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-bold text-gray-800 tracking-tight",children:"Add To Your Stay"})}),e.jsx("div",{className:"space-y-6",children:a.map(t=>{var n,d;return e.jsxs("div",{className:`transition-all duration-200 border-2 rounded-lg overflow-hidden ${x(t._id)?"border-primary-green bg-teal-50":"border-gray-200 hover:border-teal-200 hover:bg-gray-50"}`,style:{borderColor:x(t._id)?"#058FA2":"",backgroundColor:x(t._id)?"#e6f7f9":""},children:[e.jsx("div",{className:"flex w-full items-center justify-between p-5 cursor-pointer",onClick:()=>i(t._id),children:e.jsxs("div",{className:"flex items-center gap-5 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-md border flex items-center justify-center cursor-pointer transition-colors ${x(t._id)?"bg-primary-green border-primary-green":"border-gray-300"}`,style:{backgroundColor:x(t._id)?"#058FA2":"",borderColor:x(t._id)?"#058FA2":""},onClick:c=>g(t,c),children:x(t._id)&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("div",{className:"flex gap-4 items-center flex-1",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 leading-tight",children:t.heading}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-lg font-medium mr-4 text-teal-600",style:{color:"#058FA2"},children:["₹ ",(n=t.rate)==null?void 0:n.amount," ",e.jsx("span",{className:"text-base",children:((d=t.rate)==null?void 0:d.period)||""})]}),e.jsx("button",{className:`w-7 h-7 flex items-center justify-center rounded-full transition-colors text-lg ${h[t._id]?"bg-teal-100 text-teal-600":"bg-gray-100 text-gray-500"}`,style:{backgroundColor:h[t._id]?"#e6f7f9":"",color:h[t._id]?"#058FA2":""},children:h[t._id]?"−":"+"})]})]})})})]})}),h[t._id]&&e.jsxs("div",{className:"px-16 pb-5 pt-1 text-gray-600 border-t border-gray-100",children:[e.jsx("p",{className:"text-base leading-relaxed",children:t.description}),x(t._id)&&e.jsx("div",{className:"mt-4 text-sm font-medium bg-teal-100 text-primay-green py-2 px-4 rounded-md inline-block",style:{backgroundColor:"#e6f7f9",color:"#058FA2"},children:"✓ Added to your stay"})]})]},t._id)})})]})},le=p.forwardRef(({setIsVerified:r})=>{var A,S,_,R,b,O,P,M,C,L;const[a,h]=p.useState(""),[l,o]=p.useState(""),[s,i]=p.useState(localStorage.getItem("user_email")||""),[g,x]=p.useState(""),[t,n]=p.useState(!1),{someOneElse:d,setSomeoneElse:c,setGuestData:f}=B(),[y,j]=p.useState(null),u=localStorage.getItem("user_email")!==null,{data:m}=W(s);console.log(m);const[w,v]=p.useState(!1);p.useEffect(()=>{u&&d&&f({firstName:a,lastName:l,email:s,phone:g})},[u,d,a,l,s,g,f]);const I=[{id:"firstName",label:"First Name",placeholder:"Enter your first name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"lastName",label:"Last Name",placeholder:"Enter your last name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"email",label:"Email Address",placeholder:"Enter your email address",type:"email",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]})},{id:"mobile",label:"Mobile Number",placeholder:"Enter your mobile number",type:"tel",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}],F=k=>{switch(k){case"firstName":return a;case"lastName":return l;case"email":return s;case"mobile":return g;default:return""}},N=(k,E)=>{switch(k){case"firstName":h(E);break;case"lastName":o(E);break;case"email":i(E);break;case"mobile":x(E);break}};return e.jsxs("div",{id:"guestDetail",className:"flex flex-col gap-10 relative overflow-hidden",children:[e.jsx("div",{className:"flex items-center mb-2 relative z-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"  text-mobile/h4 md:text-desktop/h4 text-gray-900 tracking-tight mb-1",children:"Guest Details"}),e.jsx("p",{className:"text-gray-600 text-mobile/body/2 md:text-desktop/body/1",children:"Please provide your information to proceed"})]})}),e.jsxs("div",{className:"relative z-10",children:[u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-green-500 rounded-full flex items-center justify-center mr-3 shadow-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Account Verified"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Your email and mobile number are verified"})]})]}),e.jsxs("div",{className:"mb-8 p-4 border rounded-xl bg-gray-50 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-12 h-12 rounded-full bg-primary-green flex items-center justify-center text-white font-bold text-lg shadow",children:[(S=(A=m==null?void 0:m.data)==null?void 0:A.firstName)==null?void 0:S.charAt(0),(R=(_=m==null?void 0:m.data)==null?void 0:_.lastName)==null?void 0:R.charAt(0)]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-900 font-semibold text-lg",children:[(b=m==null?void 0:m.data)==null?void 0:b.firstName," ",(O=m==null?void 0:m.data)==null?void 0:O.lastName]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(M=(P=m==null?void 0:m.data)==null?void 0:P.email)==null?void 0:M.replace(/^(.{2})(.*)(@.*)$/,(k,E,$,z)=>`${E}${"*".repeat($.length)}${z}`)," |"," ",(L=(C=m==null?void 0:m.data)==null?void 0:C.phone)==null?void 0:L.replace(/^(.{0,2})(.*)(.{4})$/,(k,E,$,z)=>`${"*".repeat(E.length?E.length:2)}${"*".repeat($.length)}${z}`)]})]})]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("user_email"),window.location.reload()},className:"text-sm font-semibold text-gray-500 hover:underline",children:"Log Out"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-gray-700 text-sm mb-8",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-yellow-500 border-gray-300 rounded",checked:t,onChange:k=>{n(k.target.checked),c(k.target.checked)}}),"I'm booking for someone else"]}),t&&e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:I.map(({id:k,label:E,placeholder:$,type:z,icon:ne})=>{const T=F(k),U=y===k,Y=T&&T.trim();return e.jsxs("div",{className:"flex flex-col gap-3 group",children:[e.jsxs("label",{htmlFor:k,className:`block text-sm font-semibold tracking-wide transition-colors duration-200 ${U||Y?"text-cyan-600":"text-gray-700"}`,children:[E," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:`absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors duration-200 ${U?"text-cyan-500":Y?"text-cyan-600":"text-gray-400"}`,children:ne}),e.jsx("input",{type:z,id:k,placeholder:$,className:`w-full h-14 pl-12 pr-4 py-3 text-base text-gray-900 placeholder-gray-400 border-2 rounded-xl shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-100
                              ${U?"border-cyan-400 shadow-lg":Y?"border-cyan-300 bg-cyan-50":"border-gray-200 hover:border-gray-300"}
                              ${k==="email"?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}
                            `,value:T,onChange:oe=>N(k,oe.target.value),onFocus:()=>j(k),onBlur:()=>j(null),disabled:k==="email"})]})})]},k)})})]}),!u&&e.jsxs("div",{className:"mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-400 text-white rounded-full flex items-center justify-center shadow",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-800",children:"Login Required"}),e.jsx("p",{className:"text-yellow-600 text-sm",children:"Please log in or verify your account to continue"})]})]}),e.jsx("button",{onClick:()=>v(!0),className:"ml-4 px-5 py-2 rounded-lg bg-cyan-600 text-white hover:bg-cyan-700 transition",children:"Login / Verify"})]}),w&&e.jsx(ae,{closeModal:()=>v(!1)})]})]})});le.displayName="GuestDetailsForm";const Se=()=>{const{details:r,setDetails:a,selectedRooms:h,setSelectedRooms:l,setEditAddPricing:o}=B(),s=H(),i=(t,n)=>{l(d=>{var u,m,w,v,I;const c=[...d],f=((m=(u=r[t])==null?void 0:u.roomData)==null?void 0:m.discountRate)||0,y=((I=(v=(w=r[t])==null?void 0:w.continentalPlan)==null?void 0:v.rate)==null?void 0:I.amount)||0;let j=f;return n==="continental"&&(j+=y),c[t]={...c[t],option:n,price:j},c})},g=(t,n)=>{l(d=>{var u,m,w,v;const c=[...d],f=((m=(u=r[t])==null?void 0:u.roomData)==null?void 0:m.maxGuests)||2;let y=((w=c[t])==null?void 0:w.guestQty)??2,j=((v=c[t])==null?void 0:v.showMaxGuestAlert)??!1;return n==="increment"?y<f?(y+=1,j=!1):j=!0:n==="decrement"&&(y>0&&(y-=1),j=!1),c[t]={...c[t],guestQty:y,showMaxGuestAlert:j},y===0&&(c.splice(t,1),a(I=>I.filter((F,N)=>N!==t))),c})},x=()=>{var t;o(!0),localStorage.setItem("editAddPricing",!0),s(`/hotels/${(t=r[0])==null?void 0:t.hotelCode}`)};return e.jsxs(e.Fragment,{children:[r==null?void 0:r.map((t,n)=>{var c,f,y,j,u,m;const d=h[n]||{roomName:((c=t==null?void 0:t.roomData)==null?void 0:c.RoomName)||"",option:"roomOnly",price:((f=t==null?void 0:t.roomData)==null?void 0:f.discountRate)||0,guestQty:1,showMaxGuestAlert:!1};return d.guestQty===0?null:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:h-[200px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[e.jsxs("div",{className:"w-full lg:w-1/3 relative",children:[e.jsx("img",{src:(y=t==null?void 0:t.roomData)==null?void 0:y.roomImage[0],alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 right-0 md:left-5 bg-white bg-opacity-75 px-3 py-1 rounded-l-full",children:e.jsx("p",{className:"text-[10px] font-bold text-yellow-600 uppercase tracking-wider",children:"Best Choice"})})]}),e.jsxs("div",{className:"flex flex-col justify-center w-full gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-[#288592] mb-1",children:(j=t==null?void 0:t.roomData)==null?void 0:j.RoomName}),e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:[t==null?void 0:t.name,", ",(u=t==null?void 0:t.cityLocation)==null?void 0:u.name]}),e.jsxs("p",{className:"text-md font-semibold text-gray-800",children:["Price: ",e.jsxs("span",{className:"text-[#288592]",children:["₹",d.price]})]})]}),e.jsxs("div",{className:"flex flex-col items-start w-full lg:w-[490px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>g(n,"decrement"),children:e.jsx(pe,{})}),e.jsx("span",{children:d.guestQty>1?`${d.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>g(n,"increment"),children:e.jsx(xe,{})})]}),d.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-32 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ye,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(m=t==null?void 0:t.roomData)==null?void 0:m.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:x,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>l(w=>{const v=[...w];return v[n].showMaxGuestAlert=!1,v}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${n}`,value:"roomOnly",checked:d.option==="roomOnly",onChange:()=>i(n,"roomOnly"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${n}`,value:"continental",checked:d.option==="continental",onChange:()=>i(n,"continental"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]})]},n)}),r.length<=0&&e.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},Ae=()=>{var f,y,j;const{details:r,setEditAddPricing:a}=B(),h=localStorage.getItem("hotelInfo"),l=h?JSON.parse(h):null,o=localStorage.getItem("checkInDate"),s=localStorage.getItem("checkOutDate"),i=o?new Date(o):null,g=s?new Date(s):null,x=H(),t=()=>i&&g?he(g,i):0,n=()=>{var u;a(!0),localStorage.setItem("editAddPricing","true"),x(`/hotels/${(u=r[0])==null?void 0:u.hotelCode}`)},d=({date:u,label:m,time:w,isCheckOut:v=!1})=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"text-sm md:text-base font-medium text-gray-600 uppercase tracking-wide",children:m}),e.jsx("div",{className:"text-lg md:text-xl font-semibold text-gray-900",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden",children:X(u,"dd MMM")}),e.jsx("div",{className:"hidden md:block",children:X(u,"dd MMM, EEEE")})]}):e.jsxs("span",{className:"text-gray-400",children:["Select ",m.toLowerCase()]})}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500",children:w||(v?"11:00 AM":"1:00 PM")})]}),c=t();return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mt-10 shadow-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:l==null?void 0:l.name}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:(f=l==null?void 0:l.location)==null?void 0:f.hotelAddress})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4",children:[e.jsx(d,{date:i,label:"Check-in",time:(y=r[0])==null?void 0:y.checkIn}),e.jsxs("div",{className:"flex flex-col items-center mx-4",children:[e.jsx(te,{className:"text-yellow-500 text-2xl mb-1"}),c>0&&e.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[c," ",c===1?"Night":"Nights"]})]}),e.jsx(d,{date:g,label:"Check-out",time:(j=r[0])==null?void 0:j.checkOut,isCheckOut:!0})]})}),e.jsx("div",{className:"flex justify-start",children:e.jsxs("button",{onClick:n,className:"inline-flex items-center  py-3 text-primary-yellow underline font-medium transition-colors duration-200 ",children:[e.jsx("span",{children:"Modify Date/Room Selection          "}),e.jsx(te,{className:"ml-2 text-lg"})]})})]})},Ie=(r,a)=>{if(!r||!a)return 0;const h=new Date(r),l=new Date(a),o=Math.abs(l-h);return Math.ceil(o/(1e3*60*60*24))},Fe=()=>{var F,N,A,S;const{ContactUsDetail:r}=ue(),{details:a,hotelData:h}=B(),l=a[0],o=H(),[s,i]=p.useState(!1),g=localStorage.getItem("user_email"),{data:x}=W(g),[t,n]=p.useState(!1),d=localStorage.getItem("hotelInfo"),c=JSON.parse(d),f=localStorage.getItem("checkInDate"),y=localStorage.getItem("checkOutDate"),j=Ie(f,y),[u,m]=p.useState(!1),[w,v]=p.useState(!0),I=p.useRef();return p.useEffect(()=>{const _=document.querySelector("#payment-method");if(_){const R=new IntersectionObserver(([b])=>{m(b.isIntersecting)},{threshold:.1});return R.observe(_),()=>R.disconnect()}},[]),p.useEffect(()=>{u?setTimeout(()=>v(!1),300):v(!0)},[u]),p.useEffect(()=>{(!a||a.length===0||!l)&&o(`/hotels/${c==null?void 0:c.hotelCode}`)},[a,h,l,o,c]),!a||a.length===0||!l?null:e.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green overflow-hidden",children:[e.jsxs(ge,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsxs("div",{className:"content flex justify-between items-center ",children:[e.jsxs("div",{className:"flex items-center gap-2 py-4 md:py-10 text-white",children:[e.jsx("button",{onClick:()=>o(-1),"aria-label":"Go back",className:"flex items-center",children:e.jsx(be,{className:"text-white h-6 w-6 sm:h-7 sm:w-7 md:h-9 md:w-9"})}),e.jsx("span",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-semibold",children:"Booking Details"})]}),e.jsx("div",{className:"",children:g?e.jsxs("div",{onClick:()=>o("/user/profile"),className:"bg-white cursor-pointer text-primary-yellow font-bold w-12 h-12 rounded-full flex items-center justify-center",children:[(N=(F=x==null?void 0:x.data.firstName)==null?void 0:F[0])==null?void 0:N.toUpperCase(),(S=(A=x==null?void 0:x.data.lastName)==null?void 0:A[0])==null?void 0:S.toUpperCase()]}):e.jsx("button",{onClick:()=>n(!0),className:"border-2 border-primary-yellow text-primary-yellow px-4 py-2 rounded-full font-bold hover:bg-primary-yellow hover:text-white transition",children:"Login or Join"})}),t&&e.jsx(ae,{closeModal:()=>n(!1)})]}),e.jsxs("div",{className:"md:flex gap-5 content bg-white rounded-t-3xl overflow-visible relative",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:px-8 md:py-10 gap-8 min-w-0",children:[e.jsx(Ae,{}),e.jsx(Se,{}),e.jsx(le,{ref:I,setIsVerified:i}),l.addToYourStay.length>0&&e.jsx(Ce,{data:l}),e.jsx(ke,{hotelDetail:l,checkIn:f,verified:s}),e.jsx("div",{className:"xl:hidden",children:e.jsx(re,{hotelDetail:l,checkIn:f,checkOut:y,days:j,showButton:w,isPaymentVisible:u})}),e.jsx(we,{hotelDetail:l,verified:s,checkIn:f,checkOut:y}),e.jsx(ve,{ContactUsDetail:r})]}),e.jsx("div",{className:"hidden xl:block xl:w-[420px] flex-shrink-0 px-8 py-10",children:e.jsx(re,{hotelDetail:l,checkIn:f,checkOut:y,days:j,showButton:w,isPaymentVisible:u})})]})]})};export{Fe as default};
