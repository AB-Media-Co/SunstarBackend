import{u as O,d as T,r as g,f as A,j as e}from"./index-CTDgpaCL.js";import{f as c}from"./formatCurrency-CuADupXe.js";import{a as E}from"./useUser-CM6tcixq.js";import{S as H}from"./sparkles-DcVqkGIW.js";import{C as L,A as S}from"./circle-check-De1L7W-9.js";import{C as $}from"./calendar-mZxobxt9.js";import{c as z}from"./createLucideIcon-CUaR7vAr.js";import{H as _}from"./house-CSCVK7ht.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=z("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),X=()=>{var w,k,D,C;const{state:i}=O(),p=T(),[I,j]=g.useState(!1),y=g.useRef(!1),v=g.useRef(!1),{mutate:P}=E(),{bookingResponse:a,payload:U,paymentMethod:u,checkIn:x,checkOut:h,hotel:f,user:s,rooms:o,hotelDetail:l}=i||{};g.useEffect(()=>{var n;j(!0);const t=setTimeout(()=>j(!1),3e3);if(i&&s&&o&&!y.current){y.current=!0;const m={hotelCode:l==null?void 0:l.hotelCode,AuthCode:l==null?void 0:l.authKey,checkIn:x,checkOut:h,Hoteldata:l==null?void 0:l.name,selectedRooms:o.map(r=>({roomName:r==null?void 0:r.roomName,option:u==="pay-at-hotel"?"Pay at Hotel":"Paid Online",price:(r==null?void 0:r.price)||0,RoomTypeID:(r==null?void 0:r.RoomTypeID)||"",RateTypeID:(r==null?void 0:r.RateTypeID)||""})),userEmail:s==null?void 0:s.email,userPhone:s==null?void 0:s.phone};A.post("/api/enquiries/hotelData",m).then(()=>{}).catch(()=>{});const d=((n=i==null?void 0:i.pricing)==null?void 0:n.earningsDiscount)||0;d>0&&(s!=null&&s.email)&&!v.current&&(v.current=!0,console.log("ðŸ’° Deducting earnings:",d),P({email:s.email,amountUsed:d}))}return()=>clearTimeout(t)},[]);const B=()=>{const t=localStorage.getItem("user_email");localStorage.clear(),t&&localStorage.setItem("user_email",t),p("/user/profile",{replace:!0,state:{tab:"bookings"}})},M=()=>{const t=localStorage.getItem("user_email");localStorage.clear(),t&&localStorage.setItem("user_email",t),p("/",{replace:!0})},N=(()=>{if(!x||!h)return 0;const t=new Date(x),n=new Date(h),m=Math.abs(n-t);return Math.ceil(m/(1e3*60*60*24))})(),b=t=>{if(!t)return"";try{const n=new Date(t),m=n.toLocaleDateString("en-US",{weekday:"short"}),d=n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${m}, ${d}`}catch(n){return t}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:[I&&e.jsx("div",{className:"fixed inset-0 pointer-events-none z-20",children:[...Array(20)].map((t,n)=>e.jsx("div",{className:"absolute animate-bounce",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*2}s`},children:e.jsx(H,{className:"w-4 h-4 text-yellow-400"})},n))}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl md:max-w-2xl w-full md:mx-4 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-400 to-teal-500 px-6 py-10 text-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute -top-10 -left-10 w-20 h-20 bg-white rounded-full"}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-white rounded-full"}),e.jsx("div",{className:"absolute top-20 -right-5 w-16 h-16 bg-white rounded-full"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white rounded-full mb-4 shadow-lg",children:e.jsx(L,{className:"w-10 h-10 text-green-500"})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-green-100",children:"Your reservation has been successfully booked,  We've sent a confirmation email with all the details. Have a wonderful stay!"})]})]}),e.jsxs("div",{className:"px-6 py-8",children:[s&&e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"p-5 rounded-xl border border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-3",children:"Guest Information"}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s==null?void 0:s.email}),(s==null?void 0:s.phone)&&e.jsx("div",{className:"text-sm text-gray-600",children:s==null?void 0:s.phone})]})})]}),e.jsxs("div",{className:"p-5 rounded-xl border border-teal-200 bg-gradient-to-r from-teal-50 to-white",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-teal-700 mb-3",children:"Your Stay Details"}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"text-lg font-bold text-gray-900",children:(l==null?void 0:l.name)||(f==null?void 0:f.name)||"Hotel"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Check-in"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:b(x)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Check-out"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:b(h)})]})]}),e.jsx("div",{className:"mb-4 pt-3 border-t border-teal-200",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-teal-100 text-teal-800 rounded-full text-sm font-medium",children:[e.jsx($,{className:"w-4 h-4"}),e.jsxs("span",{children:[N," ",N===1?"Night":"Nights"," Stay"]})]})}),Array.isArray(o)&&o.length>0&&e.jsx("div",{children:e.jsxs("div",{className:"pt-3 border-t border-teal-200",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-teal-700 mb-3",children:"Booked Rooms"}),e.jsx("div",{className:"space-y-2",children:o.map((t,n)=>e.jsx("div",{className:"bg-white rounded-lg p-3 border border-teal-100",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:(t==null?void 0:t.roomName)||(t==null?void 0:t.RoomTypeName)||(t==null?void 0:t.RoomTypeID)||"Room"}),e.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 text-xs text-gray-600 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsxs("span",{children:[(t==null?void 0:t.guestQty)||1," ",((t==null?void 0:t.guestQty)||1)===1?"Guest":"Guests"]})]}),(t==null?void 0:t.option)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 bg-gray-400 rounded-full"}),e.jsx("span",{children:t.option==="continental"?"With Breakfast":"Room Only"})]})]})]}),(t==null?void 0:t.price)!=null&&e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("div",{className:"font-semibold text-teal-600 text-sm",children:c(t.price)}),e.jsx("div",{className:"text-xs text-gray-500",children:"per night"})]})]})},n))})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 bg-white",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2",children:"Booking ID"}),e.jsx("div",{className:"text-base font-bold text-gray-900",children:((w=a==null?void 0:a.data)==null?void 0:w.ReservationNo)||(a==null?void 0:a.ReservationNo)||((k=a==null?void 0:a.data)==null?void 0:k.bookingId)||(a==null?void 0:a.bookingId)||"Processing"}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 mt-2 text-xs font-medium text-teal-600",children:[e.jsx("span",{className:"w-2 h-2 bg-teal-500 rounded-full"}),((D=a==null?void 0:a.data)==null?void 0:D.BookingStatus)||(a==null?void 0:a.BookingStatus)||((C=a==null?void 0:a.data)==null?void 0:C.status)||(a==null?void 0:a.status)||"Confirmed"]})]}),e.jsxs("div",{className:"p-4 rounded-xl border border-gray-200 bg-white",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2",children:"Payment Method"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:u==="pay-at-hotel"?"Pay at Hotel":"Paid Online"}),u==="pay-at-hotel"?e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Payment will be collected at check-in"}):e.jsx("div",{className:"text-xs text-teal-600 font-medium mt-2",children:"Payment completed successfully"})]})]}),(i==null?void 0:i.pricing)&&e.jsxs("div",{className:"mt-6 p-5 rounded-xl border border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-4 pb-2 border-b border-gray-200",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Base Price"}),e.jsx("span",{children:c(i.pricing.baseFinalPrice-i.pricing.totalOtherCharges-i.pricing.totalAddOns)})]}),i.pricing.totalAddOns>0&&e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Add-ons"}),e.jsx("span",{children:c(i.pricing.totalAddOns)})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Taxes & Fees"}),e.jsx("span",{children:c(i.pricing.totalOtherCharges)})]}),i.pricing.payNowDiscount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Pay Now Discount"}),e.jsxs("span",{children:["-",c(i.pricing.payNowDiscount)]})]}),i.pricing.offerDiscount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Offer Discount"}),e.jsxs("span",{children:["-",c(i.pricing.offerDiscount)]})]}),i.pricing.earningsDiscount>0&&e.jsxs("div",{className:"flex justify-between text-amber-600",children:[e.jsx("span",{children:"Earnings Discount"}),e.jsxs("span",{children:["-",c(i.pricing.earningsDiscount)]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-300 mt-2",children:[e.jsx("span",{className:"font-bold text-gray-900 text-base",children:"Total Payable"}),e.jsx("span",{className:"font-bold text-primary-green text-xl",children:c(i.pricing.finalPrice)})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:B,className:"w-full group relative overflow-hidden bg-gradient-to-r from-teal-500 to-teal-600 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 hover:from-teal-600 hover:to-teal-700 hover:shadow-lg transform hover:scale-[1.02]",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:"See My Bookings"}),e.jsx(S,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})}),e.jsx("button",{onClick:M,className:"w-full group relative overflow-hidden bg-white border-2 border-gray-200 text-gray-700 font-semibold py-4 px-6 rounded-xl transition-all duration-300 hover:border-teal-300 hover:bg-teal-50 hover:text-teal-700 hover:shadow-md transform hover:scale-[1.02]",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:"Continue to Book"}),e.jsx(S,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})]})]})};export{X as default};
