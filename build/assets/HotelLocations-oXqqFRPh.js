var a=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,t=(e,n,r)=>n in e?a(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,o=(a,e)=>{for(var n in e||(e={}))i.call(e,n)&&t(a,n,e[n]);if(r)for(var n of r(e))s.call(e,n)&&t(a,n,e[n]);return a},l=(a,r)=>e(a,n(r));import{r as d,j as c}from"./react-vendor-tq68JOgp.js";import{u,a as m,b as h,c as p}from"./useLocationHook-6LSyzia_.js";import{I as g}from"./ImageUpload-DBA0P0hK.js";import{D as j,p as x,v,w as b,q as f,z as y,Q as C,U as S,Z as W,ad as k,a8 as L,_ as N}from"./ui-vendor-DiJ4VKpG.js";import"./animation-vendor-DJegggv9.js";import"./vendor-DwD9zxym.js";import"./query-vendor-iDpT9gG9.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";import"./index-BZBH8CwT.js";import"./useHotelHook2-lvucTAR8.js";const O=(a,e=30)=>{if(!a)return"";const n=a.split(" ");return n.length<=e?a:n.slice(0,e).join(" ")+" ..."},U=()=>{const{data:a,isLoading:e,isError:n,error:r}=u(),i=m(),s=h(),t=p(),[U,w]=d.useState({name:"",aboutus:{heading:"",paragraph:""},image:""}),[,A]=d.useState(!1),[P,D]=d.useState(null),[H,E]=d.useState({name:"",aboutus:{heading:"",paragraph:""},image:""}),[,I]=d.useState(!1),[_,z]=d.useState(!1),[q,F]=d.useState(!1),Q=a=>{const{name:e,value:n}=a.target;"name"===e?w((a=>l(o({},a),{name:n}))):"heading"!==e&&"paragraph"!==e||w((a=>l(o({},a),{aboutus:l(o({},a.aboutus),{[e]:n})})))},Z=a=>{a.preventDefault(),i.mutate(U),w({name:"",aboutus:{heading:"",paragraph:""},hotels:[],image:""}),z(!1)},B=a=>{const{name:e,value:n}=a.target;"name"===e?E((a=>l(o({},a),{name:n}))):"heading"!==e&&"paragraph"!==e||E((a=>l(o({},a),{aboutus:l(o({},a.aboutus),{[e]:n})})))},G=a=>{a.preventDefault(),s.mutate({id:P,updateData:H}),F(!1),D(null)},J=()=>{F(!1),D(null)};return c.jsxs("div",{className:"container mx-auto mt-24 p-4 px-16",children:[c.jsx("div",{className:"mb-6",children:c.jsx(j,{variant:"contained",color:"primary",onClick:()=>z(!0),children:"Add a Location"})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e?c.jsx("div",{children:"Loading..."}):n?c.jsxs("div",{children:["Error: ",r.message]}):a.map((a=>{var e,n,r;return c.jsxs(x,{className:"shadow-lg",children:[a.image&&c.jsx(v,{component:"img",height:"140",image:a.image,alt:a.name}),c.jsxs(b,{children:[c.jsx(f,{variant:"h6",component:"div",children:a.name}),c.jsx(f,{variant:"subtitle1",color:"textSecondary",children:null==(e=a.aboutus)?void 0:e.heading}),c.jsx(f,{variant:"body2",color:"textSecondary",sx:{mt:1},children:O(null==(n=a.aboutus)?void 0:n.paragraph,10)}),c.jsxs(f,{variant:"body2",color:"textSecondary",sx:{mt:1},children:["Hotels: ",null==(r=a.hotels)?void 0:r.length," (",a.hotels.map((a=>(null==a?void 0:a.name)?a.name:a)).join(", "),")"]})]}),c.jsxs(y,{children:[c.jsx(j,{size:"small",variant:"contained",color:"primary",onClick:()=>(a=>{var e,n;D(a._id),E({name:a.name,aboutus:{heading:(null==(e=a.aboutus)?void 0:e.heading)||"",paragraph:(null==(n=a.aboutus)?void 0:n.paragraph)||""},image:a.image||""}),F(!0)})(a),children:"Edit"}),c.jsx(j,{size:"small",variant:"outlined",color:"secondary",onClick:()=>{return e=a._id,void t.mutate(e);var e},children:"Delete"})]})]},a._id)}))}),c.jsxs(C,{open:_,onClose:()=>z(!1),fullWidth:!0,maxWidth:"md",children:[c.jsx(S,{children:"Add New Location"}),c.jsx(W,{dividers:!0,children:c.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[c.jsx(k,{label:"Location Name",name:"name",value:U.name,onChange:Q,fullWidth:!0}),c.jsxs(L,{container:!0,spacing:2,children:[c.jsx(L,{item:!0,xs:6,children:c.jsx(k,{label:"About Us Heading",name:"heading",value:U.aboutus.heading,onChange:Q,fullWidth:!0})}),c.jsx(L,{item:!0,xs:6,children:c.jsx(k,{label:"About Us Paragraph",name:"paragraph",value:U.aboutus.paragraph,onChange:Q,fullWidth:!0})})]}),c.jsx(g,{feature:U,handleFeatureChange:(a,e)=>{w((n=>l(o({},n),{[a]:e})))},setImageUpload:A,index:0})]})}),c.jsxs(N,{children:[c.jsx(j,{onClick:()=>z(!1),variant:"outlined",color:"secondary",children:"Cancel"}),c.jsx(j,{onClick:Z,variant:"contained",color:"primary",children:"Add Location"})]})]}),c.jsxs(C,{open:q,onClose:J,fullWidth:!0,maxWidth:"md",children:[c.jsx(S,{children:"Edit Location"}),c.jsx(W,{dividers:!0,children:c.jsxs("form",{onSubmit:G,className:"space-y-4",children:[c.jsx(k,{label:"Location Name",name:"name",value:H.name,onChange:B,fullWidth:!0}),c.jsxs(L,{container:!0,spacing:2,children:[c.jsx(L,{item:!0,xs:6,children:c.jsx(k,{label:"About Us Heading",name:"heading",value:H.aboutus.heading,onChange:B,fullWidth:!0})}),c.jsx(L,{item:!0,xs:6,children:c.jsx(k,{label:"About Us Paragraph",name:"paragraph",value:H.aboutus.paragraph,onChange:B,fullWidth:!0})})]}),c.jsx(g,{feature:H,handleFeatureChange:(a,e)=>{E((n=>l(o({},n),{[a]:e})))},setImageUpload:I,index:0})]})}),c.jsxs(N,{children:[c.jsx(j,{onClick:J,variant:"outlined",color:"secondary",children:"Cancel"}),c.jsx(j,{onClick:G,variant:"contained",color:"primary",children:"Update"})]})]})]})};export{U as HotelLocations,U as default};
