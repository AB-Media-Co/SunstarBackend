var cs=Object.defineProperty,ls=Object.defineProperties;var ds=Object.getOwnPropertyDescriptors;var Yt=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var Ie=s=>{throw TypeError(s)},Ue=Math.pow,Me=(s,t,e)=>t in s?cs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,f=(s,t)=>{for(var e in t||(t={}))De.call(t,e)&&Me(s,e,t[e]);if(Yt)for(var e of Yt(t))Ae.call(t,e)&&Me(s,e,t[e]);return s},C=(s,t)=>ls(s,ds(t));var qe=(s,t)=>{var e={};for(var r in s)De.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&Yt)for(var r of Yt(s))t.indexOf(r)<0&&Ae.call(s,r)&&(e[r]=s[r]);return e};var ne=(s,t,e)=>t.has(s)||Ie("Cannot "+e);var i=(s,t,e)=>(ne(s,t,"read from private field"),e?e.call(s):t.get(s)),c=(s,t,e)=>t.has(s)?Ie("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),h=(s,t,e,r)=>(ne(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e),d=(s,t,e)=>(ne(s,t,"access private method"),e);var Zt=(s,t,e,r)=>({set _(n){h(s,t,n,e)},get _(){return i(s,t,r)}});var Pt=(s,t,e)=>new Promise((r,n)=>{var a=p=>{try{o(e.next(p))}catch(y){n(y)}},u=p=>{try{o(e.throw(p))}catch(y){n(y)}},o=p=>p.done?r(p.value):Promise.resolve(p.value).then(a,u);o((e=e.apply(s,t)).next())});var Rt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gt=typeof window=="undefined"||"Deno"in globalThis;function B(){}function fs(s,t){return typeof s=="function"?s(t):s}function he(s){return typeof s=="number"&&s>=0&&s!==1/0}function es(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Ft(s,t){return typeof s=="function"?s(t):s}function $(s,t){return typeof s=="function"?s(t):s}function Te(s,t){const{type:e="all",exact:r,fetchStatus:n,predicate:a,queryKey:u,stale:o}=s;if(u){if(r){if(t.queryHash!==Ce(u,t.options))return!1}else if(!_t(t.queryKey,u))return!1}if(e!=="all"){const p=t.isActive();if(e==="active"&&!p||e==="inactive"&&p)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||n&&n!==t.state.fetchStatus||a&&!a(t))}function je(s,t){const{exact:e,status:r,predicate:n,mutationKey:a}=s;if(a){if(!t.options.mutationKey)return!1;if(e){if(St(t.options.mutationKey)!==St(a))return!1}else if(!_t(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function Ce(s,t){return((t==null?void 0:t.queryKeyHashFn)||St)(s)}function St(s){return JSON.stringify(s,(t,e)=>ue(e)?Object.keys(e).sort().reduce((r,n)=>(r[n]=e[n],r),{}):e)}function _t(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?!Object.keys(t).some(e=>!_t(s[e],t[e])):!1}function Pe(s,t){if(s===t)return s;const e=xe(s)&&xe(t);if(e||ue(s)&&ue(t)){const r=e?s:Object.keys(s),n=r.length,a=e?t:Object.keys(t),u=a.length,o=e?[]:{};let p=0;for(let y=0;y<u;y++){const v=e?y:a[y];(!e&&r.includes(v)||e)&&s[v]===void 0&&t[v]===void 0?(o[v]=void 0,p++):(o[v]=Pe(s[v],t[v]),o[v]===s[v]&&s[v]!==void 0&&p++)}return n===u&&p===n?s:o}return t}function ie(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(s[e]!==t[e])return!1;return!0}function xe(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function ue(s){if(!Le(s))return!1;const t=s.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!Le(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Le(s){return Object.prototype.toString.call(s)==="[object Object]"}function ps(s){return new Promise(t=>{setTimeout(t,s)})}function oe(s,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(s,t):e.structuralSharing!==!1?Pe(s,t):t}function ys(s,t,e=0){const r=[...s,t];return e&&r.length>e?r.slice(1):r}function vs(s,t,e=0){const r=[t,...s];return e&&r.length>e?r.slice(0,-1):r}var Fe=Symbol();function ss(s,t){return!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===Fe?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var pt,rt,Qt,_e,bs=(_e=class extends Rt{constructor(){super();c(this,pt);c(this,rt);c(this,Qt);h(this,Qt,t=>{if(!Gt&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){i(this,rt)||this.setEventListener(i(this,Qt))}onUnsubscribe(){var t;this.hasListeners()||((t=i(this,rt))==null||t.call(this),h(this,rt,void 0))}setEventListener(t){var e;h(this,Qt,t),(e=i(this,rt))==null||e.call(this),h(this,rt,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){i(this,pt)!==t&&(h(this,pt,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return typeof i(this,pt)=="boolean"?i(this,pt):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},pt=new WeakMap,rt=new WeakMap,Qt=new WeakMap,_e),Qe=new bs,Et,nt,Mt,ze,ms=(ze=class extends Rt{constructor(){super();c(this,Et,!0);c(this,nt);c(this,Mt);h(this,Mt,t=>{if(!Gt&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}})}onSubscribe(){i(this,nt)||this.setEventListener(i(this,Mt))}onUnsubscribe(){var t;this.hasListeners()||((t=i(this,nt))==null||t.call(this),h(this,nt,void 0))}setEventListener(t){var e;h(this,Mt,t),(e=i(this,nt))==null||e.call(this),h(this,nt,t(this.setOnline.bind(this)))}setOnline(t){i(this,Et)!==t&&(h(this,Et,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return i(this,Et)}},Et=new WeakMap,nt=new WeakMap,Mt=new WeakMap,ze),re=new ms;function ce(){let s,t;const e=new Promise((n,a)=>{s=n,t=a});e.status="pending",e.catch(()=>{});function r(n){Object.assign(e,n),delete e.resolve,delete e.reject}return e.resolve=n=>{r({status:"fulfilled",value:n}),s(n)},e.reject=n=>{r({status:"rejected",reason:n}),t(n)},e}function gs(s){return Math.min(1e3*Ue(2,s),3e4)}function is(s){return(s!=null?s:"online")==="online"?re.isOnline():!0}var rs=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function ae(s){return s instanceof rs}function ns(s){let t=!1,e=0,r=!1,n;const a=ce(),u=b=>{var O;r||(S(new rs(b)),(O=s.abort)==null||O.call(s))},o=()=>{t=!0},p=()=>{t=!1},y=()=>Qe.isFocused()&&(s.networkMode==="always"||re.isOnline())&&s.canRun(),v=()=>is(s.networkMode)&&s.canRun(),l=b=>{var O;r||(r=!0,(O=s.onSuccess)==null||O.call(s,b),n==null||n(),a.resolve(b))},S=b=>{var O;r||(r=!0,(O=s.onError)==null||O.call(s,b),n==null||n(),a.reject(b))},R=()=>new Promise(b=>{var O;n=D=>{(r||y())&&b(D)},(O=s.onPause)==null||O.call(s)}).then(()=>{var b;n=void 0,r||(b=s.onContinue)==null||b.call(s)}),M=()=>{if(r)return;let b;const O=e===0?s.initialPromise:void 0;try{b=O!=null?O:s.fn()}catch(D){b=Promise.reject(D)}Promise.resolve(b).then(l).catch(D=>{var G,F,J;if(r)return;const q=(G=s.retry)!=null?G:Gt?0:3,k=(F=s.retryDelay)!=null?F:gs,Q=typeof k=="function"?k(e,D):k,I=q===!0||typeof q=="number"&&e<q||typeof q=="function"&&q(e,D);if(t||!I){S(D);return}e++,(J=s.onFail)==null||J.call(s,e,D),ps(Q).then(()=>y()?void 0:R()).then(()=>{t?S(D):M()})})};return{promise:a,cancel:u,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:p,canStart:v,start:()=>(v()?M():R().then(M),a)}}function Os(){let s=[],t=0,e=o=>{o()},r=o=>{o()},n=o=>setTimeout(o,0);const a=o=>{t?s.push(o):n(()=>{e(o)})},u=()=>{const o=s;s=[],o.length&&n(()=>{r(()=>{o.forEach(p=>{e(p)})})})};return{batch:o=>{let p;t++;try{p=o()}finally{t--,t||u()}return p},batchCalls:o=>(...p)=>{a(()=>{o(...p)})},schedule:a,setNotifyFunction:o=>{e=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{n=o}}}var E=Os(),yt,Be,as=(Be=class{constructor(){c(this,yt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),he(this.gcTime)&&h(this,yt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s!=null?s:Gt?1/0:5*60*1e3)}clearGcTimeout(){i(this,yt)&&(clearTimeout(i(this,yt)),h(this,yt,void 0))}},yt=new WeakMap,Be),Dt,At,N,U,zt,vt,W,tt,We,ws=(We=class extends as{constructor(t){var e;super();c(this,W);c(this,Dt);c(this,At);c(this,N);c(this,U);c(this,zt);c(this,vt);h(this,vt,!1),h(this,zt,t.defaultOptions),this.setOptions(t.options),this.observers=[],h(this,N,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,h(this,Dt,Ss(this.options)),this.state=(e=t.state)!=null?e:i(this,Dt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=i(this,U))==null?void 0:t.promise}setOptions(t){this.options=f(f({},i(this,zt)),t),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,N).remove(this)}setData(t,e){const r=oe(this.state.data,t,this.options);return d(this,W,tt).call(this,{data:r,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),r}setState(t,e){d(this,W,tt).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var r,n;const e=(r=i(this,U))==null?void 0:r.promise;return(n=i(this,U))==null||n.cancel(t),e?e.then(B).catch(B):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,Dt))}isActive(){return this.observers.some(t=>$(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fe||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!es(this.state.dataUpdatedAt,t)}onFocus(){var e;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=i(this,U))==null||e.continue()}onOnline(){var e;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=i(this,U))==null||e.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),i(this,N).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(i(this,U)&&(i(this,vt)?i(this,U).cancel({revert:!0}):i(this,U).cancelRetry()),this.scheduleGc()),i(this,N).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||d(this,W,tt).call(this,{type:"invalidate"})}fetch(t,e){var p,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(e!=null&&e.cancelRefetch))this.cancel({silent:!0});else if(i(this,U))return i(this,U).continueRetry(),i(this,U).promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(S=>S.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(h(this,vt,!0),r.signal)})},a=()=>{const l=ss(this.options,e),S={queryKey:this.queryKey,meta:this.meta};return n(S),h(this,vt,!1),this.options.persister?this.options.persister(l,S,this):l(S)},u={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};n(u),(p=this.options.behavior)==null||p.onFetch(u,this),h(this,At,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=u.fetchOptions)==null?void 0:y.meta))&&d(this,W,tt).call(this,{type:"fetch",meta:(v=u.fetchOptions)==null?void 0:v.meta});const o=l=>{var S,R,M,b;ae(l)&&l.silent||d(this,W,tt).call(this,{type:"error",error:l}),ae(l)||((R=(S=i(this,N).config).onError)==null||R.call(S,l,this),(b=(M=i(this,N).config).onSettled)==null||b.call(M,this.state.data,l,this)),this.scheduleGc()};return h(this,U,ns({initialPromise:e==null?void 0:e.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:l=>{var S,R,M,b;if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(O){o(O);return}(R=(S=i(this,N).config).onSuccess)==null||R.call(S,l,this),(b=(M=i(this,N).config).onSettled)==null||b.call(M,l,this.state.error,this),this.scheduleGc()},onError:o,onFail:(l,S)=>{d(this,W,tt).call(this,{type:"failed",failureCount:l,error:S})},onPause:()=>{d(this,W,tt).call(this,{type:"pause"})},onContinue:()=>{d(this,W,tt).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),i(this,U).start()}},Dt=new WeakMap,At=new WeakMap,N=new WeakMap,U=new WeakMap,zt=new WeakMap,vt=new WeakMap,W=new WeakSet,tt=function(t){const e=r=>{var n,a;switch(t.type){case"failed":return C(f({},r),{fetchFailureCount:t.failureCount,fetchFailureReason:t.error});case"pause":return C(f({},r),{fetchStatus:"paused"});case"continue":return C(f({},r),{fetchStatus:"fetching"});case"fetch":return C(f(f({},r),hs(r.data,this.options)),{fetchMeta:(n=t.meta)!=null?n:null});case"success":return f(C(f({},r),{data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(a=t.dataUpdatedAt)!=null?a:Date.now(),error:null,isInvalidated:!1,status:"success"}),!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const u=t.error;return ae(u)&&u.revert&&i(this,At)?C(f({},i(this,At)),{fetchStatus:"idle"}):C(f({},r),{error:u,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"});case"invalidate":return C(f({},r),{isInvalidated:!0});case"setState":return f(f({},r),t.state)}};this.state=e(this.state),E.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),i(this,N).notify({query:this,type:"updated",action:t})})},We);function hs(s,t){return f({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:is(t.networkMode)?"fetching":"paused"},s===void 0&&{error:null,status:"pending"})}function Ss(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,e=t!==void 0,r=e?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?r!=null?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var V,$e,Rs=($e=class extends Rt{constructor(t={}){super();c(this,V);this.config=t,h(this,V,new Map)}build(t,e,r){var o;const n=e.queryKey,a=(o=e.queryHash)!=null?o:Ce(n,e);let u=this.get(a);return u||(u=new ws({cache:this,queryKey:n,queryHash:a,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(u)),u}add(t){i(this,V).has(t.queryHash)||(i(this,V).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=i(this,V).get(t.queryHash);e&&(t.destroy(),e===t&&i(this,V).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){E.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return i(this,V).get(t)}getAll(){return[...i(this,V).values()]}find(t){const e=f({exact:!0},t);return this.getAll().find(r=>Te(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>Te(t,r)):e}notify(t){E.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){E.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){E.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},V=new WeakMap,$e),X,T,bt,Y,it,Je,Cs=(Je=class extends as{constructor(t){super();c(this,Y);c(this,X);c(this,T);c(this,bt);this.mutationId=t.mutationId,h(this,T,t.mutationCache),h(this,X,[]),this.state=t.state||us(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){i(this,X).includes(t)||(i(this,X).push(t),this.clearGcTimeout(),i(this,T).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){h(this,X,i(this,X).filter(e=>e!==t)),this.scheduleGc(),i(this,T).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){i(this,X).length||(this.state.status==="pending"?this.scheduleGc():i(this,T).remove(this))}continue(){var t,e;return(e=(t=i(this,bt))==null?void 0:t.continue())!=null?e:this.execute(this.state.variables)}execute(t){return Pt(this,null,function*(){var n,a,u,o,p,y,v,l,S,R,M,b,O,D,q,k,Q,I,G,F,J;h(this,bt,ns({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(g,x)=>{d(this,Y,it).call(this,{type:"failed",failureCount:g,error:x})},onPause:()=>{d(this,Y,it).call(this,{type:"pause"})},onContinue:()=>{d(this,Y,it).call(this,{type:"continue"})},retry:(n=this.options.retry)!=null?n:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,T).canRun(this)}));const e=this.state.status==="pending",r=!i(this,bt).canStart();try{if(!e){d(this,Y,it).call(this,{type:"pending",variables:t,isPaused:r}),yield(u=(a=i(this,T).config).onMutate)==null?void 0:u.call(a,t,this);const x=yield(p=(o=this.options).onMutate)==null?void 0:p.call(o,t);x!==this.state.context&&d(this,Y,it).call(this,{type:"pending",context:x,variables:t,isPaused:r})}const g=yield i(this,bt).start();return yield(v=(y=i(this,T).config).onSuccess)==null?void 0:v.call(y,g,t,this.state.context,this),yield(S=(l=this.options).onSuccess)==null?void 0:S.call(l,g,t,this.state.context),yield(M=(R=i(this,T).config).onSettled)==null?void 0:M.call(R,g,null,this.state.variables,this.state.context,this),yield(O=(b=this.options).onSettled)==null?void 0:O.call(b,g,null,t,this.state.context),d(this,Y,it).call(this,{type:"success",data:g}),g}catch(g){try{throw yield(q=(D=i(this,T).config).onError)==null?void 0:q.call(D,g,t,this.state.context,this),yield(Q=(k=this.options).onError)==null?void 0:Q.call(k,g,t,this.state.context),yield(G=(I=i(this,T).config).onSettled)==null?void 0:G.call(I,void 0,g,this.state.variables,this.state.context,this),yield(J=(F=this.options).onSettled)==null?void 0:J.call(F,void 0,g,t,this.state.context),g}finally{d(this,Y,it).call(this,{type:"error",error:g})}}finally{i(this,T).runNext(this)}})}},X=new WeakMap,T=new WeakMap,bt=new WeakMap,Y=new WeakSet,it=function(t){const e=r=>{switch(t.type){case"failed":return C(f({},r),{failureCount:t.failureCount,failureReason:t.error});case"pause":return C(f({},r),{isPaused:!0});case"continue":return C(f({},r),{isPaused:!1});case"pending":return C(f({},r),{context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()});case"success":return C(f({},r),{data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return C(f({},r),{data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"})}};this.state=e(this.state),E.batch(()=>{i(this,X).forEach(r=>{r.onMutationUpdate(t)}),i(this,T).notify({mutation:this,type:"updated",action:t})})},Je);function us(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var H,Bt,Ve,Ps=(Ve=class extends Rt{constructor(t={}){super();c(this,H);c(this,Bt);this.config=t,h(this,H,new Map),h(this,Bt,Date.now())}build(t,e,r){const n=new Cs({mutationCache:this,mutationId:++Zt(this,Bt)._,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){var n;const e=te(t),r=(n=i(this,H).get(e))!=null?n:[];r.push(t),i(this,H).set(e,r),this.notify({type:"added",mutation:t})}remove(t){var r;const e=te(t);if(i(this,H).has(e)){const n=(r=i(this,H).get(e))==null?void 0:r.filter(a=>a!==t);n&&(n.length===0?i(this,H).delete(e):i(this,H).set(e,n))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const e=(r=i(this,H).get(te(t)))==null?void 0:r.find(n=>n.state.status==="pending");return!e||e===t}runNext(t){var r,n;const e=(r=i(this,H).get(te(t)))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(n=e==null?void 0:e.continue())!=null?n:Promise.resolve()}clear(){E.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...i(this,H).values()].flat()}find(t){const e=f({exact:!0},t);return this.getAll().find(r=>je(e,r))}findAll(t={}){return this.getAll().filter(e=>je(t,e))}notify(t){E.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return E.batch(()=>Promise.all(t.map(e=>e.continue().catch(B))))}},H=new WeakMap,Bt=new WeakMap,Ve);function te(s){var t,e;return(e=(t=s.options.scope)==null?void 0:t.id)!=null?e:String(s.mutationId)}function Ke(s){return{onFetch:(t,e)=>{var v,l,S,R,M;const r=t.options,n=(S=(l=(v=t.fetchOptions)==null?void 0:v.meta)==null?void 0:l.fetchMore)==null?void 0:S.direction,a=((R=t.state.data)==null?void 0:R.pages)||[],u=((M=t.state.data)==null?void 0:M.pageParams)||[];let o={pages:[],pageParams:[]},p=0;const y=()=>Pt(this,null,function*(){var k;let b=!1;const O=Q=>{Object.defineProperty(Q,"signal",{enumerable:!0,get:()=>(t.signal.aborted?b=!0:t.signal.addEventListener("abort",()=>{b=!0}),t.signal)})},D=ss(t.options,t.fetchOptions),q=(Q,I,G)=>Pt(this,null,function*(){if(b)return Promise.reject();if(I==null&&Q.pages.length)return Promise.resolve(Q);const F={queryKey:t.queryKey,pageParam:I,direction:G?"backward":"forward",meta:t.options.meta};O(F);const J=yield D(F),{maxPages:g}=t.options,x=G?vs:ys;return{pages:x(Q.pages,J,g),pageParams:x(Q.pageParams,I,g)}});if(n&&a.length){const Q=n==="backward",I=Q?Fs:ke,G={pages:a,pageParams:u},F=I(r,G);o=yield q(G,F,Q)}else{const Q=s!=null?s:a.length;do{const I=p===0?(k=u[0])!=null?k:r.initialPageParam:ke(r,o);if(p>0&&I==null)break;o=yield q(o,I),p++}while(p<Q)}return o});t.options.persister?t.fetchFn=()=>{var b,O;return(O=(b=t.options).persister)==null?void 0:O.call(b,y,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e)}:t.fetchFn=y}}}function ke(s,{pages:t,pageParams:e}){const r=t.length-1;return t.length>0?s.getNextPageParam(t[r],t,e[r],e):void 0}function Fs(s,{pages:t,pageParams:e}){var r;return t.length>0?(r=s.getPreviousPageParam)==null?void 0:r.call(s,t[0],t,e[0],e):void 0}var P,at,ht,It,Ut,ut,qt,Tt,Xe,Is=(Xe=class{constructor(s={}){c(this,P);c(this,at);c(this,ht);c(this,It);c(this,Ut);c(this,ut);c(this,qt);c(this,Tt);h(this,P,s.queryCache||new Rs),h(this,at,s.mutationCache||new Ps),h(this,ht,s.defaultOptions||{}),h(this,It,new Map),h(this,Ut,new Map),h(this,ut,0)}mount(){Zt(this,ut)._++,i(this,ut)===1&&(h(this,qt,Qe.subscribe(s=>Pt(this,null,function*(){s&&(yield this.resumePausedMutations(),i(this,P).onFocus())}))),h(this,Tt,re.subscribe(s=>Pt(this,null,function*(){s&&(yield this.resumePausedMutations(),i(this,P).onOnline())}))))}unmount(){var s,t;Zt(this,ut)._--,i(this,ut)===0&&((s=i(this,qt))==null||s.call(this),h(this,qt,void 0),(t=i(this,Tt))==null||t.call(this),h(this,Tt,void 0))}isFetching(s){return i(this,P).findAll(C(f({},s),{fetchStatus:"fetching"})).length}isMutating(s){return i(this,at).findAll(C(f({},s),{status:"pending"})).length}getQueryData(s){var e;const t=this.defaultQueryOptions({queryKey:s});return(e=i(this,P).get(t.queryHash))==null?void 0:e.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),e=i(this,P).build(this,t),r=e.state.data;return r===void 0?this.fetchQuery(s):(s.revalidateIfStale&&e.isStaleByTime(Ft(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(s){return i(this,P).findAll(s).map(({queryKey:t,state:e})=>{const r=e.data;return[t,r]})}setQueryData(s,t,e){const r=this.defaultQueryOptions({queryKey:s}),n=i(this,P).get(r.queryHash),a=n==null?void 0:n.state.data,u=fs(t,a);if(u!==void 0)return i(this,P).build(this,r).setData(u,C(f({},e),{manual:!0}))}setQueriesData(s,t,e){return E.batch(()=>i(this,P).findAll(s).map(({queryKey:r})=>[r,this.setQueryData(r,t,e)]))}getQueryState(s){var e;const t=this.defaultQueryOptions({queryKey:s});return(e=i(this,P).get(t.queryHash))==null?void 0:e.state}removeQueries(s){const t=i(this,P);E.batch(()=>{t.findAll(s).forEach(e=>{t.remove(e)})})}resetQueries(s,t){const e=i(this,P),r=f({type:"active"},s);return E.batch(()=>(e.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries(r,t)))}cancelQueries(s,t={}){const e=f({revert:!0},t),r=E.batch(()=>i(this,P).findAll(s).map(n=>n.cancel(e)));return Promise.all(r).then(B).catch(B)}invalidateQueries(s,t={}){return E.batch(()=>{var r,n;if(i(this,P).findAll(s).forEach(a=>{a.invalidate()}),(s==null?void 0:s.refetchType)==="none")return Promise.resolve();const e=C(f({},s),{type:(n=(r=s==null?void 0:s.refetchType)!=null?r:s==null?void 0:s.type)!=null?n:"active"});return this.refetchQueries(e,t)})}refetchQueries(s,t={}){var n;const e=C(f({},t),{cancelRefetch:(n=t.cancelRefetch)!=null?n:!0}),r=E.batch(()=>i(this,P).findAll(s).filter(a=>!a.isDisabled()).map(a=>{let u=a.fetch(void 0,e);return e.throwOnError||(u=u.catch(B)),a.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(B)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const e=i(this,P).build(this,t);return e.isStaleByTime(Ft(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(B).catch(B)}fetchInfiniteQuery(s){return s.behavior=Ke(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(B).catch(B)}ensureInfiniteQueryData(s){return s.behavior=Ke(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return re.isOnline()?i(this,at).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,P)}getMutationCache(){return i(this,at)}getDefaultOptions(){return i(this,ht)}setDefaultOptions(s){h(this,ht,s)}setQueryDefaults(s,t){i(this,It).set(St(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...i(this,It).values()],e={};return t.forEach(r=>{_t(s,r.queryKey)&&Object.assign(e,r.defaultOptions)}),e}setMutationDefaults(s,t){i(this,Ut).set(St(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...i(this,Ut).values()];let e={};return t.forEach(r=>{_t(s,r.mutationKey)&&(e=f(f({},e),r.defaultOptions))}),e}defaultQueryOptions(s){if(s._defaulted)return s;const t=C(f(f(f({},i(this,ht).queries),this.getQueryDefaults(s.queryKey)),s),{_defaulted:!0});return t.queryHash||(t.queryHash=Ce(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Fe&&(t.enabled=!1),t}defaultMutationOptions(s){return s!=null&&s._defaulted?s:C(f(f(f({},i(this,ht).mutations),(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey)),s),{_defaulted:!0})}clear(){i(this,P).clear(),i(this,at).clear()}},P=new WeakMap,at=new WeakMap,ht=new WeakMap,It=new WeakMap,Ut=new WeakMap,ut=new WeakMap,qt=new WeakMap,Tt=new WeakMap,Xe),L,m,Wt,j,mt,jt,ot,Z,$t,xt,Lt,gt,Ot,ct,Kt,w,Nt,le,de,fe,pe,ye,ve,be,os,Ye,Qs=(Ye=class extends Rt{constructor(t,e){super();c(this,w);c(this,L);c(this,m);c(this,Wt);c(this,j);c(this,mt);c(this,jt);c(this,ot);c(this,Z);c(this,$t);c(this,xt);c(this,Lt);c(this,gt);c(this,Ot);c(this,ct);c(this,Kt,new Set);this.options=e,h(this,L,t),h(this,Z,null),h(this,ot,ce()),this.options.experimental_prefetchInRender||i(this,ot).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,m).addObserver(this),He(i(this,m),this.options)?d(this,w,Nt).call(this):this.updateResult(),d(this,w,pe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return me(i(this,m),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return me(i(this,m),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,w,ye).call(this),d(this,w,ve).call(this),i(this,m).removeObserver(this)}setOptions(t,e){const r=this.options,n=i(this,m);if(this.options=i(this,L).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $(this.options.enabled,i(this,m))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");d(this,w,be).call(this),i(this,m).setOptions(this.options),r._defaulted&&!ie(this.options,r)&&i(this,L).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,m),observer:this});const a=this.hasListeners();a&&Ge(i(this,m),n,this.options,r)&&d(this,w,Nt).call(this),this.updateResult(e),a&&(i(this,m)!==n||$(this.options.enabled,i(this,m))!==$(r.enabled,i(this,m))||Ft(this.options.staleTime,i(this,m))!==Ft(r.staleTime,i(this,m)))&&d(this,w,le).call(this);const u=d(this,w,de).call(this);a&&(i(this,m)!==n||$(this.options.enabled,i(this,m))!==$(r.enabled,i(this,m))||u!==i(this,ct))&&d(this,w,fe).call(this,u)}getOptimisticResult(t){const e=i(this,L).getQueryCache().build(i(this,L),t),r=this.createResult(e,t);return Ms(this,r)&&(h(this,j,r),h(this,jt,this.options),h(this,mt,i(this,m).state)),r}getCurrentResult(){return i(this,j)}trackResult(t,e){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),e==null||e(n),t[n])})}),r}trackProp(t){i(this,Kt).add(t)}getCurrentQuery(){return i(this,m)}refetch(e={}){var t=qe(e,[]);return this.fetch(f({},t))}fetchOptimistic(t){const e=i(this,L).defaultQueryOptions(t),r=i(this,L).getQueryCache().build(i(this,L),e);return r.fetch().then(()=>this.createResult(r,e))}fetch(t){var e;return d(this,w,Nt).call(this,C(f({},t),{cancelRefetch:(e=t.cancelRefetch)!=null?e:!0})).then(()=>(this.updateResult(),i(this,j)))}createResult(t,e){var J;const r=i(this,m),n=this.options,a=i(this,j),u=i(this,mt),o=i(this,jt),y=t!==r?t.state:i(this,Wt),{state:v}=t;let l=f({},v),S=!1,R;if(e._optimisticResults){const g=this.hasListeners(),x=!g&&He(t,e),Ct=g&&Ge(t,r,e,n);(x||Ct)&&(l=f(f({},l),hs(v.data,t.options))),e._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:M,errorUpdatedAt:b,status:O}=l;if(e.select&&l.data!==void 0)if(a&&l.data===(u==null?void 0:u.data)&&e.select===i(this,$t))R=i(this,xt);else try{h(this,$t,e.select),R=e.select(l.data),R=oe(a==null?void 0:a.data,R,e),h(this,xt,R),h(this,Z,null)}catch(g){h(this,Z,g)}else R=l.data;if(e.placeholderData!==void 0&&R===void 0&&O==="pending"){let g;if(a!=null&&a.isPlaceholderData&&e.placeholderData===(o==null?void 0:o.placeholderData))g=a.data;else if(g=typeof e.placeholderData=="function"?e.placeholderData((J=i(this,Lt))==null?void 0:J.state.data,i(this,Lt)):e.placeholderData,e.select&&g!==void 0)try{g=e.select(g),h(this,Z,null)}catch(x){h(this,Z,x)}g!==void 0&&(O="success",R=oe(a==null?void 0:a.data,g,e),S=!0)}i(this,Z)&&(M=i(this,Z),R=i(this,xt),b=Date.now(),O="error");const D=l.fetchStatus==="fetching",q=O==="pending",k=O==="error",Q=q&&D,I=R!==void 0,F={status:O,fetchStatus:l.fetchStatus,isPending:q,isSuccess:O==="success",isError:k,isInitialLoading:Q,isLoading:Q,data:R,dataUpdatedAt:l.dataUpdatedAt,error:M,errorUpdatedAt:b,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>y.dataUpdateCount||l.errorUpdateCount>y.errorUpdateCount,isFetching:D,isRefetching:D&&!q,isLoadingError:k&&!I,isPaused:l.fetchStatus==="paused",isPlaceholderData:S,isRefetchError:k&&I,isStale:Ee(t,e),refetch:this.refetch,promise:i(this,ot)};if(this.options.experimental_prefetchInRender){const g=Xt=>{F.status==="error"?Xt.reject(F.error):F.data!==void 0&&Xt.resolve(F.data)},x=()=>{const Xt=h(this,ot,F.promise=ce());g(Xt)},Ct=i(this,ot);switch(Ct.status){case"pending":t.queryHash===r.queryHash&&g(Ct);break;case"fulfilled":(F.status==="error"||F.data!==Ct.value)&&x();break;case"rejected":(F.status!=="error"||F.error!==Ct.reason)&&x();break}}return F}updateResult(t){const e=i(this,j),r=this.createResult(i(this,m),this.options);if(h(this,mt,i(this,m).state),h(this,jt,this.options),i(this,mt).data!==void 0&&h(this,Lt,i(this,m)),ie(r,e))return;h(this,j,r);const n={},a=()=>{if(!e)return!0;const{notifyOnChangeProps:u}=this.options,o=typeof u=="function"?u():u;if(o==="all"||!o&&!i(this,Kt).size)return!0;const p=new Set(o!=null?o:i(this,Kt));return this.options.throwOnError&&p.add("error"),Object.keys(i(this,j)).some(y=>{const v=y;return i(this,j)[v]!==e[v]&&p.has(v)})};(t==null?void 0:t.listeners)!==!1&&a()&&(n.listeners=!0),d(this,w,os).call(this,f(f({},n),t))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,w,pe).call(this)}},L=new WeakMap,m=new WeakMap,Wt=new WeakMap,j=new WeakMap,mt=new WeakMap,jt=new WeakMap,ot=new WeakMap,Z=new WeakMap,$t=new WeakMap,xt=new WeakMap,Lt=new WeakMap,gt=new WeakMap,Ot=new WeakMap,ct=new WeakMap,Kt=new WeakMap,w=new WeakSet,Nt=function(t){d(this,w,be).call(this);let e=i(this,m).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(B)),e},le=function(){d(this,w,ye).call(this);const t=Ft(this.options.staleTime,i(this,m));if(Gt||i(this,j).isStale||!he(t))return;const r=es(i(this,j).dataUpdatedAt,t)+1;h(this,gt,setTimeout(()=>{i(this,j).isStale||this.updateResult()},r))},de=function(){var t;return(t=typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,m)):this.options.refetchInterval)!=null?t:!1},fe=function(t){d(this,w,ve).call(this),h(this,ct,t),!(Gt||$(this.options.enabled,i(this,m))===!1||!he(i(this,ct))||i(this,ct)===0)&&h(this,Ot,setInterval(()=>{(this.options.refetchIntervalInBackground||Qe.isFocused())&&d(this,w,Nt).call(this)},i(this,ct)))},pe=function(){d(this,w,le).call(this),d(this,w,fe).call(this,d(this,w,de).call(this))},ye=function(){i(this,gt)&&(clearTimeout(i(this,gt)),h(this,gt,void 0))},ve=function(){i(this,Ot)&&(clearInterval(i(this,Ot)),h(this,Ot,void 0))},be=function(){const t=i(this,L).getQueryCache().build(i(this,L),this.options);if(t===i(this,m))return;const e=i(this,m);h(this,m,t),h(this,Wt,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},os=function(t){E.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(i(this,j))}),i(this,L).getQueryCache().notify({query:i(this,m),type:"observerResultsUpdated"})})},Ye);function Es(s,t){return $(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function He(s,t){return Es(s,t)||s.state.data!==void 0&&me(s,t,t.refetchOnMount)}function me(s,t,e){if($(t.enabled,s)!==!1){const r=typeof e=="function"?e(s):e;return r==="always"||r!==!1&&Ee(s,t)}return!1}function Ge(s,t,e,r){return(s!==t||$(r.enabled,s)===!1)&&(!e.suspense||s.state.status!=="error")&&Ee(s,e)}function Ee(s,t){return $(t.enabled,s)!==!1&&s.isStaleByTime(Ft(t.staleTime,s))}function Ms(s,t){return!ie(s.getCurrentResult(),t)}function Ne(s,t){return s.filter(e=>!t.includes(e))}function Ds(s,t,e){const r=s.slice(0);return r[t]=e,r}var kt,_,wt,Ht,z,lt,Jt,Vt,A,ge,Oe,ee,we,Se,Ze,Us=(Ze=class extends Rt{constructor(t,e,r){super();c(this,A);c(this,kt);c(this,_);c(this,wt);c(this,Ht);c(this,z);c(this,lt);c(this,Jt);c(this,Vt);h(this,kt,t),h(this,Ht,r),h(this,wt,[]),h(this,z,[]),h(this,_,[]),this.setQueries(e)}onSubscribe(){this.listeners.size===1&&i(this,z).forEach(t=>{t.subscribe(e=>{d(this,A,we).call(this,t,e)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,i(this,z).forEach(t=>{t.destroy()})}setQueries(t,e,r){h(this,wt,t),h(this,Ht,e),E.batch(()=>{const n=i(this,z),a=d(this,A,ee).call(this,i(this,wt));a.forEach(y=>y.observer.setOptions(y.defaultedQueryOptions,r));const u=a.map(y=>y.observer),o=u.map(y=>y.getCurrentResult()),p=u.some((y,v)=>y!==n[v]);n.length===u.length&&!p||(h(this,z,u),h(this,_,o),this.hasListeners()&&(Ne(n,u).forEach(y=>{y.destroy()}),Ne(u,n).forEach(y=>{y.subscribe(v=>{d(this,A,we).call(this,y,v)})}),d(this,A,Se).call(this)))})}getCurrentResult(){return i(this,_)}getQueries(){return i(this,z).map(t=>t.getCurrentQuery())}getObservers(){return i(this,z)}getOptimisticResult(t,e){const n=d(this,A,ee).call(this,t).map(a=>a.observer.getOptimisticResult(a.defaultedQueryOptions));return[n,a=>d(this,A,Oe).call(this,a!=null?a:n,e),()=>d(this,A,ge).call(this,n,t)]}},kt=new WeakMap,_=new WeakMap,wt=new WeakMap,Ht=new WeakMap,z=new WeakMap,lt=new WeakMap,Jt=new WeakMap,Vt=new WeakMap,A=new WeakSet,ge=function(t,e){const r=d(this,A,ee).call(this,e);return r.map((n,a)=>{const u=t[a];return n.defaultedQueryOptions.notifyOnChangeProps?u:n.observer.trackResult(u,o=>{r.forEach(p=>{p.observer.trackProp(o)})})})},Oe=function(t,e){return e?((!i(this,lt)||i(this,_)!==i(this,Vt)||e!==i(this,Jt))&&(h(this,Jt,e),h(this,Vt,i(this,_)),h(this,lt,Pe(i(this,lt),e(t)))),i(this,lt)):t},ee=function(t){const e=new Map(i(this,z).map(n=>[n.options.queryHash,n])),r=[];return t.forEach(n=>{const a=i(this,kt).defaultQueryOptions(n),u=e.get(a.queryHash);u?r.push({defaultedQueryOptions:a,observer:u}):r.push({defaultedQueryOptions:a,observer:new Qs(i(this,kt),a)})}),r},we=function(t,e){const r=i(this,z).indexOf(t);r!==-1&&(h(this,_,Ds(i(this,_),r,e)),d(this,A,Se).call(this))},Se=function(){var t;if(this.hasListeners()){const e=i(this,lt),r=d(this,A,Oe).call(this,d(this,A,ge).call(this,i(this,_),i(this,wt)),(t=i(this,Ht))==null?void 0:t.combine);e!==r&&E.batch(()=>{this.listeners.forEach(n=>{n(i(this,_))})})}},Ze),dt,ft,K,et,st,se,Re,ts,qs=(ts=class extends Rt{constructor(t,e){super();c(this,st);c(this,dt);c(this,ft);c(this,K);c(this,et);h(this,dt,t),this.setOptions(e),this.bindMethods(),d(this,st,se).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=i(this,dt).defaultMutationOptions(t),ie(this.options,e)||i(this,dt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,K),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&St(e.mutationKey)!==St(this.options.mutationKey)?this.reset():((r=i(this,K))==null?void 0:r.state.status)==="pending"&&i(this,K).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,K))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,st,se).call(this),d(this,st,Re).call(this,t)}getCurrentResult(){return i(this,ft)}reset(){var t;(t=i(this,K))==null||t.removeObserver(this),h(this,K,void 0),d(this,st,se).call(this),d(this,st,Re).call(this)}mutate(t,e){var r;return h(this,et,e),(r=i(this,K))==null||r.removeObserver(this),h(this,K,i(this,dt).getMutationCache().build(i(this,dt),this.options)),i(this,K).addObserver(this),i(this,K).execute(t)}},dt=new WeakMap,ft=new WeakMap,K=new WeakMap,et=new WeakMap,st=new WeakSet,se=function(){var e,r;const t=(r=(e=i(this,K))==null?void 0:e.state)!=null?r:us();h(this,ft,C(f({},t),{isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}))},Re=function(t){E.batch(()=>{var e,r,n,a,u,o,p,y;if(i(this,et)&&this.hasListeners()){const v=i(this,ft).variables,l=i(this,ft).context;(t==null?void 0:t.type)==="success"?((r=(e=i(this,et)).onSuccess)==null||r.call(e,t.data,v,l),(a=(n=i(this,et)).onSettled)==null||a.call(n,t.data,null,v,l)):(t==null?void 0:t.type)==="error"&&((o=(u=i(this,et)).onError)==null||o.call(u,t.error,v,l),(y=(p=i(this,et)).onSettled)==null||y.call(p,void 0,t.error,v,l))}this.listeners.forEach(v=>{v(i(this,ft))})})},ts);export{qs as M,Us as Q,Qs as a,Is as b,Gt as i,E as n};
