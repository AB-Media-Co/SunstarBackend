var J=Object.defineProperty,K=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var D=(s,n,i)=>n in s?J(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i,d=(s,n)=>{for(var i in n||(n={}))X.call(n,i)&&D(s,i,n[i]);if(S)for(var i of S(n))Y.call(n,i)&&D(s,i,n[i]);return s},l=(s,n)=>K(s,V(n));import{r as c,j as a}from"./react-vendor-CU6lFo1N.js";import{u as $,a as aa,b as ea,c as ta}from"./useLocationHook-CPSFMC1z.js";import{I as w}from"./ImageUpload-B1EwwcLz.js";import{D as u,p as na,v as sa,w as ia,q as C,z as oa,Q as M,U as W,Z as k,ad as h,a8 as m,_ as F}from"./ui-vendor-BNgsC25r.js";import"./animation-vendor-DE7fCS50.js";import"./vendor-DnuN4cIi.js";import"./query-vendor-B8s5OfyV.js";import"./swiper-vendor-CoL_RVtK.js";import"./date-vendor-BpmxrJb6.js";import"./index-DTQi_YP9.js";import"./useHotelHook2-4z4wAkLq.js";const ra=(s,n=30)=>{if(!s)return"";const i=s.split(" ");return i.length<=n?s:i.slice(0,n).join(" ")+" ..."},Ca=()=>{const{data:s,isLoading:n,isError:i,error:I}=$(),H=aa(),T=ea(),_=ta(),[g,j]=c.useState({name:"",aboutus:{heading:"",paragraph:""},image:""}),[,z]=c.useState(!1),[G,v]=c.useState(null),[p,f]=c.useState({name:"",aboutus:{heading:"",paragraph:""},image:""}),[,O]=c.useState(!1),[P,b]=c.useState(!1),[q,L]=c.useState(!1),y=e=>{const{name:t,value:o}=e.target;t==="name"?j(r=>l(d({},r),{name:o})):(t==="heading"||t==="paragraph")&&j(r=>l(d({},r),{aboutus:l(d({},r.aboutus),{[t]:o})}))},B=(e,t)=>{j(o=>l(d({},o),{[e]:t}))},A=e=>{e.preventDefault(),H.mutate(g),j({name:"",aboutus:{heading:"",paragraph:""},hotels:[],image:""}),b(!1)},Q=e=>{var t,o;v(e._id),f({name:e.name,aboutus:{heading:((t=e.aboutus)==null?void 0:t.heading)||"",paragraph:((o=e.aboutus)==null?void 0:o.paragraph)||""},image:e.image||""}),L(!0)},E=e=>{const{name:t,value:o}=e.target;t==="name"?f(r=>l(d({},r),{name:o})):(t==="heading"||t==="paragraph")&&f(r=>l(d({},r),{aboutus:l(d({},r.aboutus),{[t]:o})}))},R=(e,t)=>{f(o=>l(d({},o),{[e]:t}))},N=e=>{e.preventDefault(),T.mutate({id:G,updateData:p}),L(!1),v(null)},U=()=>{L(!1),v(null)},Z=e=>{_.mutate(e)};return a.jsxs("div",{className:"container mx-auto mt-24 p-4 px-16",children:[a.jsx("div",{className:"mb-6",children:a.jsx(u,{variant:"contained",color:"primary",onClick:()=>b(!0),children:"Add a Location"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n?a.jsx("div",{children:"Loading..."}):i?a.jsxs("div",{children:["Error: ",I.message]}):s.map(e=>{var t,o,r;return a.jsxs(na,{className:"shadow-lg",children:[e.image&&a.jsx(sa,{component:"img",height:"140",image:e.image,alt:e.name}),a.jsxs(ia,{children:[a.jsx(C,{variant:"h6",component:"div",children:e.name}),a.jsx(C,{variant:"subtitle1",color:"textSecondary",children:(t=e.aboutus)==null?void 0:t.heading}),a.jsx(C,{variant:"body2",color:"textSecondary",sx:{mt:1},children:ra((o=e.aboutus)==null?void 0:o.paragraph,10)}),a.jsxs(C,{variant:"body2",color:"textSecondary",sx:{mt:1},children:["Hotels: ",(r=e.hotels)==null?void 0:r.length," (",e.hotels.map(x=>x!=null&&x.name?x.name:x).join(", "),")"]})]}),a.jsxs(oa,{children:[a.jsx(u,{size:"small",variant:"contained",color:"primary",onClick:()=>Q(e),children:"Edit"}),a.jsx(u,{size:"small",variant:"outlined",color:"secondary",onClick:()=>Z(e._id),children:"Delete"})]})]},e._id)})}),a.jsxs(M,{open:P,onClose:()=>b(!1),fullWidth:!0,maxWidth:"md",children:[a.jsx(W,{children:"Add New Location"}),a.jsx(k,{dividers:!0,children:a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsx(h,{label:"Location Name",name:"name",value:g.name,onChange:y,fullWidth:!0}),a.jsxs(m,{container:!0,spacing:2,children:[a.jsx(m,{item:!0,xs:6,children:a.jsx(h,{label:"About Us Heading",name:"heading",value:g.aboutus.heading,onChange:y,fullWidth:!0})}),a.jsx(m,{item:!0,xs:6,children:a.jsx(h,{label:"About Us Paragraph",name:"paragraph",value:g.aboutus.paragraph,onChange:y,fullWidth:!0})})]}),a.jsx(w,{feature:g,handleFeatureChange:B,setImageUpload:z,index:0})]})}),a.jsxs(F,{children:[a.jsx(u,{onClick:()=>b(!1),variant:"outlined",color:"secondary",children:"Cancel"}),a.jsx(u,{onClick:A,variant:"contained",color:"primary",children:"Add Location"})]})]}),a.jsxs(M,{open:q,onClose:U,fullWidth:!0,maxWidth:"md",children:[a.jsx(W,{children:"Edit Location"}),a.jsx(k,{dividers:!0,children:a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsx(h,{label:"Location Name",name:"name",value:p.name,onChange:E,fullWidth:!0}),a.jsxs(m,{container:!0,spacing:2,children:[a.jsx(m,{item:!0,xs:6,children:a.jsx(h,{label:"About Us Heading",name:"heading",value:p.aboutus.heading,onChange:E,fullWidth:!0})}),a.jsx(m,{item:!0,xs:6,children:a.jsx(h,{label:"About Us Paragraph",name:"paragraph",value:p.aboutus.paragraph,onChange:E,fullWidth:!0})})]}),a.jsx(w,{feature:p,handleFeatureChange:R,setImageUpload:O,index:0})]})}),a.jsxs(F,{children:[a.jsx(u,{onClick:U,variant:"outlined",color:"secondary",children:"Cancel"}),a.jsx(u,{onClick:N,variant:"contained",color:"primary",children:"Update"})]})]})]})};export{Ca as HotelLocations,Ca as default};
