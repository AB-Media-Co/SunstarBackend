var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,r=(e,t)=>{for(var i in t||(t={}))a.call(t,i)&&l(e,i,t[i]);if(s)for(var i of s(t))n.call(t,i)&&l(e,i,t[i]);return e},o=(e,s)=>t(e,i(s)),d=(e,t)=>{var i={};for(var l in e)a.call(e,l)&&t.indexOf(l)<0&&(i[l]=e[l]);if(null!=e&&s)for(var l of s(e))t.indexOf(l)<0&&n.call(e,l)&&(i[l]=e[l]);return i},c=(e,t,i)=>new Promise(((s,a)=>{var n=e=>{try{r(i.next(e))}catch(t){a(t)}},l=e=>{try{r(i.throw(e))}catch(t){a(t)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,l);r((i=i.apply(e,t)).next())}));import{j as u,x as m,P as g,y as h,r as x,X as p,S as v,z as b,A as j,D as f,_ as y,E as C,F as w}from"./react-vendor-tq68JOgp.js";import{c as S}from"./index-D89k_Hd_.js";import{u as N,a as k,b as D,c as E,d as T,e as B,f as W,g as A,h as P,i as I,j as H}from"./use-Career-Page-By_GGGPP.js";import{u as _}from"./useUpdatePagesHook-Dih8rx9i.js";import{J as z,O as U,Q as F,U as O,q as R,X as L,C as M,Z as q,aA as $,aB as G,ad as J,_ as Q,D as V,o as Y,a8 as K,ao as X,at as Z,af as ee,a9 as te,aa as ie,ab as se,ac as ae,ai as ne,t as le,a3 as re,a4 as oe,a7 as de,ay as ce,an as ue,aC as me,aD as ge,aE as he,p as xe,v as pe,w as ve,z as be,E as je}from"./ui-vendor-DiJ4VKpG.js";import{I as fe}from"./ImageUpload-C514XMBq.js";import{u as ye,a as Ce,b as we,c as Se,d as Ne,e as ke,f as De,g as Ee}from"./useDayUseRoomHook-DN-AJiMD.js";import{g as Te,u as Be,r as We}from"./dev-owners-stats-d1hr5bpy.js";import{u as Ae,a as Pe,b as Ie,c as He,d as _e,e as ze,f as Ue}from"./useEventPageHook-MMXWPYV4.js";import{u as Fe,a as Oe,b as Re}from"./useFaqsHooks-Dk7CFFtT.js";import{uploadImagesAPIV2 as Le}from"./useHotelHook2-C33856rg.js";import{M as Me}from"./MultipleImageUpload-BSLbV8L8.js";import{u as qe,a as $e,b as Ge,c as Je,d as Qe,e as Ve}from"./useLoyaltyProgramHook-C_vqnnVI.js";import{u as Ye,a as Ke,b as Xe,c as Ze}from"./usePartnersHooks-kSfr66aQ.js";import{u as et,a as tt,b as it,c as st,d as at}from"./useTestimonialHook-ISjptQnS.js";import{u as nt,a as lt}from"./useTourAndTravel-CfHNICWd.js";import{u as rt,a as ot,b as dt,c as ct,d as ut,e as mt}from"./useTravelAgentPage-B_FZFRg-.js";import"./animation-vendor-DJegggv9.js";import"./vendor-DwD9zxym.js";import"./query-vendor-iDpT9gG9.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";import"./Loader-BEd0M6qd.js";const gt=e=>{var t=e,{label:i}=t,s=d(t,["label"]);return u.jsxs("label",{className:"block group",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:i}),u.jsx("input",o(r({},s),{className:`w-full rounded-lg border border-gray-300 px-4 py-2.5 outline-none transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 hover:border-gray-400 ${s.className||""}`}))]})},ht=e=>{var t=e,{label:i}=t,s=d(t,["label"]);return u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:i}),u.jsx("textarea",o(r({},s),{className:`w-full rounded-lg border border-gray-300 px-4 py-2.5 outline-none transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 hover:border-gray-400 min-h-[90px] resize-none ${s.className||""}`}))]})},xt=({title:e,cards:t,onAdd:i,adding:s,onUpdate:a,onDelete:n,emptyMessage:l,fields:o=[],onBulk:d})=>{const c=((e,t=500)=>{const i=x.useRef(null),s=x.useCallback(((...s)=>{i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{e(...s)}),t)}),[e,t]);return x.useEffect((()=>()=>{i.current&&clearTimeout(i.current)}),[]),s})(((e,t,i)=>{a(e,{[t]:i})}));return u.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gradient-to-br from-white to-gray-50 p-6 shadow-sm hover:shadow-md transition-shadow duration-300",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e}),u.jsx("div",{className:"flex gap-2",children:u.jsx("button",{onClick:i,disabled:s,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-emerald-600 to-emerald-700 px-4 py-2 text-sm font-medium text-white shadow-md hover:shadow-lg disabled:opacity-60",children:s?u.jsxs(u.Fragment,{children:[u.jsx(m,{size:16,className:"animate-spin"}),"Adding…"]}):u.jsxs(u.Fragment,{children:[u.jsx(g,{size:16}),"Add Card"]})})})]}),u.jsx("ul",{className:"space-y-3",children:t.length>0?t.map((e=>u.jsxs("li",{className:"rounded-lg border border-gray-200 bg-white p-4 hover:shadow-md transition-shadow duration-200",children:[u.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:o.map((t=>((e,t)=>{var i;const s={label:t.label,value:null!=(i=e[t.name])?i:"",onChange:i=>c(e._id,t.name,i.target.value)};return"textarea"===t.type?u.jsx(ht,r({},s),t.name):u.jsx(gt,r({type:t.type||"text"},s),t.name)})(e,t)))}),u.jsx("div",{className:"mt-3 flex justify-end",children:u.jsxs("button",{onClick:()=>n(e._id),className:"inline-flex items-center gap-2 rounded-lg bg-red-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-red-700",children:[u.jsx(h,{size:14}),"Delete"]})})]},e._id))):u.jsx("li",{className:"rounded-lg border border-dashed border-gray-300 py-8 text-center",children:u.jsx("p",{className:"text-sm text-gray-500",children:l})})})]})},pt=({open:e,onClose:t,children:i,title:s})=>e?u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),u.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded-2xl bg-white shadow-2xl animate-in fade-in zoom-in-95 duration-300",children:[u.jsxs("div",{className:"sticky top-0 z-20 flex items-center justify-between gap-4 border-b border-gray-200 bg-gradient-to-r from-slate-50 to-white px-6 py-4",children:[u.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:s}),u.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100",onClick:t,children:u.jsx(p,{size:20,className:"text-gray-600"})})]}),u.jsx("div",{className:"p-6",children:i})]})]}):null,vt=e=>{var t=e,{label:i}=t,s=d(t,["label"]);return u.jsxs("label",{className:"block group",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:i}),u.jsx("input",o(r({},s),{className:`w-full rounded-lg border border-gray-300 px-4 py-2.5 outline-none transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 hover:border-gray-400 ${s.className||""}`}))]})},bt=e=>{var t=e,{label:i}=t,s=d(t,["label"]);return u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:i}),u.jsx("textarea",o(r({},s),{className:`w-full rounded-lg border border-gray-300 px-4 py-2.5 outline-none transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 hover:border-gray-400 min-h-[90px] resize-none ${s.className||""}`}))]})},jt=({title:e,children:t,onSave:i,saving:s,icon:a})=>u.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gradient-to-br from-white to-gray-50 p-6 shadow-sm hover:shadow-md transition-shadow duration-300",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[a&&u.jsx(a,{size:24,className:"text-blue-600"}),u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e})]}),i&&u.jsx("button",{onClick:i,disabled:s,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-2 text-sm font-medium text-white shadow-md hover:shadow-lg hover:from-blue-700 hover:to-blue-800 disabled:opacity-60",children:s?u.jsxs(u.Fragment,{children:[u.jsx(m,{size:16,className:"animate-spin"}),"Saving…"]}):u.jsxs(u.Fragment,{children:[u.jsx(v,{size:16}),"Save"]})})]}),u.jsx("div",{className:"space-y-4",children:t})]}),ft=()=>u.jsx("div",{className:"my-8 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),yt=()=>{const[e,t]=x.useState(!1),{data:i,isFetching:s}=N({enabled:e}),a=k(),n=D(),l=E(),d=T(),g=B(),h=W(),p=A(),v=P(),b=I(),j=H(),[f,y]=x.useState({heading:"",description:""}),[C,w]=x.useState({heading:"",description:""}),[_,z]=x.useState({heading:"",description:""}),[U,F]=x.useState({heading:"",description:"",email:""}),O=x.useMemo((()=>{var e,t;return null!=(t=null==(e=null==i?void 0:i.benefits)?void 0:e.cards)?t:[]}),[i]),R=x.useMemo((()=>{var e;return null!=(e=null==i?void 0:i.simpleCards)?e:[]}),[i]);x.useEffect((()=>{var e,t,s,a,n,l,r,o,d,c,u,m,g,h,x,p,v,b;i&&(y({heading:null!=(t=null==(e=null==i?void 0:i.hero)?void 0:e.heading)?t:"",description:null!=(a=null==(s=null==i?void 0:i.hero)?void 0:s.description)?a:""}),w({heading:null!=(l=null==(n=null==i?void 0:i.benefits)?void 0:n.heading)?l:"",description:null!=(o=null==(r=null==i?void 0:i.benefits)?void 0:r.description)?o:""}),z({heading:null!=(c=null==(d=null==i?void 0:i.joinTeam)?void 0:d.heading)?c:"",description:null!=(m=null==(u=null==i?void 0:i.joinTeam)?void 0:u.description)?m:""}),F({heading:null!=(h=null==(g=null==i?void 0:i.readyToJoin)?void 0:g.heading)?h:"",description:null!=(p=null==(x=null==i?void 0:i.readyToJoin)?void 0:x.description)?p:"",email:null!=(b=null==(v=null==i?void 0:i.readyToJoin)?void 0:v.email)?b:""}))}),[i]);const[L,M]=x.useState(null),[q,$]=x.useState("");return u.jsxs("div",{children:[u.jsx("button",{onClick:()=>t(!0),className:"myGlobalButton",children:"Manage Career Page"}),u.jsxs(pt,{open:e,onClose:()=>t(!1),title:"Manage Careers Page",children:[s&&u.jsxs("div",{className:"mb-6 rounded-lg border border-amber-200 bg-gradient-to-r from-amber-50 to-orange-50 p-4 flex items-center gap-3",children:[u.jsx(m,{size:18,className:"text-amber-600 animate-spin"}),u.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Loading latest data…"})]}),u.jsx(jt,{title:"Hero Section",onSave:()=>a.mutate(f),saving:a.isPending,children:u.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[u.jsx(vt,{label:"Heading",value:f.heading,onChange:e=>y((t=>o(r({},t),{heading:e.target.value})))}),u.jsx(bt,{label:"Description",value:f.description,onChange:e=>y((t=>o(r({},t),{description:e.target.value})))})]})}),u.jsx(ft,{}),u.jsx(jt,{title:"Benefits Section Header",onSave:()=>n.mutate(C),saving:n.isPending,children:u.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[u.jsx(vt,{label:"Heading",value:C.heading,onChange:e=>w((t=>o(r({},t),{heading:e.target.value})))}),u.jsx(bt,{label:"Description",value:C.description,onChange:e=>w((t=>o(r({},t),{description:e.target.value})))})]})}),u.jsx(xt,{title:"Benefit Cards",cards:O,onAdd:()=>g.mutate({heading:"New Benefit",description:"Describe the benefit…"}),adding:g.isPending,onUpdate:(e,t)=>h.mutate({cardId:e,updateData:t}),onDelete:e=>p.mutate(e),emptyMessage:"No benefit cards yet. Create one to get started!",fields:[{name:"heading",label:"Card Heading",type:"text"},{name:"description",label:"Card Description",type:"textarea"}]}),u.jsx(ft,{}),u.jsx(jt,{title:"Join Team Section",onSave:()=>l.mutate(_),saving:l.isPending,children:u.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[u.jsx(vt,{label:"Heading",value:_.heading,onChange:e=>z((t=>o(r({},t),{heading:e.target.value})))}),u.jsx(bt,{label:"Description",value:_.description,onChange:e=>z((t=>o(r({},t),{description:e.target.value})))})]})}),u.jsx(ft,{}),u.jsx(jt,{title:"Ready to Join Section",onSave:()=>d.mutate(U),saving:d.isPending,children:u.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[u.jsx(vt,{label:"Heading",value:U.heading,onChange:e=>F((t=>o(r({},t),{heading:e.target.value})))}),u.jsx(bt,{label:"Description",value:U.description,onChange:e=>F((t=>o(r({},t),{description:e.target.value})))}),u.jsx(vt,{label:"Contact Email",type:"email",value:U.email,onChange:e=>F((t=>o(r({},t),{email:e.target.value})))})]})}),u.jsx(ft,{}),u.jsx(xt,{title:"Bottom Simple Cards",cards:R,onAdd:()=>v.mutate({title:"New Card",description:"New point…"}),adding:v.isPending,onUpdate:(e,t)=>b.mutate({cardId:e,updateData:t}),onDelete:e=>j.mutate(e),emptyMessage:"No simple cards yet. Add highlights about your company!",fields:[{name:"title",label:"Title",type:"text"},{name:"description",label:"Description",type:"textarea"}]})]}),u.jsx(pt,{open:!!L,onClose:()=>M(null),title:"benefit"===L?"Bulk Add Benefit Cards":"Bulk Add Simple Cards",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:["Enter one item per line.",u.jsx("br",{}),u.jsx("span",{className:"font-medium",children:"Benefit:"})," ",u.jsx("code",{children:"Heading: Description"})," or just ",u.jsx("code",{children:"Description"}),u.jsx("br",{}),u.jsx("span",{className:"font-medium",children:"Simple:"})," ",u.jsx("code",{children:"Title: Description"})," or just ",u.jsx("code",{children:"Description"})]}),u.jsx(bt,{label:"Items",placeholder:"Integrity: We always do what's right\nRespect for All: We respect everyone\nExcellence: We serve with heart and honesty",value:q,onChange:e=>$(e.target.value)}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{className:"rounded-lg px-4 py-2 bg-gray-100 hover:bg-gray-200",onClick:()=>M(null),children:"Cancel"}),u.jsx("button",{className:"rounded-lg px-4 py-2 bg-emerald-600 text-white hover:bg-emerald-700",onClick:()=>c(void 0,null,(function*(){const e=q.split("\n");"benefit"===L&&(yield(e=>c(void 0,null,(function*(){const t=e.map((e=>e.trim())).filter(Boolean).map((e=>{const[t,...i]=e.split(":");return i.length?{heading:t.trim(),description:i.join(":").trim()}:{heading:"Item",description:e}}));try{yield S.post("/api/careers/benefit-cards/bulk",{cards:t})}catch(i){yield Promise.all(t.map((e=>g.mutateAsync(e))))}})))(e)),"simple"===L&&(yield(e=>c(void 0,null,(function*(){const t=e.map((e=>e.trim())).filter(Boolean).map((e=>{const[t,...i]=e.split(":");return i.length?{title:t.trim(),description:i.join(":").trim()}:{title:e.split(" ").slice(0,3).join(" "),description:e}}));try{yield S.post("/api/careers/simple-cards/bulk",{cards:t})}catch(i){yield Promise.all(t.map((e=>v.mutateAsync(e))))}})))(e)),$(""),M(null)})),disabled:!q.trim(),children:"Add Items"})]})]})})]})},Ct=()=>{var e,t,i,s,a,n;const{ContactUsDetail:l,updateContactUs:r}=_(),[o,d]=x.useState(!1),[c,m]=x.useState((null==l?void 0:l.phoneNumber)||""),[g,h]=x.useState((null==l?void 0:l.emailId)||""),[p,v]=x.useState((null==(e=null==l?void 0:l.OtherEnquieirs)?void 0:e.reservations)||""),[b,j]=x.useState((null==(t=null==l?void 0:l.OtherEnquieirs)?void 0:t.corporateSales)||""),[f,y]=x.useState((null==(i=null==l?void 0:l.OtherEnquieirs)?void 0:i.traveAgentSales)||""),[C,w]=x.useState((null==(s=null==l?void 0:l.OtherEnquieirs)?void 0:s.marketing)||""),[S,N]=x.useState((null==(a=null==l?void 0:l.OtherEnquieirs)?void 0:a.careers)||""),[k,D]=x.useState((null==(n=null==l?void 0:l.OtherEnquieirs)?void 0:n.hotelDevelopment)||""),[E,T]=x.useState(""),B=z(),W=U(B.breakpoints.down("sm")),A=()=>{d(!1),T("")};return u.jsxs("div",{children:[u.jsx("div",{className:"myGlobalButton",onClick:()=>{var e,t,i,s,a,n;m((null==l?void 0:l.phoneNumber)||""),h((null==l?void 0:l.emailId)||""),v((null==(e=null==l?void 0:l.OtherEnquieirs)?void 0:e.reservations)||""),j((null==(t=null==l?void 0:l.OtherEnquieirs)?void 0:t.corporateSales)||""),y((null==(i=null==l?void 0:l.OtherEnquieirs)?void 0:i.traveAgentSales)||""),w((null==(s=null==l?void 0:l.OtherEnquieirs)?void 0:s.marketing)||""),N((null==(a=null==l?void 0:l.OtherEnquieirs)?void 0:a.careers)||""),D((null==(n=null==l?void 0:l.OtherEnquieirs)?void 0:n.hotelDevelopment)||""),d(!0)},children:"Contact Us Page"}),u.jsxs(F,{open:o,onClose:A,fullScreen:W,maxWidth:"sm",fullWidth:!0,children:[u.jsxs(O,{sx:{m:0,p:2},children:[u.jsx(R,{variant:"h6",children:"Contact Details"}),u.jsx(L,{"aria-label":"close",onClick:A,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:u.jsx(M,{})})]}),u.jsxs(q,{dividers:!0,children:[E&&u.jsx($,{severity:"error",sx:{mb:2},children:E}),u.jsxs(G,{spacing:2,children:[u.jsx(J,{label:"Phone Number",value:c,onChange:e=>m(e.target.value),fullWidth:!0,required:!0}),u.jsx(J,{label:"Email",value:g,onChange:e=>h(e.target.value),fullWidth:!0,required:!0,type:"email",helperText:"Enter a valid email address (e.g., example@example.com)"}),u.jsx("h1",{className:"text-desktop/h4 py-4",children:"  Other Enquiries"}),u.jsx(J,{label:"Reservations",value:p,onChange:e=>v(e.target.value),fullWidth:!0}),u.jsx(J,{label:"Corporate Sales",value:b,onChange:e=>j(e.target.value),fullWidth:!0}),u.jsx(J,{label:"Travel Agent Sales",value:f,onChange:e=>y(e.target.value),fullWidth:!0}),u.jsx(J,{label:"Marketing",value:C,onChange:e=>w(e.target.value),fullWidth:!0}),u.jsx(J,{label:"Careers",value:S,onChange:e=>N(e.target.value),fullWidth:!0}),u.jsx(J,{label:"Hotel Development",value:k,onChange:e=>D(e.target.value),fullWidth:!0})]})]}),u.jsxs(Q,{sx:{p:2},children:[u.jsx(V,{onClick:A,color:"inherit",children:"Cancel"}),u.jsx(V,{onClick:()=>{c&&g?(r({phoneNumber:c,emailId:g,OtherEnquieirs:{reservations:p,corporateSales:b,traveAgentSales:f,marketing:C,careers:S,hotelDevelopment:k}}),d(!1)):T("Please fill in all required fields.")},variant:"contained",color:"primary",children:"Update"})]})]})]})},wt=()=>{const{CoorporateBooking:e,updtateCoorporateBooking:t}=_(),[i,s]=x.useState({CoorporateBookingHeadContent:{title:"",description:"",image:""},CoorporateBookingDescription:{title:"",description:"",image:""},BusinessPlatformSection:[],BenefitsSection:[]}),[a,n]=x.useState(!1),[l,d]=x.useState(!1),[c,m]=x.useState(!1);x.useEffect((()=>{var t,i,a,n,l,r;e&&s({CoorporateBookingHeadContent:{title:(null==(t=e.CoorporateBookingHeadContent)?void 0:t.title)||"",description:(null==(i=e.CoorporateBookingHeadContent)?void 0:i.description)||"",image:(null==(a=e.CoorporateBookingHeadContent)?void 0:a.image)||""},CoorporateBookingDescription:{title:(null==(n=e.CoorporateBookingDescription)?void 0:n.title)||"",description:(null==(l=e.CoorporateBookingDescription)?void 0:l.description)||"",image:(null==(r=e.CoorporateBookingDescription)?void 0:r.image)||""},BusinessPlatformSection:e.BusinessPlatformSection||[],BenefitsSection:e.BenefitsSection||[]})}),[e]);const g=(e,t,i)=>{s((s=>o(r({},s),{[e]:o(r({},s[e]),{[t]:i})})))},h=(e,t,i)=>{s((s=>{const a=[...s.BenefitsSection];return a[e]=o(r({},a[e]),{[t]:i}),o(r({},s),{BenefitsSection:a})}))};return u.jsxs("div",{children:[u.jsx("div",{className:"myGlobalButton",onClick:()=>m(!0),children:"Corporate Booking Page"}),u.jsxs(F,{open:c,onClose:()=>m(!1),fullWidth:!0,maxWidth:"md",children:[u.jsx(O,{children:"Corporate Booking"}),u.jsxs("form",{onSubmit:e=>{e.preventDefault(),t(i),m(!1)},children:[u.jsxs(q,{children:[u.jsxs(Y,{sx:{mb:4},children:[u.jsx(R,{variant:"h5",gutterBottom:!0,children:"Head Content"}),u.jsxs(K,{container:!0,spacing:2,direction:"column",children:[u.jsx(K,{item:!0,children:u.jsx(J,{label:"Title",fullWidth:!0,value:i.CoorporateBookingHeadContent.title,onChange:e=>g("CoorporateBookingHeadContent","title",e.target.value)})}),u.jsxs(K,{item:!0,children:[u.jsx(fe,{feature:i.CoorporateBookingHeadContent,handleFeatureChange:(e,t)=>g("CoorporateBookingHeadContent",e,t),index:0,setImageUpload:n}),i.CoorporateBookingHeadContent.image&&u.jsx(Y,{mt:1,children:u.jsx("img",{src:i.CoorporateBookingHeadContent.image,alt:"Preview",style:{width:50,height:50,objectFit:"cover",borderRadius:4}})})]}),u.jsx(K,{item:!0,children:u.jsx(J,{label:"Description",fullWidth:!0,multiline:!0,rows:4,value:i.CoorporateBookingHeadContent.description,onChange:e=>g("CoorporateBookingHeadContent","description",e.target.value)})})]})]}),u.jsxs(Y,{sx:{mb:4},children:[u.jsx(R,{variant:"h5",gutterBottom:!0,children:"Description Content"}),u.jsxs(K,{container:!0,spacing:2,direction:"column",children:[u.jsx(K,{item:!0,children:u.jsx(J,{label:"Title",fullWidth:!0,value:i.CoorporateBookingDescription.title,onChange:e=>g("CoorporateBookingDescription","title",e.target.value)})}),u.jsxs(K,{item:!0,children:[u.jsx(fe,{feature:i.CoorporateBookingDescription,handleFeatureChange:(e,t)=>g("CoorporateBookingDescription",e,t),index:1,setImageUpload:d}),i.CoorporateBookingDescription.image&&u.jsx(Y,{mt:1,children:u.jsx("img",{src:i.CoorporateBookingDescription.image,alt:"Preview",style:{width:50,height:50,objectFit:"cover",borderRadius:4}})})]}),u.jsx(K,{item:!0,children:u.jsx(J,{label:"Description",fullWidth:!0,multiline:!0,rows:4,value:i.CoorporateBookingDescription.description,onChange:e=>g("CoorporateBookingDescription","description",e.target.value)})})]})]}),u.jsxs(Y,{sx:{mb:2},children:[u.jsx(R,{variant:"h5",gutterBottom:!0,children:"Benefits Section"}),i.BenefitsSection.map(((e,t)=>u.jsx(Y,{sx:{mb:2,border:"1px solid #ccc",borderRadius:1,p:2},children:u.jsxs(K,{container:!0,spacing:2,direction:"column",children:[u.jsx(K,{item:!0,children:u.jsx(J,{label:"Title",fullWidth:!0,value:e.title,onChange:e=>h(t,"title",e.target.value)})}),u.jsx(K,{item:!0,children:u.jsx(J,{label:"Description",fullWidth:!0,multiline:!0,minRows:2,value:e.description,onChange:e=>h(t,"description",e.target.value)})}),u.jsx(K,{item:!0,children:u.jsx(L,{onClick:()=>(e=>{s((t=>o(r({},t),{BenefitsSection:t.BenefitsSection.filter(((t,i)=>i!==e))})))})(t),color:"error",children:u.jsx(X,{})})})]})},t))),u.jsx(V,{variant:"outlined",onClick:()=>{s((e=>e.BenefitsSection.length>=6?e:o(r({},e),{BenefitsSection:[...e.BenefitsSection,{title:"",description:""}]})))},disabled:i.BenefitsSection.length>=6,children:"Add Benefit"})]})]}),u.jsx(Q,{children:a||l?u.jsx(Z,{}):u.jsxs(u.Fragment,{children:[u.jsx(V,{onClick:()=>m(!1),children:"Cancel"}),u.jsx(V,{type:"submit",variant:"contained",color:"primary",children:"Save Changes"})]})})]})]})]})},St=({open:e,onClose:t,title:i,children:s})=>e?u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),u.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[92vh] overflow-hidden rounded-2xl bg-white shadow-2xl animate-in fade-in zoom-in-95 duration-300",children:[u.jsxs("div",{className:"sticky top-0 z-20 flex items-center justify-between gap-4 border-b border-gray-200 bg-gradient-to-r from-slate-50 to-white px-6 py-4",children:[u.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:i}),u.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100",onClick:t,children:u.jsx(p,{size:20,className:"text-gray-600"})})]}),u.jsx("div",{className:"overflow-y-auto p-6 max-h-[calc(92vh-60px)]",children:s})]})]}):null,Nt=e=>{var t=e,{label:i}=t,s=d(t,["label"]);return u.jsxs("label",{className:"block group",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:i}),u.jsx("input",o(r({},s),{className:`w-full rounded-lg border border-gray-300 px-4 py-2.5 outline-none transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 hover:border-gray-400 ${s.className||""}`}))]})},kt=e=>{var t=e,{label:i}=t,s=d(t,["label"]);return u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:i}),u.jsx("textarea",o(r({},s),{className:`w-full rounded-lg border border-gray-300 px-4 py-2.5 outline-none transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 hover:border-gray-400 min-h-[90px] resize-none ${s.className||""}`}))]})},Dt=({title:e,children:t,onSave:i,saving:s,actions:a})=>u.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gradient-to-br from-white to-gray-50 p-6 shadow-sm hover:shadow-md transition-shadow duration-300",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e}),u.jsxs("div",{className:"flex items-center gap-2",children:[a,i&&u.jsx("button",{onClick:i,disabled:s,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-2 text-sm font-medium text-white shadow-md hover:shadow-lg disabled:opacity-60",children:s?u.jsxs(u.Fragment,{children:[u.jsx(m,{size:16,className:"animate-spin"}),"Saving…"]}):u.jsxs(u.Fragment,{children:[u.jsx(v,{size:16}),"Save"]})})]})]}),u.jsx("div",{className:"space-y-4",children:t})]}),Et=()=>u.jsx("div",{className:"my-8 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),Tt=()=>{const[e,t]=x.useState(!1),{data:i,isFetching:s}=ye({enabled:e}),a=Ce(),n=we(),l=Se(),d=Ne(),c=ke(),p=De(),j=Ee(),[f,y]=x.useState({heading:"",description:""}),[C,w]=x.useState({heading:"",description:""}),S=x.useMemo((()=>{var e;return null!=(e=null==i?void 0:i.benefits)?e:[]}),[i]),[N,k]=x.useState("");return x.useEffect((()=>{var e,t,s,a,n,l,r,o,d,c;i&&(y({heading:null!=(t=null==(e=null==i?void 0:i.hero)?void 0:e.heading)?t:"",description:null!=(a=null==(s=null==i?void 0:i.hero)?void 0:s.description)?a:""}),w({heading:null!=(l=null==(n=null==i?void 0:i.descCard)?void 0:n.heading)?l:"",description:null!=(o=null==(r=null==i?void 0:i.descCard)?void 0:r.description)?o:""}),k((null!=(c=null==(d=null==i?void 0:i.tandc)?void 0:d.points)?c:[]).join("\n")))}),[i]),u.jsxs("div",{children:[u.jsx("button",{className:"myGlobalButton",onClick:()=>t(!0),children:"Manage Day Use Rooms"}),u.jsxs(St,{open:e,onClose:()=>t(!1),title:"Manage Day-Use Rooms Content",children:[s&&u.jsxs("div",{className:"mb-6 rounded-lg border border-amber-200 bg-gradient-to-r from-amber-50 to-orange-50 p-4 flex items-center gap-3",children:[u.jsx(m,{size:18,className:"text-amber-600 animate-spin"}),u.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Loading latest data…"})]}),u.jsx(Dt,{title:"Hero",onSave:()=>a.mutate(f),saving:a.isPending,children:u.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[u.jsx(Nt,{label:"Heading",value:f.heading,onChange:e=>y((t=>o(r({},t),{heading:e.target.value})))}),u.jsx(kt,{label:"Description",value:f.description,onChange:e=>y((t=>o(r({},t),{description:e.target.value})))})]})}),u.jsx(Et,{}),u.jsx(Dt,{title:"Description Card",onSave:()=>n.mutate(C),saving:n.isPending,children:u.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[u.jsx(Nt,{label:"Heading",value:C.heading,onChange:e=>w((t=>o(r({},t),{heading:e.target.value})))}),u.jsx(kt,{label:"Description",value:C.description,onChange:e=>w((t=>o(r({},t),{description:e.target.value})))})]})}),u.jsx(Et,{}),u.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gradient-to-br from-white to-gray-50 p-6 shadow-sm hover:shadow-md transition-shadow duration-300",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Benefits"}),u.jsx("button",{onClick:()=>l.mutate({title:"New benefit"}),disabled:l.isPending,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-emerald-600 to-emerald-700 px-4 py-2 text-sm font-medium text-white shadow-md hover:shadow-lg disabled:opacity-60",children:l.isPending?u.jsxs(u.Fragment,{children:[u.jsx(m,{size:16,className:"animate-spin"}),"Adding…"]}):u.jsxs(u.Fragment,{children:[u.jsx(g,{size:16}),"Add Benefit"]})})]}),u.jsx("ul",{className:"space-y-3",children:S.length>0?S.map((e=>u.jsx("li",{className:"rounded-lg border border-gray-200 bg-white p-4 hover:shadow-md transition-shadow duration-200",children:u.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-[1fr_auto]",children:[u.jsx(Nt,{label:"Title",value:e.title,onChange:t=>d.mutate({benefitId:e._id,title:t.target.value})}),u.jsx("div",{className:"flex items-end justify-end",children:u.jsxs("button",{onClick:()=>c.mutate(e._id),className:"inline-flex items-center gap-2 rounded-lg bg-red-600 px-3 py-2 text-sm font-medium text-white hover:bg-red-700",children:[u.jsx(h,{size:14}),"Delete"]})})]})},e._id))):u.jsx("li",{className:"rounded-lg border border-dashed border-gray-300 py-8 text-center",children:u.jsx("p",{className:"text-sm text-gray-500",children:"No benefits yet. Add your first one!"})})})]}),u.jsx(Et,{}),u.jsxs(Dt,{title:"Terms & Conditions (Points)",actions:u.jsxs("button",{onClick:()=>k((e=>(e?e+"\n":"")+"• Example: Valid govt. ID required at check-in.")),className:"inline-flex items-center gap-2 rounded-lg border border-emerald-200 px-4 py-2 text-sm font-medium text-emerald-700 hover:bg-emerald-50",children:[u.jsx(b,{size:16}),"Add Example Line"]}),onSave:()=>{const e=N.split("\n").map((e=>e.trim())).filter(Boolean);p.mutate({points:e})},saving:p.isPending,children:[u.jsx(kt,{label:"Points (one per line)",placeholder:"Valid government ID required at check-in.\nStandard check-in after 8 AM; last check-out by 8 PM.\nRates vary by duration and availability.",value:N,onChange:e=>k(e.target.value),className:"min-h-[140px]"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Tip: Write each point on a new line. Bullets will be rendered on the frontend."})]}),u.jsx(Et,{}),u.jsx("div",{className:"flex items-center justify-end",children:u.jsx("button",{onClick:()=>{const e=N.split("\n").map((e=>e.trim())).filter(Boolean);j.mutate({hero:f,descCard:C,tandc:{points:e}})},disabled:j.isPending,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 px-5 py-2.5 text-sm font-semibold text-white shadow-md hover:shadow-lg disabled:opacity-60",children:j.isPending?u.jsxs(u.Fragment,{children:[u.jsx(m,{size:16,className:"animate-spin"}),"Saving All…"]}):u.jsxs(u.Fragment,{children:[u.jsx(v,{size:16}),"Save All Changes"]})})})]})]})},Bt=()=>{const[e,t]=x.useState(!1);return x.useEffect((()=>{if(!e)return;const i=e=>"Escape"===e.key&&t(!1);return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)}),[e]),u.jsxs("div",{children:[u.jsx("button",{className:"myGlobalButton ",onClick:()=>t(!0),children:"Manage Dev & Owners Stats"}),e&&u.jsx(Wt,{onClose:()=>t(!1)})]})},Wt=({onClose:e})=>{const[t,i]=x.useState({approvedCount:0,rejectedCount:0,revivedCount:0}),[s,a]=x.useState(!0),[n,l]=x.useState(!1),[d,m]=x.useState(""),[g,h]=x.useState(!1),p=x.useCallback((()=>c(void 0,null,(function*(){var e,t,s;try{a(!0);const n=yield Te();i({approvedCount:null!=(e=null==n?void 0:n.approvedCount)?e:0,rejectedCount:null!=(t=null==n?void 0:n.rejectedCount)?t:0,revivedCount:null!=(s=null==n?void 0:n.revivedCount)?s:0}),m("")}catch(n){m((null==n?void 0:n.message)||"Failed to load stats")}finally{a(!1)}}))),[]);return x.useEffect((()=>{p()}),[p]),u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),u.jsxs("div",{className:"relative w-full max-w-2xl rounded-2xl bg-white shadow-2xl ring-1 ring-black/5",children:[u.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[u.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Dev & Owners Stats"}),u.jsx("button",{className:"px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200 active:scale-[0.98]",onClick:e,"aria-label":"Close",children:"Close"})]}),u.jsxs("div",{className:"px-6 py-5",children:[d&&u.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:d}),s?u.jsx(It,{}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[u.jsx(Pt,{label:"Approved",value:t.approvedCount,tone:"emerald",onChange:e=>i((t=>o(r({},t),{approvedCount:e})))}),u.jsx(Pt,{label:"Rejected",value:t.rejectedCount,tone:"amber",onChange:e=>i((t=>o(r({},t),{rejectedCount:e})))}),u.jsx(Pt,{label:"Revived",value:t.revivedCount,tone:"indigo",onChange:e=>i((t=>o(r({},t),{revivedCount:e})))})]}),u.jsxs("div",{className:"mt-5 flex flex-wrap gap-2",children:[u.jsx("button",{onClick:()=>c(void 0,null,(function*(){try{l(!0),h(!1);const e={approvedCount:Number(t.approvedCount)||0,rejectedCount:Number(t.rejectedCount)||0,revivedCount:Number(t.revivedCount)||0},s=yield Be(e);i(s),m(""),h(!0),setTimeout((()=>h(!1)),1200)}catch(e){m((null==e?void 0:e.message)||"Save failed")}finally{l(!1)}})),disabled:n,className:"rounded-lg px-4 py-2 bg-cyan-600 text-white hover:bg-cyan-700 disabled:opacity-60 active:scale-[0.99]",children:n?"Saving…":"Save Counts"}),u.jsx("button",{onClick:()=>c(void 0,null,(function*(){if(window.confirm("Reset all counts to 0?"))try{const e=yield We();i(e),m("")}catch(e){m((null==e?void 0:e.message)||"Reset failed")}})),className:"rounded-lg px-4 py-2 bg-gray-100 hover:bg-gray-200 active:scale-[0.99]",children:"Reset to 0"}),g&&u.jsx("span",{className:"text-sm text-emerald-700 bg-emerald-50 border border-emerald-200 px-2 py-1 rounded-md",children:"Saved ✓"})]})]})]})]})]})},At={emerald:{ring:"ring-emerald-200",bg:"bg-emerald-50",text:"text-emerald-700",inputRing:"focus:ring-emerald-400",chip:"bg-emerald-100 hover:bg-emerald-200 text-emerald-700"},amber:{ring:"ring-amber-200",bg:"bg-amber-50",text:"text-amber-700",inputRing:"focus:ring-amber-400",chip:"bg-amber-100 hover:bg-amber-200 text-amber-800"},indigo:{ring:"ring-indigo-200",bg:"bg-indigo-50",text:"text-indigo-700",inputRing:"focus:ring-indigo-400",chip:"bg-indigo-100 hover:bg-indigo-200 text-indigo-700"}},Pt=({label:e,value:t,onChange:i,tone:s="emerald"})=>{const a=At[s]||At.emerald;return u.jsxs("div",{className:`rounded-xl border p-4 ring-1 ${a.ring}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:`text-sm ${a.text}`,children:e}),u.jsx("span",{className:"text-xs text-gray-400",children:"editable"})]}),u.jsx("div",{className:"flex items-end justify-between gap-3",children:u.jsx("input",{type:"number",min:0,value:null!=t?t:0,onChange:e=>i(Math.max(0,Number(e.target.value))),className:`w-28 rounded-md border border-gray-300 px-3 py-2 outline-none focus:ring-2 ${a.inputRing}`})})]})},It=()=>u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[0,1,2].map((e=>u.jsxs("div",{className:"rounded-xl border p-4",children:[u.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded mb-3 animate-pulse"}),u.jsxs("div",{className:"flex items-end justify-between",children:[u.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}),u.jsx("div",{className:"h-10 w-28 bg-gray-200 rounded animate-pulse"})]})]},e)))});function Ht(e){var t=e,{children:i,value:s,index:a}=t,n=d(t,["children","value","index"]);return u.jsx("div",o(r({role:"tabpanel",hidden:s!==a,id:`event-tabpanel-${a}`,"aria-labelledby":`event-tab-${a}`},n),{children:s===a&&u.jsx(Y,{sx:{p:3},children:i})}))}const _t=()=>{var e,t;const[i,s]=x.useState(!1),[a,n]=x.useState(0),[l,d]=x.useState("eventandconf"),[c,m]=x.useState("view"),g=[{slug:"eventandconf",name:"Event and Conference (Parent)",type:"parent"},{slug:"socialevent",name:"Social Events",type:"child"},{slug:"corporateevent",name:"Corporate Events",type:"child"},{slug:"weddingprewedding",name:"Wedding & Pre-Wedding",type:"child"}];Ae(!1);const{data:h,isLoading:p,refetch:v}=Pe(l);Ie(),He();const{mutate:b,isPending:j}=_e(),{mutate:f,isPending:y}=ze();Ue();const[C,w]=x.useState({pageSlug:"",pageName:"",pageType:"parent",active:!0,heroSection:{heading:"",subheading:"",description:""},ourEvents:[],celebrationsSeamless:{title:"",description:"",benefits:[]},descriptionText:"",celebrationTypes:{heading:"",description:"",types:[]},meta:{title:"",description:"",keywords:[],ogImage:""}}),[S,N]=x.useState(!1);x.useEffect((()=>{(null==h?void 0:h.data)&&"view"===c&&w({pageSlug:h.data.pageSlug||"",pageName:h.data.pageName||"",pageType:h.data.pageType||"parent",active:h.data.active||!1,heroSection:h.data.heroSection||{heading:"",subheading:"",description:""},ourEvents:h.data.ourEvents||[],celebrationsSeamless:h.data.celebrationsSeamless||{title:"",description:"",benefits:[]},descriptionText:h.data.descriptionText||"",celebrationTypes:h.data.celebrationTypes||{heading:"",description:"",types:[]},meta:h.data.meta||{title:"",description:"",keywords:[],ogImage:""}})}),[h,c]);const k=()=>{s(!1),m("view"),n(0)},D=(e,t,i)=>{w((s=>o(r({},s),{ourEvents:s.ourEvents.map(((s,a)=>a===e?o(r({},s),{[t]:i}):s))})))},E=(e,t,i)=>{w((s=>o(r({},s),{celebrationTypes:o(r({},s.celebrationTypes),{types:s.celebrationTypes.types.map(((s,a)=>a===e?o(r({},s),{[t]:i}):s))})})))},T=(e,t,i)=>{w((s=>o(r({},s),{celebrationsSeamless:o(r({},s.celebrationsSeamless),{benefits:s.celebrationsSeamless.benefits.map(((s,a)=>a===e?o(r({},s),{[t]:i}):s))})})))},B=(null==(e=g.find((e=>e.slug===l)))?void 0:e.type)||"parent";return u.jsxs("div",{children:[u.jsx("button",{className:"myGlobalButton",onClick:()=>s(!0),children:"Event & Conference Pages"}),u.jsxs(F,{open:i,onClose:k,maxWidth:"lg",fullWidth:!0,children:[u.jsx(O,{sx:{borderBottom:1,borderColor:"divider",pb:2},children:u.jsxs(Y,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[u.jsx("span",{children:"Manage Event & Conference Pages"}),(null==h?void 0:h.data)&&u.jsx(ee,{label:h.data.active?"Active":"Inactive",color:h.data.active?"success":"default",size:"small"})]})}),u.jsxs(q,{dividers:!0,sx:{minHeight:"500px"},children:[u.jsxs(te,{fullWidth:!0,margin:"normal",sx:{mb:3},children:[u.jsx(ie,{children:"Select Page"}),u.jsx(se,{value:l,onChange:e=>{d(e.target.value),m("view")},label:"Select Page",children:g.map((e=>u.jsx(ae,{value:e.slug,children:e.name},e.slug)))})]}),p?u.jsx(Y,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",children:u.jsx(Z,{})}):(null==h?void 0:h.data)?u.jsxs(u.Fragment,{children:[u.jsx(Y,{mb:2,children:u.jsx(ne,{control:u.jsx(le,{checked:h.data.active,onChange:()=>{f(l,{onSuccess:()=>v()})},disabled:y}),label:h.data.active?"Page is Active":"Page is Inactive"})}),u.jsxs(re,{value:a,onChange:(e,t)=>n(t),sx:{mb:2},children:[u.jsx(oe,{label:"Hero Section"}),"parent"===B&&u.jsx(oe,{label:"Our Events"}),"parent"===B&&u.jsx(oe,{label:"Celebrations Seamless"}),"child"===B&&u.jsx(oe,{label:"Description"}),"child"===B&&u.jsx(oe,{label:"Celebration Types"})]}),u.jsx(Ht,{value:a,index:0,children:u.jsxs(de,{elevation:2,sx:{p:3},children:[u.jsx(J,{fullWidth:!0,label:"Heading",margin:"normal",value:C.heroSection.heading,onChange:e=>w((t=>o(r({},t),{heroSection:o(r({},t.heroSection),{heading:e.target.value})})))}),u.jsx(J,{fullWidth:!0,label:"Subheading",margin:"normal",value:C.heroSection.subheading,onChange:e=>w((t=>o(r({},t),{heroSection:o(r({},t.heroSection),{subheading:e.target.value})})))}),u.jsx(J,{fullWidth:!0,label:"Description",margin:"normal",multiline:!0,rows:3,value:C.heroSection.description,onChange:e=>w((t=>o(r({},t),{heroSection:o(r({},t.heroSection),{description:e.target.value})})))}),u.jsx(V,{variant:"contained",startIcon:u.jsx(ce,{}),onClick:()=>{b({slug:l,section:"heroSection",sectionData:C.heroSection},{onSuccess:()=>v()})},disabled:j,sx:{mt:2},children:"Save Hero Section"})]})}),"parent"===B&&u.jsxs(Ht,{value:a,index:1,children:[u.jsx(Y,{mb:2,children:u.jsx(V,{variant:"outlined",startIcon:u.jsx(ue,{}),onClick:()=>{w((e=>o(r({},e),{ourEvents:[...e.ourEvents,{image:"",title:"",description:""}]})))},children:"Add Event"})}),C.ourEvents.map(((e,t)=>u.jsxs(de,{elevation:2,sx:{p:2,mb:2,position:"relative"},children:[u.jsx(L,{onClick:()=>(e=>{w((t=>o(r({},t),{ourEvents:t.ourEvents.filter(((t,i)=>i!==e))})))})(t),sx:{position:"absolute",top:8,right:8},color:"error",children:u.jsx(X,{})}),u.jsx(fe,{feature:e,handleFeatureChange:(e,i)=>D(t,e,i),setImageUpload:N,index:`our-event-${t}`}),u.jsx(J,{fullWidth:!0,label:"Title",margin:"normal",value:e.title,onChange:e=>D(t,"title",e.target.value)}),u.jsx(J,{fullWidth:!0,label:"Description",margin:"normal",multiline:!0,rows:2,value:e.description,onChange:e=>D(t,"description",e.target.value)})]},t))),u.jsx(V,{variant:"contained",startIcon:u.jsx(ce,{}),onClick:()=>{"parent"===C.pageType&&b({slug:l,section:"ourEvents",sectionData:C.ourEvents},{onSuccess:()=>v()})},disabled:j||S,sx:{mt:2},children:S?"Uploading Image...":"Save Our Events"})]}),"parent"===B&&u.jsxs(Ht,{value:a,index:2,children:[u.jsxs(de,{elevation:2,sx:{p:3,mb:2},children:[u.jsx(J,{fullWidth:!0,label:"Title",margin:"normal",value:C.celebrationsSeamless.title,onChange:e=>w((t=>o(r({},t),{celebrationsSeamless:o(r({},t.celebrationsSeamless),{title:e.target.value})})))}),u.jsx(J,{fullWidth:!0,label:"Description",margin:"normal",multiline:!0,rows:4,value:C.celebrationsSeamless.description,onChange:e=>w((t=>o(r({},t),{celebrationsSeamless:o(r({},t.celebrationsSeamless),{description:e.target.value})})))})]}),u.jsx(Y,{mb:2,children:u.jsx(V,{variant:"outlined",startIcon:u.jsx(ue,{}),onClick:()=>{w((e=>o(r({},e),{celebrationsSeamless:o(r({},e.celebrationsSeamless),{benefits:[...e.celebrationsSeamless.benefits,{title:"",description:""}]})})))},children:"Add Benefit"})}),null==(t=C.celebrationsSeamless.benefits)?void 0:t.map(((e,t)=>u.jsxs(de,{elevation:2,sx:{p:2,mb:2,position:"relative"},children:[u.jsx(L,{onClick:()=>(e=>{w((t=>o(r({},t),{celebrationsSeamless:o(r({},t.celebrationsSeamless),{benefits:t.celebrationsSeamless.benefits.filter(((t,i)=>i!==e))})})))})(t),sx:{position:"absolute",top:8,right:8},color:"error",children:u.jsx(X,{})}),u.jsx(J,{fullWidth:!0,label:"Benefit Title",margin:"normal",value:e.title,onChange:e=>T(t,"title",e.target.value)}),u.jsx(J,{fullWidth:!0,label:"Benefit Description",margin:"normal",multiline:!0,rows:2,value:e.description,onChange:e=>T(t,"description",e.target.value)})]},t))),u.jsx(V,{variant:"contained",startIcon:u.jsx(ce,{}),onClick:()=>{"parent"===C.pageType&&b({slug:l,section:"celebrationsSeamless",sectionData:C.celebrationsSeamless},{onSuccess:()=>v()})},disabled:j,sx:{mt:2},children:"Save Celebrations Seamless"})]}),"child"===B&&u.jsx(Ht,{value:a,index:1,children:u.jsxs(de,{elevation:2,sx:{p:3},children:[u.jsx(J,{fullWidth:!0,label:"Description Text",margin:"normal",multiline:!0,rows:6,value:C.descriptionText,onChange:e=>w((t=>o(r({},t),{descriptionText:e.target.value}))),helperText:"Main paragraph text for this page"}),u.jsx(V,{variant:"contained",startIcon:u.jsx(ce,{}),onClick:()=>{"child"===C.pageType&&b({slug:l,section:"descriptionText",sectionData:{value:C.descriptionText}},{onSuccess:()=>v()})},disabled:j,sx:{mt:2},children:"Save Description"})]})}),"child"===B&&u.jsxs(Ht,{value:a,index:2,children:[u.jsxs(de,{elevation:2,sx:{p:3,mb:2},children:[u.jsx(J,{fullWidth:!0,label:"Section Heading",margin:"normal",value:C.celebrationTypes.heading,onChange:e=>w((t=>o(r({},t),{celebrationTypes:o(r({},t.celebrationTypes),{heading:e.target.value})})))}),u.jsx(J,{fullWidth:!0,label:"Section Description",margin:"normal",multiline:!0,rows:2,value:C.celebrationTypes.description,onChange:e=>w((t=>o(r({},t),{celebrationTypes:o(r({},t.celebrationTypes),{description:e.target.value})})))})]}),u.jsx(Y,{mb:2,children:u.jsx(V,{variant:"outlined",startIcon:u.jsx(ue,{}),onClick:()=>{w((e=>o(r({},e),{celebrationTypes:o(r({},e.celebrationTypes),{types:[...e.celebrationTypes.types,{image:"",title:""}]})})))},children:"Add Celebration Type"})}),C.celebrationTypes.types.map(((e,t)=>u.jsxs(de,{elevation:2,sx:{p:2,mb:2,position:"relative"},children:[u.jsx(L,{onClick:()=>(e=>{w((t=>o(r({},t),{celebrationTypes:o(r({},t.celebrationTypes),{types:t.celebrationTypes.types.filter(((t,i)=>i!==e))})})))})(t),sx:{position:"absolute",top:8,right:8},color:"error",children:u.jsx(X,{})}),u.jsx(fe,{feature:e,handleFeatureChange:(e,i)=>E(t,e,i),setImageUpload:N,index:`celebration-type-${t}`}),u.jsx(J,{fullWidth:!0,label:"Title",margin:"normal",value:e.title,onChange:e=>E(t,"title",e.target.value)})]},t))),u.jsx(V,{variant:"contained",startIcon:u.jsx(ce,{}),onClick:()=>{"child"===C.pageType&&b({slug:l,section:"celebrationTypes",sectionData:C.celebrationTypes},{onSuccess:()=>v()})},disabled:j||S,sx:{mt:2},children:S?"Uploading Image...":"Save Celebration Types"})]}),u.jsx(Ht,{value:a,index:3,children:u.jsxs(de,{elevation:2,sx:{p:3},children:[u.jsx(J,{fullWidth:!0,label:"Meta Title",margin:"normal",value:C.meta.title,onChange:e=>w((t=>o(r({},t),{meta:o(r({},t.meta),{title:e.target.value})})))}),u.jsx(J,{fullWidth:!0,label:"Meta Description",margin:"normal",multiline:!0,rows:2,value:C.meta.description,onChange:e=>w((t=>o(r({},t),{meta:o(r({},t.meta),{description:e.target.value})})))}),u.jsx(Y,{mt:2,children:u.jsx(fe,{feature:{image:C.meta.ogImage},handleFeatureChange:(e,t)=>w((e=>o(r({},e),{meta:o(r({},e.meta),{ogImage:t})}))),setImageUpload:N,index:"meta-og-image"})}),u.jsx(V,{variant:"contained",startIcon:u.jsx(ce,{}),onClick:()=>b({slug:l,section:"meta",sectionData:C.meta},{onSuccess:()=>v()}),disabled:j,sx:{mt:2},children:"Save Meta Tags"})]})})]}):u.jsx($,{severity:"info",children:"This page doesn't exist yet. Content will be created when you save."})]}),u.jsx(Q,{sx:{p:2,borderTop:1,borderColor:"divider"},children:u.jsx(V,{onClick:k,children:"Close"})})]})]})},zt=()=>{const[e,t]=x.useState([]),[i,s]=x.useState([]),[a,n]=x.useState(!1),[l,d]=x.useState("Day Stays Rooms"),{data:c,isLoading:m,error:g}=Fe(l),{mutate:h}=Oe(),{mutate:p}=Re();x.useEffect((()=>{c&&Array.isArray(c)&&t(c)}),[c]);const v=(i,s,a)=>{const n=[...e];n[i]=o(r({},n[i]),{[s]:a}),t(n)},b=()=>n(!1);return u.jsxs("div",{children:[u.jsx("div",{className:"myGlobalButton",onClick:()=>n(!0),children:"Manage FAQs"}),u.jsxs(F,{open:a,onClose:b,maxWidth:"md",fullWidth:!0,children:[u.jsx(O,{children:"Manage FAQs"}),u.jsxs(q,{dividers:!0,children:[u.jsxs(te,{fullWidth:!0,margin:"normal",children:[u.jsx(ie,{children:"Choose Page"}),u.jsx(se,{value:l,onChange:e=>{d(e.target.value)},label:"Choose Page",children:["Day Stays Rooms","Events & Conference","corporate-booking","Career"].map((e=>u.jsx(ae,{value:e,className:"",children:e},e)))})]}),m&&u.jsx("p",{children:"Loading..."}),g&&u.jsxs("p",{children:["Error: ",g.message]}),e.map(((i,a)=>u.jsxs(de,{sx:{p:2,mb:2,position:"relative"},elevation:3,children:[u.jsx(L,{onClick:()=>(i=>{const a=e[i];a._id&&s((e=>[...e,a._id])),t((e=>e.filter(((e,t)=>t!==i))))})(a),sx:{position:"absolute",top:8,right:8},color:"error",children:u.jsx(X,{})}),u.jsx(J,{label:"Question",fullWidth:!0,margin:"normal",value:i.question,onChange:e=>v(a,"question",e.target.value)}),u.jsx(J,{label:"Answer",fullWidth:!0,margin:"normal",value:i.answer,onChange:e=>v(a,"answer",e.target.value)})]},a))),u.jsx(V,{variant:"outlined",onClick:()=>{t([...e,{question:"",answer:""}])},sx:{mr:2},children:"Add FAQ"})]}),u.jsxs(Q,{children:[u.jsx(V,{onClick:b,children:"Cancel"}),u.jsx(V,{variant:"contained",onClick:()=>{const t=e.filter((e=>!e._id&&e.question&&e.answer)).map((e=>o(r({},e),{page:l})));0!==t.length||0!==i.length?(t.length>0&&h(t),i.forEach((e=>p(e))),s([]),n(!1)):alert("Please add at least one new FAQ with a question and answer.")},children:"Add Multiple FAQs"})]})]})]})},Ut=[{value:"default",label:"Default (Global)"},{value:"travelAgent",label:"Travel Agent"},{value:"career",label:"Career"}],Ft=()=>{const{galleryImages:e,addGalleryImages:t}=_(),[i,s]=x.useState(!1),[a,n]=x.useState([]),[l,r]=x.useState([]),[o,d]=x.useState(!1),[m,g]=x.useState(0),[h,p]=x.useState(""),[b,C]=x.useState(null),[w,S]=x.useState("#ffffff"),[N,k]=x.useState("default");x.useEffect((()=>{if(!e)return;const t=(null==e?void 0:e[N])||(null==e?void 0:e.default)||e,i=Array.isArray(null==t?void 0:t.images)?t.images:[],s=Array.isArray(null==t?void 0:t.content)?t.content:[];n(i),r(s)}),[e,N]);const D=()=>{d(!1),E()},E=()=>{C(null),p(""),S("#ffffff")};return u.jsxs("div",{children:[u.jsx("div",{className:"myGlobalButton",onClick:()=>d(!0),children:"Edit Gallery"}),u.jsx(me,{open:o,onClose:D,"aria-labelledby":"gallery-modal-title",children:u.jsxs(Y,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:1400,height:700,bgcolor:"background.paper",boxShadow:24,p:4,overflow:"auto"},children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 gap-4 flex-wrap",children:[u.jsx(R,{variant:"h5",id:"gallery-modal-title",children:"Edit Gallery"}),u.jsx(J,{select:!0,size:"small",label:"Path",value:N,onChange:e=>k(e.target.value),sx:{minWidth:220},helperText:"Choose grid scope (keeps data separate)",children:Ut.map((e=>u.jsx(ae,{value:e.value,children:e.label},e.value)))}),u.jsx(V,{variant:"contained",onClick:()=>c(void 0,null,(function*(){try{const e={massonaryGrid:{images:a,content:l},path:N};yield t(e),y.success(`Gallery updated for "${N}"!`),D()}catch(e){y.error("Failed to update gallery")}})),startIcon:u.jsx(v,{size:18}),disabled:i,children:"Save All Changes"})]}),u.jsxs(re,{value:m,onChange:(e,t)=>{g(t),E()},children:[u.jsx(oe,{label:"Upload Images"}),u.jsx(oe,{label:"Manage Content"})]}),u.jsxs("div",{className:"mt-4",children:[0===m&&u.jsxs("div",{children:[u.jsxs(R,{variant:"h6",className:"mb-4",children:["Image Gallery (",N,")"]}),u.jsx(Me,{onUploadSuccess:e=>c(void 0,null,(function*(){if(0!==e.length){s(!0);try{const t=yield Le(e),i=(Array.isArray(t)?t:[t])[0].imageUrls||[];n((e=>[...e,...i])),y.success("Images uploaded successfully!")}catch(t){y.error("Error uploading images")}finally{s(!1)}}else y.error("No images selected")})),isUploading:i,imagesUrls:a,onRemoveImageUrl:e=>{n((t=>t.filter((t=>t!==e))))}})]}),1===m&&u.jsxs("div",{children:[u.jsxs(R,{variant:"h6",className:"mb-4",children:[null!==b?"Edit Content":"Add New Content"," (",N,")"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsx(J,{fullWidth:!0,multiline:!0,rows:3,value:h,onChange:e=>p(e.target.value),placeholder:"Enter your content here..."}),u.jsxs("div",{children:[u.jsx(R,{children:"Color"}),u.jsx("div",{className:"flex gap-2 mt-2",children:["#4DB8B6","#4DD0E2","#C4C4C4","#FDD304","#F1B300","#FFE566","#FFE359","#00E0FF","#BDD9D8"].map((e=>u.jsx("div",{className:"w-8 h-8 rounded-full cursor-pointer border-2 "+(w===e?"border-black":"border-transparent"),style:{backgroundColor:e},onClick:()=>S(e)},e)))}),u.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[u.jsx("div",{className:"w-24 h-24 rounded border",style:{backgroundColor:w}}),u.jsxs("div",{className:"space-x-2",children:[u.jsx(V,{variant:"contained",onClick:()=>{if(!h.trim())return void y.error("Please enter some content");const e={type:"div",content:h,bg:w};null!==b?(r((t=>t.map(((t,i)=>i===b?e:t)))),y.success("Content updated successfully!")):(r((t=>[...t,e])),y.success("Content added successfully!")),E()},children:null!==b?"Update":"Add"}),null!==b&&u.jsx(V,{variant:"outlined",onClick:E,children:"Cancel"})]})]})]})]}),u.jsxs("div",{className:"border-l pl-4",children:[u.jsx(R,{variant:"h6",className:"mb-4",children:"Existing Content"}),u.jsx("div",{className:"space-y-4",children:l.map(((e,t)=>u.jsxs("div",{className:"p-4 rounded relative",style:{backgroundColor:e.bg},children:[u.jsx("p",{children:e.content}),u.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[u.jsx("button",{onClick:()=>(e=>{const t=l[e];C(e),p(t.content||""),S(t.bg||"#ffffff")})(t),className:"p-1 hover:bg-black/10 rounded",children:u.jsx(j,{size:16})}),u.jsx("button",{onClick:()=>(e=>{r((t=>t.filter(((t,i)=>i!==e)))),y.success("Content deleted successfully!")})(t),className:"p-1 hover:bg-black/10 rounded",children:u.jsx(f,{size:16})})]})]},t)))})]})]})]})]}),u.jsx(Q,{children:u.jsx(V,{onClick:D,children:"Close"})})]})})]})},Ot={image:"",heading:"",description:""},Rt=()=>{const{heroSectionUpdate:e,updateHerosection:t,homePageDescription:i,updateHomepageDescriptionData:s,whatMakesUsShineData:a,upsertWhatMakesUsShine:n}=_(),[l,d]=x.useState({heading:"",description:"",image:""}),[m,g]=x.useState(null),[h,p]=x.useState(""),[v,b]=x.useState({heading:"",description:""}),[j,f]=x.useState({heading:"",description:""}),[y,C]=x.useState([Ot,Ot,Ot]),[w,S]=x.useState(null),[N,k]=x.useState(!1);x.useEffect((()=>{e&&d({heading:e.heading||"",description:e.description||"",image:e.image||""})}),[e]),x.useEffect((()=>{i&&b({heading:i.heading||"",description:i.description||""})}),[i]),x.useEffect((()=>{a&&(f({heading:a.heading||"",description:a.description||""}),Array.isArray(a.items)&&3===a.items.length&&C(a.items.map((e=>({image:e.image||"",heading:e.heading||"",description:e.description||""})))))}),[a]),x.useEffect((()=>()=>{h&&URL.revokeObjectURL(h)}),[h]);const D=()=>{if(k(!1),h)try{URL.revokeObjectURL(h)}catch(e){}g(null),p(""),S(null)},E=e=>{const{name:t,value:i}=e.target;d((e=>o(r({},e),{[t]:i})))},T=e=>{const{name:t,value:i}=e.target;b((e=>o(r({},e),{[t]:i})))},B=e=>{const{name:t,value:i}=e.target;f((e=>o(r({},e),{[t]:i})))},W=(e,t,i)=>{C((s=>{const a=[...s];return a[e]=o(r({},a[e]),{[t]:i}),a}))};return u.jsxs("div",{children:[u.jsx("div",{onClick:()=>k(!0),className:"h-[150px] max-w-md bg-white rounded-xl text-center shadow-lg hover:shadow-xl cursor-pointer font-semibold p-10 text-2xl",children:"Home Page Data"}),u.jsxs(F,{open:N,onClose:D,fullWidth:!0,maxWidth:"md",children:[u.jsxs(O,{sx:{m:0,p:2},children:["Home Page Data",u.jsx(L,{"aria-label":"close",onClick:D,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:u.jsx(M,{})})]}),u.jsxs(q,{dividers:!0,children:[u.jsxs(Y,{sx:{mb:3},children:[u.jsx("h1",{className:"text-desktop/h4 p",children:"Hero Section Data"}),u.jsx(J,{name:"heading",label:"Hero Heading",value:l.heading,onChange:E,fullWidth:!0,margin:"normal"}),u.jsx(J,{name:"description",label:"Hero Description",value:l.description,onChange:E,fullWidth:!0,margin:"normal",multiline:!0,rows:4}),u.jsxs(G,{direction:"row",spacing:2,alignItems:"center",sx:{mt:1},children:[u.jsxs(V,{variant:"outlined",component:"label",children:["Upload Hero Image",u.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:e=>{var t;return(t=>{if(!t)return;if(h)try{URL.revokeObjectURL(h)}catch(e){}const i=URL.createObjectURL(t);g(t),p(i)})((null==(t=e.target.files)?void 0:t[0])||null)}})]}),(h||l.image)&&u.jsx(ge,{title:"Preview",arrow:!0,children:u.jsx("img",{src:h||l.image,alt:"hero-preview",style:{height:48,width:80,objectFit:"cover",borderRadius:6,border:"1px solid #eee"},onError:e=>e.currentTarget.style.display="none"})})]})]}),u.jsx(he,{sx:{my:3}}),u.jsxs(Y,{sx:{mb:3},children:[u.jsx("h1",{className:"text-desktop/h4 py-4",children:"Home Page Description"}),u.jsx(J,{label:"Home Page Heading",variant:"outlined",name:"heading",fullWidth:!0,value:v.heading,onChange:T,sx:{mb:2}}),u.jsx(J,{label:"Home Page Description",variant:"outlined",name:"description",fullWidth:!0,multiline:!0,rows:4,value:v.description,onChange:T,sx:{mb:2}})]}),u.jsx(he,{sx:{my:3}}),u.jsxs(Y,{children:[u.jsx("h1",{className:"text-desktop/h4 py-2",children:"What Makes Us Shine"}),u.jsxs(K,{container:!0,spacing:2,sx:{mb:2},children:[u.jsx(K,{item:!0,xs:12,md:6,children:u.jsx(J,{label:"Shine Main Heading",name:"heading",fullWidth:!0,value:j.heading,onChange:B})}),u.jsx(K,{item:!0,xs:12,md:6,children:u.jsx(J,{label:"Shine Main Description",name:"description",fullWidth:!0,value:j.description,onChange:B})})]}),u.jsx(K,{container:!0,spacing:2,children:y.map(((e,t)=>u.jsx(K,{item:!0,xs:12,md:4,children:u.jsxs(xe,{variant:"outlined",sx:{height:"100%"},children:[e.image?u.jsx(pe,{component:"img",height:"140",image:e.image,alt:`shine-${t}`,onError:e=>e.currentTarget.style.display="none"}):u.jsx(Y,{sx:{height:140,bgcolor:"action.hover",display:"flex",alignItems:"center",justifyContent:"center",color:"text.secondary"},children:"No Image"}),u.jsx(ve,{children:u.jsxs(G,{spacing:1,children:[u.jsx(fe,{feature:e,index:t,setImageUpload:e=>S(e?t:null),handleFeatureChange:(e,i)=>W(t,e,i)}),u.jsx(J,{label:`Item ${t+1} Heading`,value:e.heading,onChange:e=>W(t,"heading",e.target.value),fullWidth:!0}),u.jsx(J,{label:`Item ${t+1} Description`,value:e.description,onChange:e=>W(t,"description",e.target.value),fullWidth:!0,multiline:!0,rows:3})]})})]})},t)))}),u.jsx(G,{direction:"row",justifyContent:"flex-end",sx:{mt:2},children:u.jsx(V,{variant:"contained",onClick:()=>c(void 0,null,(function*(){try{if(!(j.heading.trim()&&j.description.trim()&&3===y.length&&y.every((e=>e.image&&e.heading.trim()&&e.description.trim()))))return;yield n({heading:j.heading,description:j.description,items:y})}catch(e){}})),children:"Save “What Makes Us Shine”"})})]})]}),u.jsxs(Q,{sx:{p:2},children:[u.jsx(V,{onClick:D,variant:"outlined",children:"Cancel"}),u.jsx(V,{onClick:()=>c(void 0,null,(function*(){var e,i;try{let a=r({},l);if(m){const t=yield Le([m]),s=(null==t?void 0:t.url)||(null==(e=null==t?void 0:t[0])?void 0:e.url)||(null==(i=null==t?void 0:t.imageUrls)?void 0:i[0])||"";s&&(a.image=s)}yield t({heroSection:a}),yield s({homePageDescription:v}),k(!1)}catch(a){}})),variant:"contained",children:"Save Hero & Description"})]})]})]})},Lt={title:"Join Sunstar Rewards.",subtitle:"Sunstar's loyalty program for frequent travelers—earn perks and exclusive benefits every time you stay with us.",hero_cta:{text:"See your benefits",link:"/benefits"},loyal_guest:{heading:"Become a Loyal Sunstar Guest",description:"A rewarding loyalty program built for our most valued guests — like you, who choose comfort, consistency, and care with every stay."},tiers:[{level:1,name:"Smart Traveller",requirement_text:"Complete 5 nights in 365 days",benefit_text:"5% discount on future bookings",unlock_after_nights:5},{level:2,name:"Frequent Explorer",requirement_text:"Complete 10 nights in 365 days",benefit_text:"10% discount on all bookings",unlock_after_nights:10},{level:3,name:"Elite Guest",requirement_text:"Complete 20 nights in 365 days",benefit_text:"15% discount on all bookings",unlock_after_nights:20}],how_it_works:[{title:"Stay with Us",description:"Book your stay directly through our official website or contact numbers. Every night you stay counts towards your rewards.",icon:"bed"},{title:"Track Your Nights",description:"We automatically track your completed nights within a 365-day period. You do not need to sign up again or carry a membership card.",icon:"clock"},{title:"Unlock Rewards",description:"Your loyalty starts paying off after just 5 nights. Unlock bigger benefits as you stay more.",icon:"medal"}],sidebar_widget:{member_type:"Guest",stays:0}},Mt=({label:e,section:t,count:i,setExpandedSection:s,expandedSection:a})=>u.jsxs("button",{onClick:()=>s(a===t?null:t),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-sm font-semibold text-slate-700",children:e}),void 0!==i&&u.jsx("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded-full",children:i})]}),u.jsx(w,{size:18,className:"text-slate-400 transition-transform "+(a===t?"rotate-180":"")})]}),qt=({label:e,value:t,onChange:i,placeholder:s,type:a="text",rows:n=1})=>u.jsxs("label",{className:"flex flex-col gap-2",children:[u.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),n>1?u.jsx("textarea",{value:t,onChange:i,placeholder:s,rows:n,className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-300 focus:border-transparent resize-none"}):u.jsx("input",{type:a,value:t,onChange:i,placeholder:s,className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-300 focus:border-transparent"})]});function $t(){var e,t,i,s;const{data:a,isLoading:n,isError:l}=qe(),d=(null==a?void 0:a.data)||a,b=$e(),j=Ge();Je();const f=Qe(),w=Ve(),[S,N]=x.useState(!1),[k,D]=x.useState(null),[E,T]=x.useState("banner"),[B,W]=x.useState(!1),A=x.useRef(null),P=()=>N(!1);x.useEffect((()=>(document.body.style.overflow=S?"hidden":"",()=>{document.body.style.overflow=""})),[S]),x.useEffect((()=>{S&&d&&!k&&D(JSON.parse(JSON.stringify(d)))}),[S,d,k]),x.useEffect((()=>{S&&A.current&&setTimeout((()=>{var e;return null==(e=A.current)?void 0:e.focus()}),50)}),[S]),x.useEffect((()=>{const e=e=>{"Escape"===e.key&&N(!1)};return S&&window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[S]);const I=(e,t)=>{D((i=>{const s=r({},i||{}),a=e.split(".");let n=s;for(let e=0;e<a.length-1;e++){const t=a[e];n[t]||(n[t]={}),n=n[t]}return n[a[a.length-1]]=t,s}))},H=(e,t,i)=>{D((s=>{const a=r({},s||{});return a.tiers=(a.tiers||[]).map(((s,a)=>a===e?o(r({},s),{[t]:i}):s)),a}))},_=e=>c(this,null,(function*(){var t,i,s,a;const n=((null==k?void 0:k.tiers)||[])[e];if(!n)return;const l=Number(n.level);if(!Array.isArray(null==d?void 0:d.tiers)||!d.tiers.some((e=>Number(e.level)===l)))return void D((t=>{const i=r({},t||{});return i.tiers=(i.tiers||[]).filter(((t,i)=>i!==e)),i}));if(!confirm(`Delete tier level ${l} from server? This cannot be undone.`))return;const o=k?JSON.parse(JSON.stringify(k)):null;D((t=>{const i=r({},t||{});return i.tiers=(i.tiers||[]).filter(((t,i)=>i!==e)),i}));try{const e=yield f.mutateAsync(l);e?(D(e),y.success("Tier deleted")):y.success("Tier deleted (server)")}catch(c){o&&D(o);const e=null!=(a=null!=(s=null==(i=null==(t=null==c?void 0:c.response)?void 0:t.data)?void 0:i.message)?s:null==c?void 0:c.message)?a:"Error deleting tier";y.error(e)}})),z=(e,t,i)=>{D((s=>{const a=r({},s||{});return a.how_it_works=(a.how_it_works||[]).map(((s,a)=>a===e?o(r({},s),{[t]:i}):s)),a}))};return n?u.jsx("button",{disabled:!0,className:"px-4 py-2 bg-slate-300 text-slate-600 rounded-lg text-sm font-medium",children:"Loading..."}):u.jsxs("div",{children:[u.jsx("button",{onClick:()=>{D(d?JSON.parse(JSON.stringify(d)):JSON.parse(JSON.stringify(Lt))),N(!0)},className:"myGlobalButton "+(l?"bg-red-600 text-white":"bg-slate-700 "),children:"Loyalty Program"}),S&&null!==k&&u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center p-4 pt-8",role:"dialog","aria-modal":"true",children:[u.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:P}),u.jsxs("div",{className:"relative z-10 w-full max-w-3xl max-h-[85vh] bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-white",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Loyalty Program Settings"}),u.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Manage tiers, benefits, and program details"})]}),u.jsx("button",{ref:A,onClick:P,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:u.jsx(p,{size:20,className:"text-slate-600"})})]}),u.jsx("div",{className:"flex-1 overflow-auto",children:u.jsxs("div",{className:"divide-y divide-slate-200",children:[u.jsxs("div",{className:"border-b border-slate-200",children:[u.jsx(Mt,{label:"Banner & Hero",section:"banner",setExpandedSection:T,expandedSection:E}),"banner"===E&&u.jsxs("div",{className:"p-6 bg-slate-50 space-y-4",children:[u.jsx(qt,{label:"Heading",value:k.title||"",onChange:e=>I("title",e.target.value),placeholder:"Enter main heading"}),u.jsx(qt,{label:"Description",value:k.subtitle||"",onChange:e=>I("subtitle",e.target.value),placeholder:"Enter subtitle or description",rows:3})]})]}),u.jsxs("div",{className:"border-b border-slate-200",children:[u.jsx(Mt,{label:"Loyal Guest Section",section:"loyal",setExpandedSection:T,expandedSection:E}),"loyal"===E&&u.jsxs("div",{className:"p-6 bg-slate-50 space-y-4",children:[u.jsx(qt,{label:"Section Heading",value:(null==(e=k.loyal_guest)?void 0:e.heading)||"",onChange:e=>I("loyal_guest.heading",e.target.value),placeholder:"e.g., Become a Loyal Sunstar Guest"}),u.jsx(qt,{label:"Section Description",value:(null==(t=k.loyal_guest)?void 0:t.description)||"",onChange:e=>I("loyal_guest.description",e.target.value),placeholder:"Describe the loyalty program benefits",rows:3})]})]}),u.jsxs("div",{className:"border-b border-slate-200",children:[u.jsx(Mt,{label:"Membership Tiers",section:"tiers",count:(null==(i=k.tiers)?void 0:i.length)||0,setExpandedSection:T,expandedSection:E}),"tiers"===E&&u.jsxs("div",{className:"p-6 bg-slate-50 space-y-4",children:[u.jsxs("button",{onClick:()=>c(this,null,(function*(){var e,t,i,s;const a=(()=>{const e=k?r({},k):JSON.parse(JSON.stringify(Lt));e.tiers=Array.isArray(e.tiers)?[...e.tiers]:[];const t=e.tiers.reduce(((e,t)=>Math.max(e,Number(t.level||0))),0);return o(r({},{level:"",name:"",requirement_text:"",benefit_text:"",unlock_after_nights:0,style:{}}),{level:t+1})})();D((e=>{const t=r({},e||{});return t.tiers=Array.isArray(t.tiers)?[...t.tiers,a]:[a],t}));try{const e=yield j.mutateAsync(a);e&&D(e)}catch(n){D((e=>{const t=r({},e||{});return t.tiers=(t.tiers||[]).filter((e=>Number(e.level)!==Number(a.level)||e.name!==a.name)),t}));const l=null!=(s=null!=(i=null==(t=null==(e=null==n?void 0:n.response)?void 0:e.data)?void 0:t.message)?i:null==n?void 0:n.message)?s:"Error adding tier";y.error(l)}})),className:"w-full flex items-center justify-center gap-2 py-2 px-4 border-2 border-dashed border-slate-300 rounded-lg hover:border-slate-400 hover:bg-slate-100 transition-colors text-slate-700 font-medium text-sm",children:[u.jsx(g,{size:16})," Add Tier"]}),u.jsxs("div",{className:"space-y-3",children:[(k.tiers||[]).map(((e,t)=>{var i;return u.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 space-y-3",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx(qt,{label:"Level",type:"number",value:null!=(i=e.level)?i:"",onChange:e=>H(t,"level",Number(e.target.value)),placeholder:"e.g., 1"}),u.jsx(qt,{label:"Tier Name",value:e.name||"",onChange:e=>H(t,"name",e.target.value),placeholder:"e.g., Smart Traveller"})]}),u.jsx(qt,{label:"Requirement",value:e.requirement_text||"",onChange:e=>H(t,"requirement_text",e.target.value),placeholder:"e.g., Complete 5 nights in 365 days"}),u.jsx(qt,{label:"Benefit",value:e.benefit_text||"",onChange:e=>H(t,"benefit_text",e.target.value),placeholder:"e.g., 5% discount on all bookings"}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>_(t),className:"flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:[u.jsx(h,{size:16})," Remove"]})})]},t)})),(!k.tiers||0===k.tiers.length)&&u.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No tiers configured yet"})]})]})]}),u.jsxs("div",{className:"border-b border-slate-200",children:[u.jsx(Mt,{label:"How It Works",section:"howitworks",count:(null==(s=k.how_it_works)?void 0:s.length)||0,setExpandedSection:T,expandedSection:E}),"howitworks"===E&&u.jsxs("div",{className:"p-6 bg-slate-50 space-y-4",children:[u.jsxs("button",{onClick:()=>{D((e=>{const t=r({},e||{});return t.how_it_works=Array.isArray(t.how_it_works)?[...t.how_it_works,{title:"",description:"",icon:""}]:[{title:"",description:"",icon:""}],t}))},className:"w-full flex items-center justify-center gap-2 py-2 px-4 border-2 border-dashed border-slate-300 rounded-lg hover:border-slate-400 hover:bg-slate-100 transition-colors text-slate-700 font-medium text-sm",children:[u.jsx(g,{size:16})," Add Step"]}),u.jsxs("div",{className:"space-y-3",children:[(k.how_it_works||[]).map(((e,t)=>u.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 space-y-3",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsx(qt,{label:"Title",value:e.title||"",onChange:e=>z(t,"title",e.target.value),placeholder:"Step heading"}),u.jsx(qt,{label:"Icon Key",value:e.icon||"",onChange:e=>z(t,"icon",e.target.value),placeholder:"e.g., bed, clock, medal"})]}),u.jsx(qt,{label:"Description",value:e.description||"",onChange:e=>z(t,"description",e.target.value),placeholder:"Explain this step",rows:2}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>{return e=t,void D((t=>{const i=r({},t||{});return i.how_it_works=(i.how_it_works||[]).filter(((t,i)=>i!==e)),i}));var e},className:"flex items-center gap-2 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors text-sm font-medium",children:[u.jsx(h,{size:16})," Remove"]})})]},t))),(!k.how_it_works||0===k.how_it_works.length)&&u.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No steps configured yet"})]})]})]})]})}),u.jsxs("div",{className:"p-6 border-t border-slate-200 bg-gradient-to-r from-slate-50 to-white flex items-center justify-between gap-3",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{confirm("Seed example data?")&&w.mutate(Lt,{onSuccess:()=>{y.success("Seeded with default data"),N(!1)}})},className:"flex items-center gap-2 px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Seed Data"}),u.jsxs("button",{onClick:()=>{D(JSON.parse(JSON.stringify(d||Lt))),y.success("Reverted to last saved")},className:"flex items-center gap-2 px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:[u.jsx(C,{size:16})," Revert"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:P,className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Cancel"}),u.jsx("button",{onClick:()=>c(this,null,(function*(){var e,t,i,s,a;if(k&&k.title&&(null==(e=k.loyal_guest)?void 0:e.heading)){W(!0);try{const e=yield b.mutateAsync(k);e&&D(e),y.success("Loyalty Program saved"),N(!1)}catch(n){const e=null!=(a=null!=(s=null==(i=null==(t=null==n?void 0:n.response)?void 0:t.data)?void 0:i.message)?s:null==n?void 0:n.message)?a:"Save failed";y.error(e)}finally{W(!1)}}else y.error("Please provide page title and Loyal Guest heading")})),disabled:B,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm",children:B?u.jsxs(u.Fragment,{children:[u.jsx(m,{size:16,className:"animate-spin"})," Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx(v,{size:16})," Save Program"]})})]})]})]})]})]})}const Gt=({open:e,handleClose:t,initialData:i,onSave:s})=>{const[a,n]=x.useState(""),[l,d]=x.useState([]),[c,m]=x.useState("");x.useEffect((()=>{i&&(n(i.heading||""),d(i.valueData||[]),m(i.heroSectionDescription||""))}),[i]);const g=(e,t,i)=>{const s=[...l];s[e]=o(r({},s[e]),{[t]:i}),d(s)};return u.jsxs(F,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,children:[u.jsx(O,{children:"Why Sunstar Page"}),u.jsx(q,{dividers:!0,children:u.jsxs(Y,{sx:{},children:[u.jsx("h1",{className:"text-desktop/h4 py-6",children:"Hero Section Description"}),u.jsx(J,{label:"Hero Section Description",variant:"outlined",fullWidth:!0,value:c,onChange:e=>{m(e.target.value)},sx:{mb:3},helperText:`${c.trim().split(/\s+/).length}/110 words`,error:c.trim().split(/\s+/).length>110}),u.jsx("h1",{className:"text-desktop/h4 pb-10",children:"Our Value Section"}),u.jsx(J,{label:"Heading",variant:"outlined",fullWidth:!0,value:a,onChange:e=>{n(e.target.value)},sx:{mb:3}}),l.map(((e,t)=>u.jsx(de,{sx:{p:2,mb:2},children:u.jsxs(Y,{display:"flex",alignItems:"center",children:[u.jsx(J,{label:"Title",variant:"outlined",value:e.title,onChange:e=>g(t,"title",e.target.value),sx:{mr:2,flex:1}}),u.jsx(J,{label:"Description",variant:"outlined",value:e.description,onChange:e=>g(t,"description",e.target.value),sx:{mr:2,flex:2},helperText:`${e.description.trim().split(/\s+/).length}/50 words`,error:e.description.trim().split(/\s+/).length>50}),u.jsx(L,{color:"error",onClick:()=>(e=>{const t=l.filter(((t,i)=>i!==e));d(t)})(t),"aria-label":"delete",children:u.jsx(X,{})})]})},e._id||t))),u.jsx(V,{variant:"contained",startIcon:u.jsx(ue,{}),onClick:()=>{d([...l,{title:"",description:""}])},sx:{mb:3},children:"Add Value"})]})}),u.jsxs(Q,{children:[u.jsx(V,{onClick:t,children:"Cancel"}),u.jsx(V,{variant:"contained",color:"secondary",onClick:()=>{const e=c.trim().split(/\s+/).length,i=l.some((e=>e.description.trim().split(/\s+/).length>50));e>110||i?alert("Hero section description should not exceed 80 words and value descriptions should not exceed 50 words"):(s({heading:a,valueData:l,heroSectionDescription:c}),t())},children:"Save Changes"})]})]})},Jt=()=>{const{whysunstarValue:e,updateWhySunstarValueection:t}=_(),[i,s]=x.useState(!1),[a,n]=x.useState(null);return x.useEffect((()=>{e&&n(e)}),[e]),u.jsxs("div",{children:[u.jsx("div",{className:"myGlobalButton",onClick:()=>{s(!0)},children:"Why Sunstar Page"}),a&&u.jsx(Gt,{open:i,handleClose:()=>{s(!1)},initialData:a,onSave:e=>{t(e),n(e)}})]})},Qt=()=>{const[e,t]=x.useState(!1),{data:i=[],isLoading:s,isError:a,refetch:n}=Ye(),l=Ke(),d=Xe(),m=Ze(),[g,h]=x.useState(!1),[p,v]=x.useState(!1),[b,j]=x.useState({image:"",description:""}),[f,y]=x.useState(!1),[C,w]=x.useState(!1),[S,N]=x.useState(null),[k,D]=x.useState({image:"",description:""}),[E,T]=x.useState(!1),[B,W]=x.useState(!1),A=()=>{j({image:"",description:""}),h(!1)},P=(e,t)=>j((i=>o(r({},i),{[e]:t}))),I=(e,t)=>D((i=>o(r({},i),{[e]:t})));return u.jsxs(Y,{children:[u.jsx("div",{className:"myGlobalButton",onClick:()=>t(!0),children:"Partner Logos"}),u.jsxs(F,{open:e,onClose:()=>t(!1),fullWidth:!0,maxWidth:"md",children:[u.jsx(O,{children:"Partner Logos"}),u.jsxs(q,{dividers:!0,children:[u.jsxs(Y,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,mt:1,children:[u.jsx(R,{variant:"h6",sx:{fontWeight:600},children:"Manage Partners"}),g?null:u.jsx(V,{startIcon:u.jsx(ue,{}),variant:"contained",onClick:()=>h(!0),children:"Add Partner"})]}),g&&u.jsxs(xe,{sx:{mb:3,p:2},children:[u.jsxs(ve,{children:[u.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Add New Partner"}),u.jsx(J,{label:"Description",fullWidth:!0,multiline:!0,minRows:2,sx:{mb:2},value:b.description,onChange:e=>P("description",e.target.value),disabled:p||f}),u.jsx(fe,{feature:{image:b.image},handleFeatureChange:P,setImageUpload:y,index:0}),b.image?u.jsxs(Y,{mt:2,children:[u.jsx(R,{variant:"caption",children:"Preview:"}),u.jsx(Y,{component:"img",src:b.image,alt:"preview",sx:{width:160,height:90,objectFit:"cover",border:"1px solid #ddd",borderRadius:1}})]}):null]}),u.jsxs(be,{sx:{justifyContent:"flex-end"},children:[u.jsx(V,{onClick:A,disabled:p||f,children:"Cancel"}),u.jsx(V,{variant:"contained",onClick:()=>c(void 0,null,(function*(){var e,t;if((null==(e=b.image)?void 0:e.trim())&&(null==(t=b.description)?void 0:t.trim()))try{v(!0),yield l.mutateAsync({imageUrl:b.image.trim(),description:b.description.trim()}),A(),n()}catch(i){}finally{v(!1)}})),disabled:p||f||!b.image||!b.description,children:p?u.jsx(Z,{size:20}):"Save"})]})]}),s?u.jsxs(Y,{display:"flex",alignItems:"center",gap:1,children:[u.jsx(Z,{size:22}),u.jsx(R,{children:"Loading partners…"})]}):a?u.jsx(R,{color:"error",children:"Failed to load partners"}):0===i.length?u.jsx(R,{color:"text.secondary",children:"No partners added yet."}):u.jsx(K,{container:!0,spacing:2,children:i.map(((e,t)=>u.jsx(K,{item:!0,xs:12,sm:6,md:4,children:u.jsxs(xe,{children:[e.imageUrl?u.jsx(pe,{component:"img",height:"160",image:e.imageUrl,alt:e.description||"Partner"}):null,u.jsx(ve,{sx:{minHeight:80},children:u.jsx(R,{variant:"body2",children:e.description})}),u.jsxs(be,{children:[u.jsx(V,{startIcon:u.jsx(je,{}),onClick:()=>(e=>{N(e),D({image:e.imageUrl||"",description:e.description||""}),w(!0)})(e),children:"Edit"}),u.jsx(V,{startIcon:u.jsx(X,{}),color:"error",onClick:()=>{return t=e._id,c(void 0,null,(function*(){try{yield m.mutateAsync(t),n()}catch(e){}}));var t},disabled:m.isPending,children:"Delete"})]})]})},e._id||t)))})]}),u.jsx(Q,{children:u.jsx(V,{onClick:()=>t(!1),children:"Close"})})]}),u.jsxs(F,{open:C,onClose:()=>w(!1),fullWidth:!0,maxWidth:"sm",children:[u.jsx(O,{children:"Edit Partner"}),u.jsxs(q,{children:[u.jsx(J,{label:"Description",fullWidth:!0,multiline:!0,minRows:2,sx:{my:2},value:k.description,onChange:e=>I("description",e.target.value),disabled:B||E}),u.jsx(fe,{feature:{image:k.image},handleFeatureChange:I,setImageUpload:T,index:1}),k.image?u.jsxs(Y,{mt:2,children:[u.jsx(R,{variant:"caption",children:"Preview:"}),u.jsx(Y,{component:"img",src:k.image,alt:"preview",sx:{width:160,height:90,objectFit:"cover",border:"1px solid #ddd",borderRadius:1}})]}):null]}),u.jsxs(Q,{children:[u.jsx(V,{onClick:()=>w(!1),disabled:B||E,children:"Cancel"}),u.jsx(V,{variant:"contained",onClick:()=>c(void 0,null,(function*(){var e,t;if(null==S?void 0:S._id)try{W(!0),yield d.mutateAsync({id:S._id,data:{imageUrl:null==(e=k.image)?void 0:e.trim(),description:null==(t=k.description)?void 0:t.trim()}}),w(!1),N(null),n()}catch(i){}finally{W(!1)}})),disabled:B||E||!k.description||!k.image,children:B?u.jsx(Z,{size:22}):"Save"})]})]})]})},Vt=()=>{var e,t;const{shineSection:i,updateShineSection:s}=_(),[a,n]=x.useState(!1),[l,d]=x.useState(!1),[m,g]=x.useState({heading:null==i?void 0:i.heading,description:null==i?void 0:i.description,features:null==i?void 0:i.features});x.useEffect((()=>{g(i)}),[i]);const h=(e,t,i)=>{const s=[...m.features];s[e][t]=i,g((e=>o(r({},e),{features:s})))};return u.jsxs("div",{children:[u.jsx("div",{onClick:()=>n(!0),className:"myGlobalButton",children:"Shine Section"}),u.jsxs(F,{open:a,onClose:()=>n(!1),maxWidth:"md",fullWidth:!0,children:[u.jsx(O,{children:"Shine Section"}),u.jsx(q,{dividers:!0,children:u.jsxs("div",{style:{padding:20},children:[u.jsx(J,{label:"Heading",variant:"outlined",fullWidth:!0,value:null==m?void 0:m.heading,onChange:e=>{g((t=>o(r({},t),{heading:e.target.value})))},style:{marginBottom:20}}),u.jsx(J,{label:"Description",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,value:null==m?void 0:m.description,onChange:e=>{g((t=>o(r({},t),{description:e.target.value})))},style:{marginBottom:20},helperText:`${(null==(e=null==m?void 0:m.description)?void 0:e.trim().split(/\s+/).length)||0}/130 words`,error:((null==(t=null==m?void 0:m.description)?void 0:t.trim().split(/\s+/).length)||0)>130}),u.jsx(K,{container:!0,spacing:3,children:(null==m?void 0:m.features)&&(null==m?void 0:m.features.length)>0?null==m?void 0:m.features.map(((e,t)=>u.jsx(K,{item:!0,xs:12,sm:6,md:4,children:u.jsxs(xe,{elevation:3,style:{padding:16,marginBottom:20},children:[u.jsx(L,{color:"error",onClick:()=>(e=>{const t=m.features.filter(((t,i)=>i!==e));g((e=>o(r({},e),{features:t})))})(t),style:{marginBottom:10},children:u.jsx(X,{})}),u.jsx(J,{label:"Feature Title",variant:"outlined",fullWidth:!0,value:e.title,onChange:e=>h(t,"title",e.target.value),style:{marginBottom:10}}),u.jsx(J,{label:"Feature Description",variant:"outlined",fullWidth:!0,multiline:!0,rows:3,value:e.description,onChange:e=>h(t,"description",e.target.value),style:{marginBottom:10},helperText:`${e.description.trim().split(/\s+/).length}/130 words`,error:e.description.trim().split(/\s+/).length>130}),u.jsx(fe,{feature:e,handleFeatureChange:(e,i)=>h(t,e,i),setImageUpload:d,index:t}),e.image&&u.jsx("img",{src:e.image,alt:`Feature ${t}`,style:{width:"100%",marginBottom:10}})]})},e._id))):u.jsx(R,{variant:"body1",color:"textSecondary",children:"No features available."})}),u.jsx(V,{variant:"contained",color:"primary",startIcon:u.jsx(ue,{}),onClick:()=>{g((e=>o(r({},e),{features:[...e.features,{title:"",description:"",image:""}]})))},style:{marginTop:20,marginRight:10},children:"Add Feature"})]})}),u.jsxs(Q,{children:[u.jsx(V,{onClick:()=>n(!1),color:"secondary",children:"Cancel"}),u.jsx(V,{variant:"contained",onClick:()=>{c(void 0,null,(function*(){var e,t;if(!(null==m?void 0:m.heading)||!(null==m?void 0:m.description))return void alert("Heading and description are required.");if(!(null==m?void 0:m.features)||0===m.features.length)return void alert("At least one feature is required.");const i=(null==(e=null==m?void 0:m.description)?void 0:e.trim().split(/\s+/).length)||0,a=null==(t=null==m?void 0:m.features)?void 0:t.some((e=>{var t;return((null==(t=null==e?void 0:e.description)?void 0:t.trim().split(/\s+/).length)||0)>130}));if(i>130||a)alert("Descriptions should not exceed 130 words");else try{const e=m.features.filter((e=>e.title||e.description||e.image)).map((e=>({title:e.title||"",description:e.description||"",image:e.image||""}))),t={heading:m.heading,description:m.description,features:e};yield s(t)}catch(n){}})),n(!1)},color:"primary",disabled:l,children:"Update Shine Section"})]})]})]})},Yt=["","home","whysunstar","coorporatebooking","developera and owners","event and conference","social event","Weddings & Special Occasions","Corporate Events","career","travel-agent","tours and travel"],Kt=()=>{const[e,t]=x.useState(""),{data:i=[],isLoading:s,error:a}=et({page:e});tt();const n=it(),l=st(),d=at(),[c,m]=x.useState({clientHeading:"",clients:[]}),[g,h]=x.useState([]),[p,v]=x.useState(!1);x.useEffect((()=>{m({clientHeading:"",clients:i.map((e=>({_id:e._id,name:e.name,location:e.location,heading:e.heading,description:e.description})))}),h([])}),[i]);const b=()=>v(!1),j=(e,t,i)=>{const s=[...c.clients];s[e]=o(r({},s[e]),{[t]:i}),m(o(r({},c),{clients:s}))};return u.jsxs("div",{children:[u.jsx("div",{className:"myGlobalButton",onClick:()=>v(!0),children:"Edit Testimonials"}),u.jsxs(F,{open:p,onClose:b,fullWidth:!0,maxWidth:"md",children:[u.jsxs(O,{children:['Edit Testimonials for "',e||"Default",'"']}),u.jsxs(q,{dividers:!0,children:[u.jsxs(te,{fullWidth:!0,margin:"normal",children:[u.jsx(ie,{children:"Choose Page"}),u.jsx(se,{labelId:"page-select-label",value:e,label:"Choose Page",onChange:e=>{t(e.target.value)},displayEmpty:!0,renderValue:e=>""===e?"Default Testimonials":e,children:Yt.map((e=>u.jsx(ae,{value:e,className:"capitalize",children:""===e?"Default Testimonials":e},e)))})]}),c.clients.map(((e,t)=>u.jsx(de,{sx:{p:2,mb:2},children:u.jsxs(Y,{display:"flex",flexDirection:"column",gap:2,children:[u.jsx(J,{label:"Name",value:e.name,onChange:e=>j(t,"name",e.target.value)}),u.jsx(J,{label:"Location",value:e.location,onChange:e=>j(t,"location",e.target.value)}),u.jsx(J,{label:"Heading",value:e.heading,onChange:e=>j(t,"heading",e.target.value)}),u.jsx(J,{label:"Description",multiline:!0,rows:3,value:e.description,onChange:e=>j(t,"description",e.target.value),helperText:`${e.description.trim().split(/\s+/).length}/50 words`,error:e.description.trim().split(/\s+/).length>50}),u.jsx(V,{variant:"outlined",color:"error",startIcon:u.jsx(X,{}),onClick:()=>(e=>{const t=c.clients[e];t._id&&h((e=>[...e,t._id])),m(o(r({},c),{clients:c.clients.filter(((t,i)=>i!==e))}))})(t),children:"Delete"})]})},e._id||t))),u.jsx(V,{variant:"contained",startIcon:u.jsx(ue,{}),onClick:()=>{m(o(r({},c),{clients:[...c.clients,{name:"",location:"",heading:"",description:""}]}))},children:"Add Testimonial"})]}),u.jsxs(Q,{children:[u.jsx(V,{onClick:b,children:"Cancel"}),u.jsx(V,{variant:"contained",onClick:()=>{if(c.clients.some((e=>e.description.trim().split(/\s+/).length>50)))return void y.error("Each description must be 50 words or fewer.");c.clients.filter((e=>e._id)).forEach((t=>{n.mutate({id:t._id,updateData:{name:t.name,location:t.location,heading:t.heading,description:t.description,page:e}})}));const t=c.clients.filter((e=>!e._id)).map((t=>({name:t.name,location:t.location,heading:t.heading,description:t.description,page:e})));t.length&&l.mutate(t),g.forEach((e=>d.mutate(e))),v(!1),y.success("Testimonials saved successfully")},children:"Save Changes"})]})]})]})},Xt={hero:{title:"",desc:""},advantages:[]},Zt=()=>{const[e,t]=x.useState(!1),[i,s]=x.useState(Xt),[a,n]=x.useState(null),l=x.useRef(null),{data:d,isLoading:m,isFetching:g,refetch:h}=nt(),p=lt();x.useEffect((()=>{e&&h()}),[e,h]),x.useEffect((()=>{var e,t,i,a;if(d){const l={hero:{title:null!=(t=null==(e=d.hero)?void 0:e.title)?t:"",desc:null!=(a=null==(i=d.hero)?void 0:i.desc)?a:""},advantages:Array.isArray(d.advantages)?d.advantages.map((e=>{var t,i;return{title:null!=(t=e.title)?t:"",desc:null!=(i=e.desc)?i:"",types:Array.isArray(e.types)?e.types.map((e=>{var t,i;return{title:null!=(t=e.title)?t:"",desc:null!=(i=e.desc)?i:""}})):[]}})):[]};s(l),n(l)}else m||d||(s(Xt),n(Xt))}),[d,m]),x.useEffect((()=>{function i(e){"Escape"===e.key&&t(!1)}return e&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)}),[e]);const v=(e,t)=>{s((i=>o(r({},i),{hero:o(r({},i.hero),{[e]:t})})))},b=(e,t,i)=>{s((s=>{const a=[...s.advantages||[]];return a[e]=o(r({},a[e]),{[t]:i}),o(r({},s),{advantages:a})}))},j=(e,t,i,a)=>{s((s=>{const n=[...s.advantages||[]],l=[...n[e].types||[]];return l[t]=o(r({},l[t]),{[i]:a}),n[e]=o(r({},n[e]),{types:l}),o(r({},s),{advantages:n})}))},f=(C=i,w=a,!(JSON.stringify(C)===JSON.stringify(w)));var C,w;return u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"myGlobalButton",onClick:()=>t(!0),"aria-haspopup":"dialog","aria-expanded":e,children:"Tours & Travel"}),e&&u.jsx("div",{className:"tt-modal-overlay",onMouseDown:function(e){l.current&&!l.current.contains(e.target)&&t(!1)},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},"aria-modal":"true",role:"dialog","aria-label":"Edit Tours and Travel content",children:u.jsxs("div",{ref:l,className:"tt-modal",onMouseDown:e=>e.stopPropagation(),style:{background:"#fff",width:"min(1000px, 96%)",maxHeight:"90vh",overflowY:"auto",borderRadius:8,padding:20,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[u.jsx("h2",{style:{margin:0},children:"Edit Tours & Travel"}),u.jsx("div",{children:u.jsx("button",{onClick:()=>t(!1),"aria-label":"Close",style:{background:"transparent",border:"none",fontSize:18,cursor:"pointer"},children:"✕"})})]}),m||g?u.jsx("div",{style:{padding:20},children:"Loading content…"}):u.jsxs("div",{children:[u.jsxs("section",{style:{marginBottom:18},children:[u.jsx("h3",{style:{marginBottom:8},children:"Hero"}),u.jsxs("label",{style:{display:"block",marginBottom:6},children:[u.jsxs("div",{style:{fontSize:13,marginBottom:4},children:["Title ",u.jsx("span",{style:{color:"red"},children:"*"})]}),u.jsx("input",{type:"text",value:i.hero.title,onChange:e=>v("title",e.target.value),placeholder:"Hero title",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ddd"}})]}),u.jsxs("label",{style:{display:"block"},children:[u.jsx("div",{style:{fontSize:13,marginBottom:4},children:"Description"}),u.jsx("textarea",{value:i.hero.desc,onChange:e=>v("desc",e.target.value),placeholder:"Hero description",rows:3,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ddd"}})]})]}),u.jsxs("section",{children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:u.jsx("h3",{style:{marginBottom:8},children:"Advantages"})}),0===(i.advantages||[]).length&&u.jsx("div",{style:{color:"#666",padding:"8px 0"},children:"No advantage sections yet. Add one to begin."}),(i.advantages||[]).map(((e,t)=>u.jsxs("div",{style:{border:"1px solid #eee",padding:12,borderRadius:6,marginBottom:12},children:[u.jsx("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:u.jsxs("div",{style:{flex:1},children:[u.jsxs("label",{style:{display:"block",marginBottom:6},children:[u.jsxs("div",{style:{fontSize:13,marginBottom:4},children:["Section title ",u.jsx("span",{style:{color:"red"},children:"*"})]}),u.jsx("input",{type:"text",value:e.title,onChange:e=>b(t,"title",e.target.value),placeholder:"Section title",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ddd"}})]}),u.jsxs("label",{style:{display:"block"},children:[u.jsx("div",{style:{fontSize:13,marginBottom:4},children:"Section description"}),u.jsx("textarea",{value:e.desc,onChange:e=>b(t,"desc",e.target.value),placeholder:"Section description",rows:2,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ddd"}})]})]})}),u.jsxs("div",{style:{marginTop:10},children:[Array.isArray(e.types)&&0===e.types.length&&u.jsx("div",{style:{color:"#666",marginTop:8},children:"No types yet for this section."}),e.types&&e.types.map(((e,i)=>u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:8,marginTop:8,alignItems:"start"},children:u.jsxs("div",{children:[u.jsx("input",{type:"text",value:e.title,onChange:e=>j(t,i,"title",e.target.value),placeholder:"Type title",style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ddd",marginBottom:6}}),u.jsx("textarea",{value:e.desc,onChange:e=>j(t,i,"desc",e.target.value),placeholder:"Type description (optional)",rows:2,style:{width:"100%",padding:8,borderRadius:6,border:"1px solid #ddd"}})]})},i)))]})]},t)))]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[u.jsx("button",{onClick:()=>{s(null!=a?a:Xt)},disabled:!f,style:{padding:"8px 12px",borderRadius:6,border:"1px solid #ccc",background:f?"#fff":"#f5f5f5",cursor:f?"pointer":"not-allowed"},children:"Reset"}),u.jsx("button",{onClick:()=>c(void 0,null,(function*(){var e,s;if((()=>{if(!i.hero.title||""===i.hero.title.trim())return y.error("Hero title is required"),!1;for(let e=0;e<(i.advantages||[]).length;e++){const t=i.advantages[e];if(!t.title||""===t.title.trim())return y.error(`Section #${e+1} title is required`),!1;for(let i=0;i<(t.types||[]).length;i++){const s=t.types[i];if(!s.title||""===s.title.trim())return y.error(`Type #${i+1} in section #${e+1} needs a title`),!1}}return!0})())try{yield p.mutateAsync(i),y.success("Tour & Travel content saved"),n(i),t(!1)}catch(a){y.error((null==(s=null==(e=null==a?void 0:a.response)?void 0:e.data)?void 0:s.message)||"Failed to save")}})),disabled:p.isLoading||!f,style:{padding:"8px 14px",borderRadius:6,border:"none",background:p.isLoading||!f?"#aaa":"#0070f3",color:"#fff",cursor:p.isLoading||!f?"not-allowed":"pointer"},children:p.isLoading?"Saving…":"Save"})]})]})]})})]})},ei=({open:e,onClose:t,children:i,title:s,footer:a})=>e?u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),u.jsxs("div",{className:"relative z-10 w-full max-w-5xl max-h-[92vh] overflow-hidden rounded-2xl bg-white shadow-2xl animate-in fade-in zoom-in-95 duration-300",children:[u.jsxs("div",{className:"sticky top-0 z-20 flex items-center justify-between gap-4 border-b border-gray-200 bg-gradient-to-r from-slate-50 to-white px-6 py-4",children:[u.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:s}),u.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100",onClick:t,children:u.jsx(p,{size:20,className:"text-gray-600"})})]}),u.jsx("div",{className:"overflow-y-auto p-6 max-h-[calc(92vh-60px)]",children:i}),a&&u.jsx("div",{className:"border-t border-gray-200 bg-white px-6 py-4",children:a})]})]}):null,ti=e=>{var t=e,{label:i}=t,s=d(t,["label"]);return u.jsxs("label",{className:"block group",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:i}),u.jsx("input",o(r({},s),{className:`w-full rounded-lg border border-gray-300 px-4 py-2.5 outline-none transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 hover:border-gray-400 ${s.className||""}`}))]})},ii=e=>{var t=e,{label:i}=t,s=d(t,["label"]);return u.jsxs("label",{className:"block",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:i}),u.jsx("textarea",o(r({},s),{className:`w-full rounded-lg border border-gray-300 px-4 py-2.5 outline-none transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 hover:border-gray-400 min-h-[90px] resize-none ${s.className||""}`}))]})},si=({title:e,children:t,onSave:i,saving:s,actions:a})=>u.jsxs("div",{className:"rounded-xl border border-gray-200 bg-gradient-to-br from-white to-gray-50 p-6 shadow-sm hover:shadow-md transition-shadow duration-300",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e}),u.jsxs("div",{className:"flex gap-2 items-center",children:[a,i&&u.jsx("button",{onClick:i,disabled:s,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-2 text-sm font-medium text-white shadow-md hover:shadow-lg disabled:opacity-60",children:s?u.jsxs(u.Fragment,{children:[u.jsx(m,{size:16,className:"animate-spin"}),"Saving…"]}):u.jsxs(u.Fragment,{children:[u.jsx(v,{size:16}),"Save"]})})]})]}),u.jsx("div",{className:"space-y-4",children:t})]}),ai=()=>{const[e,t]=x.useState(!1),{data:i,isFetching:s}=rt({enabled:e}),a=ot(),n=dt(),l=ct(),d=ut(),g=mt(),[h,p]=x.useState({heading:"",description:""}),v=x.useMemo((()=>{var e,t;return null!=(t=null==(e=null==i?void 0:i.partnerWithUs)?void 0:e.cards)?t:[]}),[i]),b=x.useMemo((()=>{var e,t;return null!=(t=null==(e=null==i?void 0:i.howItWorks)?void 0:e.cards)?t:[]}),[i]);x.useEffect((()=>{var e,t,s,a;i&&p({heading:null!=(t=null==(e=null==i?void 0:i.hero)?void 0:e.heading)?t:"",description:null!=(a=null==(s=null==i?void 0:i.hero)?void 0:s.description)?a:""})}),[i]);const[j,f]=x.useState(null),[y,C]=x.useState("");return u.jsxs("div",{children:[u.jsx("button",{onClick:()=>t(!0),className:"myGlobalButton",children:"Manage Travel Agent"}),u.jsxs(ei,{open:e,onClose:()=>t(!1),title:"Manage Travel Agent",children:[s&&u.jsxs("div",{className:"mb-6 rounded-lg border border-amber-200 bg-gradient-to-r from-amber-50 to-orange-50 p-4 flex items-center gap-3",children:[u.jsx(m,{size:18,className:"text-amber-600 animate-spin"}),u.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Loading latest data…"})]}),u.jsx(si,{title:"Hero",onSave:()=>a.mutate(h),saving:a.isPending,children:u.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[u.jsx(ti,{label:"Heading",value:h.heading,onChange:e=>p((t=>o(r({},t),{heading:e.target.value})))}),u.jsx(ii,{label:"Description",value:h.description,onChange:e=>p((t=>o(r({},t),{description:e.target.value})))})]})}),u.jsx(xt,{title:"Partner With Us — Cards",cards:v,onAdd:()=>n.mutate({section:"partner",title:"New Partner Benefit",description:"Describe the partner benefit…"}),adding:n.isPending,onUpdate:(e,t)=>d.mutate({section:"partner",cardId:e,update:t}),onDelete:e=>g.mutate({section:"partner",cardId:e}),emptyMessage:"No partner cards yet.",fields:[{name:"title",label:"Title",type:"text"},{name:"description",label:"Description",type:"textarea"}]}),u.jsx(xt,{title:"How It Works — Cards",cards:b,onAdd:()=>n.mutate({section:"howitworks",title:"Step title",description:"Explain the step…"}),adding:n.isPending,onUpdate:(e,t)=>d.mutate({section:"howitworks",cardId:e,update:t}),onDelete:e=>g.mutate({section:"howitworks",cardId:e}),emptyMessage:"No how-it-works cards yet.",fields:[{name:"title",label:"Title",type:"text"},{name:"description",label:"Description",type:"textarea"}]})]}),u.jsx(ei,{open:!!j,onClose:()=>f(null),title:"partner"===j?"Bulk Add — Partner With Us":"Bulk Add — How It Works",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(ii,{label:"Items",placeholder:"Sign Up: Create your partner account\nApprove: Get verified and start\nEarn: Send bookings & earn",value:y,onChange:e=>C(e.target.value)}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{className:"rounded-lg px-4 py-2 bg-gray-100 hover:bg-gray-200",onClick:()=>f(null),children:"Cancel"}),u.jsx("button",{className:"rounded-lg px-4 py-2 bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",disabled:!y.trim()||l.isPending,onClick:()=>c(void 0,null,(function*(){const e=y.split("\n").map((e=>e.trim())).filter(Boolean).map((e=>{const[t,...i]=e.split(":");return i.length?{title:t.trim(),description:i.join(":").trim()}:{title:e.split(" ").slice(0,3).join(" "),description:e}}));yield l.mutateAsync({section:j,cards:e}),C(""),f(null)})),children:l.isPending?"Adding…":"Add Items"})]})]})})]})},ni=()=>{var e;const[t,i]=x.useState(!1),{offeringSection:s,updateOfferingSection:a}=_(),[n,l]=x.useState(!1),[d,m]=x.useState(!1),[g,h]=x.useState(null),[p,v]=x.useState(null),[b,j]=x.useState({heading:"",offers:[]});x.useEffect((()=>{if(s){const e=o(r({},s),{offers:(s.offers||[]).map((e=>({title:e.title||"",description:e.description||"",image:e.image||"",link:e.link||""})))});j(e)}}),[s]);const f=(e,t,i)=>{j((s=>{const a=[...s.offers];return a[e]=o(r({},a[e]),{[t]:i}),o(r({},s),{offers:a})}))},y=()=>i(!1);return u.jsxs("div",{children:[u.jsx("div",{onClick:()=>i(!0),className:"myGlobalButton",children:"What We Offers Section"}),u.jsx(F,{open:t,onClose:y,fullWidth:!0,maxWidth:"md",children:u.jsxs(Y,{component:"form",onSubmit:e=>c(void 0,null,(function*(){if(e.preventDefault(),m(!0),h(null),v(null),b.offers.some((e=>e.description.trim().split(/\s+/).length>60)))return h("Description should not exceed 60 words"),void m(!1);try{if(a){const e=yield a({whatWeOffers:b});v("Offerings updated successfully!"),j(e.whatWeOffers)}else v("Offerings updated successfully! (dummy)")}catch(t){h("Failed to update offerings.")}finally{m(!1)}})),children:[u.jsx(O,{children:"What We Offers Section"}),u.jsxs(q,{children:[u.jsx(R,{variant:"h5",gutterBottom:!0,children:"What We Offers Section"}),u.jsx(J,{label:"Heading",variant:"outlined",fullWidth:!0,value:b.heading||"",onChange:e=>{j(o(r({},b),{heading:e.target.value}))},sx:{mb:3}}),null==(e=null==b?void 0:b.offers)?void 0:e.map(((e,t)=>u.jsxs(Y,{sx:{mb:4,p:2,border:"1px solid #ccc",borderRadius:2,position:"relative"},children:[u.jsxs(R,{variant:"h6",children:["Offering ",t+1]}),u.jsx(J,{label:"Title",variant:"outlined",fullWidth:!0,margin:"normal",value:e.title,onChange:e=>f(t,"title",e.target.value)}),u.jsx(J,{label:"Description",variant:"outlined",fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:e.description,onChange:e=>f(t,"description",e.target.value),helperText:`${e.description.trim().split(/\s+/).length}/60 words`,error:e.description.trim().split(/\s+/).length>60}),u.jsx(J,{label:"Link (optional)",placeholder:"https://example.com/your-service",variant:"outlined",fullWidth:!0,margin:"normal",value:e.link||"",onChange:e=>f(t,"link",e.target.value)}),e.image&&u.jsxs(Y,{sx:{mt:2,display:"flex",alignItems:"center"},children:[u.jsx(R,{variant:"caption",sx:{mr:1},children:"Image Preview:"}),u.jsx(Y,{component:"img",src:e.image,alt:`Offering ${t+1} preview`,sx:{width:100,height:60,objectFit:"cover",border:"1px solid #ccc",borderRadius:"4px",marginBottom:"20px"}})]}),u.jsx(fe,{feature:e,handleFeatureChange:(e,i)=>f(t,e,i),setImageUpload:l,index:t}),u.jsx(V,{variant:"outlined",color:"error",startIcon:u.jsx(X,{}),onClick:()=>(e=>{j((t=>o(r({},t),{offers:t.offers.filter(((t,i)=>i!==e))})))})(t),sx:{mt:1},children:"Remove Offering"})]},`${t}`))),u.jsx(V,{variant:"outlined",onClick:()=>{j((e=>o(r({},e),{offers:[...e.offers,{title:"",description:"",image:"",link:""}]})))},sx:{mt:2},children:"Add New Offering"}),g&&u.jsx(R,{variant:"body2",color:"error",sx:{mt:2},children:g}),p&&u.jsx(R,{variant:"body2",color:"primary",sx:{mt:2},children:p})]}),u.jsx(Q,{children:u.jsxs(Y,{sx:{mt:2,mr:4,display:"flex",justifyContent:"flex-end"},children:[u.jsx(V,{onClick:y,color:"primary",sx:{mx:4},children:"Close"}),u.jsx(V,{type:"submit",variant:"contained",color:"primary",disabled:d||n,children:d?u.jsx(Z,{size:24}):"Update Offerings"})]})})]})})]})},li=()=>u.jsxs("div",{className:"p-8 pt-24 flex flex-col gap-8 bg-gray-100 min-h-screen  ",children:[u.jsx("h1",{className:"text-desktop/h3",children:"Pages Sections"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10",children:[u.jsx(Rt,{}),u.jsx(Jt,{}),u.jsx(wt,{}),u.jsx(Ct,{}),u.jsx(Bt,{}),u.jsx($t,{}),u.jsx(yt,{}),u.jsx(ai,{}),u.jsx(Tt,{}),u.jsx(_t,{}),u.jsx(Zt,{})]}),u.jsx("h1",{className:"text-desktop/h3",children:"Common Sections"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10",children:[u.jsx(Ft,{}),u.jsx(Vt,{}),u.jsx(ni,{}),u.jsx(Kt,{}),u.jsx(zt,{}),u.jsx(Qt,{})]})]});export{li as default};
