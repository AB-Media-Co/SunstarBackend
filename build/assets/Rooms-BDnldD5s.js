var e=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,t=(o,a,s)=>a in o?e(o,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[a]=s,r=(e,o)=>{for(var a in o||(o={}))i.call(o,a)&&t(e,a,o[a]);if(s)for(var a of s(o))n.call(o,a)&&t(e,a,o[a]);return e},l=(e,s)=>o(e,a(s));import{k as d,j as c,r as m,v as x,q as u}from"./react-vendor-tq68JOgp.js";import{uploadImagesAPIV2 as h,useGetHotels as p}from"./useHotelHook2-C33856rg.js";import{u as g,a as j}from"./useRoomsHook-BKU-rVeT.js";import{n as b,o as v,p as f,q as y,t as R,v as C,w as S,x as I,y as k,d as A,R as w,z as D,D as T,J as P,O as W,Q as U,U as E,V as q,W as F,X as B,C as O,Z as G,_ as N,$ as _,a0 as z,a1 as M,a2 as H,a3 as L,a4 as $,a5 as V,a6 as K,a7 as J,a8 as Q,a9 as X,aa as Y,ab as Z,ac as ee,ad as oe,G as ae,ae as se,af as ie,ag as ne,ah as te,ai as re,aj as le,ak as de,al as ce,am as me}from"./ui-vendor-DiJ4VKpG.js";import{L as xe}from"./Loader-BEd0M6qd.js";import{M as ue}from"./MultipleImageUpload-BSLbV8L8.js";import{I as he}from"./ImageUpload-C514XMBq.js";import{u as pe}from"./useUpdatePagesHook-Dih8rx9i.js";import"./animation-vendor-DJegggv9.js";import"./vendor-DwD9zxym.js";import"./query-vendor-iDpT9gG9.js";import"./swiper-vendor-DEzR9mKq.js";import"./date-vendor-9E3U4XI3.js";import"./index-D89k_Hd_.js";const ge=d`
  from { opacity: 0; }
  to { opacity: 1; }
`,je=b(v)((({theme:e})=>({position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9))",backdropFilter:"blur(5px)",color:"white",zIndex:9999,animation:`${ge} 0.3s ease-in-out`}))),be=({room:e,onEdit:o,onToggleShow:a})=>{var s,i;const[n,t]=m.useState(e.show),[r,l]=m.useState(!1),[d,x]=m.useState(5);return m.useEffect((()=>{let e;return r&&(e=setInterval((()=>{x((o=>o<=1?(l(!1),clearInterval(e),5):o-1))}),1e3)),()=>clearInterval(e)}),[r]),c.jsxs(f,{sx:{width:320,margin:2,display:"flex",flexDirection:"column",borderRadius:3,boxShadow:4,overflow:"hidden",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:[c.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",p:1},children:[c.jsx(y,{variant:"body2",children:"Show Room:"}),c.jsx(R,{checked:n,onChange:()=>{t(!n),l(!0),x(5),a(e._id,!n)}})]}),r&&c.jsxs(je,{children:[c.jsx(xe,{fullScreen:!1,size:"sm"}),c.jsx(y,{variant:"h6",sx:{mb:1},children:n?"Showing Room":"Hiding Room"}),c.jsxs(y,{variant:"body1",children:["Please wait ",d," seconds..."]})]}),c.jsx(v,{sx:{height:180,backgroundColor:"grey.200"},children:(null==(s=e.RoomImage)?void 0:s[0])?c.jsx(C,{component:"img",image:e.RoomImage[0],alt:e.RoomName,sx:{height:"100%",objectFit:"cover"}}):c.jsx(v,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"grey.300"},children:c.jsx(y,{variant:"caption",children:"No Image Available"})})}),c.jsxs(S,{sx:{flexGrow:1,p:2},children:[c.jsx(y,{variant:"h6",fontWeight:600,children:e.RoomName||"Unnamed Room"}),c.jsx(y,{variant:"body2",color:"text.secondary",children:((e,o=15)=>{if(!e)return"";const a=e.split(" ");return a.length<=o?e:a.slice(0,o).join(" ")+"..."})(e.RoomDescription)}),c.jsxs(v,{sx:{mt:2,display:"grid",gap:1},children:[e.maxGuests&&c.jsxs(v,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(I,{sx:{fontSize:18,mr:.5}}),c.jsxs(y,{variant:"body2",children:["Max Guests: ",e.maxGuests]})]}),e.squareFeet&&c.jsxs(v,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(k,{sx:{fontSize:18,mr:.5}}),c.jsxs(y,{variant:"body2",children:["Area: ",e.squareFeet," sq.ft"]})]}),void 0!==e.Availability&&c.jsxs(v,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(A,{sx:{fontSize:18,mr:.5}}),c.jsxs(y,{variant:"body2",children:["Available Rooms: ",e.Availability]})]}),(null==(i=e.services)?void 0:i.length)>0&&c.jsxs(v,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(w,{sx:{fontSize:18,mr:.5}}),c.jsxs(y,{variant:"body2",children:["Services: ",e.services.join(", ")]})]})]})]}),c.jsxs(D,{sx:{justifyContent:"space-between",px:2,pb:2},children:[c.jsxs(v,{children:[e.defaultRate&&c.jsxs(y,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:["₹ ",e.defaultRate]}),c.jsxs(y,{variant:"subtitle1",color:"success.main",fontWeight:600,children:["₹ ",e.discountRate]})]}),c.jsx(T,{variant:"outlined",onClick:()=>o(e),children:"Edit"})]})]})},ve=({room:e,onEdit:o,onToggleShow:a})=>c.jsx(v,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:c.jsx(be,{room:e,onEdit:o,onToggleShow:a},e._id)});function fe(e){const o=e,{children:a,value:t,index:d}=o,m=((e,o)=>{var a={};for(var t in e)i.call(e,t)&&o.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&s)for(var t of s(e))o.indexOf(t)<0&&n.call(e,t)&&(a[t]=e[t]);return a})(o,["children","value","index"]);return c.jsx("div",l(r({role:"tabpanel",hidden:t!==d,id:`tabpanel-${d}`,"aria-labelledby":`tab-${d}`},m),{children:t===d&&c.jsx(v,{sx:{pt:2},children:a})}))}const ye=({formData:e,isEdit:o,handleInputChange:a,handleCheckboxChange:s,amenities:i,selectedAmenities:n,handleAmenitiesChange:t})=>c.jsxs(v,{component:"form",noValidate:!0,autoComplete:"off",children:[c.jsxs(J,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[c.jsx(y,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Basic Information"}),c.jsxs(Q,{container:!0,spacing:3,children:[c.jsx(Q,{item:!0,xs:12,sm:6,children:c.jsxs(X,{fullWidth:!0,children:[c.jsx(Y,{id:"room-type-label",children:"Room Type"}),c.jsxs(Z,{labelId:"room-type-label",id:"RoomTypeID",name:"RoomTypeID",value:e.RoomTypeID||"",label:"Room Type",MenuProps:{PaperProps:{style:{maxHeight:224,overflowY:"auto"}}},disabled:!0,sx:{bgcolor:"background.paper"},children:[c.jsx(ee,{value:"",children:c.jsx("em",{children:"Select Room Type"})}),c.jsx(ee,{value:e.RoomTypeID,children:null==e?void 0:e.RoomTypeID})]})]})}),c.jsx(Q,{item:!0,xs:12,sm:6,children:c.jsx(oe,{fullWidth:!0,label:"Room Name",name:"RoomName",value:e.RoomName,onChange:a,sx:{bgcolor:"background.paper"},placeholder:"Enter distinctive room name",required:!0,disabled:!0})})]})]}),c.jsxs(J,{elevation:1,sx:{p:3,mb:4,borderRadius:3,bgcolor:"background.paper",border:"1px solid",borderColor:"divider"},children:[c.jsx(y,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mb:2},children:"Room Details"}),c.jsxs(v,{display:"flex",flexDirection:"column",gap:3,children:[c.jsx(oe,{fullWidth:!0,multiline:!0,rows:4,label:"Room Description",name:"RoomDescription",value:e.RoomDescription,onChange:a,sx:{bgcolor:"background.default"},placeholder:"Describe the unique features and benefits of this room"}),c.jsx(oe,{fullWidth:!0,type:"number",label:"Max Guests",name:"maxGuests",value:e.maxGuests,onChange:a,placeholder:"e.g., 2 guests",InputProps:{startAdornment:c.jsx(v,{sx:{mr:1,display:"flex",alignItems:"center"},children:c.jsx(ae,{color:"primary"})})},sx:{bgcolor:"background.default"}}),c.jsx(oe,{fullWidth:!0,type:"number",label:"Room Size (sq ft)",name:"squareFeet",value:e.squareFeet,onChange:a,placeholder:"e.g., 450 sq ft",InputProps:{startAdornment:c.jsx(v,{sx:{mr:1,display:"flex",alignItems:"center"},children:c.jsx(k,{color:"primary"})})},sx:{bgcolor:"background.default"}})]})]}),c.jsxs(J,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[c.jsx(y,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Amenities"}),c.jsx(Q,{container:!0,spacing:2,children:c.jsx(Q,{item:!0,xs:12,children:c.jsx(se,{multiple:!0,freeSolo:!0,options:i||[],value:n,onChange:t,getOptionLabel:e=>e.label||"",renderInput:e=>c.jsx(oe,l(r({},e),{label:"Amenities",placeholder:"Select amenities",sx:{bgcolor:"background.paper"}})),renderTags:(e,o)=>e.map(((e,a)=>c.jsx(ie,l(r({variant:"outlined",label:e.label},o({index:a})),{color:"primary",size:"small",sx:{borderRadius:1}}))))})})})]}),c.jsxs(J,{elevation:0,sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[c.jsx(y,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Pricing"}),c.jsxs(Q,{container:!0,spacing:3,children:[c.jsx(Q,{item:!0,xs:12,sm:6,children:c.jsx(oe,{fullWidth:!0,label:"Default Rate",name:"defaultRate",type:"number",value:e.defaultRate,onChange:a,sx:{bgcolor:"background.paper"},InputProps:{startAdornment:c.jsx(ne,{color:"action",sx:{mr:1}})},placeholder:"Base price per night",required:!0})}),c.jsx(Q,{item:!0,xs:12,sm:6,children:c.jsx(oe,{fullWidth:!0,label:"Discount Rate",name:"discountRate",type:"number",value:e.discountRate,disabled:!0,sx:{bgcolor:"background.paper",opacity:.8},InputProps:{startAdornment:c.jsx(te,{color:"action",sx:{mr:1}})},helperText:"Managed by pricing system"})}),c.jsx(Q,{item:!0,xs:12,children:c.jsx(re,{control:c.jsx(le,{checked:"no"!==e.available,onChange:s,color:"primary"}),label:"Room is available for booking"})})]})]})]}),Re=({images:e,onUploadSuccess:o,onRemoveImageUrl:a,isUploading:s})=>c.jsx(v,{children:c.jsxs(J,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[c.jsx(y,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Room Images"}),c.jsx(y,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Upload high-quality images that showcase your room. We recommend at least 3 images from different angles."}),s&&c.jsx(v,{sx:{width:"100%",mb:2},children:c.jsx(de,{})}),c.jsx(ue,{imagesUrls:e,onUploadSuccess:o,onRemoveImageUrl:a,isUploading:s}),e.length>0&&c.jsxs(v,{sx:{mt:3},children:[c.jsxs(y,{variant:"subtitle2",gutterBottom:!0,children:["Current Images (",e.length,")"]}),c.jsx(Q,{container:!0,spacing:2,children:e.map(((e,o)=>c.jsx(Q,{item:!0,xs:6,sm:4,md:3,children:c.jsxs(f,{sx:{position:"relative"},children:[c.jsx(C,{component:"img",height:"120",image:e,alt:`Room image ${o+1}`,sx:{objectFit:"cover"}}),c.jsx(B,{size:"small",sx:{position:"absolute",top:5,right:5,bgcolor:"rgba(255, 255, 255, 0.8)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.95)"}},onClick:()=>a(e),children:c.jsx(ce,{fontSize:"small"})})]})},o)))})]})]})}),Ce=({aboutRoom:e,handleAboutChange:o})=>c.jsx(v,{component:"form",noValidate:!0,autoComplete:"off",children:c.jsxs(J,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[c.jsx(y,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"About This Room"}),c.jsx(y,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Provide detailed information about what makes this room special. This will be displayed prominently on booking pages."}),c.jsxs(Q,{container:!0,spacing:3,children:[c.jsx(Q,{item:!0,xs:12,children:c.jsx(oe,{fullWidth:!0,label:"About Room Description",name:"aboutDescription",value:e.description,onChange:e=>o("description",e.target.value),multiline:!0,rows:4,sx:{bgcolor:"background.paper"},placeholder:"Describe unique features, views, or experiences guests can expect"})}),c.jsxs(Q,{item:!0,xs:12,children:[c.jsx(y,{variant:"subtitle2",gutterBottom:!0,children:"Featured Image"}),c.jsx(v,{sx:{p:2,border:"1px dashed",borderColor:"divider",borderRadius:1},children:c.jsx(he,{feature:e,handleFeatureChange:o,setImageUpload:()=>{},index:0})})]})]})]})}),Se=({room:e,roomTypes:o,roomSaving:a,onClose:s,onSave:i,isEdit:n})=>{var t,d;const[u,p]=m.useState(0),[g,j]=m.useState(e.RoomImage||[]),[b,f]=m.useState(!1),{amenities:R}=pe(),C=P(),S=W(C.breakpoints.down("sm")),[I,k]=m.useState({HotelCode:e.HotelCode||"",RoomTypeID:e.RoomTypeID&&e.RateTypeID?`${e.RoomTypeID}`:"",RateTypeID:e.RateTypeID||"",RoomName:e.RoomName||"",RoomDescription:e.RoomDescription||"",defaultRate:e.defaultRate||"",discountRate:e.discountRate||"",maxGuests:e.maxGuests||"",squareFeet:e.squareFeet||"",services:e.services?e.services.join(", "):"",available:"no"!==e.available,source:e.source||"PMS"}),[A,w]=m.useState({description:(null==(t=e.AboutRoom)?void 0:t.description)||"",image:(null==(d=e.AboutRoom)?void 0:d.img)||""}),{selectedAmenities:D,handleAmenitiesChange:J}=((e,o)=>{const[a,s]=m.useState([]);return m.useEffect((()=>{if(e&&o){const a=e.filter((e=>o.some((o=>o.value===e.value))));s(a)}}),[e,o]),{selectedAmenities:a,handleAmenitiesChange:m.useCallback(((e,o)=>{const a=null==o?void 0:o.map((e=>"string"==typeof e?{value:e,label:e}:e));s(a)}),[]),setSelectedAmenities:s}})(R,e.Amenities),Q=m.useCallback(((e,o)=>{p(o)}),[]),X=m.useCallback((e=>{const{name:o,value:a}=e.target;k((e=>l(r({},e),{[o]:a})))}),[]),Y=m.useCallback((e=>{k((o=>l(r({},o),{available:e.target.checked})))}),[]),Z=m.useCallback(((e,o)=>{w((a=>l(r({},a),{[e]:o})))}),[]),ee=m.useCallback((()=>{var o,a,s;const n=null==(s=null==(a=null==(o=I.services)?void 0:o.split(","))?void 0:a.map((e=>e.trim())))?void 0:s.filter((e=>e.length>0)),t=l(r(r({},e),I),{RoomImage:g,Amenities:D,maxGuests:I.maxGuests?parseInt(I.maxGuests):void 0,squareFeet:I.squareFeet?parseInt(I.squareFeet):void 0,services:n,defaultRate:I.defaultRate?parseFloat(I.defaultRate):void 0,discountRate:I.discountRate?parseFloat(I.discountRate):void 0,AboutRoom:{description:A.description,img:A.image}});i(t)}),[e,I,g,D,A,i]),oe=m.useCallback((e=>{return o=function*(){if(0!==e.length){f(!0);try{const o=yield h(e),a=Array.isArray(o)?o:[o];j((e=>[...e,...a[0].imageUrls])),x.success("Images uploaded successfully!")}catch(o){x.error("Error uploading images")}finally{f(!1)}}else x.error("No images selected")},new Promise(((e,a)=>{var s=e=>{try{n(o.next(e))}catch(s){a(s)}},i=e=>{try{n(o.throw(e))}catch(s){a(s)}},n=o=>o.done?e(o.value):Promise.resolve(o.value).then(s,i);n((o=o.apply(undefined,null)).next())}));var o}),[]),ae=m.useCallback((e=>{j((o=>o.filter((o=>o!==e))))}),[]),se=()=>["RoomName","RoomDescription","defaultRate"].every((e=>I[e]));return c.jsxs(U,{open:!0,onClose:s,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:2,overflow:"hidden"}},fullScreen:S,children:[c.jsx(E,{sx:{m:0,p:3,bgcolor:"primary.main",color:"primary.contrastText"},children:c.jsxs(v,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[c.jsxs(v,{display:"flex",alignItems:"center",children:[c.jsx(q,{sx:{bgcolor:"background.paper",color:"primary.main",mr:2},children:c.jsx(F,{})}),c.jsx(y,{variant:"h5",fontWeight:"medium",children:e._id?"Edit Room":"Add Room"})]}),c.jsx(B,{onClick:s,"aria-label":"close",sx:{color:"primary.contrastText"},children:c.jsx(O,{})})]})}),c.jsx(G,{dividers:!0,sx:{p:S?2:3,bgcolor:"background.default"},children:S?c.jsx(c.Fragment,{children:c.jsx(v,{sx:{mb:2},children:c.jsxs(_,{activeStep:u,orientation:"vertical",children:[c.jsxs(z,{children:[c.jsx(M,{children:"Room Info"}),c.jsxs(H,{children:[c.jsx(ye,{formData:I,handleInputChange:X,handleCheckboxChange:Y,roomTypes:o,amenities:R,selectedAmenities:D,handleAmenitiesChange:J,isEdit:n}),c.jsxs(v,{sx:{mt:2},children:[c.jsx(T,{variant:"contained",onClick:()=>p(1),sx:{mr:1},children:"Continue"}),c.jsx(T,{onClick:s,variant:"text",children:"Cancel"})]})]})]}),c.jsxs(z,{children:[c.jsx(M,{children:"Upload Images"}),c.jsxs(H,{children:[c.jsx(Re,{images:g,onUploadSuccess:oe,onRemoveImageUrl:ae,isUploading:b}),c.jsxs(v,{sx:{mt:2},children:[c.jsx(T,{variant:"contained",onClick:()=>p(2),sx:{mr:1},children:"Continue"}),c.jsx(T,{onClick:()=>p(0),variant:"text",children:"Back"})]})]})]}),c.jsxs(z,{children:[c.jsx(M,{children:"About Room"}),c.jsxs(H,{children:[c.jsx(Ce,{aboutRoom:A,handleAboutChange:Z}),c.jsxs(v,{sx:{mt:2},children:[c.jsx(T,{variant:"contained",onClick:ee,disabled:a||!se(),sx:{mr:1},children:a?"Saving...":"Save Room"}),c.jsx(T,{onClick:()=>p(1),variant:"text",children:"Back"})]})]})]})]})})}):c.jsxs(c.Fragment,{children:[c.jsxs(L,{value:u,onChange:Q,variant:"fullWidth",sx:{mb:2,"& .MuiTab-root":{borderBottom:1,borderColor:"divider"},"& .Mui-selected":{fontWeight:"bold"}},children:[c.jsx($,{label:"Room Info",icon:c.jsx(F,{}),iconPosition:"start"}),c.jsx($,{label:"Upload Images",icon:c.jsx(V,{}),iconPosition:"start"}),c.jsx($,{label:"About Room",icon:c.jsx(K,{}),iconPosition:"start"})]}),c.jsx(fe,{value:u,index:0,children:c.jsx(ye,{formData:I,handleInputChange:X,handleCheckboxChange:Y,roomTypes:o,amenities:R,selectedAmenities:D,handleAmenitiesChange:J,isEdit:n})}),c.jsx(fe,{value:u,index:1,children:c.jsx(Re,{images:g,onUploadSuccess:oe,onRemoveImageUrl:ae,isUploading:b})}),c.jsx(fe,{value:u,index:2,children:c.jsx(Ce,{aboutRoom:A,handleAboutChange:Z})})]})}),!S&&c.jsx(N,{sx:{px:3,py:2,bgcolor:"background.paper"},children:c.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[c.jsxs(v,{children:[c.jsx(T,{onClick:()=>p(Math.max(0,u-1)),disabled:0===u,sx:{ml:1},children:"Previous"}),c.jsx(T,{variant:"contained",color:"primary",onClick:()=>p(Math.min(2,u+1)),disabled:2===u,sx:{ml:1},children:"Next"})]}),c.jsxs(v,{children:[c.jsx(T,{onClick:s,variant:"outlined",color:"secondary",children:"Cancel"}),c.jsx(T,{onClick:ee,variant:"contained",color:"primary",disabled:a||!se(),sx:{ml:2},children:a?"Saving...":"Save Room"})]})]})})]})},Ie=b(me)((({theme:e})=>({paddingTop:e.spacing(12),paddingBottom:e.spacing(4),backgroundColor:"#fff",borderRadius:e.shape.borderRadius}))),ke=b(v)((({theme:e})=>({marginBottom:e.spacing(4),padding:e.spacing(2),backgroundColor:"#fff",borderRadius:e.shape.borderRadius}))),Ae=b(X)((({theme:e})=>({width:"100%",marginBottom:e.spacing(2)}))),we=b(oe)((({theme:e})=>({width:"100%",marginBottom:e.spacing(2)}))),De=b(Q)((({theme:e})=>({marginTop:e.spacing(2)}))),Te=()=>{var e,o,a,s,i,n,t,r,l,d,x,h,f,R,C,S,I;const[k,A]=m.useState(""),[w,D]=m.useState(""),[P,W]=m.useState(!1),U=u(),{data:E}=p(),q=null==(e=null==E?void 0:E.hotels)?void 0:e.filter((e=>e.hotelCode));m.useEffect((()=>{if(!k&&q&&q.length>0){const e=q[0];A(String(e.hotelCode)),D(e.authKey)}}),[q,k]);const F=null==(a=null==(o=new Date)?void 0:o.toISOString())?void 0:a.split("T")[0],B=null==(i=null==(s=new Date(Date.now()+864e5))?void 0:s.toISOString())?void 0:i.split("T")[0],[O,G]=m.useState(F),[N,_]=m.useState(B),{data:z,isLoading:M}=g(k,w,O,N),H=(null==Array||Array.isArray(null==z?void 0:z.rooms),null==z?void 0:z.rooms),L=(null==(r=null==(t=null==(n=null==z?void 0:z.rateApiData)?void 0:n.RES_Response)?void 0:t.RoomInfo)?void 0:r.Source)?(null==Array?void 0:Array.isArray(null==(x=null==(d=null==(l=null==z?void 0:z.rateApiData)?void 0:l.RES_Response)?void 0:d.RoomInfo)?void 0:x.Source))?null==(R=null==(f=null==(h=null==z?void 0:z.rateApiData)?void 0:h.RES_Response)?void 0:f.RoomInfo)?void 0:R.Source:[null==(I=null==(S=null==(C=null==z?void 0:z.rateApiData)?void 0:C.RES_Response)?void 0:S.RoomInfo)?void 0:I.Source]:[],[$,V]=m.useState(null),K=j(k,w,O,N),J=(e,o)=>{const a=Array.isArray(H)&&H.length>0?H.find((o=>o&&o._id===e)):null;a&&(a.show=o,K.mutate(a))},X=b(y)((({theme:e})=>({fontSize:"1.25rem",fontWeight:600})));return c.jsxs(Ie,{maxWidth:"lg",children:[c.jsxs(ke,{elevation:2,children:[c.jsx(X,{variant:"h6",children:"Room Configuration"}),c.jsxs("div",{className:"flex w-full justify-between",children:[c.jsxs(Q,{container:!0,spacing:2,alignItems:"center",children:[c.jsx(Q,{item:!0,xs:12,md:4,children:c.jsxs(Ae,{children:[c.jsx(Y,{id:"hotel-select-label",children:"Select Hotel"}),c.jsx(Z,{labelId:"hotel-select-label",value:k,label:"Select Hotel",onChange:e=>{A(e.target.value);const o=q.find((o=>String(o.hotelCode)===e.target.value));o&&D(o.authKey)},children:null==q?void 0:q.map((e=>c.jsx(ee,{value:String(e.hotelCode),children:e.name},e._id)))})]})}),c.jsx(Q,{item:!0,xs:6,md:4,children:c.jsx(we,{label:"From Date",type:"date",value:O,onChange:e=>G(e.target.value),InputLabelProps:{shrink:!0}})}),c.jsx(Q,{item:!0,xs:6,md:4,children:c.jsx(we,{label:"To Date",type:"date",value:N,onChange:e=>_(e.target.value),InputLabelProps:{shrink:!0}})})]}),c.jsx(Q,{item:!0,xs:12,md:4,children:c.jsx(T,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>U("/admin/day-use-room"),children:"Switch to Day Use Room"})})]})]}),c.jsx(v,{children:M?c.jsx("div",{className:"flex justify-center items-center mx-auto",children:c.jsx("img",{src:"/images/Logo/spinner.svg",alt:""})}):c.jsx(De,{container:!0,spacing:1,children:null==H?void 0:H.map((e=>c.jsx(Q,{item:!0,xs:12,sm:6,md:4,children:c.jsx(ve,{room:e,onToggleShow:J,onEdit:()=>V(e)})},e._id)))})}),$&&c.jsx(Se,{room:$,roomTypes:L,onClose:()=>V(null),onSave:e=>{W(!0),e._id&&K.mutate(e,{onSuccess:()=>{V(null),W(!1)},onError:e=>{W(!1)}})},isEdit:!!$._id,roomSaving:P})]})};export{Te as Rooms,Te as default};
