var G=Object.defineProperty,N=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var W=(s,n,a)=>n in s?G(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,p=(s,n)=>{for(var a in n||(n={}))T.call(n,a)&&W(s,a,n[a]);if(M)for(var a of M(n))K.call(n,a)&&W(s,a,n[a]);return s},j=(s,n)=>N(s,z(n));import{r as E,j as e,_ as P}from"./react-vendor-CU6lFo1N.js";import{e as O}from"./index-DTQi_YP9.js";import{useGetHotels as $}from"./useHotelHook2-4z4wAkLq.js";import{am as J,a7 as Q,o as u,ar as X,q as h,$ as Y,a0 as Z,a1 as ee,D as w,as as ae,at as re,au as se,av as ne,p as g,w as v,V as b,e as le,ad as m,a8 as d,aw as te,a9 as y,aa as I,ab as S,ac as t,ax as ie,h as de,af as oe}from"./ui-vendor-BNgsC25r.js";import"./animation-vendor-DE7fCS50.js";import"./vendor-DnuN4cIi.js";import"./query-vendor-B8s5OfyV.js";import"./swiper-vendor-CoL_RVtK.js";import"./date-vendor-BpmxrJb6.js";const Ce=()=>{const[s,n]=E.useState(0),[a,C]=E.useState({username:"",email:"",phone:"",gender:"",age:"",role:"",password:"",allowedCities:"",allowedHotels:[]}),{data:x}=$(),{mutate:k,isLoading:l}=O(),A=["Basic Information","Personal Details","Role & Security","Access Control"],c=r=>{const{name:o,value:i}=r.target;C(o==="allowedHotels"?j(p({},a),{[o]:typeof i=="string"?i.split(","):i}):j(p({},a),{[o]:i}))},B=()=>{n(r=>r+1)},D=()=>{n(r=>r-1)},q=r=>{r.preventDefault();const o=j(p({},a),{allowedCities:a.allowedCities?a.allowedCities.split(",").map(i=>i.trim()):[],allowedHotels:a.allowedHotels||[]});k(o,{onSuccess:()=>{P.success("User created successfully"),C({username:"",email:"",phone:"",gender:"",age:"",role:"",password:"",allowedCities:"",allowedHotels:[]}),n(0)},onError:i=>{P.error(i.message||"User creation failed")}})},R=()=>e.jsx(g,{elevation:0,sx:{p:2},children:e.jsxs(v,{children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(b,{sx:{bgcolor:"primary.main",mr:2},children:e.jsx(le,{})}),e.jsx(h,{variant:"h6",children:"Basic Information"})]}),e.jsx(m,{fullWidth:!0,label:"Username",name:"username",value:a.username,onChange:c,placeholder:"Enter username",required:!0,disabled:l,variant:"outlined",sx:{mb:3}}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(m,{fullWidth:!0,label:"Email",type:"email",name:"email",value:a.email,onChange:c,placeholder:"Enter email address",required:!0,disabled:l,variant:"outlined"})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(m,{fullWidth:!0,label:"Phone Number",type:"tel",name:"phone",value:a.phone,onChange:c,placeholder:"Enter phone number",required:!0,disabled:l,variant:"outlined"})})]})]})}),U=()=>e.jsx(g,{elevation:0,sx:{p:2},children:e.jsxs(v,{children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(b,{sx:{bgcolor:"secondary.main",mr:2},children:e.jsx(te,{})}),e.jsx(h,{variant:"h6",children:"Personal Details"})]}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:12,children:e.jsxs(y,{fullWidth:!0,variant:"outlined",children:[e.jsx(I,{children:"Gender"}),e.jsxs(S,{name:"gender",value:a.gender,onChange:c,label:"Gender",required:!0,disabled:l,children:[e.jsx(t,{value:"",disabled:!0,children:"Select gender"}),e.jsx(t,{value:"male",children:"Male"}),e.jsx(t,{value:"female",children:"Female"}),e.jsx(t,{value:"other",children:"Other"})]})]})}),e.jsx(d,{item:!0,xs:12,md:12,children:e.jsx(m,{fullWidth:!0,label:"Age",type:"number",name:"age",value:a.age,onChange:c,placeholder:"Enter age",required:!0,disabled:l,variant:"outlined",InputProps:{inputProps:{min:18,max:100}}})})]})]})}),F=()=>e.jsx(g,{elevation:0,sx:{p:2},children:e.jsxs(v,{children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(b,{sx:{bgcolor:"error.main",mr:2},children:e.jsx(ie,{})}),e.jsx(h,{variant:"h6",children:"Role & Security"})]}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(y,{fullWidth:!0,variant:"outlined",children:[e.jsx(I,{children:"Role"}),e.jsxs(S,{name:"role",value:a.role,onChange:c,label:"Role",required:!0,disabled:l,children:[e.jsx(t,{value:"",disabled:!0,children:"Select role"}),e.jsx(t,{value:"superadmin",children:"SuperAdmin"}),e.jsx(t,{value:"admin",children:"Admin"}),e.jsx(t,{value:"manager",children:"Manager"}),e.jsx(t,{value:"contentManager",children:"Content Manager"}),e.jsx(t,{value:"cityManager",children:"City Manager"}),e.jsx(t,{value:"hotelManager",children:"Hotel Manager"}),e.jsx(t,{value:"digitalMarketer",children:"Digital Marketer"})]})]})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(m,{fullWidth:!0,label:"Password",type:"password",name:"password",value:a.password,onChange:c,placeholder:"Enter password",required:!0,disabled:l,variant:"outlined"})})]})]})}),L=()=>{var r;return e.jsx(g,{elevation:0,sx:{p:2},children:e.jsxs(v,{children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(b,{sx:{bgcolor:"success.main",mr:2},children:e.jsx(de,{})}),e.jsx(h,{variant:"h6",children:"Access Control"})]}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,xs:12,md:6,children:e.jsx(m,{fullWidth:!0,label:"Allowed Cities",name:"allowedCities",value:a.allowedCities,onChange:c,placeholder:"e.g., city1, city2",disabled:l,variant:"outlined",helperText:"Enter cities separated by commas"})}),e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(y,{fullWidth:!0,variant:"outlined",children:[e.jsx(I,{children:"Allowed Hotels"}),e.jsx(S,{multiple:!0,name:"allowedHotels",value:a.allowedHotels,onChange:c,label:"Allowed Hotels",disabled:l,renderValue:o=>e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:o.map(i=>{const f=Array.isArray(x==null?void 0:x.hotels)?x.hotels.find(_=>_._id===i):null;return e.jsx(oe,{label:(f==null?void 0:f.name)||i,size:"small",color:"primary",variant:"outlined"},i)})}),children:(r=x==null?void 0:x.hotels)==null?void 0:r.map(o=>e.jsx(t,{value:o._id,children:o.name},o._id))})]})})]})]})})},V=r=>{switch(r){case 0:return R();case 1:return U();case 2:return F();case 3:return L();default:return"Unknown step"}},H=r=>{switch(r){case 0:return a.username&&a.email&&a.phone;case 1:return a.gender&&a.age;case 2:return a.role&&a.password;case 3:return!0;default:return!1}};return e.jsx(J,{maxWidth:"lg",sx:{mt:15,mb:5,minHeight:"80vh"},children:e.jsxs(Q,{elevation:3,sx:{p:4,borderRadius:2},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(X,{fontSize:"large",sx:{color:"primary.main",mr:2}}),e.jsx(h,{variant:"h4",component:"h1",color:"primary.main",fontWeight:"500",children:"Create New User"})]}),e.jsx(Y,{activeStep:s,alternativeLabel:!0,sx:{mb:4},children:A.map(r=>e.jsx(Z,{children:e.jsx(ee,{children:r})},r))}),e.jsxs(u,{component:"form",onSubmit:q,noValidate:!0,children:[V(s),e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(w,{variant:"outlined",disabled:s===0||l,onClick:D,startIcon:e.jsx(ae,{}),children:"Back"}),s===A.length-1?e.jsx(w,{type:"submit",variant:"contained",color:"success",disabled:l||!H(s),endIcon:l?e.jsx(re,{size:20}):e.jsx(se,{}),children:l?"Creating...":"Create User"}):e.jsx(w,{variant:"contained",onClick:B,disabled:!H(s),endIcon:e.jsx(ne,{}),children:"Next"})]})]})]})})};export{Ce as CreateUser,Ce as default};
