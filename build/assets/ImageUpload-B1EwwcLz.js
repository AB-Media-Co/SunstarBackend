var f=(m,s,r)=>new Promise((p,t)=>{var l=e=>{try{o(r.next(e))}catch(i){t(i)}},d=e=>{try{o(r.throw(e))}catch(i){t(i)}},o=e=>e.done?p(e.value):Promise.resolve(e.value).then(l,d);o((r=r.apply(m,s)).next())});import{r as c,j as a}from"./react-vendor-CU6lFo1N.js";import{uploadSingleImagesAPIV2 as U}from"./useHotelHook2-4z4wAkLq.js";import{aW as b,o as j,ad as E,D as v,aX as S,at as B,q as u}from"./ui-vendor-BNgsC25r.js";const T=b("input")({display:"none"}),W=({feature:m,handleFeatureChange:s,setImageUpload:r,index:p})=>{const[t,l]=c.useState(!1),[d,o]=c.useState(null),[e,i]=c.useState(null),x=`contained-button-file-${p}`,I=g=>f(void 0,null,function*(){const y=g.target.files[0];if(y){i(null),o(null),l(!0);try{const n=yield U([y]),h=n==null?void 0:n.imageUrls[0];s("image",h),l(!1)}catch(n){console.error("Error uploading image:",n),o("Failed to upload image. Please try again."),l(!1),s("image","")}}});return c.useEffect(()=>{r(t)},[t,r]),a.jsxs(j,{children:[a.jsx(E,{label:"Image URL",variant:"outlined",fullWidth:!0,value:m.image||"",onChange:g=>s("image",g.target.value),style:{marginBottom:10},disabled:t}),a.jsxs("label",{htmlFor:x,children:[a.jsx(T,{accept:"image/*",id:x,type:"file",onChange:I,disabled:t}),a.jsx(v,{variant:"contained",component:"span",startIcon:a.jsx(S,{}),disabled:t,style:{marginBottom:10},children:"Upload Image"})]}),t&&a.jsxs(j,{display:"flex",alignItems:"center",mt:1,children:[a.jsx(B,{size:20,sx:{mr:1}}),a.jsx(u,{variant:"body2",color:"textSecondary",children:"Uploading..."})]}),d&&a.jsx(u,{variant:"body2",color:"error",mt:1,children:d}),e&&a.jsx(u,{variant:"body2",color:"error",mt:1,children:e})]})};export{W as I};
