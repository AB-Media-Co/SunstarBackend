import{j as e,ai as a,a3 as s,m as l,an as n,o as r,W as i,X as d,Z as t,w as o,ao as c,ap as x,aq as h,ar as m,n as u,r as j,J as p,c as v,a9 as g,a4 as b,as as f,a5 as w,a6 as y,a7 as C,a8 as H,at as W,f as I,ab as S}from"./ui-vendor-ib5n1sau.js";import{a as A}from"./react-vendor-TJBKpoaW.js";import{f as M,d as q}from"./index-Bl04lSVd.js";import{useGetHotels as E}from"./useHotelHook2-Dg3SXKg3.js";import"./query-vendor-B-W3jWpx.js";const k=()=>{const[k,P]=A.useState(0),[U,R]=A.useState({username:"",email:"",phone:"",gender:"",age:"",role:"",password:"",allowedCities:"",allowedHotels:[]}),{data:D}=E(),{mutate:z,isLoading:B}=M(),N=["Basic Information","Personal Details","Role & Security","Access Control"],_=e=>{const{name:a,value:s}=e.target;R("allowedHotels"===a?{...U,[a]:"string"==typeof s?s.split(","):s}:{...U,[a]:s})},G=e=>{switch(e){case 0:return U.username&&U.email&&U.phone;case 1:return U.gender&&U.age;case 2:return U.role&&U.password;case 3:return!0;default:return!1}};return e.jsx(a,{maxWidth:"lg",sx:{mt:15,mb:5,minHeight:"80vh"},children:e.jsxs(s,{elevation:3,sx:{p:4,borderRadius:2},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(n,{fontSize:"large",sx:{color:"primary.main",mr:2}}),e.jsx(r,{variant:"h4",component:"h1",color:"primary.main",fontWeight:"500",children:"Create New User"})]}),e.jsx(i,{activeStep:k,alternativeLabel:!0,sx:{mb:4},children:N.map((a=>e.jsx(d,{children:e.jsx(t,{children:a})},a)))}),e.jsxs(l,{component:"form",onSubmit:e=>{e.preventDefault();const a={...U,allowedCities:U.allowedCities?U.allowedCities.split(",").map((e=>e.trim())):[],allowedHotels:U.allowedHotels||[]};z(a,{onSuccess:()=>{q.success("User created successfully"),R({username:"",email:"",phone:"",gender:"",age:"",role:"",password:"",allowedCities:"",allowedHotels:[]}),P(0)},onError:e=>{q.error(e.message||"User creation failed")}})},noValidate:!0,children:[(a=>{switch(a){case 0:return e.jsx(u,{elevation:0,sx:{p:2},children:e.jsxs(j,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(p,{sx:{bgcolor:"primary.main",mr:2},children:e.jsx(v,{})}),e.jsx(r,{variant:"h6",children:"Basic Information"})]}),e.jsx(g,{fullWidth:!0,label:"Username",name:"username",value:U.username,onChange:_,placeholder:"Enter username",required:!0,disabled:B,variant:"outlined",sx:{mb:3}}),e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{item:!0,xs:12,md:6,children:e.jsx(g,{fullWidth:!0,label:"Email",type:"email",name:"email",value:U.email,onChange:_,placeholder:"Enter email address",required:!0,disabled:B,variant:"outlined"})}),e.jsx(b,{item:!0,xs:12,md:6,children:e.jsx(g,{fullWidth:!0,label:"Phone Number",type:"tel",name:"phone",value:U.phone,onChange:_,placeholder:"Enter phone number",required:!0,disabled:B,variant:"outlined"})})]})]})});case 1:return e.jsx(u,{elevation:0,sx:{p:2},children:e.jsxs(j,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(p,{sx:{bgcolor:"secondary.main",mr:2},children:e.jsx(f,{})}),e.jsx(r,{variant:"h6",children:"Personal Details"})]}),e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{item:!0,xs:12,md:12,children:e.jsxs(w,{fullWidth:!0,variant:"outlined",children:[e.jsx(y,{children:"Gender"}),e.jsxs(C,{name:"gender",value:U.gender,onChange:_,label:"Gender",required:!0,disabled:B,children:[e.jsx(H,{value:"",disabled:!0,children:"Select gender"}),e.jsx(H,{value:"male",children:"Male"}),e.jsx(H,{value:"female",children:"Female"}),e.jsx(H,{value:"other",children:"Other"})]})]})}),e.jsx(b,{item:!0,xs:12,md:12,children:e.jsx(g,{fullWidth:!0,label:"Age",type:"number",name:"age",value:U.age,onChange:_,placeholder:"Enter age",required:!0,disabled:B,variant:"outlined",InputProps:{inputProps:{min:18,max:100}}})})]})]})});case 2:return e.jsx(u,{elevation:0,sx:{p:2},children:e.jsxs(j,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(p,{sx:{bgcolor:"error.main",mr:2},children:e.jsx(W,{})}),e.jsx(r,{variant:"h6",children:"Role & Security"})]}),e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{item:!0,xs:12,md:6,children:e.jsxs(w,{fullWidth:!0,variant:"outlined",children:[e.jsx(y,{children:"Role"}),e.jsxs(C,{name:"role",value:U.role,onChange:_,label:"Role",required:!0,disabled:B,children:[e.jsx(H,{value:"",disabled:!0,children:"Select role"}),e.jsx(H,{value:"superadmin",children:"SuperAdmin"}),e.jsx(H,{value:"admin",children:"Admin"}),e.jsx(H,{value:"manager",children:"Manager"}),e.jsx(H,{value:"contentManager",children:"Content Manager"}),e.jsx(H,{value:"cityManager",children:"City Manager"}),e.jsx(H,{value:"hotelManager",children:"Hotel Manager"}),e.jsx(H,{value:"digitalMarketer",children:"Digital Marketer"})]})]})}),e.jsx(b,{item:!0,xs:12,md:6,children:e.jsx(g,{fullWidth:!0,label:"Password",type:"password",name:"password",value:U.password,onChange:_,placeholder:"Enter password",required:!0,disabled:B,variant:"outlined"})})]})]})});case 3:return e.jsx(u,{elevation:0,sx:{p:2},children:e.jsxs(j,{children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(p,{sx:{bgcolor:"success.main",mr:2},children:e.jsx(I,{})}),e.jsx(r,{variant:"h6",children:"Access Control"})]}),e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{item:!0,xs:12,md:6,children:e.jsx(g,{fullWidth:!0,label:"Allowed Cities",name:"allowedCities",value:U.allowedCities,onChange:_,placeholder:"e.g., city1, city2",disabled:B,variant:"outlined",helperText:"Enter cities separated by commas"})}),e.jsx(b,{item:!0,xs:12,md:6,children:e.jsxs(w,{fullWidth:!0,variant:"outlined",children:[e.jsx(y,{children:"Allowed Hotels"}),e.jsx(C,{multiple:!0,name:"allowedHotels",value:U.allowedHotels,onChange:_,label:"Allowed Hotels",disabled:B,renderValue:a=>e.jsx(l,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map((a=>{const s=Array.isArray(null==D?void 0:D.hotels)?D.hotels.find((e=>e._id===a)):null;return e.jsx(S,{label:(null==s?void 0:s.name)||a,size:"small",color:"primary",variant:"outlined"},a)}))}),children:null==(s=null==D?void 0:D.hotels)?void 0:s.map((a=>e.jsx(H,{value:a._id,children:a.name},a._id)))})]})})]})]})});default:return"Unknown step"}var s})(k),e.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(o,{variant:"outlined",disabled:0===k||B,onClick:()=>{P((e=>e-1))},startIcon:e.jsx(c,{}),children:"Back"}),k===N.length-1?e.jsx(o,{type:"submit",variant:"contained",color:"success",disabled:B||!G(k),endIcon:B?e.jsx(x,{size:20}):e.jsx(h,{}),children:B?"Creating...":"Create User"}):e.jsx(o,{variant:"contained",onClick:()=>{P((e=>e+1))},disabled:!G(k),endIcon:e.jsx(m,{}),children:"Next"})]})]})]})})};export{k as CreateUser,k as default};
