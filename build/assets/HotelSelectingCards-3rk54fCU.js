const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calendar-CRjZDDyJ.js","assets/index-DYTxYbj9.js","assets/index-sLc7lYUo.css","assets/index-hJzA2ap8.js","assets/Icons-lPlNsMFk.js","assets/useRoomsHook-BYp7QFYk.js","assets/useHotelHook2-B1mZQll8.js","assets/urlHelper-C1y1jxtM.js","assets/format-Ck-D5MMj.js","assets/isSameMonth-Bbw7Qfju.js","assets/ArrowBackIosNew-DahwF3Fv.js","assets/createSvgIcon-BUf7rLal.js","assets/clsx-B-dksMZM.js","assets/ArrowForwardIos-Q5TsKIp9.js","assets/Close-BNCnIgLi.js"])))=>i.map(i=>d[i]);
import{r as a,j as t,_ as O}from"./index-DYTxYbj9.js";import{useGetHotels as R}from"./useHotelHook2-B1mZQll8.js";import{u as A}from"./useRoomsHook-BYp7QFYk.js";import{r as D,m as k}from"./proxy-X9jsmD9d.js";import{c as L}from"./createSvgIcon-BUf7rLal.js";import{C as T,a as _}from"./chevron-right-CI-tKnX2.js";import{S as P}from"./Star-3KGTXN7Q.js";import{f as H}from"./format-Ck-D5MMj.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-CQarV4aU.js";const z={some:0,all:1};function $(e,n,{root:c,margin:g,amount:o="some"}={}){const f=D(e),l=new WeakMap,d=r=>{r.forEach(i=>{const y=l.get(i.target);if(i.isIntersecting!==!!y)if(i.isIntersecting){const b=n(i);typeof b=="function"?l.set(i.target,b):m.unobserve(i.target)}else y&&(y(i),l.delete(i.target))})},m=new IntersectionObserver(d,{root:c,rootMargin:g,threshold:typeof o=="number"?o:z[o]});return f.forEach(r=>m.observe(r)),()=>m.disconnect()}function X(e,{root:n,margin:c,amount:g,once:o=!1}={}){const[f,l]=a.useState(!1);return a.useEffect(()=>{if(!e.current||o&&f)return;const d=()=>(l(!0),o?void 0:()=>l(!1)),m={root:n&&n.current||void 0,margin:c,amount:g};return $(e.current,d,m)},[n,e,c,o,g]),f}const V=L(t.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),W=a.lazy(()=>O(()=>import("./Calendar-CRjZDDyJ.js").then(e=>e.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),B=e=>{if(!e)return"";const n=e.split(",").map(c=>c.trim());if(n.length>=3){const c=n[n.length-2],g=n[n.length-1].split("-")[0];return`${c}, ${g}`}else if(n.length===2)return n.join(", ");return e},F=()=>H(new Date,"yyyy-MM-dd"),G=()=>H(new Date(Date.now()+864e5),"yyyy-MM-dd"),K=({hotel:e,availabilityData:n,isLoadingAvailability:c})=>{var C;console.log("Hotel:",e==null?void 0:e.hotelCode,"Availability Data:",n);const[g,o]=a.useState(0),[f,l]=a.useState(!1),d=((C=e==null?void 0:e.imageSections)==null?void 0:C.carouselImages)||(e==null?void 0:e.images)||[],m=a.useRef(null),r=a.useRef(!1),i=a.useRef(null),y=50,b=a.useCallback(()=>{o(s=>s===0?d.length-1:s-1)},[d.length]),j=a.useCallback(()=>{o(s=>s===d.length-1?0:s+1)},[d.length]),w=s=>{o(s)},h=(()=>{if(c)return"loading";if(!n||!Array.isArray(n.rooms))return null;const s=n.rooms.map(u=>u.Availability).filter(u=>typeof u=="number"&&u>=0);return s.length>0?Math.max(...s):null})(),x=s=>{s.pointerType==="mouse"&&s.button!==0||(m.current=s.clientX,i.current=s.clientX,r.current=!0,s.currentTarget.setPointerCapture(s.pointerId))},p=s=>{r.current&&(i.current=s.clientX)},v=s=>{var S;if(!r.current)return;r.current=!1;try{s.currentTarget.releasePointerCapture(s.pointerId)}catch(J){}const u=m.current,M=(S=i.current)!=null?S:s.clientX;if(u==null)return;const I=M-u;Math.abs(I)>=y&&(I<0?j():b()),m.current=null,i.current=null};return d.length===0?t.jsx("div",{className:"w-full h-96 bg-gray-300 rounded-xl flex items-center justify-center",children:"No images available"}):t.jsxs("div",{className:"w-full relative",children:[t.jsxs("div",{className:"relative w-full h-80 bg-gray-200 rounded-2xl overflow-hidden group touch-action-pan-y",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onPointerDown:x,onPointerMove:p,onPointerUp:v,children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden",children:d.map((s,u)=>t.jsx("img",{src:s,alt:`Hotel image ${u+1}`,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${u===g?"opacity-100":"opacity-0"}`,loading:"lazy",decoding:"async",draggable:!1},u))}),h==="loading"?t.jsx("span",{className:"absolute top-4 right-4 bg-gray-400 text-primary-white text-sm font-bold px-3 py-1 rounded-full z-20 shadow-lg animate-pulse",children:"Loading..."}):h!==null&&h>=0?t.jsx("span",{className:"absolute top-4 right-4 bg-red-500 text-primary-white text-sm font-bold px-3 py-1 rounded-full z-20 shadow-lg",children:h===1?"1 Room Left":`${h} Rooms Left`}):null,t.jsx("button",{onClick:b,className:`absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-white/80 hover:bg-white text-gray-800 p-2.5 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 ${f?"opacity-100":"opacity-0"}`,children:t.jsx(T,{size:24,strokeWidth:3})}),t.jsx("button",{onClick:j,className:`absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-white/80 hover:bg-white text-gray-800 p-2.5 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 ${f?"opacity-100":"opacity-0"}`,children:t.jsx(_,{size:24,strokeWidth:3})})]}),t.jsx("div",{className:"bottom-2 absolute left-0 right-0 flex justify-center gap-2",children:d.map((s,u)=>t.jsx("button",{onClick:()=>w(u),className:`h-1 rounded-full transition-all duration-300 ${g===u?"bg-primary-green w-8":"bg-gray-300 w-6 hover:bg-gray-400"}`},u))})]})},E=a.memo(({hotel:e,close:n})=>{var w,N,h;const c={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},[g,o]=a.useState(!1),[,f]=a.useState(null),[,l]=a.useState(null);a.useEffect(()=>{const x=localStorage.getItem("checkInDate"),p=localStorage.getItem("checkOutDate");x&&p&&(f(x),l(p))},[]);const{data:d,isLoading:m}=A(e==null?void 0:e.hotelCode,e==null?void 0:e.authKey,F(),G(),{enabled:!!(e!=null&&e.hotelCode&&(e!=null&&e.authKey)),staleTime:1e3*60*5,gcTime:1e3*60*30,refetchOnWindowFocus:!1,cacheTime:1e3*60*10,retry:1}),r=((w=e==null?void 0:e.amenities)==null?void 0:w.slice(0,3))||[],i=(((N=e==null?void 0:e.amenities)==null?void 0:N.length)||0)-r.length,y=a.useCallback(()=>{localStorage.setItem("hotelInfo",JSON.stringify(e)),o(!0)},[e]),b=a.useCallback(()=>{o(!1),n()},[n]),j=x=>{const p=Math.floor(x),v=x-p>=.5;return t.jsx("div",{className:"flex items-center",children:[...Array(5)].map((C,s)=>t.jsx(P,{className:`${s<p?"text-yellow-400":s===p&&v?"text-yellow-400 opacity-60":"text-gray-300"}`,style:{fontSize:"16px"}},s))})};return t.jsxs(k.div,{className:"bg-primary-white rounded-2xl shadow-lg overflow-hidden w-full h-full transition-transform duration-300 hover:scale-105 flex flex-col",variants:c,initial:"hidden",animate:"visible",children:[t.jsx(K,{hotel:e,availabilityData:d,isLoadingAvailability:m}),t.jsxs("div",{className:"p-4 flex flex-col flex-grow justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("h1",{className:"text-xl  text-start font-bold text-black cursor-pointer hover:text-primary-green   transition-colors duration-300",onClick:y,children:e==null?void 0:e.name}),j(e.rating)]}),t.jsxs("div",{className:"flex items-center mt-1 text-gray-600 text-sm font-semibold",children:[t.jsx(V,{className:"text-primary-green mr-1",style:{fontSize:"16px"}}),t.jsx("span",{children:B((h=e==null?void 0:e.location)==null?void 0:h.hotelAddress)})]}),t.jsxs("ul",{className:"flex items-center mt-2 flex-wrap",children:[r.length>0?r.map((x,p)=>{const v=typeof x=="object"?x.value:x;return t.jsx("li",{className:"bg-gradient-to-r from-primary-green to-primary-green text-primary-white text-xs px-3 py-1 rounded-full m-1",children:t.jsx("span",{children:v})},p)}):t.jsx("li",{children:"No amenities listed"}),i>0&&t.jsxs("li",{className:"text-gray-600 text-xs m-1",children:["+",i," more"]})]})]}),t.jsxs("div",{className:"mt-4 w-full",children:[t.jsxs("div",{className:"text-start",children:[t.jsxs("span",{className:"text-2xl leading-none font-bold text-primary-green",children:["â‚¹ ",e==null?void 0:e.price,t.jsx("span",{className:"text-gray-400 text-sm font-medium",children:" / night onwards"}),t.jsx("br",{}),t.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Incl. taxes"})]}),t.jsx("p",{className:"text-primary-green text-[12px] font-semibold",children:"Lowest Price, Guaranteed!"})]}),t.jsx("button",{onClick:y,className:"bg-primary-green cursor-pointer w-full text-primary-white px-4 py-2 rounded-lg shadow-md flex justify-center items-center transition duration-300 hover:bg-primary-dark-green mt-4",children:"Select Hotel"})]})]}),g&&t.jsx("div",{className:"fixed inset-0 flex justify-center items-center z-50",children:t.jsx(a.Suspense,{fallback:t.jsx("div",{className:"bg-white p-8 rounded-lg animate-pulse",children:t.jsx("div",{className:"h-64 w-96 bg-gray-200 rounded"})}),children:t.jsx(W,{setCheckInDate:f,setCheckOutDate:l,setOpenCalender:b,hotelCode:e.hotelCode})})})]})});E.displayName="HotelCard";const U=a.memo(({data:e,close:n})=>{var m;const c=a.useRef(null),g=X(c,{once:!0,amount:.1}),{data:o,isLoading:f}=R(),l=e||o,d=((m=l==null?void 0:l.hotels)==null?void 0:m.filter(r=>r==null?void 0:r.active))||[];return f?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:[...Array(6)].map((r,i)=>t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"bg-gray-200 h-48 rounded-2xl mb-4"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},i))}):t.jsx(k.div,{ref:c,className:"grid grid-cols-1 items-stretch bg-primary-white sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 p-6",initial:{opacity:0},animate:g?{opacity:1}:{opacity:0},transition:{duration:.4,ease:"easeOut"},children:d.map(r=>t.jsx(E,{hotel:r,close:n},r._id||r.hotelCode))})});U.displayName="HotelSelectingCards";export{U as default};
