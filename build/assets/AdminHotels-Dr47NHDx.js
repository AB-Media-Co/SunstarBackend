import{j as e,aj as t,E as s,ak as a,p as l,al as o,am as r}from"./ui-vendor-ib5n1sau.js";import{a as i,i as n}from"./react-vendor-TJBKpoaW.js";import{a as d}from"./query-vendor-B-W3jWpx.js";import{c,d as m}from"./index-Bl04lSVd.js";import{g as x}from"./index-BDVyzZVq.js";import{A as h,m as u}from"./utils-iyq1-MzM.js";import{useGetHotels as g,useEditHotel as p,useDeleteHotelById as f}from"./useHotelHook2-Dg3SXKg3.js";const y=async()=>(await c.get("/api/ezee/allhotels")).data,v=({isOpen:t,onConfirm:s,onCancel:a})=>(i.useEffect((()=>(document.body.style.overflow=t?"hidden":"auto",()=>document.body.style.overflow="auto")),[t]),i.useEffect((()=>{t&&x.fromTo(".modal-container",{y:"-100%",opacity:0},{y:"0",opacity:1,duration:.6,ease:"power3.out"})}),[t]),e.jsx(h,{children:t&&e.jsx(u.div,{className:"fixed inset-0 bg-gray-900 bg-opacity-80  z-50 flex justify-center items-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(u.div,{className:"modal-container bg-primary-white rounded-xl p-10 text-center shadow-2xl transform transition-all duration-500 ease-in-out",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},children:[e.jsx("h2",{className:"text-2xl font-extrabold text-gray-800 mb-6",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to delete this? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-around mt-6",children:[e.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-primary-white font-semibold py-3 px-8 rounded-lg transform hover:scale-105 transition-transform duration-200 shadow-md",onClick:s,children:"Yes, Delete"}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-primary-white font-semibold py-3 px-8 rounded-lg transform hover:scale-105 transition-transform duration-200 shadow-md",onClick:a,children:"Cancel"})]})]})})})),b=({item:t,type:i,onEdit:n,onDelete:d,onToggle:c})=>{var m,x;return e.jsxs("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden relative border border-gray-200 transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1 h-full flex flex-col",children:[e.jsxs("div",{className:"justify-end items-center py-4 px-2 flex gap-2 z-10 transition-opacity duration-200",children:[e.jsx("button",{onClick:()=>n(t),className:"p-2 px-4 rounded-full shadow-md hover:bg-blue-100 transition-colors duration-200",title:"Edit",children:e.jsx(s,{fontSize:"small",className:"text-blue-600"})}),e.jsx("button",{onClick:()=>d(t.hotelCode),className:"p-2 px-4 rounded-full shadow-md hover:bg-red-100 transition-colors duration-200",title:"Delete",children:e.jsx(a,{fontSize:"small",className:"text-red-600"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{checked:t.active,onChange:()=>c(t,"active"),color:"primary"}),e.jsx("span",{className:"text-sm text-gray-700",children:t.active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{checked:t.isDayUseRoom,onChange:()=>c(t,"dayUseRoom",!t.isDayUseRoom),color:"primary"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Day Use Room"})]})]}),e.jsx("div",{className:"relative group",children:e.jsxs("div",{className:"h-48 sm:h-56 overflow-hidden",children:[e.jsx("img",{src:(null==(m=t.images)?void 0:m[0])||"https://via.placeholder.com/300本土化?text=No+Image",alt:"hotel"===i?t.name:t.roomType,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),e.jsxs("div",{className:"p-5 flex-grow flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-1 hover:text-blue-600 transition-colors duration-200",children:"hotel"===i?t.name:`${t.roomType} - Room ${t.roomNumber}`}),e.jsxs("div",{className:"flex items-center bg-yellow-50 px-2 py-1 rounded-md border border-yellow-100",children:[e.jsx(o,{fontSize:"small",className:"text-yellow-500"}),e.jsx("span",{className:"ml-1 text-gray-700 font-semibold",children:t.rating||"N/A"})]})]}),"hotel"===i&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(r,{fontSize:"small",className:"text-gray-500 mr-1"}),e.jsxs("span",{className:"text-gray-700 text-sm",children:["Check In: ",t.checkIn||"N/A"," | Check Out: ",t.checkOut||"N/A"]})]}),e.jsx("div",{className:"flex items-center justify-between mt-4 mb-4",children:e.jsx("div",{className:"flex items-center",children:t.discountedPrice?e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:"text-green-600 font-bold text-lg",children:["₹",t.price.toLocaleString(),e.jsx("span",{className:"text-xs text-gray-600 ml-1",children:"/night"})]})}):e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-700 font-bold text-lg",children:["₹",t.price.toLocaleString()]}),e.jsx("span",{className:"text-xs text-gray-600 ml-1",children:"/night"})]})})}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-bold text-gray-800 mb-3",children:"Amenities:"}),e.jsx("ul",{className:"flex flex-wrap gap-1.5",children:(null==(x=null==t?void 0:t.amenities)?void 0:x.length)?e.jsxs(e.Fragment,{children:[t.amenities.slice(0,3).map(((t,s)=>e.jsx("li",{className:"bg-indigo-50 text-indigo-700 text-xs px-3 py-1.5 rounded-full border border-indigo-100 flex items-center gap-1 transition-colors duration-200 hover:bg-indigo-100",children:"object"==typeof t?t.value:t},s))),t.amenities.length>3&&e.jsxs("li",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1.5 rounded-full border border-gray-200 transition-colors duration-200 hover:bg-gray-200",children:["+",t.amenities.length-3," more"]})]}):e.jsx("li",{className:"text-gray-500 italic",children:"No amenities listed"})})]})]})]},t._id)},j=({title:s,type:a,onEdit:l,onDelete:o,onAdd:r})=>{var n,d;const{data:c,isLoading:m,isError:x,error:h,refetch:u}=g(),{mutate:f}=p(),[y,v]=i.useState(!1),[j,N]=i.useState(""),[w,C]=i.useState(3),k=async(e,t="active",s=!e.active)=>{v(!0),C(3),N("active"===t?s?`Activating ${e.name}`:`Deactivating ${e.name}`:s?`Enabling Day Use Room for ${e.name}`:`Disabling Day Use Room for ${e.name}`);try{"active"===t?await f({hotelCode:e.hotelCode,hotelData:{active:s}},{onSuccess:()=>u()}):"dayUseRoom"===t&&await f({hotelCode:e.hotelCode,hotelData:{isDayUseRoom:s}},{onSuccess:()=>u()})}catch(l){return N("Failed to update. Please try again."),void setTimeout((()=>{v(!1),C(3)}),3e3)}const a=setInterval((()=>{C((e=>e<=1?(clearInterval(a),0):e-1))}),1e3);setTimeout((()=>{v(!1),C(3)}),3e3)};if(m)return e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)]",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 animate-spin mb-4"}),e.jsxs("p",{className:"text-gray-600 animate-pulse",children:["Loading ",a,"s..."]})]})});if(x)return e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)]",children:e.jsxs("div",{className:"bg-red-50 p-6 rounded-lg max-w-md border border-red-100 shadow-md",children:[e.jsxs("p",{className:"text-red-600 font-semibold mb-3 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Error loading data"]}),e.jsx("p",{className:"text-gray-700",children:h.message}),e.jsx("button",{onClick:()=>u(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-200 shadow-sm",children:"Retry"})]})});const D=!(null==(n=null==c?void 0:c.hotels)?void 0:n.length);return e.jsxs("div",{className:"min-h-[calc(100vh-64px)] bg-gradient-to-b from-gray-50 to-white relative",children:[e.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:s}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"hotel"===a?"Manage your hotel inventory, update details, and add new properties.":"Manage your room inventory, update details, and add new accommodations."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:r,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-sm",children:[e.jsx(t,{fontSize:"small",className:"mr-1"}),"Add New ","hotel"===a?"Hotel":"Room"]})})]}),D?e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md text-center max-w-md mx-auto",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:["No ",a,"s found"]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Start adding your first ",a," to manage your inventory."]}),e.jsxs("button",{onClick:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-sm",children:["Add New ","hotel"===a?"Hotel":"Room"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:null==(d=null==c?void 0:c.hotels)?void 0:d.map((t=>e.jsx("div",{className:"h-full",children:e.jsx(b,{item:t,type:a,onEdit:l,onDelete:o,onToggle:k})},t._id)))})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-black/70 to-gray-900/70 backdrop-blur-sm flex justify-center items-center z-50 animate-fadeIn",children:e.jsx("div",{className:"bg-white/90 p-8 rounded-2xl shadow-2xl transform transition-all duration-500 animate-slideUp",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin border-t-blue-600"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:e.jsx("p",{className:"text-2xl font-bold text-blue-600 animate-pulse",children:w})})]}),e.jsxs("p",{className:"text-xl font-semibold text-gray-800 animate-pulse",children:[j,"..."]})]})})})]})},N=()=>{const{data:t,isLoading:s,isError:a,error:l}=d({queryKey:["hotels"],queryFn:y}),{mutate:o}=f(),r=n(),[c,x]=i.useState(!1),[h,u]=i.useState(null);i.useEffect((()=>(document.body.style.overflow=c?"hidden":"auto",()=>document.body.style.overflow="auto")),[c]);return s?e.jsx("p",{children:"Loading..."}):a?e.jsxs("p",{children:["Error: ",l.message]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"Our Premium Hotels",data:null==t?void 0:t.hotels,type:"hotel",onEdit:e=>{r(`/admin/hotels/edit/${e.hotelCode}`,{state:{hotel:e}})},onDelete:e=>{u(e),x(!0)},onAdd:()=>{r("/admin/hotels/add")},showAddButton:!0}),e.jsx(v,{isOpen:c,onConfirm:()=>{h&&o(h,{onSuccess:()=>{m.success("Hotel Deleted Successfully"),x(!1),u(null)},onError:e=>{m.error(`Failed to delete hotel: ${e.message}`),x(!1)}})},onCancel:()=>{x(!1),u(null)}})]})};export{N as AdminHotels};
