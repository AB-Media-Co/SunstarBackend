import{b as e,a as t}from"./react-vendor-TJBKpoaW.js";import{p as n,o as r,d as o}from"./use-is-mounted-COoFf7n5.js";const i="undefined"!=typeof document?e.useLayoutEffect:()=>{};const u=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},s=e=>{if(e&&"window"in e&&e.window===e)return e;return u(e).defaultView||window};function a(e,t){return!(!t||!e)&&e.contains(t)}const c=(e=document)=>e.activeElement;function l(e){return e.target}function d(e){let t=null;return()=>(null==t&&(t=e()),t)}const v=d((function(){return e=/^Mac/i,"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform);var e,t})),f=d((function(){return e=/Android/i,"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some((t=>e.test(t.brand))))||e.test(window.navigator.userAgent));var e,t}));function p(){let e=t.useRef(new Map),n=t.useCallback(((t,n,r,o)=>{let i=(null==o?void 0:o.once)?(...t)=>{e.current.delete(r),r(...t)}:r;e.current.set(r,{type:n,eventTarget:t,fn:i,options:o}),t.addEventListener(n,i,o)}),[]),r=t.useCallback(((t,n,r,o)=>{var i;let u=(null===(i=e.current.get(r))||void 0===i?void 0:i.fn)||r;t.removeEventListener(n,u,o),e.current.delete(r)}),[]),o=t.useCallback((()=>{e.current.forEach(((e,t)=>{r(e.eventTarget,e.type,t,e.options)}))}),[r]);return t.useEffect((()=>o),[o]),{addGlobalListener:n,removeGlobalListener:r,removeAllGlobalListeners:o}}function g(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function b(e){let n=t.useRef({isFocused:!1,observer:null});i((()=>{const e=n.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}}),[]);let r=function(e){const n=t.useRef(null);return i((()=>{n.current=e}),[e]),t.useCallback(((...e)=>{const t=n.current;return null==t?void 0:t(...e)}),[])}((t=>{null==e||e(t)}));return t.useCallback((e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){n.current.isFocused=!0;let t=e.target,o=e=>{if(n.current.isFocused=!1,t.disabled){let t=g(e);r(t)}n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};t.addEventListener("focusout",o,{once:!0}),n.current.observer=new MutationObserver((()=>{if(n.current.isFocused&&t.disabled){var e;null===(e=n.current.observer)||void 0===e||e.disconnect();let r=t===document.activeElement?null:document.activeElement;t.dispatchEvent(new FocusEvent("blur",{relatedTarget:r})),t.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:r}))}})),n.current.observer.observe(t,{attributes:!0,attributeFilter:["disabled"]})}}),[r])}let E=null,m=new Set,y=new Map,T=!1,w=!1;const L={Tab:!0,Escape:!0};function h(e,t){for(let n of m)n(e,t)}function F(e){T=!0,function(e){return!(e.metaKey||!v()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(E="keyboard",h("keyboard",e))}function k(e){E="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(T=!0,h("pointer",e))}function H(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||(f()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(T=!0,E="virtual")}function P(e){e.target!==window&&e.target!==document&&e.isTrusted&&(T||w||(E="virtual",h("virtual",e)),T=!1,w=!1)}function C(){T=!1,w=!0}function M(e){if("undefined"==typeof window||"undefined"==typeof document||y.get(s(e)))return;const t=s(e),n=u(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){T=!0,r.apply(this,arguments)},n.addEventListener("keydown",F,!0),n.addEventListener("keyup",F,!0),n.addEventListener("click",H,!0),t.addEventListener("focus",P,!0),t.addEventListener("blur",C,!1),"undefined"!=typeof PointerEvent&&(n.addEventListener("pointerdown",k,!0),n.addEventListener("pointermove",k,!0),n.addEventListener("pointerup",k,!0)),t.addEventListener("beforeunload",(()=>{W(e)}),{once:!0}),y.set(t,{focus:r})}const W=(e,t)=>{const n=s(e),r=u(e);t&&r.removeEventListener("DOMContentLoaded",t),y.has(n)&&(n.HTMLElement.prototype.focus=y.get(n).focus,r.removeEventListener("keydown",F,!0),r.removeEventListener("keyup",F,!0),r.removeEventListener("click",H,!0),n.removeEventListener("focus",P,!0),n.removeEventListener("blur",C,!1),"undefined"!=typeof PointerEvent&&(r.removeEventListener("pointerdown",k,!0),r.removeEventListener("pointermove",k,!0),r.removeEventListener("pointerup",k,!0)),y.delete(n))};function D(){return"pointer"!==E}"undefined"!=typeof document&&function(e){const t=u(e);let n;"loading"!==t.readyState?M(e):(n=()=>{M(e)},t.addEventListener("DOMContentLoaded",n))}();const S=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function A(e,n,r){M(),t.useEffect((()=>{let t=(t,n)=>{(function(e,t,n){let r=u(null==n?void 0:n.target);const o="undefined"!=typeof window?s(null==n?void 0:n.target).HTMLInputElement:HTMLInputElement,i="undefined"!=typeof window?s(null==n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,a="undefined"!=typeof window?s(null==n?void 0:n.target).HTMLElement:HTMLElement,c="undefined"!=typeof window?s(null==n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||r.activeElement instanceof o&&!S.has(r.activeElement.type)||r.activeElement instanceof i||r.activeElement instanceof a&&r.activeElement.isContentEditable)&&"keyboard"===t&&n instanceof c&&!L[n.key])})(!!(null==r?void 0:r.isTextInput),t,n)&&e(D())};return m.add(t),()=>{m.delete(t)}}),n)}function B(e){let{isDisabled:n,onBlurWithin:r,onFocusWithin:o,onFocusWithinChange:i}=e,s=t.useRef({isFocusWithin:!1}),{addGlobalListener:d,removeAllGlobalListeners:v}=p(),f=t.useCallback((e=>{e.currentTarget.contains(e.target)&&s.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(s.current.isFocusWithin=!1,v(),r&&r(e),i&&i(!1))}),[r,i,s,v]),E=b(f),m=t.useCallback((e=>{if(!e.currentTarget.contains(e.target))return;const t=u(e.target),n=c(t);if(!s.current.isFocusWithin&&n===l(e.nativeEvent)){o&&o(e),i&&i(!0),s.current.isFocusWithin=!0,E(e);let n=e.currentTarget;d(t,"focus",(e=>{if(s.current.isFocusWithin&&!a(n,e.target)){let r=new t.defaultView.FocusEvent("blur",{relatedTarget:e.target});!function(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}(r,n);let o=g(r);f(o)}}),{capture:!0})}}),[o,i,E,d,f]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:m,onBlur:f}}}let x=!1,I=0;function R(e){"touch"===e.pointerType&&(x=!0,setTimeout((()=>{x=!1}),50))}function G(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent&&document.addEventListener("pointerup",R),I++,()=>{I--,I>0||"undefined"!=typeof PointerEvent&&document.removeEventListener("pointerup",R)}}function V(e){let{onHoverStart:n,onHoverChange:r,onHoverEnd:o,isDisabled:i}=e,[s,c]=t.useState(!1),l=t.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;t.useEffect(G,[]);let{addGlobalListener:d,removeAllGlobalListeners:v}=p(),{hoverProps:f,triggerHoverEnd:g}=t.useMemo((()=>{let e=(e,t)=>{let n=l.target;l.pointerType="",l.target=null,"touch"!==t&&l.isHovered&&n&&(l.isHovered=!1,v(),o&&o({type:"hoverend",target:n,pointerType:t}),r&&r(!1),c(!1))},t={};return"undefined"!=typeof PointerEvent&&(t.onPointerEnter=t=>{x&&"mouse"===t.pointerType||((t,o)=>{if(l.pointerType=o,i||"touch"===o||l.isHovered||!t.currentTarget.contains(t.target))return;l.isHovered=!0;let s=t.currentTarget;l.target=s,d(u(t.target),"pointerover",(t=>{l.isHovered&&l.target&&!a(l.target,t.target)&&e(t,t.pointerType)}),{capture:!0}),n&&n({type:"hoverstart",target:s,pointerType:o}),r&&r(!0),c(!0)})(t,t.pointerType)},t.onPointerLeave=t=>{!i&&t.currentTarget.contains(t.target)&&e(t,t.pointerType)}),{hoverProps:t,triggerHoverEnd:e}}),[n,r,o,i,l,d,v]);return t.useEffect((()=>{i&&g({currentTarget:l.target},l.pointerType)}),[i]),{hoverProps:f,isHovered:s}}function O(e={}){let{autoFocus:n=!1,isTextInput:r,within:o}=e,i=t.useRef({isFocused:!1,isFocusVisible:n||D()}),[s,a]=t.useState(!1),[d,v]=t.useState((()=>i.current.isFocused&&i.current.isFocusVisible)),f=t.useCallback((()=>v(i.current.isFocused&&i.current.isFocusVisible)),[]),p=t.useCallback((e=>{i.current.isFocused=e,a(e),f()}),[f]);A((e=>{i.current.isFocusVisible=e,f()}),[],{isTextInput:r});let{focusProps:g}=function(e){let{isDisabled:n,onFocus:r,onBlur:o,onFocusChange:i}=e;const s=t.useCallback((e=>{if(e.target===e.currentTarget)return o&&o(e),i&&i(!1),!0}),[o,i]),a=b(s),d=t.useCallback((e=>{const t=u(e.target),n=t?c(t):c();e.target===e.currentTarget&&n===l(e.nativeEvent)&&(r&&r(e),i&&i(!0),a(e))}),[i,r,a]);return{focusProps:{onFocus:!n&&(r||i||o)?d:void 0,onBlur:n||!o&&!i?void 0:s}}}({isDisabled:o,onFocusChange:p}),{focusWithinProps:E}=B({isDisabled:!o,onFocusWithinChange:p});return{isFocused:s,isFocusVisible:d,focusProps:o?E:g}}function K({disabled:e=!1}={}){let i=t.useRef(null),[u,s]=t.useState(!1),a=n(),c=r((()=>{i.current=null,s(!1),a.dispose()})),l=r((e=>{if(a.dispose(),null===i.current){i.current=e.currentTarget,s(!0);{let t=o(e.currentTarget);a.addEventListener(t,"pointerup",c,!1),a.addEventListener(t,"pointermove",(e=>{if(i.current){let t=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);s(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(t,i.current.getBoundingClientRect()))}}),!1),a.addEventListener(t,"pointercancel",c,!1)}}}));return{pressed:u,pressProps:e?{}:{onPointerDown:l,onPointerUp:c,onClick:c}}}function j(e,n){return t.useMemo((()=>{var t;if(e.type)return e.type;let r=null!=(t=e.as)?t:"button";return"string"==typeof r&&"button"===r.toLowerCase()||"BUTTON"===(null==n?void 0:n.tagName)&&!n.hasAttribute("type")?"button":void 0}),[e.type,e.as,n])}export{O as $,V as a,j as e,K as w};
