var Ae=Object.defineProperty,De=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var ue=(t,a,s)=>a in t?Ae(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,A=(t,a)=>{for(var s in a||(a={}))xe.call(a,s)&&ue(t,s,a[s]);if(Y)for(var s of Y(a))me.call(a,s)&&ue(t,s,a[s]);return t},P=(t,a)=>De(t,we(a));var he=(t,a)=>{var s={};for(var r in t)xe.call(t,r)&&a.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&Y)for(var r of Y(t))a.indexOf(r)<0&&me.call(t,r)&&(s[r]=t[r]);return s};var pe=(t,a,s)=>new Promise((r,g)=>{var x=i=>{try{m(s.next(i))}catch(R){g(R)}},d=i=>{try{m(s.throw(i))}catch(R){g(R)}},m=i=>i.done?r(i.value):Promise.resolve(i.value).then(x,d);m((s=s.apply(t,a)).next())});import{k as Pe,j as e,r as l,v as ee,q as Fe}from"./react-vendor-CU6lFo1N.js";import{uploadImagesAPIV2 as We,useGetHotels as Ee}from"./useHotelHook2-4z4wAkLq.js";import{u as qe,a as Be}from"./useRoomsHook-zmtYRA7h.js";import{n as F,o as n,p as Re,q as u,t as Ge,v as ye,w as Me,x as Ue,y as Ie,d as _e,R as He,z as Ne,D as C,J as Le,O as ze,Q as Oe,U as $e,V as Ke,W as ge,X as Ce,C as Qe,Z as Ve,_ as Je,$ as Xe,a0 as te,a1 as se,a2 as ae,a3 as Ye,a4 as oe,a5 as Ze,a6 as et,a7 as B,a8 as p,a9 as Se,aa as ke,ab as Te,ac as ne,ad as D,G as tt,ae as st,af as at,ag as ot,ah as rt,ai as nt,aj as it,ak as lt,al as ct,am as dt}from"./ui-vendor-BNgsC25r.js";import{L as ut}from"./Loader-XhNNeGJs.js";import{M as xt}from"./MultipleImageUpload-WNylHf9L.js";import{I as mt}from"./ImageUpload-B1EwwcLz.js";import{u as ht}from"./useUpdatePagesHook-Dhdz4rlW.js";import"./animation-vendor-DE7fCS50.js";import"./vendor-DnuN4cIi.js";import"./query-vendor-B8s5OfyV.js";import"./swiper-vendor-CoL_RVtK.js";import"./date-vendor-BpmxrJb6.js";import"./index-DTQi_YP9.js";const pt=Pe`
  from { opacity: 0; }
  to { opacity: 1; }
`,gt=F(n)(({theme:t})=>({position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9))",backdropFilter:"blur(5px)",color:"white",zIndex:9999,animation:`${pt} 0.3s ease-in-out`})),bt=({room:t,onEdit:a,onToggleShow:s})=>{var S,k;const[r,g]=l.useState(t.show),[x,d]=l.useState(!1),[m,i]=l.useState(5);l.useEffect(()=>{let j;return x&&(j=setInterval(()=>{i(I=>I<=1?(d(!1),clearInterval(j),5):I-1)},1e3)),()=>clearInterval(j)},[x]);const R=()=>{g(!r),d(!0),i(5),s(t._id,!r)},y=(j,I=15)=>{if(!j)return"";const o=j.split(" ");return o.length<=I?j:o.slice(0,I).join(" ")+"..."};return e.jsxs(Re,{sx:{width:320,margin:2,display:"flex",flexDirection:"column",borderRadius:3,boxShadow:4,overflow:"hidden",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",p:1},children:[e.jsx(u,{variant:"body2",children:"Show Room:"}),e.jsx(Ge,{checked:r,onChange:R})]}),x&&e.jsxs(gt,{children:[e.jsx(ut,{fullScreen:!1,size:"sm"}),e.jsx(u,{variant:"h6",sx:{mb:1},children:r?"Showing Room":"Hiding Room"}),e.jsxs(u,{variant:"body1",children:["Please wait ",m," seconds..."]})]}),e.jsx(n,{sx:{height:180,backgroundColor:"grey.200"},children:(S=t.RoomImage)!=null&&S[0]?e.jsx(ye,{component:"img",image:t.RoomImage[0],alt:t.RoomName,sx:{height:"100%",objectFit:"cover"}}):e.jsx(n,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"grey.300"},children:e.jsx(u,{variant:"caption",children:"No Image Available"})})}),e.jsxs(Me,{sx:{flexGrow:1,p:2},children:[e.jsx(u,{variant:"h6",fontWeight:600,children:t.RoomName||"Unnamed Room"}),e.jsx(u,{variant:"body2",color:"text.secondary",children:y(t.RoomDescription)}),e.jsxs(n,{sx:{mt:2,display:"grid",gap:1},children:[t.maxGuests&&e.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ue,{sx:{fontSize:18,mr:.5}}),e.jsxs(u,{variant:"body2",children:["Max Guests: ",t.maxGuests]})]}),t.squareFeet&&e.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ie,{sx:{fontSize:18,mr:.5}}),e.jsxs(u,{variant:"body2",children:["Area: ",t.squareFeet," sq.ft"]})]}),t.Availability!==void 0&&e.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(_e,{sx:{fontSize:18,mr:.5}}),e.jsxs(u,{variant:"body2",children:["Available Rooms: ",t.Availability]})]}),((k=t.services)==null?void 0:k.length)>0&&e.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(He,{sx:{fontSize:18,mr:.5}}),e.jsxs(u,{variant:"body2",children:["Services: ",t.services.join(", ")]})]})]})]}),e.jsxs(Ne,{sx:{justifyContent:"space-between",px:2,pb:2},children:[e.jsxs(n,{children:[t.defaultRate&&e.jsxs(u,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:["₹ ",t.defaultRate]}),e.jsxs(u,{variant:"subtitle1",color:"success.main",fontWeight:600,children:["₹ ",t.discountRate]})]}),e.jsx(C,{variant:"outlined",onClick:()=>a(t),children:"Edit"})]})]})},jt=({room:t,onEdit:a,onToggleShow:s})=>e.jsx(n,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:e.jsx(bt,{room:t,onEdit:a,onToggleShow:s},t._id)});function re(t){const x=t,{children:a,value:s,index:r}=x,g=he(x,["children","value","index"]);return e.jsx("div",P(A({role:"tabpanel",hidden:s!==r,id:`tabpanel-${r}`,"aria-labelledby":`tab-${r}`},g),{children:s===r&&e.jsx(n,{sx:{pt:2},children:a})}))}const ft=(t,a)=>{const[s,r]=l.useState([]);l.useEffect(()=>{if(t&&a){const x=t.filter(d=>a.some(m=>m.value===d.value));r(x)}},[t,a]);const g=l.useCallback((x,d)=>{const m=d==null?void 0:d.map(i=>typeof i=="string"?{value:i,label:i}:i);r(m)},[]);return{selectedAmenities:s,handleAmenitiesChange:g,setSelectedAmenities:r}},be=({formData:t,isEdit:a,handleInputChange:s,handleCheckboxChange:r,amenities:g,selectedAmenities:x,handleAmenitiesChange:d})=>{const R={PaperProps:{style:{maxHeight:224,overflowY:"auto"}}};return e.jsxs(n,{component:"form",noValidate:!0,autoComplete:"off",children:[e.jsxs(B,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Basic Information"}),e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsxs(Se,{fullWidth:!0,children:[e.jsx(ke,{id:"room-type-label",children:"Room Type"}),e.jsxs(Te,{labelId:"room-type-label",id:"RoomTypeID",name:"RoomTypeID",value:t.RoomTypeID||"",label:"Room Type",MenuProps:R,disabled:!0,sx:{bgcolor:"background.paper"},children:[e.jsx(ne,{value:"",children:e.jsx("em",{children:"Select Room Type"})}),e.jsx(ne,{value:t.RoomTypeID,children:t==null?void 0:t.RoomTypeID})]})]})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(D,{fullWidth:!0,label:"Room Name",name:"RoomName",value:t.RoomName,onChange:s,sx:{bgcolor:"background.paper"},placeholder:"Enter distinctive room name",required:!0,disabled:!0})})]})]}),e.jsxs(B,{elevation:1,sx:{p:3,mb:4,borderRadius:3,bgcolor:"background.paper",border:"1px solid",borderColor:"divider"},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mb:2},children:"Room Details"}),e.jsxs(n,{display:"flex",flexDirection:"column",gap:3,children:[e.jsx(D,{fullWidth:!0,multiline:!0,rows:4,label:"Room Description",name:"RoomDescription",value:t.RoomDescription,onChange:s,sx:{bgcolor:"background.default"},placeholder:"Describe the unique features and benefits of this room"}),e.jsx(D,{fullWidth:!0,type:"number",label:"Max Guests",name:"maxGuests",value:t.maxGuests,onChange:s,placeholder:"e.g., 2 guests",InputProps:{startAdornment:e.jsx(n,{sx:{mr:1,display:"flex",alignItems:"center"},children:e.jsx(tt,{color:"primary"})})},sx:{bgcolor:"background.default"}}),e.jsx(D,{fullWidth:!0,type:"number",label:"Room Size (sq ft)",name:"squareFeet",value:t.squareFeet,onChange:s,placeholder:"e.g., 450 sq ft",InputProps:{startAdornment:e.jsx(n,{sx:{mr:1,display:"flex",alignItems:"center"},children:e.jsx(Ie,{color:"primary"})})},sx:{bgcolor:"background.default"}})]})]}),e.jsxs(B,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Amenities"}),e.jsx(p,{container:!0,spacing:2,children:e.jsx(p,{item:!0,xs:12,children:e.jsx(st,{multiple:!0,freeSolo:!0,options:g||[],value:x,onChange:d,getOptionLabel:y=>y.label||"",renderInput:y=>e.jsx(D,P(A({},y),{label:"Amenities",placeholder:"Select amenities",sx:{bgcolor:"background.paper"}})),renderTags:(y,S)=>y.map((k,j)=>e.jsx(at,P(A({variant:"outlined",label:k.label},S({index:j})),{color:"primary",size:"small",sx:{borderRadius:1}})))})})})]}),e.jsxs(B,{elevation:0,sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Pricing"}),e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(D,{fullWidth:!0,label:"Default Rate",name:"defaultRate",type:"number",value:t.defaultRate,onChange:s,sx:{bgcolor:"background.paper"},InputProps:{startAdornment:e.jsx(ot,{color:"action",sx:{mr:1}})},placeholder:"Base price per night",required:!0})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(D,{fullWidth:!0,label:"Discount Rate",name:"discountRate",type:"number",value:t.discountRate,disabled:!0,sx:{bgcolor:"background.paper",opacity:.8},InputProps:{startAdornment:e.jsx(rt,{color:"action",sx:{mr:1}})},helperText:"Managed by pricing system"})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(nt,{control:e.jsx(it,{checked:t.available!=="no",onChange:r,color:"primary"}),label:"Room is available for booking"})})]})]})]})},je=({images:t,onUploadSuccess:a,onRemoveImageUrl:s,isUploading:r})=>e.jsx(n,{children:e.jsxs(B,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Room Images"}),e.jsx(u,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Upload high-quality images that showcase your room. We recommend at least 3 images from different angles."}),r&&e.jsx(n,{sx:{width:"100%",mb:2},children:e.jsx(lt,{})}),e.jsx(xt,{imagesUrls:t,onUploadSuccess:a,onRemoveImageUrl:s,isUploading:r}),t.length>0&&e.jsxs(n,{sx:{mt:3},children:[e.jsxs(u,{variant:"subtitle2",gutterBottom:!0,children:["Current Images (",t.length,")"]}),e.jsx(p,{container:!0,spacing:2,children:t.map((g,x)=>e.jsx(p,{item:!0,xs:6,sm:4,md:3,children:e.jsxs(Re,{sx:{position:"relative"},children:[e.jsx(ye,{component:"img",height:"120",image:g,alt:`Room image ${x+1}`,sx:{objectFit:"cover"}}),e.jsx(Ce,{size:"small",sx:{position:"absolute",top:5,right:5,bgcolor:"rgba(255, 255, 255, 0.8)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.95)"}},onClick:()=>s(g),children:e.jsx(ct,{fontSize:"small"})})]})},x))})]})]})}),fe=({aboutRoom:t,handleAboutChange:a})=>e.jsx(n,{component:"form",noValidate:!0,autoComplete:"off",children:e.jsxs(B,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(u,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"About This Room"}),e.jsx(u,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Provide detailed information about what makes this room special. This will be displayed prominently on booking pages."}),e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{item:!0,xs:12,children:e.jsx(D,{fullWidth:!0,label:"About Room Description",name:"aboutDescription",value:t.description,onChange:s=>a("description",s.target.value),multiline:!0,rows:4,sx:{bgcolor:"background.paper"},placeholder:"Describe unique features, views, or experiences guests can expect"})}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(u,{variant:"subtitle2",gutterBottom:!0,children:"Featured Image"}),e.jsx(n,{sx:{p:2,border:"1px dashed",borderColor:"divider",borderRadius:1},children:e.jsx(mt,{feature:t,handleFeatureChange:a,setImageUpload:()=>{},index:0})})]})]})]})}),vt=({room:t,roomTypes:a,roomSaving:s,onClose:r,onSave:g,isEdit:x})=>{var H,N;const[d,m]=l.useState(0),[i,R]=l.useState(t.RoomImage||[]),[y,S]=l.useState(!1),{amenities:k}=ht(),j=Le(),I=ze(j.breakpoints.down("sm")),[o,O]=l.useState({HotelCode:t.HotelCode||"",RoomTypeID:t.RoomTypeID&&t.RateTypeID?`${t.RoomTypeID}`:"",RateTypeID:t.RateTypeID||"",RoomName:t.RoomName||"",RoomDescription:t.RoomDescription||"",defaultRate:t.defaultRate||"",discountRate:t.discountRate||"",maxGuests:t.maxGuests||"",squareFeet:t.squareFeet||"",services:t.services?t.services.join(", "):"",available:t.available!=="no",source:t.source||"PMS"}),[f,Z]=l.useState({description:((H=t.AboutRoom)==null?void 0:H.description)||"",image:((N=t.AboutRoom)==null?void 0:N.img)||""}),{selectedAmenities:w,handleAmenitiesChange:W}=ft(k,t.Amenities),$=l.useCallback((b,h)=>{m(h)},[]),K=l.useCallback(b=>{const{name:h,value:v}=b.target;O(T=>P(A({},T),{[h]:v}))},[]),Q=l.useCallback(b=>{O(h=>P(A({},h),{available:b.target.checked}))},[]),V=l.useCallback((b,h)=>{Z(v=>P(A({},v),{[b]:h}))},[]),G=l.useCallback(()=>{var v,T,L;const b=(L=(T=(v=o.services)==null?void 0:v.split(","))==null?void 0:T.map(E=>E.trim()))==null?void 0:L.filter(E=>E.length>0),h=P(A(A({},t),o),{RoomImage:i,Amenities:w,maxGuests:o.maxGuests?parseInt(o.maxGuests):void 0,squareFeet:o.squareFeet?parseInt(o.squareFeet):void 0,services:b,defaultRate:o.defaultRate?parseFloat(o.defaultRate):void 0,discountRate:o.discountRate?parseFloat(o.discountRate):void 0,AboutRoom:{description:f.description,img:f.image}});g(h)},[t,o,i,w,f,g]),M=l.useCallback(b=>pe(void 0,null,function*(){if(b.length===0){ee.error("No images selected");return}S(!0);try{const h=yield We(b),v=Array.isArray(h)?h:[h];R(T=>[...T,...v[0].imageUrls]),ee.success("Images uploaded successfully!")}catch(h){console.error("Error uploading images:",h),ee.error("Error uploading images")}finally{S(!1)}}),[]),U=l.useCallback(b=>{R(h=>h.filter(v=>v!==b))},[]),_=()=>["RoomName","RoomDescription","defaultRate"].every(h=>o[h]),J=()=>e.jsx(e.Fragment,{children:e.jsx(n,{sx:{mb:2},children:e.jsxs(Xe,{activeStep:d,orientation:"vertical",children:[e.jsxs(te,{children:[e.jsx(se,{children:"Room Info"}),e.jsxs(ae,{children:[e.jsx(be,{formData:o,handleInputChange:K,handleCheckboxChange:Q,roomTypes:a,amenities:k,selectedAmenities:w,handleAmenitiesChange:W,isEdit:x}),e.jsxs(n,{sx:{mt:2},children:[e.jsx(C,{variant:"contained",onClick:()=>m(1),sx:{mr:1},children:"Continue"}),e.jsx(C,{onClick:r,variant:"text",children:"Cancel"})]})]})]}),e.jsxs(te,{children:[e.jsx(se,{children:"Upload Images"}),e.jsxs(ae,{children:[e.jsx(je,{images:i,onUploadSuccess:M,onRemoveImageUrl:U,isUploading:y}),e.jsxs(n,{sx:{mt:2},children:[e.jsx(C,{variant:"contained",onClick:()=>m(2),sx:{mr:1},children:"Continue"}),e.jsx(C,{onClick:()=>m(0),variant:"text",children:"Back"})]})]})]}),e.jsxs(te,{children:[e.jsx(se,{children:"About Room"}),e.jsxs(ae,{children:[e.jsx(fe,{aboutRoom:f,handleAboutChange:V}),e.jsxs(n,{sx:{mt:2},children:[e.jsx(C,{variant:"contained",onClick:G,disabled:s||!_(),sx:{mr:1},children:s?"Saving...":"Save Room"}),e.jsx(C,{onClick:()=>m(1),variant:"text",children:"Back"})]})]})]})]})})}),X=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Ye,{value:d,onChange:$,variant:"fullWidth",sx:{mb:2,"& .MuiTab-root":{borderBottom:1,borderColor:"divider"},"& .Mui-selected":{fontWeight:"bold"}},children:[e.jsx(oe,{label:"Room Info",icon:e.jsx(ge,{}),iconPosition:"start"}),e.jsx(oe,{label:"Upload Images",icon:e.jsx(Ze,{}),iconPosition:"start"}),e.jsx(oe,{label:"About Room",icon:e.jsx(et,{}),iconPosition:"start"})]}),e.jsx(re,{value:d,index:0,children:e.jsx(be,{formData:o,handleInputChange:K,handleCheckboxChange:Q,roomTypes:a,amenities:k,selectedAmenities:w,handleAmenitiesChange:W,isEdit:x})}),e.jsx(re,{value:d,index:1,children:e.jsx(je,{images:i,onUploadSuccess:M,onRemoveImageUrl:U,isUploading:y})}),e.jsx(re,{value:d,index:2,children:e.jsx(fe,{aboutRoom:f,handleAboutChange:V})})]});return e.jsxs(Oe,{open:!0,onClose:r,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:2,overflow:"hidden"}},fullScreen:I,children:[e.jsx($e,{sx:{m:0,p:3,bgcolor:"primary.main",color:"primary.contrastText"},children:e.jsxs(n,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(Ke,{sx:{bgcolor:"background.paper",color:"primary.main",mr:2},children:e.jsx(ge,{})}),e.jsx(u,{variant:"h5",fontWeight:"medium",children:t._id?"Edit Room":"Add Room"})]}),e.jsx(Ce,{onClick:r,"aria-label":"close",sx:{color:"primary.contrastText"},children:e.jsx(Qe,{})})]})}),e.jsx(Ve,{dividers:!0,sx:{p:I?2:3,bgcolor:"background.default"},children:I?J():X()}),!I&&e.jsx(Je,{sx:{px:3,py:2,bgcolor:"background.paper"},children:e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[e.jsxs(n,{children:[e.jsx(C,{onClick:()=>m(Math.max(0,d-1)),disabled:d===0,sx:{ml:1},children:"Previous"}),e.jsx(C,{variant:"contained",color:"primary",onClick:()=>m(Math.min(2,d+1)),disabled:d===2,sx:{ml:1},children:"Next"})]}),e.jsxs(n,{children:[e.jsx(C,{onClick:r,variant:"outlined",color:"secondary",children:"Cancel"}),e.jsx(C,{onClick:G,variant:"contained",color:"primary",disabled:s||!_(),sx:{ml:2},children:s?"Saving...":"Save Room"})]})]})})]})},Rt=F(dt)(({theme:t})=>({paddingTop:t.spacing(12),paddingBottom:t.spacing(4),backgroundColor:"#fff",borderRadius:t.shape.borderRadius})),yt=F(n)(({theme:t})=>({marginBottom:t.spacing(4),padding:t.spacing(2),backgroundColor:"#fff",borderRadius:t.shape.borderRadius})),It=F(Se)(({theme:t})=>({width:"100%",marginBottom:t.spacing(2)})),ve=F(D)(({theme:t})=>({width:"100%",marginBottom:t.spacing(2)})),Ct=F(p)(({theme:t})=>({marginTop:t.spacing(2)})),_t=()=>{var G,M,U,_,J,X,H,N,b,h,v,T,L,E,ie,le,ce;const[t,a]=l.useState(""),[s,r]=l.useState(""),[g,x]=l.useState(!1),d=Fe(),{data:m}=Ee(),i=(G=m==null?void 0:m.hotels)==null?void 0:G.filter(c=>c.hotelCode);l.useEffect(()=>{if(!t&&i&&i.length>0){const c=i[0];a(String(c.hotelCode)),r(c.authKey)}},[i,t]);const R=(U=(M=new Date)==null?void 0:M.toISOString())==null?void 0:U.split("T")[0],y=(J=(_=new Date(Date.now()+864e5))==null?void 0:_.toISOString())==null?void 0:J.split("T")[0],[S,k]=l.useState(R),[j,I]=l.useState(y),{data:o,isLoading:O}=qe(t,s,S,j),f=(Array!=null&&Array.isArray(o==null?void 0:o.rooms),o==null?void 0:o.rooms);console.log("roomArray",f);const Z=(N=(H=(X=o==null?void 0:o.rateApiData)==null?void 0:X.RES_Response)==null?void 0:H.RoomInfo)!=null&&N.Source?Array!=null&&Array.isArray((v=(h=(b=o==null?void 0:o.rateApiData)==null?void 0:b.RES_Response)==null?void 0:h.RoomInfo)==null?void 0:v.Source)?(E=(L=(T=o==null?void 0:o.rateApiData)==null?void 0:T.RES_Response)==null?void 0:L.RoomInfo)==null?void 0:E.Source:[(ce=(le=(ie=o==null?void 0:o.rateApiData)==null?void 0:ie.RES_Response)==null?void 0:le.RoomInfo)==null?void 0:ce.Source]:[],[w,W]=l.useState(null),$=Be(t,s,S,j),K=c=>{x(!0),c._id&&$.mutate(c,{onSuccess:()=>{W(null),x(!1)},onError:q=>{console.error("Error updating room:",q),x(!1)}})},Q=(c,q)=>{const z=Array.isArray(f)&&f.length>0?f.find(de=>de&&de._id===c):null;z&&(z.show=q,$.mutate(z))},V=F(u)(({theme:c})=>({fontSize:"1.25rem",fontWeight:600}));return e.jsxs(Rt,{maxWidth:"lg",children:[e.jsxs(yt,{elevation:2,children:[e.jsx(V,{variant:"h6",children:"Room Configuration"}),e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsxs(p,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(p,{item:!0,xs:12,md:4,children:e.jsxs(It,{children:[e.jsx(ke,{id:"hotel-select-label",children:"Select Hotel"}),e.jsx(Te,{labelId:"hotel-select-label",value:t,label:"Select Hotel",onChange:c=>{a(c.target.value);const q=i.find(z=>String(z.hotelCode)===c.target.value);q&&r(q.authKey)},children:i==null?void 0:i.map(c=>e.jsx(ne,{value:String(c.hotelCode),children:c.name},c._id))})]})}),e.jsx(p,{item:!0,xs:6,md:4,children:e.jsx(ve,{label:"From Date",type:"date",value:S,onChange:c=>k(c.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(p,{item:!0,xs:6,md:4,children:e.jsx(ve,{label:"To Date",type:"date",value:j,onChange:c=>I(c.target.value),InputLabelProps:{shrink:!0}})})]}),e.jsx(p,{item:!0,xs:12,md:4,children:e.jsx(C,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>d("/admin/day-use-room"),children:"Switch to Day Use Room"})})]})]}),e.jsx(n,{children:O?e.jsx("div",{className:"flex justify-center items-center mx-auto",children:e.jsx("img",{src:"/images/Logo/spinner.svg",alt:""})}):e.jsx(Ct,{container:!0,spacing:1,children:f==null?void 0:f.map(c=>e.jsx(p,{item:!0,xs:12,sm:6,md:4,children:e.jsx(jt,{room:c,onToggleShow:Q,onEdit:()=>W(c)})},c._id))})}),w&&e.jsx(vt,{room:w,roomTypes:Z,onClose:()=>W(null),onSave:K,isEdit:!!w._id,roomSaving:g})]})};export{_t as Rooms,_t as default};
