import{Q as ne,c as me,j as e,L as Z,Y as oe,Z as le,$ as B,d as W,r as j,b as $,a0 as xe,a as T,a1 as he,a2 as J,a3 as X,a4 as ue,a5 as ge,V as fe,v as pe,t as D,f as ye,i as be}from"./index-DDkAf7Ig.js";import{L as ie}from"./LoginModal-nWV1V9r_.js";import{R as je,W as ve}from"./Warning-C-jtgPSe.js";import{A as ee,a as we}from"./ArrowRightAlt-C40HafL9.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=ne("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=ne("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Ne=me(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"})),ke=({ContactUsDetail:t})=>{const a=(t==null?void 0:t.phoneNumber)||"";return e.jsx("footer",{className:"w-full border-t border-gray-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-6 py-6 text-gray-600   md:justify-between md:gap-10 md:py-8",children:[e.jsxs("div",{className:"flex justify-between gap-2 sm:gap-3",children:[e.jsx("p",{className:"text-base font-semibold tracking-tight sm:text-lg md:text-2xl",children:"Facing an issue? Call us for assistance."}),a?e.jsx("a",{href:`tel:${a}`,className:"w-fit text-lg font-semibold underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-xl","aria-label":`Call ${a}`,children:e.jsx("span",{className:"whitespace-nowrap",children:a})}):e.jsx("span",{className:"text-sm text-gray-500 sm:text-base",children:"Phone number unavailable"})]}),e.jsxs("nav",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 sm:gap-x-8","aria-label":"Footer navigation",children:[e.jsx(Z,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Cancellation Policy"}),e.jsx(Z,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Terms & Conditions"})]})]})})})},Ce=()=>oe({mutationFn:async t=>(await le.post("/api/payments/create",t)).data,onSuccess:()=>{B.success("Order created successfully")},onError:t=>{var a,d;B.error("Failed to create order: "+(((d=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:d.message)||t.message))}}),Se=()=>oe({mutationFn:async t=>(await le.post("/api/payments/verify",t)).data,onSuccess:()=>{B.success("Payment verified successfully")},onError:t=>{var a,d;B.error("Payment verification failed: "+(((d=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:d.message)||t.message))}}),Ae=({hotelDetail:t,amount:a,onSuccess:d})=>{console.log("hi");const n=Ce(),o=Se(),l={14496:"rzp_live_KZSDFi3qOgrIgC",14492:"rzp_live_IQdcqeX4foVUM3",14494:"rzp_live_SxbRIhkDqyGEOM",14493:"rzp_live_uUlevuP8MoleGg"}[t==null?void 0:t.hotelCode],y=()=>{const u={amount:a,currency:"INR",hotelCode:t==null?void 0:t.hotelCode};n.mutate(u,{onSuccess:s=>{const i={key:l,amount:s.amount,currency:s.currency,name:t==null?void 0:t.hotelName,description:"Hotel Booking Payment",order_id:s.id,handler:function(m){const g={razorpay_order_id:m.razorpay_order_id,razorpay_payment_id:m.razorpay_payment_id,razorpay_signature:m.razorpay_signature,hotelCode:t==null?void 0:t.hotelCode};o.mutate(g,{onSuccess:()=>{B.success("Payment Verified âœ…"),d("PAID_TYPE_UNKID")}})},prefill:{name:"",email:"",contact:""},theme:{color:"#38b2ac"}};new window.Razorpay(i).open()},onError:()=>{B.error("Failed to create Razorpay order")}})};return e.jsx("button",{className:"bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 px-6 rounded-lg",onClick:y,children:"Confirm Booking"})},_e=({hotelDetail:t,verified:a,checkIn:d,checkOut:n})=>{const o=localStorage.getItem("user_email"),{data:r}=W(o),[l,y]=j.useState("");console.log(l);const{selectedRooms:u,setIsConfirmationModalOpen:s,someOneElse:i,guestData:c}=$(),m=xe(),g=T(),b=p=>{y(p)},h=(p="")=>{var E,S;if(!(a||(E=r==null?void 0:r.data)!=null&&E.isVerified)){(S=document.getElementById("guestDetail"))==null||S.scrollIntoView({behavior:"smooth"});return}const x={};u.forEach((k,A)=>{var R;const C=parseInt(localStorage.getItem("days")),_=Array(C).fill(k.price).join(","),I=Array(C).fill(0).join(","),f=Array(C).fill(0).join(",");x[`Room_${A+1}`]={Rateplan_Id:k==null?void 0:k.roomrateunkid,Ratetype_Id:k.RateTypeID,Roomtype_Id:k.RoomTypeID,baserate:_,extradultrate:I,extrachildrate:f,number_adults:((R=k.guestQty)==null?void 0:R.toString())||"1",number_children:"0",ExtraChild_Age:"",Title:"",First_Name:i?c.firstName||"":(r==null?void 0:r.data.firstName)||"",Last_Name:i?c.lastName||"":(r==null?void 0:r.data.lastName)||"",Gender:(r==null?void 0:r.data.gender)||"",SpecialRequest:l==="pay-at-hotel"?"pay-at-hotel":p}});const N={BookingData:{Room_Details:x,check_in_date:d,check_out_date:n,Booking_Payment_Mode:l==="pay-at-hotel"?"0":"1",Email_Address:r==null?void 0:r.data.email,Source_Id:"",MobileNo:i?c.phone:(r==null?void 0:r.data.phone)||"",Address:(r==null?void 0:r.data.address)||"",State:(r==null?void 0:r.data.state)||"",Country:(r==null?void 0:r.data.country)||"",City:(r==null?void 0:r.data.city)||"",Zipcode:"",Fax:"",Device:"Web",Languagekey:"",paymenttypeunkid:p},HotelCode:t==null?void 0:t.hotelCode,APIKey:t==null?void 0:t.authKey,userEmail:r==null?void 0:r.data.email};m.mutate(N,{onSuccess:k=>{var A,C,_,I;g("/thankyou",{state:{bookingResponse:k,payload:N,paymentMethod:l,checkIn:d,checkOut:n,hotelDetail:t,hotel:{hotelCode:t==null?void 0:t.hotelCode,name:t==null?void 0:t.hotelName,payAtHotel:t==null?void 0:t.payAtHotel},user:{email:(A=r==null?void 0:r.data)==null?void 0:A.email,firstName:(C=r==null?void 0:r.data)==null?void 0:C.firstName,lastName:(_=r==null?void 0:r.data)==null?void 0:_.lastName,phone:(I=r==null?void 0:r.data)==null?void 0:I.phone},rooms:u},replace:!0})}})};return m.isPending?e.jsxs("div",{className:"relative bg-white border-gray-100",children:[e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-teal-500 rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-r-teal-300 rounded-full animate-spin mx-auto",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Processing Your Booking"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your reservation..."}),e.jsx("div",{className:"flex items-center justify-center mt-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),e.jsx("div",{className:"filter blur-sm pointer-events-none",children:e.jsx(re,{hotelDetail:t,selectedPaymentMethod:l,handlePaymentMethodChange:b,ContinueBtnClick:h,isLoading:!0})})]}):e.jsx(e.Fragment,{children:e.jsx(re,{hotelDetail:t,selectedPaymentMethod:l,handlePaymentMethodChange:b,ContinueBtnClick:h,isLoading:!1})})},re=({hotelDetail:t,selectedPaymentMethod:a,handlePaymentMethodChange:d,ContinueBtnClick:n,isLoading:o})=>{const{finalPrice:r}=$();return e.jsxs("div",{id:"payment-method",className:"bg-white border-gray-100",children:[e.jsx("div",{className:"flex items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:" text-mobile/h4 md:text-desktop/h4 text-gray-800 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-gray-500 text-mobile/body/2 md:text-desktop/body/1",children:"Choose your preferred payment option"})]})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("div",{className:`relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer group ${a==="pay-now"?"border-teal-500 bg-teal-50 shadow-lg transform scale-[1.02]":"border-gray-200 hover:border-teal-300 hover:shadow-md"} ${o?"pointer-events-none":""}`,onClick:()=>!o&&d("pay-now"),children:e.jsxs("label",{htmlFor:"pay-now",className:"flex items-start p-6 cursor-pointer",children:[e.jsx("input",{type:"radio",id:"pay-now",name:"payment-method",className:"w-5 h-5 mt-1 text-teal-600 border-2 border-gray-300 focus:ring-teal-500",onChange:()=>!o&&d("pay-now"),checked:a==="pay-now",disabled:o}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsxs("div",{className:"flex  items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${a==="pay-now"?"bg-teal-500":"bg-gray-100 group-hover:bg-teal-100"}`,children:e.jsx(se,{className:`w-5 h-5 ${a==="pay-now"?"text-white":"text-gray-600 group-hover:text-teal-600"}`})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Pay and Book Now"}),e.jsx("div",{className:"absolute top-4 right-0",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"Secure"]})})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:"Complete your booking instantly with secure online payment"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Instant confirmation"})]}),e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"All major cards accepted"})]})]})]})]})}),(t==null?void 0:t.payAtHotel)==="yes"&&e.jsx("div",{className:`relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer group ${a==="pay-at-hotel"?"border-teal-500 bg-teal-50 shadow-lg transform scale-[1.02]":"border-gray-200 hover:border-teal-300 hover:shadow-md"} ${o?"pointer-events-none":""}`,onClick:()=>!o&&d("pay-at-hotel"),children:e.jsxs("label",{htmlFor:"pay-at-hotel",className:"flex items-start p-6 cursor-pointer",children:[e.jsx("input",{type:"radio",id:"pay-at-hotel",name:"payment-method",className:"w-5 h-5 mt-1 text-teal-600 border-2 border-gray-300 focus:ring-teal-500",onChange:()=>!o&&d("pay-at-hotel"),checked:a==="pay-at-hotel",disabled:o}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${a==="pay-at-hotel"?"bg-teal-500":"bg-gray-100 group-hover:bg-teal-100"}`,children:e.jsx(te,{className:`w-5 h-5 ${a==="pay-at-hotel"?"text-white":"text-gray-600 group-hover:text-teal-600"}`})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Pay at Hotel"}),e.jsx("div",{className:"absolute top-4 right-0",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[e.jsx(X,{className:"w-3 h-3 mr-1"}),"Flexible"]})})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:"Reserve now and pay directly at the hotel during check-in"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-orange-600",children:[e.jsx(X,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"No advance payment"})]}),e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"Pay at reception"})]})]})]})]})})]}),a&&e.jsx("div",{className:"flex justify-end",children:a==="pay-now"?e.jsx(Ae,{hotelDetail:t,amount:r,onSuccess:l=>n(l)}):e.jsx("button",{className:"group relative inline-flex items-center px-8 py-4 bg-gradient-to-r from-teal-500 to-teal-600 text-white font-semibold rounded-xl",onClick:()=>n(),children:"Confirm Booking"})}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(J,{className:"w-4 h-4 mr-2 text-green-600"}),e.jsx("span",{children:"Your payment information is secured with 256-bit SSL encryption"})]})})]})},ae=({days:t,showButton:a,isPaymentVisible:d})=>{const{selectedRooms:n,totalOtherCharges:o,finalPrice:r,baseFinalPrice:l,setNights:y,details:u}=$(),[s,i]=j.useState(!1);j.useEffect(()=>{t&&(y(t),localStorage.setItem("days",t))},[t,y]);const c=l-r,m=c>0;return j.useEffect(()=>{const g=()=>{window.scrollY>100?i(!0):i(!1)};return window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g)},[]),e.jsxs("div",{className:`p-6 bg-white border border-gray-200 rounded-xl shadow-md w-full ${s?"md:w-[384px]":{}}  md:w-96 mx-auto  font-sans transition-all duration-300 ${s?"xl:fixed xl:top-4  ":"relative "}`,children:[e.jsx("div",{className:"flex items-center pb-4 justify-between",children:e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Reservation Summary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center",children:"Your Price Summary"}),e.jsx("div",{className:"space-y-3 mb-4",children:n==null?void 0:n.map((g,b)=>{var C,_,I,f,R;const h=u[b],p=((C=h==null?void 0:h.roomData)==null?void 0:C.discountRate)||0,x=((I=(_=h==null?void 0:h.continentalPlan)==null?void 0:_.rate)==null?void 0:I.amount)||0,w=(g==null?void 0:g.guestQty)||2,N=((f=h==null?void 0:h.roomData)==null?void 0:f.baseAdultOccupancy)||2,E=((R=h==null?void 0:h.roomData)==null?void 0:R.extraAdultRate)||0,S=w>N?w-N:0,k=S*E,A=x*w;return e.jsxs("div",{className:"space-y-2 pb-3 border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Room Only (",N," ",N===1?"Adult":"Adults",") Ã— ",t," ",t===1?"Night":"Nights"]})]}),e.jsxs("p",{className:"font-medium text-gray-800",children:["â‚¹ ",p*t]})]}),S>0&&E>0&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 pl-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-600",children:"Extra Adult Charges"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["â‚¹",E," Ã— ",S," ",S===1?"Adult":"Adults"," Ã— ",t," ",t===1?"Night":"Nights"]})]}),e.jsxs("p",{className:"font-medium text-orange-600",children:["â‚¹ ",k*t]})]}),g.option==="continental"&&x>0&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 pl-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary-green",children:"Continental Breakfast"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["â‚¹",x," Ã— ",w," ",w===1?"Guest":"Guests"," Ã— ",t," ",t===1?"Night":"Nights"]})]}),e.jsxs("p",{className:"font-medium text-primary-green",children:["â‚¹ ",A*t]})]})]},b)})}),e.jsxs("div",{className:"flex justify-between text-sm font-medium text-black/40 pb-2 border-b border-gray-200",children:[e.jsx("p",{children:"Taxes & Other Charges"}),e.jsxs("p",{className:"font-medium ",children:["â‚¹ ",o==null?void 0:o.toFixed(2)]})]})]}),e.jsxs("div",{className:"pt-3 bg-gray-50 p-4 mt-5 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Original Amount"}),e.jsxs("p",{className:"font-medium",children:["â‚¹ ",l==null?void 0:l.toFixed(2)]})]}),m&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Discount"}),e.jsxs("p",{className:"font-medium text-green-600",children:["- â‚¹ ",c==null?void 0:c.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t border-gray-200",children:[e.jsx("p",{children:"Payable Amount"}),e.jsxs("p",{className:"text-primary-green",children:["â‚¹ ",r==null?void 0:r.toFixed(2)]})]})]}),a&&e.jsx("a",{href:"#payment-method",className:"block w-full",children:e.jsx("button",{disabled:d,className:`mt-6 w-full py-3.5 font-bold text-white rounded-lg transition-all duration-300 ${d?"bg-gray-300 cursor-not-allowed":"bg-primary-green hover:bg-primary-dark-green"}`,children:"See Payment Options"})})]})};/*! js-cookie v3.0.5 | MIT */function H(t){for(var a=1;a<arguments.length;a++){var d=arguments[a];for(var n in d)t[n]=d[n]}return t}var Ie={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function K(t,a){function d(o,r,l){if(!(typeof document>"u")){l=H({},a,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var y="";for(var u in l)l[u]&&(y+="; "+u,l[u]!==!0&&(y+="="+l[u].split(";")[0]));return document.cookie=o+"="+t.write(r,o)+y}}function n(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var r=document.cookie?document.cookie.split("; "):[],l={},y=0;y<r.length;y++){var u=r[y].split("="),s=u.slice(1).join("=");try{var i=decodeURIComponent(u[0]);if(l[i]=t.read(s,i),o===i)break}catch{}}return o?l[o]:l}}return Object.create({set:d,get:n,remove:function(o,r){d(o,"",H({},r,{expires:-1}))},withAttributes:function(o){return K(this.converter,H({},this.attributes,o))},withConverter:function(o){return K(H({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}K(Ie,{path:"/"});const Re=({hotelDetail:t,checkIn:a,verified:d})=>{const[n,o]=j.useState(""),[r,l]=j.useState(null),[,y]=j.useState(null),[u,s]=j.useState(!1),[i,c]=j.useState(!1),[m,g]=j.useState(null),{mutate:b,data:h}=ue(),{mutateAsync:p}=ge(),{finalPrice:x,setFinalPrice:w,baseFinalPrice:N}=$(),E=localStorage.getItem("user_email"),{data:S,isLoading:k}=W(E),A=localStorage.getItem("user_email")!==null;if(j.useEffect(()=>{t&&t._id&&A&&b(t._id)},[b,t,A,S]),k)return e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 rounded-full animate-spin border-t-cyan-600"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-cyan-600",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]})})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-600 animate-pulse",children:"Loading exclusive offers..."})]})});if(!A)return e.jsxs("div",{className:"relative bg-gradient-to-br from-white to-gray-50 p-10 rounded-2xl shadow-xl border border-gray-100 text-center overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-cyan-400 to-cyan-600"}),e.jsxs("div",{className:"relative ",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-full flex items-center justify-center",children:e.jsx(Ne,{className:"text-primary-green"})}),e.jsx("h2",{className:"text-3xl font-bold mb-4 text-gray-800 bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Exclusive Offers Await"}),e.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:"Unlock amazing discounts by verifying your email or mobile number"}),e.jsxs("a",{href:"#guestDetail",onClick:f=>{B.error("Please verify user details")},className:"mt-6 inline-flex items-center px-6 py-3 bg-gradient-to-r from-cyan-500 to-cyan-600 text-white rounded-full text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[e.jsx("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Verify to Continue"]})]}),e.jsx("div",{className:"absolute -top-6 -right-6 w-24 h-24 bg-gradient-to-br from-cyan-200 to-cyan-300 rounded-full opacity-20"}),e.jsx("div",{className:"absolute -bottom-4 -left-4 w-16 h-16 bg-gradient-to-br from-cyan-100 to-cyan-200 rounded-full opacity-30"})]});const C=async()=>{var f,R,F,M;if(n.trim()){c(!0);try{const O=await p({hotelId:t._id,rate:x,offerCode:n.trim(),checkInDate:a});y(O),O.discountedRate&&w(O.discountedRate),B.success("Discounted rate calculated successfully")}catch(O){B.error((R=(f=O==null?void 0:O.response)==null?void 0:f.data)!=null&&R.error?(M=(F=O==null?void 0:O.response)==null?void 0:F.data)==null?void 0:M.error:"Error calculating discounted rate")}finally{c(!1)}}},_=()=>{l(null),y(null),w(N),s(!1)},I=async f=>{var R,F,M,O;l(f),c(!0);try{const L=await p({hotelId:t._id,rate:x,offerCode:f.offerCode,checkInDate:a});if(y(L),L.discountedRate)w(L.discountedRate),s(!0),B.success("Offer applied successfully!");else throw new Error("No discount rate returned")}catch(L){B.error((F=(R=L==null?void 0:L.response)==null?void 0:R.data)!=null&&F.error?(O=(M=L==null?void 0:L.response)==null?void 0:M.data)==null?void 0:O.error:"Error calculating discounted rate"),l(null),s(!1)}finally{c(!1)}};return e.jsxs("div",{className:"flex flex-col bg-white w-full mx-auto font-sans",children:[e.jsxs("div",{className:"flex items-center mb-10 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-50 to-transparent rounded-xl opacity-50 -z-10"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-800 mb-1",children:"Exclusive Offers"}),e.jsx("p",{className:"text-gray-500 text-mobile/body/2 md:text-desktop/body/1",children:"Save more on your booking with our special deals"})]})]}),!r&&e.jsx("div",{className:"relative mb-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-4",children:[e.jsxs("div",{className:"relative flex-grow group",children:[e.jsx("input",{type:"text",id:"promo",placeholder:"Enter your promo code here...",className:"w-full h-16 shadow-lg border-2 border-gray-200 rounded-2xl py-2 pl-14 pr-6 text-lg focus:outline-none focus:ring-4 focus:ring-cyan-100 focus:border-cyan-400 transition-all duration-300 group-hover:shadow-xl bg-gradient-to-r from-white to-gray-50",value:n,onChange:f=>o(f.target.value),onKeyPress:f=>f.key==="Enter"&&C()}),e.jsx("div",{className:"absolute left-5 top-1/2 transform -translate-y-1/2 text-gray-400 group-hover:text-cyan-500 transition-colors",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})}),n&&e.jsx("button",{onClick:()=>o(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("button",{onClick:C,disabled:!n.trim()||i,className:"h-16 px-8 md:w-48 rounded-2xl text-white font-bold transition-all duration-300 hover:shadow-xl flex items-center justify-center bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Applying..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),"Apply Code"]})})]})}),!r&&h&&h.length>0&&e.jsxs("div",{className:"mb-10",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-800",children:"Available Offers"}),e.jsx("p",{className:"text-gray-500 text-mobile/body/2 md:text-desktop/body/1",children:"Click on any offer to apply instantly"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(f=>e.jsxs("div",{onClick:()=>I(f),onMouseEnter:()=>g(f.offerCode),onMouseLeave:()=>g(null),className:"group relative p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 border-gray-200 hover:border-cyan-400 hover:bg-gradient-to-br hover:from-cyan-50 hover:to-white transform hover:-translate-y-2 hover:shadow-2xl bg-white overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-cyan-100 to-cyan-200 rounded-full transform translate-x-8 -translate-y-8 opacity-20 group-hover:opacity-40 transition-opacity"}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"text-lg font-bold px-4 py-2 rounded-full text-white shadow-lg bg-gradient-to-r from-cyan-500 to-cyan-600 group-hover:shadow-xl transition-shadow",children:[f.discountPercent,"%"]})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-bold text-xl text-gray-800 group-hover:text-cyan-700 transition-colors",children:f.offerCode}),f.description&&e.jsx("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:f.description})]})}),e.jsxs("div",{className:"flex flex-col items-start mt-6",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Instant Discount"}),e.jsxs("div",{className:"flex items-center text-cyan-600 font-semibold group-hover:text-cyan-700 transition-colors",children:[e.jsx("span",{className:"text-sm mr-2",children:m===f.offerCode?"Click to apply":"Tap to use"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transition-transform duration-300 ${m===f.offerCode?"translate-x-1":""}`,children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5l7 7-7 7"})]})]})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 to-cyan-600 opacity-0 group-hover:opacity-5 transition-opacity rounded-2xl"})]},f.offerCode))})]}),r&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-800",children:"Applied Offer"}),e.jsx("p",{className:"text-gray-500 text-mobile/body/2 md:text-desktop/body/1",children:"Your discount has been applied"})]})}),e.jsxs("button",{onClick:_,className:"flex items-center text-sm px-6 py-3 bg-gradient-to-r from-red-50 to-red-100 text-red-600 rounded-full hover:from-red-100 hover:to-red-200 transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg border border-red-200",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),"Remove & Change"]})]}),e.jsxs("div",{className:"relative overflow-hidden p-8 bg-gradient-to-br from-cyan-50 to-white border-2 rounded-2xl shadow-xl border-cyan-200",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 transform translate-x-10 -translate-y-10",children:e.jsx("div",{className:"absolute transform rotate-45 text-white font-bold py-2 w-40 text-center text-sm shadow-lg bg-gradient-to-r from-cyan-500 to-cyan-600",children:"âœ“ APPLIED"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between relative z-10",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-3xl text-gray-800 mb-2",children:r.offerCode}),r.description&&e.jsx("div",{className:"text-gray-600 text-lg leading-relaxed",children:r.description})]}),e.jsx("div",{className:"mt-6 sm:mt-0 sm:ml-6",children:e.jsx("div",{className:"inline-flex items-center",children:e.jsxs("span",{className:"text-2xl font-bold px-6 py-3 rounded-2xl text-white shadow-lg bg-gradient-to-r from-cyan-500 to-cyan-600",children:[r.discountPercent,"% OFF"]})})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-cyan-200 flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-green-500 flex items-center justify-center mr-3 shadow-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),u&&e.jsx("p",{className:"font-semibold text-lg text-gray-700",children:"Discount successfully applied to your booking!"}),i&&e.jsxs("p",{className:"font-medium text-gray-600 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-cyan-600 border-t-transparent rounded-full animate-spin mr-2"}),"Applying discount..."]})]}),e.jsx("div",{className:"absolute -bottom-4 -left-4 w-20 h-20 bg-gradient-to-br from-cyan-200 to-cyan-300 rounded-full opacity-20"}),e.jsx("div",{className:"absolute top-1/2 -right-6 w-12 h-12 bg-gradient-to-br from-cyan-100 to-cyan-200 rounded-full opacity-30"})]})]})]})},Oe=({data:t})=>{const a=t==null?void 0:t.addToYourStay,[d,n]=j.useState({}),{selectedOtherCharges:o,setSelectedOtherCharges:r}=$(),l=s=>{n(i=>({...i,[s]:!i[s]}))},y=(s,i)=>{i.stopPropagation(),r(c=>(Array.isArray(c)?c.find(g=>g._id===s._id):null)?c.filter(g=>g._id!==s._id):[...c,s])},u=s=>o.some(i=>i._id===s);return e.jsxs("div",{className:"bg-white w-full mx-auto",children:[e.jsx("div",{className:"flex items-center mb-8",children:e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-bold text-gray-800 tracking-tight",children:"Add To Your Stay"})}),e.jsx("div",{className:"space-y-6",children:a.map(s=>{var i,c;return e.jsxs("div",{className:`transition-all duration-200 border-2 rounded-lg overflow-hidden ${u(s._id)?"border-primary-green bg-teal-50":"border-gray-200 hover:border-teal-200 hover:bg-gray-50"}`,style:{borderColor:u(s._id)?"#058FA2":"",backgroundColor:u(s._id)?"#e6f7f9":""},children:[e.jsx("div",{className:"flex w-full items-center justify-between p-5 cursor-pointer",onClick:()=>l(s._id),children:e.jsxs("div",{className:"flex items-center gap-5 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-md border flex items-center justify-center cursor-pointer transition-colors ${u(s._id)?"bg-primary-green border-primary-green":"border-gray-300"}`,style:{backgroundColor:u(s._id)?"#058FA2":"",borderColor:u(s._id)?"#058FA2":""},onClick:m=>y(s,m),children:u(s._id)&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("div",{className:"flex gap-4 items-center flex-1",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 leading-tight",children:s.heading}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-body font-medium mr-4 text-primary-green",children:["â‚¹ ",(i=s.rate)==null?void 0:i.amount," ",e.jsx("span",{className:"text-base",children:((c=s.rate)==null?void 0:c.period)||""})]}),e.jsx("button",{className:`w-7 h-7 flex items-center justify-center rounded-full transition-colors text-lg ${d[s._id]?"bg-teal-100 text-teal-600":"bg-gray-100 text-gray-500"}`,style:{backgroundColor:d[s._id]?"#e6f7f9":"",color:d[s._id]?"#058FA2":""},children:d[s._id]?"âˆ’":"+"})]})]})})})]})}),d[s._id]&&e.jsxs("div",{className:"px-16 pb-5 pt-1 text-gray-600 border-t border-gray-100",children:[e.jsx("p",{className:"text-base leading-relaxed",children:s.description}),u(s._id)&&e.jsx("div",{className:"mt-4 text-sm font-medium bg-teal-100 text-primay-green py-2 px-4 rounded-md inline-block",style:{backgroundColor:"#e6f7f9",color:"#058FA2"},children:"âœ“ Added to your stay"})]})]},s._id)})})]})},ce=j.forwardRef(({setIsVerified:t})=>{var C,_,I,f,R,F,M,O,L,V;const[a,d]=j.useState(""),[n,o]=j.useState(""),[r,l]=j.useState(localStorage.getItem("user_email")||""),[y,u]=j.useState(""),[s,i]=j.useState(!1),{someOneElse:c,setSomeoneElse:m,setGuestData:g}=$(),[b,h]=j.useState(null),p=localStorage.getItem("user_email")!==null,{data:x,refetch:w}=W(r);j.useEffect(()=>{const v=localStorage.getItem("user_email");v&&v!==r&&l(v)},[p]),j.useEffect(()=>{r&&r.trim()!==""&&w()},[r,w]),console.log(x);const[N,E]=j.useState(!1);j.useEffect(()=>{p&&c&&g({firstName:a,lastName:n,email:r,phone:y})},[p,c,a,n,r,y,g]);const S=[{id:"firstName",label:"First Name",placeholder:"Enter your first name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"lastName",label:"Last Name",placeholder:"Enter your last name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"email",label:"Email Address",placeholder:"Enter your email address",type:"email",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]})},{id:"mobile",label:"Mobile Number",placeholder:"Enter your mobile number",type:"tel",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}],k=v=>{switch(v){case"firstName":return a;case"lastName":return n;case"email":return r;case"mobile":return y;default:return""}},A=(v,P)=>{switch(v){case"firstName":d(P);break;case"lastName":o(P);break;case"email":l(P);break;case"mobile":u(P);break}};return e.jsxs("div",{id:"guestDetail",className:"flex flex-col gap-10 relative overflow-hidden",children:[e.jsx("div",{className:"flex items-center mb-2 relative z-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"  text-mobile/h4 md:text-desktop/h4 text-gray-900 tracking-tight mb-1",children:"Guest Details"}),e.jsx("p",{className:"text-gray-600 text-mobile/body/2 md:text-desktop/body/1",children:"Please provide your information to proceed"})]})}),e.jsxs("div",{className:"relative z-10",children:[p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-green-500 rounded-full flex items-center justify-center mr-3 shadow-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Account Verified"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Your email and mobile number are verified"})]})]}),e.jsxs("div",{className:"mb-8 p-4 border rounded-xl bg-gray-50 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-12 h-12 rounded-full bg-primary-green flex items-center justify-center text-white font-bold text-lg shadow",children:[(_=(C=x==null?void 0:x.data)==null?void 0:C.firstName)==null?void 0:_.charAt(0),(f=(I=x==null?void 0:x.data)==null?void 0:I.lastName)==null?void 0:f.charAt(0)]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-gray-900 font-semibold text-lg",children:[(R=x==null?void 0:x.data)==null?void 0:R.firstName," ",(F=x==null?void 0:x.data)==null?void 0:F.lastName]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(O=(M=x==null?void 0:x.data)==null?void 0:M.email)==null?void 0:O.replace(/^(.{2})(.*)(@.*)$/,(v,P,z,G)=>`${P}${"*".repeat(z.length)}${G}`)," |"," ",(V=(L=x==null?void 0:x.data)==null?void 0:L.phone)==null?void 0:V.replace(/^(.{0,2})(.*)(.{4})$/,(v,P,z,G)=>`${"*".repeat(P.length?P.length:2)}${"*".repeat(z.length)}${G}`)]})]})]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("user_email"),window.location.reload()},className:"text-sm font-semibold text-gray-500 hover:underline",children:"Log Out"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-gray-700 text-sm mb-8",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-yellow-500 border-gray-300 rounded",checked:s,onChange:v=>{i(v.target.checked),m(v.target.checked)}}),"I'm booking for someone else"]}),s&&e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:S.map(({id:v,label:P,placeholder:z,type:G,icon:Q})=>{const U=k(v),Y=b===v,q=U&&U.trim();return e.jsxs("div",{className:"flex flex-col gap-3 group",children:[e.jsxs("label",{htmlFor:v,className:`block text-sm font-semibold tracking-wide transition-colors duration-200 ${Y||q?"text-cyan-600":"text-gray-700"}`,children:[P," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:`absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors duration-200 ${Y?"text-cyan-500":q?"text-cyan-600":"text-gray-400"}`,children:Q}),e.jsx("input",{type:G,id:v,placeholder:z,className:`w-full h-14 pl-12 pr-4 py-3 text-base text-gray-900 placeholder-gray-400 border-2 rounded-xl shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-100
                              ${Y?"border-cyan-400 shadow-lg":q?"border-cyan-300 bg-cyan-50":"border-gray-200 hover:border-gray-300"}
                              ${v==="email"?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}
                            `,value:U,onChange:de=>A(v,de.target.value),onFocus:()=>h(v),onBlur:()=>h(null),disabled:v==="email"})]})})]},v)})})]}),!p&&e.jsxs("div",{className:"mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex flex-col gap-2  md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-400 text-white rounded-full flex items-center justify-center shadow",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-800",children:"Login Required"}),e.jsx("p",{className:"text-yellow-600 text-sm",children:"Please log in or verify your account to continue"})]})]}),e.jsx("button",{onClick:()=>E(!0),className:"ml-4 px-5 py-2 rounded-lg bg-primary-green text-white  transition",children:"Login / Verify"})]}),N&&e.jsx(ie,{closeModal:()=>{E(!1);const v=localStorage.getItem("user_email");v&&(l(v),setTimeout(()=>w(),200))}})]})]})});ce.displayName="GuestDetailsForm";const Ee=()=>{const{details:t,setDetails:a,selectedRooms:d,setSelectedRooms:n,setEditAddPricing:o}=$(),r=T(),l=(s,i)=>{n(c=>{var N,E,S,k,A,C,_,I,f,R;const m=[...c],g=((E=(N=t[s])==null?void 0:N.roomData)==null?void 0:E.discountRate)||0,b=((A=(k=(S=t[s])==null?void 0:S.continentalPlan)==null?void 0:k.rate)==null?void 0:A.amount)||0,h=((C=m[s])==null?void 0:C.guestQty)||2,p=((I=(_=t[s])==null?void 0:_.roomData)==null?void 0:I.baseAdultOccupancy)||2,x=((R=(f=t[s])==null?void 0:f.roomData)==null?void 0:R.extraAdultRate)||0;let w=g;if(h>p){const F=h-p;w+=x*F}return i==="continental"&&(w+=b*h),m[s]={...m[s],option:i,price:w},m})},y=(s,i)=>{n(c=>{var k,A,C,_,I,f,R,F,M,O,L,V,v,P;const m=[...c],g=((A=(k=t[s])==null?void 0:k.roomData)==null?void 0:A.maxGuests)||2;let b=((C=m[s])==null?void 0:C.guestQty)??2,h=((_=m[s])==null?void 0:_.showMaxGuestAlert)??!1;i==="increment"?b<g?(b+=1,h=!1):h=!0:i==="decrement"&&(b>0&&(b-=1),h=!1);const p=((f=(I=t[s])==null?void 0:I.roomData)==null?void 0:f.discountRate)||0,x=((M=(F=(R=t[s])==null?void 0:R.continentalPlan)==null?void 0:F.rate)==null?void 0:M.amount)||0,w=((O=m[s])==null?void 0:O.option)||"roomOnly",N=((V=(L=t[s])==null?void 0:L.roomData)==null?void 0:V.baseAdultOccupancy)||2,E=((P=(v=t[s])==null?void 0:v.roomData)==null?void 0:P.extraAdultRate)||0;let S=p;if(b>N){const z=b-N;S+=E*z}return w==="continental"&&(S+=x*b),m[s]={...m[s],guestQty:b,showMaxGuestAlert:h,price:S},b===0&&(m.splice(s,1),a(z=>z.filter((G,Q)=>Q!==s))),m})},u=()=>{var s;o(!0),localStorage.setItem("editAddPricing",!0),r(`/hotels/${(s=t[0])==null?void 0:s.hotelCode}`)};return e.jsxs(e.Fragment,{children:[t==null?void 0:t.map((s,i)=>{var m,g,b,h,p,x;const c=d[i]||{roomName:((m=s==null?void 0:s.roomData)==null?void 0:m.RoomName)||"",option:"roomOnly",price:((g=s==null?void 0:s.roomData)==null?void 0:g.discountRate)||0,guestQty:2,showMaxGuestAlert:!1};return c.guestQty===0?null:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:h-[200px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[e.jsxs("div",{className:"w-full lg:w-1/3 relative",children:[e.jsx("img",{src:(b=s==null?void 0:s.roomData)==null?void 0:b.roomImage[0],alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 right-0 md:left-5 bg-white bg-opacity-75 px-3 py-1 rounded-l-full",children:e.jsx("p",{className:"text-[10px] font-bold text-yellow-600 uppercase tracking-wider",children:"Best Choice"})})]}),e.jsxs("div",{className:"flex flex-col justify-center w-full gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-[#288592] mb-1",children:(h=s==null?void 0:s.roomData)==null?void 0:h.RoomName}),e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:[s==null?void 0:s.name,", ",(p=s==null?void 0:s.cityLocation)==null?void 0:p.name]}),e.jsxs("p",{className:"text-md font-semibold text-gray-800",children:["Price: ",e.jsxs("span",{className:"text-[#288592]",children:["â‚¹",c.price]})]})]}),e.jsxs("div",{className:"flex flex-col items-start w-full lg:w-[490px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>y(i,"decrement"),children:e.jsx(je,{})}),e.jsx("span",{children:c.guestQty>1?`${c.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>y(i,"increment"),children:e.jsx(fe,{})})]}),c.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-32 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ve,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(x=s==null?void 0:s.roomData)==null?void 0:x.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:u,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>n(w=>{const N=[...w];return N[i].showMaxGuestAlert=!1,N}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${i}`,value:"roomOnly",checked:c.option==="roomOnly",onChange:()=>l(i,"roomOnly"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${i}`,value:"continental",checked:c.option==="continental",onChange:()=>l(i,"continental"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]})]},i)}),t.length<=0&&e.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},Le=()=>{var g,b,h;const{details:t,setEditAddPricing:a}=$(),d=localStorage.getItem("hotelInfo"),n=d?JSON.parse(d):null,o=localStorage.getItem("checkInDate"),r=localStorage.getItem("checkOutDate"),l=o?new Date(o):null,y=r?new Date(r):null,u=T(),s=()=>l&&y?pe(y,l):0,i=()=>{var p;a(!0),localStorage.setItem("editAddPricing","true"),u(`/hotels/${(p=t[0])==null?void 0:p.hotelCode}`)},c=({date:p,label:x,time:w,isCheckOut:N=!1})=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"text-sm md:text-base font-medium text-gray-600 uppercase tracking-wide",children:x}),e.jsx("div",{className:"text-lg md:text-xl font-semibold text-gray-900",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden",children:D(p,"dd MMM")}),e.jsx("div",{className:"hidden md:block",children:D(p,"dd MMM, EEEE")})]}):e.jsxs("span",{className:"text-gray-400",children:["Select ",x.toLowerCase()]})}),e.jsx("div",{className:"text-xs md:text-sm text-gray-500",children:w||(N?"11:00 AM":"1:00 PM")})]}),m=s();return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mt-10 shadow-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:n==null?void 0:n.name}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:(g=n==null?void 0:n.location)==null?void 0:g.hotelAddress})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsx(c,{date:l,label:"Check-in",time:(b=t[0])==null?void 0:b.checkIn}),e.jsxs("div",{className:"flex flex-col items-center mx-4",children:[e.jsx(ee,{className:"text-yellow-500 text-2xl mb-1"}),m>0&&e.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[m," ",m===1?"Night":"Nights"]})]}),e.jsx(c,{date:y,label:"Check-out",time:(h=t[0])==null?void 0:h.checkOut,isCheckOut:!0})]})}),e.jsx("div",{className:"flex justify-start",children:e.jsxs("button",{onClick:i,className:"inline-flex items-center  py-3 text-primary-yellow underline font-medium transition-colors duration-200 ",children:[e.jsx("span",{children:"Modify Date/Room Selection          "}),e.jsx(ee,{className:"ml-2 text-lg"})]})})]})},Pe=(t,a)=>{if(!t||!a)return 0;const d=new Date(t),n=new Date(a),o=Math.abs(n-d);return Math.ceil(o/(1e3*60*60*24))},$e=()=>{var S,k,A,C;const{ContactUsDetail:t}=ye(),{details:a,hotelData:d}=$(),n=a[0],o=T(),[r,l]=j.useState(!1),y=localStorage.getItem("user_email"),{data:u}=W(y),[s,i]=j.useState(!1),c=localStorage.getItem("hotelInfo"),m=JSON.parse(c),g=localStorage.getItem("checkInDate"),b=localStorage.getItem("checkOutDate"),h=Pe(g,b),[p,x]=j.useState(!1),[w,N]=j.useState(!0),E=j.useRef();return j.useEffect(()=>{const _=document.querySelector("#payment-method");if(_){const I=new IntersectionObserver(([f])=>{x(f.isIntersecting)},{threshold:.1});return I.observe(_),()=>I.disconnect()}},[]),j.useEffect(()=>{p?setTimeout(()=>N(!1),300):N(!0)},[p]),j.useEffect(()=>{(!a||a.length===0||!n)&&o(`/hotels/${m==null?void 0:m.hotelCode}`)},[a,d,n,o,m]),!a||a.length===0||!n?null:e.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green overflow-hidden",children:[e.jsxs(be,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsxs("div",{className:"content flex justify-between items-center ",children:[e.jsxs("div",{className:"flex items-center cursor-pointer gap-2 py-4 md:py-10 text-white",onClick:()=>o(-1),children:[e.jsx("button",{"aria-label":"Go back",className:"flex items-center",children:e.jsx(we,{className:"text-white h-6 w-6 sm:h-7 sm:w-7 md:h-9 md:w-9"})}),e.jsx("span",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-semibold",children:"Booking Details"})]}),e.jsx("div",{className:"",children:y?e.jsxs("div",{onClick:()=>o("/user/profile"),className:"bg-white cursor-pointer text-primary-yellow font-bold w-12 h-12 rounded-full flex items-center justify-center",children:[(k=(S=u==null?void 0:u.data.firstName)==null?void 0:S[0])==null?void 0:k.toUpperCase(),(C=(A=u==null?void 0:u.data.lastName)==null?void 0:A[0])==null?void 0:C.toUpperCase()]}):e.jsx("button",{onClick:()=>i(!0),className:"border-2 border-primary-yellow text-primary-yellow px-4 py-2 rounded-full font-bold hover:bg-primary-yellow hover:text-white transition",children:"Login or Join"})}),s&&e.jsx(ie,{closeModal:()=>i(!1)})]}),e.jsxs("div",{className:"md:flex gap-5 content bg-white rounded-t-3xl overflow-visible relative",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:px-8 md:py-10 gap-8 min-w-0",children:[e.jsx(Le,{}),e.jsx(Ee,{}),e.jsx(ce,{ref:E,setIsVerified:l}),n.addToYourStay.length>0&&e.jsx(Oe,{data:n}),e.jsx(Re,{hotelDetail:n,checkIn:g,verified:r}),e.jsx("div",{className:"xl:hidden",children:e.jsx(ae,{hotelDetail:n,checkIn:g,checkOut:b,days:h,showButton:w,isPaymentVisible:p})}),e.jsx(_e,{hotelDetail:n,verified:r,checkIn:g,checkOut:b}),e.jsx(ke,{ContactUsDetail:t})]}),e.jsx("div",{className:"hidden xl:block xl:w-[420px] flex-shrink-0 px-8 py-10",children:e.jsx(ae,{hotelDetail:n,checkIn:g,checkOut:b,days:h,showButton:w,isPaymentVisible:p})})]})]})};export{$e as default};
