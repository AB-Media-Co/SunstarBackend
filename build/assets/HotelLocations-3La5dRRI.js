import{j as a,w as e,n,q as s,r as i,o as r,v as o,D as t,z as l,U as d,a9 as c,a4 as u,V as h}from"./ui-vendor-ib5n1sau.js";import{a as m}from"./react-vendor-TJBKpoaW.js";import{u as g,a as x,b as p,c as j}from"./useLocationHook-D4_mpQuS.js";import{I as v}from"./ImageUpload-DjYKuoa9.js";import"./query-vendor-B-W3jWpx.js";import"./index-Bl04lSVd.js";import"./useHotelHook2-Dg3SXKg3.js";const b=(a,e=30)=>{if(!a)return"";const n=a.split(" ");return n.length<=e?a:n.slice(0,e).join(" ")+" ..."},f=()=>{const{data:f,isLoading:C,isError:y,error:S}=g(),W=x(),k=p(),L=j(),[N,U]=m.useState({name:"",aboutus:{heading:"",paragraph:""},image:""}),[,A]=m.useState(!1),[H,D]=m.useState(null),[E,I]=m.useState({name:"",aboutus:{heading:"",paragraph:""},image:""}),[,w]=m.useState(!1),[z,_]=m.useState(!1),[q,F]=m.useState(!1),P=a=>{const{name:e,value:n}=a.target;"name"===e?U((a=>({...a,name:n}))):"heading"!==e&&"paragraph"!==e||U((a=>({...a,aboutus:{...a.aboutus,[e]:n}})))},V=a=>{a.preventDefault(),W.mutate(N),U({name:"",aboutus:{heading:"",paragraph:""},hotels:[],image:""}),_(!1)},B=a=>{const{name:e,value:n}=a.target;"name"===e?I((a=>({...a,name:n}))):"heading"!==e&&"paragraph"!==e||I((a=>({...a,aboutus:{...a.aboutus,[e]:n}})))},G=a=>{a.preventDefault(),k.mutate({id:H,updateData:E}),F(!1),D(null)},J=()=>{F(!1),D(null)};return a.jsxs("div",{className:"container mx-auto mt-24 p-4 px-16",children:[a.jsx("div",{className:"mb-6",children:a.jsx(e,{variant:"contained",color:"primary",onClick:()=>_(!0),children:"Add a Location"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C?a.jsx("div",{children:"Loading..."}):y?a.jsxs("div",{children:["Error: ",S.message]}):f.map((t=>{var l,d,c;return a.jsxs(n,{className:"shadow-lg",children:[t.image&&a.jsx(s,{component:"img",height:"140",image:t.image,alt:t.name}),a.jsxs(i,{children:[a.jsx(r,{variant:"h6",component:"div",children:t.name}),a.jsx(r,{variant:"subtitle1",color:"textSecondary",children:null==(l=t.aboutus)?void 0:l.heading}),a.jsx(r,{variant:"body2",color:"textSecondary",sx:{mt:1},children:b(null==(d=t.aboutus)?void 0:d.paragraph,10)}),a.jsxs(r,{variant:"body2",color:"textSecondary",sx:{mt:1},children:["Hotels: ",null==(c=t.hotels)?void 0:c.length," (",t.hotels.map((a=>(null==a?void 0:a.name)?a.name:a)).join(", "),")"]})]}),a.jsxs(o,{children:[a.jsx(e,{size:"small",variant:"contained",color:"primary",onClick:()=>(a=>{var e,n;D(a._id),I({name:a.name,aboutus:{heading:(null==(e=a.aboutus)?void 0:e.heading)||"",paragraph:(null==(n=a.aboutus)?void 0:n.paragraph)||""},image:a.image||""}),F(!0)})(t),children:"Edit"}),a.jsx(e,{size:"small",variant:"outlined",color:"secondary",onClick:()=>{return a=t._id,void L.mutate(a);var a},children:"Delete"})]})]},t._id)}))}),a.jsxs(t,{open:z,onClose:()=>_(!1),fullWidth:!0,maxWidth:"md",children:[a.jsx(l,{children:"Add New Location"}),a.jsx(d,{dividers:!0,children:a.jsxs("form",{onSubmit:V,className:"space-y-4",children:[a.jsx(c,{label:"Location Name",name:"name",value:N.name,onChange:P,fullWidth:!0}),a.jsxs(u,{container:!0,spacing:2,children:[a.jsx(u,{item:!0,xs:6,children:a.jsx(c,{label:"About Us Heading",name:"heading",value:N.aboutus.heading,onChange:P,fullWidth:!0})}),a.jsx(u,{item:!0,xs:6,children:a.jsx(c,{label:"About Us Paragraph",name:"paragraph",value:N.aboutus.paragraph,onChange:P,fullWidth:!0})})]}),a.jsx(v,{feature:N,handleFeatureChange:(a,e)=>{U((n=>({...n,[a]:e})))},setImageUpload:A,index:0})]})}),a.jsxs(h,{children:[a.jsx(e,{onClick:()=>_(!1),variant:"outlined",color:"secondary",children:"Cancel"}),a.jsx(e,{onClick:V,variant:"contained",color:"primary",children:"Add Location"})]})]}),a.jsxs(t,{open:q,onClose:J,fullWidth:!0,maxWidth:"md",children:[a.jsx(l,{children:"Edit Location"}),a.jsx(d,{dividers:!0,children:a.jsxs("form",{onSubmit:G,className:"space-y-4",children:[a.jsx(c,{label:"Location Name",name:"name",value:E.name,onChange:B,fullWidth:!0}),a.jsxs(u,{container:!0,spacing:2,children:[a.jsx(u,{item:!0,xs:6,children:a.jsx(c,{label:"About Us Heading",name:"heading",value:E.aboutus.heading,onChange:B,fullWidth:!0})}),a.jsx(u,{item:!0,xs:6,children:a.jsx(c,{label:"About Us Paragraph",name:"paragraph",value:E.aboutus.paragraph,onChange:B,fullWidth:!0})})]}),a.jsx(v,{feature:E,handleFeatureChange:(a,e)=>{I((n=>({...n,[a]:e})))},setImageUpload:w,index:0})]})}),a.jsxs(h,{children:[a.jsx(e,{onClick:J,variant:"outlined",color:"secondary",children:"Cancel"}),a.jsx(e,{onClick:G,variant:"contained",color:"primary",children:"Update"})]})]})]})};export{f as HotelLocations,f as default};
