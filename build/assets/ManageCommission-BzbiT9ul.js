var T=Object.defineProperty,$=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var w=(l,t,a)=>t in l?T(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,h=(l,t)=>{for(var a in t||(t={}))_.call(t,a)&&w(l,a,t[a]);if(v)for(var a of v(t))I.call(t,a)&&w(l,a,t[a]);return l},b=(l,t)=>$(l,L(t));import{r as o,j as e,n as p}from"./index-Do7zHJPr.js";import{u as U,c as V}from"./useAgentHook-BhrTdCBs.js";import{c as k}from"./createLucideIcon-CidMzxdO.js";import{T as q}from"./trending-up-CtC86QE5.js";import{S as G}from"./save-C4cJLB83.js";import{X}from"./x-CPB-KEGN.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=k("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=k("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Z=()=>{const[l,t]=o.useState(null),[a,i]=o.useState(""),[S,d]=o.useState(!1),[r,f]=o.useState("agent"),[c,j]=o.useState({agent:"10.00",corporate:"10.00"}),{data:D,isLoading:R,error:N,refetch:A}=U({role:r}),{mutate:E,isPending:m}=V(),u=D||[],M=s=>{t(s._id),i(((s.commissionRate||.1)*100).toFixed(2))},F=s=>{const n=parseFloat(a)/100;if(isNaN(n)||n<0||n>100){p.error("Commission must be between 0% and 100%");return}E({id:s,commissionRate:n},{onSuccess:()=>{p.success("Commission updated successfully"),t(null),i(""),A()},onError:g=>{var x,y;p.error(((y=(x=g.response)==null?void 0:x.data)==null?void 0:y.message)||"Failed to update commission")}})},z=()=>{t(null),i("")},P=()=>{p.success("Default commission rates updated successfully"),d(!1)};return e.jsxs("section",{className:"flex flex-col gap-4 p-6 pt-28",children:[S&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>d(!1)}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-[90%] max-w-md mx-4 overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(C,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Manage Default Commission"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Set default commission rates for new signups"})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent Default Commission"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:c.agent,onChange:s=>j(b(h({},c),{agent:s.target.value})),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10.00",step:"0.01",min:"0",max:"100"}),e.jsx("span",{className:"text-gray-600 font-semibold text-lg",children:"%"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Applied to new agent signups"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Corporate Default Commission"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:c.corporate,onChange:s=>j(b(h({},c),{corporate:s.target.value})),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10.00",step:"0.01",min:"0",max:"100"}),e.jsx("span",{className:"text-gray-600 font-semibold text-lg",children:"%"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Applied to new corporate signups"})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t flex gap-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-100 transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:P,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-medium hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg shadow-blue-500/25",children:"Save Defaults"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Manage Commission"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Update commission rates for agents and corporate users"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-4 py-2 rounded-lg transition-all duration-200 shadow-lg shadow-blue-500/25",children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Manage Default"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-4 py-2 rounded-lg",children:[e.jsx(q,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[u.length," ",r==="agent"?"Agents":"Corporate"]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>{f("agent"),t(null),i("")},className:`px-6 py-3 font-medium transition-all duration-200 border-b-2 ${r==="agent"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Agents"}),e.jsx("button",{onClick:()=>{f("corporate"),t(null),i("")},className:`px-6 py-3 font-medium transition-all duration-200 border-b-2 ${r==="corporate"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Corporate"})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md bg-white",children:R?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:["Loading ",r==="agent"?"agents":"corporate users","..."]}):N?e.jsx("div",{className:"p-8 text-center text-red-500",children:N.message||`Failed to load ${r==="agent"?"agents":"corporate users"}`}):u.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-600",children:["No ",r==="agent"?"agents":"corporate users"," found."]}):e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider",children:"Commission Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(s=>{const n=l===s._id,g=((s.commissionRate||.1)*100).toFixed(2);return e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition duration-200",children:[e.jsx("td",{className:"px-6 py-3 text-sm font-medium text-gray-800",children:s.name}),e.jsx("td",{className:"px-6 py-3 text-sm text-gray-600",children:s.email}),e.jsx("td",{className:"px-6 py-3 text-sm text-gray-600",children:s.phone}),e.jsx("td",{className:"px-6 py-3 text-sm",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${s.role==="agent"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:s.role==="agent"?"Agent":"Corporate"})}),e.jsx("td",{className:"px-6 py-3 text-sm",children:s.approved?e.jsxs("span",{className:"inline-flex items-center gap-2 text-green-700",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Approved"]}):e.jsxs("span",{className:"inline-flex items-center gap-2 text-yellow-700",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-400"})," Pending"]})}),e.jsx("td",{className:"px-6 py-3 text-sm",children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:a,onChange:x=>i(x.target.value),className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10.00",step:"0.01",min:"0",max:"100"}),e.jsx("span",{className:"text-gray-600 font-medium",children:"%"})]}):e.jsx("span",{className:"inline-flex items-center gap-2 bg-blue-50 px-3 py-1 rounded-md",children:e.jsxs("span",{className:"font-semibold text-blue-900",children:[g,"%"]})})}),e.jsx("td",{className:"px-6 py-3 text-sm flex gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>F(s._id),disabled:m,className:`px-3 py-1 rounded-md text-white flex items-center gap-1 ${m?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:[e.jsx(G,{className:"w-4 h-4"}),m?"Saving...":"Save"]}),e.jsxs("button",{onClick:z,disabled:m,className:"px-3 py-1 rounded-md bg-gray-600 hover:bg-gray-700 text-white flex items-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"}),"Cancel"]})]}):e.jsxs("button",{onClick:()=>M(s),className:"px-3 py-1 rounded-md bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4"}),"Edit"]})})]},s._id)})})]})})]})};export{Z as default};
